---
title: Conception d’applications résilientes pour Azure
description: Comment créer des applications résilientes dans Azure, pour une haute disponibilité et une récupération d’urgence.
author: MikeWasson
ms.date: 05/26/2017
ms.custom: resiliency
ms.openlocfilehash: c32f093da4c47ef655dfca89b0410f063e9fe212
ms.sourcegitcommit: 2154e93a0a075e1f7425a6eb11fc3f03c1300c23
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/30/2018
ms.locfileid: "39352584"
---
# <a name="designing-resilient-applications-for-azure"></a><span data-ttu-id="9b0b5-103">Conception d’applications résilientes pour Azure</span><span class="sxs-lookup"><span data-stu-id="9b0b5-103">Designing resilient applications for Azure</span></span>

<span data-ttu-id="9b0b5-104">Dans un système distribué, des défaillances peuvent se produire.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-104">In a distributed system, failures will happen.</span></span> <span data-ttu-id="9b0b5-105">Le matériel peut être défaillant.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-105">Hardware can fail.</span></span> <span data-ttu-id="9b0b5-106">Le réseau peut subir des échecs temporaires.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-106">The network can have transient failures.</span></span> <span data-ttu-id="9b0b5-107">Exceptionnellement, un service ou une région entiers peuvent rencontrer des interruptions, mais même ces dernières doivent être planifiées.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-107">Rarely, an entire service or region may experience a disruption, but even those must be planned for.</span></span> 

<span data-ttu-id="9b0b5-108">La création d’une application fiable dans le cloud est différente de la création d’une application fiable dans un environnement d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-108">Building a reliable application in the cloud is different than building a reliable application in an enterprise setting.</span></span> <span data-ttu-id="9b0b5-109">Si par le passé vous avez acheté du matériel haut de gamme pour gagner en puissance, dans un environnement de cloud vous devez augmenter vos performances de manière horizontale, et pas verticale.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-109">While historically you may have purchased higher-end hardware to scale up, in a cloud environment you must scale out instead of scaling up.</span></span> <span data-ttu-id="9b0b5-110">Les coûts pour les environnements de cloud restent faibles via l’utilisation d’un matériel standard.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-110">Costs for cloud environments are kept low through the use of commodity hardware.</span></span> <span data-ttu-id="9b0b5-111">Au lieu de se concentrer sur la prévention des pannes et l’optimisation du « délai moyen entre les pannes », dans ce nouvel environnement l’attention est mise sur le « délai moyen de restauration. »</span><span class="sxs-lookup"><span data-stu-id="9b0b5-111">Instead of focusing on preventing failures and optimizing "mean time between failures," in this new environment the focus shifts to "mean time to restore."</span></span> <span data-ttu-id="9b0b5-112">L’objectif est de réduire les effets d’une défaillance.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-112">The goal is to minimize the effect of a failure.</span></span>

<span data-ttu-id="9b0b5-113">Cet article fournit une vue d’ensemble de la création d’applications résilientes dans Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-113">This article provides an overview of how to build resilient applications in Microsoft Azure.</span></span> <span data-ttu-id="9b0b5-114">Il commence par une définition du terme *résilience* et de concepts associés.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-114">It starts with a definition of the term *resiliency* and related concepts.</span></span> <span data-ttu-id="9b0b5-115">Il décrit ensuite un processus pour atteindre une résilience, à l’aide d’une approche structurée pendant la durée de vie d’une application, depuis la conception et l’implémentation jusqu’au déploiement et aux opérations.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-115">Then it describes a process for achieving resiliency, using a structured approach over the lifetime of an application, from design and implementation to deployment and operations.</span></span>

## <a name="what-is-resiliency"></a><span data-ttu-id="9b0b5-116">Qu’est-ce que la résilience ?</span><span class="sxs-lookup"><span data-stu-id="9b0b5-116">What is resiliency?</span></span>
<span data-ttu-id="9b0b5-117">**La résilience** est la capacité d’un système à récupérer après des défaillances et à continuer de fonctionner.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-117">**Resiliency** is the ability of a system to recover from failures and continue to function.</span></span> <span data-ttu-id="9b0b5-118">Il ne s’agit pas d’*éviter* les défaillances, mais d’y *répondre* en évitant les temps d’arrêt ou la perte de données.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-118">It's not about *avoiding* failures, but *responding* to failures in a way that avoids downtime or data loss.</span></span> <span data-ttu-id="9b0b5-119">L’objectif de la résilience est que l’application retrouve un état entièrement fonctionnel suite à une défaillance.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-119">The goal of resiliency is to return the application to a fully functioning state following a failure.</span></span>

<span data-ttu-id="9b0b5-120">Deux aspects importants de la résilience sont la haute disponibilité et la récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-120">Two important aspects of resiliency are high availability and disaster recovery.</span></span>

* <span data-ttu-id="9b0b5-121">**La haute disponibilité** (HA) est la capacité de l’application à continuer de s’exécuter dans un état sain, sans temps d’arrêt significatif.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-121">**High availability** (HA) is the ability of the application to continue running in a healthy state, without significant downtime.</span></span> <span data-ttu-id="9b0b5-122">« Sain » signifie que l’application est réactive et que les utilisateurs peuvent s’y connecter et interagir avec elle.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-122">By "healthy state," we mean the application is responsive, and users can connect to the application and interact with it.</span></span>  
* <span data-ttu-id="9b0b5-123">**La récupération d’urgence** est la capacité à récupérer après des incidents rares mais majeurs : des échecs non temporaires et à grande échelle, telles que l’interruption de service qui peut affecter une région entière.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-123">**Disaster recovery** (DR) is the ability to recover from rare but major incidents: non-transient, wide-scale failures, such as service disruption that affects an entire region.</span></span> <span data-ttu-id="9b0b5-124">La récupération d’urgence inclut la sauvegarde et l’archivage des données. Elle peut également inclure une intervention manuelle, comme la restauration d’une base de données à partir de la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-124">Disaster recovery includes data backup and archiving, and may include manual intervention, such as restoring a database from backup.</span></span>

<span data-ttu-id="9b0b5-125">Une façon d’associer la haute disponibilité et la récupération d’urgence est que la récupération d’urgence démarre lorsque l’impact d’une erreur dépasse la capacité de la conception de haute disponibilité pour la manipuler.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-125">One way to think about HA versus DR is that DR starts when the impact of a fault exceeds the ability of the HA design to handle it.</span></span>  

<span data-ttu-id="9b0b5-126">Lorsque vous concevez la résilience, vous devez comprendre vos exigences en matière de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-126">When you design resiliency, you must understand your availability requirements.</span></span> <span data-ttu-id="9b0b5-127">Quel temps d’arrêt maximal est acceptable ?</span><span class="sxs-lookup"><span data-stu-id="9b0b5-127">How much downtime is acceptable?</span></span> <span data-ttu-id="9b0b5-128">Cela dépend en partie du coût.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-128">This is partly a function of cost.</span></span> <span data-ttu-id="9b0b5-129">Combien les temps d’arrêt vont-ils coûter à votre entreprise ?</span><span class="sxs-lookup"><span data-stu-id="9b0b5-129">How much will potential downtime cost your business?</span></span> <span data-ttu-id="9b0b5-130">Combien devriez-vous investir pour rendre l’application hautement disponible ?</span><span class="sxs-lookup"><span data-stu-id="9b0b5-130">How much should you invest in making the application highly available?</span></span> <span data-ttu-id="9b0b5-131">Vous devez également définir ce que cela signifie que l’application soit disponible.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-131">You also have to define what it means for the application to be available.</span></span> <span data-ttu-id="9b0b5-132">Par exemple, l’application est-elle « inactive » si un client peut envoyer une commande mais que le système ne peut pas la traiter dans les délais d’exécution habituels ?</span><span class="sxs-lookup"><span data-stu-id="9b0b5-132">For example, is the application "down" if a customer can submit an order but the system cannot process it within the normal timeframe?</span></span> <span data-ttu-id="9b0b5-133">Envisagez également la probabilité qu’un type particulier de défaillance se produise, et si une stratégie d’atténuation est économique.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-133">Also consider the probability of a particular type of outage occurring, and whether a mitigation strategy is cost-effective.</span></span>

<span data-ttu-id="9b0b5-134">Un autre terme courant est la **continuité de l’activité**. Il s’agit de la capacité d’effectuer des fonctions opérationnelles essentielles pendant et après des conditions défavorables, comme une catastrophe naturelle ou la panne d’un service.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-134">Another common term is **business continuity** (BC), which is the ability to perform essential business functions during and after adverse conditions, such as a natural disaster or a downed service.</span></span> <span data-ttu-id="9b0b5-135">La continuité de l’activité couvre l’intégralité des opérations de l’entreprise, y compris les installations physiques, les personnes, les communications, le transport, et l’informatique.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-135">BC covers the entire operation of the business, including physical facilities, people, communications, transportation, and IT.</span></span> <span data-ttu-id="9b0b5-136">Cet article se concentre sur les applications cloud, mais la planification de résilience doit être effectuée dans le contexte des exigences globales de continuité de l’activité.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-136">This article focuses on cloud applications, but resilience planning must be done in the context of overall BC requirements.</span></span> 

<span data-ttu-id="9b0b5-137">La **sauvegarde des données** est une composante essentielle de la récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-137">**Data backup** is a critical part of DR.</span></span> <span data-ttu-id="9b0b5-138">Si les composants sans état d’une application subissent une défaillance, vous avez toujours la possibilité de les redéployer.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-138">If the stateless components of an application fail, you can always redeploy them.</span></span> <span data-ttu-id="9b0b5-139">Cependant, si des données sont perdues, le système ne peut retrouver sa stabilité.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-139">But if data is lost, the system can't return to a stable state.</span></span> <span data-ttu-id="9b0b5-140">Les données doivent être sauvegardées, idéalement dans une région différente, ceci pour éviter tout risque en cas d’incident se produisant à l’échelle régionale.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-140">Data must be backed up, ideally in a different region in case of a region-wide disaster.</span></span> 

<span data-ttu-id="9b0b5-141">La sauvegarde et la **réplication des données** sont deux processus distincts.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-141">Backup is distinct from **data replication**.</span></span> <span data-ttu-id="9b0b5-142">La réplication des données consiste en leur copie quasiment en temps réel, de manière à ce que le système puisse basculer rapidement vers un réplica.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-142">Data replication involves copying data in near-real-time, so that the system can fail over quickly to a replica.</span></span> <span data-ttu-id="9b0b5-143">De nombreux systèmes de bases de données prennent en charge la réplication. Par exemple, SQL Server prend en charge les groupes de disponibilité SQL Server AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-143">Many databases systems support replication; for example, SQL Server supports SQL Server Always On Availability Groups.</span></span> <span data-ttu-id="9b0b5-144">La réplication des données peut réduire les intervalles de récupération après une panne, en garantissant la conservation permanente d’un réplica des données.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-144">Data replication can reduce how long it takes to recover from an outage, by ensuring that a replica of the data is always standing by.</span></span> <span data-ttu-id="9b0b5-145">Toutefois, la réplication des données ne vous protège pas contre les erreurs humaines.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-145">However, data replication won't protect against human error.</span></span> <span data-ttu-id="9b0b5-146">Les données corrompues en raison d’une erreur humaine sont elles aussi copiées sur les réplicas.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-146">If data gets corrupted because of human error, the corrupted data just gets copied to the replicas.</span></span> <span data-ttu-id="9b0b5-147">Par conséquent, il vous faut intégrer une stratégie de sauvegarde à long terme dans votre stratégie de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-147">Therefore, you still need to include long-term backup in your DR strategy.</span></span> 

## <a name="process-to-achieve-resiliency"></a><span data-ttu-id="9b0b5-148">Processus pour obtenir la résilience</span><span class="sxs-lookup"><span data-stu-id="9b0b5-148">Process to achieve resiliency</span></span>
<span data-ttu-id="9b0b5-149">La résilience n’est pas un module complémentaire.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-149">Resiliency is not an add-on.</span></span> <span data-ttu-id="9b0b5-150">Elle doit être conçue dans le système et mise en pratique opérationnelle.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-150">It must be designed into the system and put into operational practice.</span></span> <span data-ttu-id="9b0b5-151">Voici un modèle général à suivre :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-151">Here is a general model to follow:</span></span>

1. <span data-ttu-id="9b0b5-152">**Définissez** vos exigences en matière de disponibilité, en fonction des besoins de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-152">**Define** your availability requirements, based on business needs.</span></span>
2. <span data-ttu-id="9b0b5-153">**Concevez** l’application pour assurer la résilience.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-153">**Design** the application for resiliency.</span></span> <span data-ttu-id="9b0b5-154">Démarrez avec une architecture qui suit des pratiques éprouvées, puis identifiez les points de défaillance possibles de cette architecture.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-154">Start with an architecture that follows proven practices, and then identify the possible failure points in that architecture.</span></span>
3. <span data-ttu-id="9b0b5-155">**Implémentez** des stratégies pour détecter les défaillances et récupérer en cas de panne.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-155">**Implement** strategies to detect and recover from failures.</span></span> 
4. <span data-ttu-id="9b0b5-156">**Testez** l’implémentation en simulant des erreurs et en déclenchant des basculements forcés.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-156">**Test** the implementation by simulating faults and triggering forced failovers.</span></span> 
5. <span data-ttu-id="9b0b5-157">**Déployez** l’application en production à l’aide d’un processus fiable et renouvelable.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-157">**Deploy** the application into production using a reliable, repeatable process.</span></span> 
6. <span data-ttu-id="9b0b5-158">**Surveillez** l’application pour détecter les défaillances.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-158">**Monitor** the application to detect failures.</span></span> <span data-ttu-id="9b0b5-159">En surveillant le système, vous pouvez évaluer la santé de l’application et répondre aux incidents si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-159">By monitoring the system, you can gauge the health of the application and respond to incidents if necessary.</span></span> 
7. <span data-ttu-id="9b0b5-160">**Répondez** aux défaillances qui nécessitent des interventions manuelles.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-160">**Respond** if there are failure that require manual interventions.</span></span>

<span data-ttu-id="9b0b5-161">Dans le reste de l’article, nous expliquons plus en détail chacune de ces étapes.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-161">In the remainder of this article, we discuss each of these steps in more detail.</span></span>

## <a name="define-your-availability-requirements"></a><span data-ttu-id="9b0b5-162">Définir vos exigences de disponibilité</span><span class="sxs-lookup"><span data-stu-id="9b0b5-162">Define your availability requirements</span></span>
<span data-ttu-id="9b0b5-163">La planification de la résilience démarre avec les besoins de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-163">Resiliency planning starts with business requirements.</span></span> <span data-ttu-id="9b0b5-164">Voici certaines approches pour aborder la résilience dans ces termes.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-164">Here are some approaches for thinking about resiliency in those terms.</span></span>

### <a name="decompose-by-workload"></a><span data-ttu-id="9b0b5-165">Décomposez par charge de travail</span><span class="sxs-lookup"><span data-stu-id="9b0b5-165">Decompose by workload</span></span>
<span data-ttu-id="9b0b5-166">De nombreuses solutions cloud sont constituées de plusieurs charges de travail d’application.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-166">Many cloud solutions consist of multiple application workloads.</span></span> <span data-ttu-id="9b0b5-167">Le terme « charge de travail » dans ce contexte renvoie à une fonctionnalité discrète ou une tâche informatique, qui peut être séparée logiquement des autres tâches, en termes de logique métier et de besoins de stockage des données.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-167">The term "workload" in this context means a discrete capability or computing task, which can be logically separated from other tasks, in terms of business logic and data storage requirements.</span></span> <span data-ttu-id="9b0b5-168">Par exemple, une application e-commerce peut inclure les charges de travail suivantes :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-168">For example, an e-commerce app might include the following workloads:</span></span>

* <span data-ttu-id="9b0b5-169">Parcourir et rechercher un catalogue de produits.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-169">Browse and search a product catalog.</span></span>
* <span data-ttu-id="9b0b5-170">Créer et suivre des commandes.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-170">Create and track orders.</span></span>
* <span data-ttu-id="9b0b5-171">Afficher les recommandations.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-171">View recommendations.</span></span>

<span data-ttu-id="9b0b5-172">Ces charges de travail peuvent avoir des exigences différentes concernant la disponibilité, l’extensibilité, la cohérence des données, la récupération d’urgence, etc.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-172">These workloads might have different requirements for availability, scalability, data consistency, disaster recovery, and so forth.</span></span> <span data-ttu-id="9b0b5-173">Là encore, il s’agit de décisions commerciales.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-173">Again, these are business decisions.</span></span>

<span data-ttu-id="9b0b5-174">Envisagez également des modèles d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-174">Also consider usage patterns.</span></span> <span data-ttu-id="9b0b5-175">Y a-t-il certaines périodes critiques durant lesquelles le système doit être disponible ?</span><span class="sxs-lookup"><span data-stu-id="9b0b5-175">Are there certain critical periods when the system must be available?</span></span> <span data-ttu-id="9b0b5-176">Par exemple, un service de déclaration d’impôts ne peut pas s’arrêter juste avant la date limite de dépôt, un service de diffusion de vidéo en continu doit continuer de fonctionner pendant un événement sportif important, etc.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-176">For example, a tax-filing service can't go down right before the filing deadline, a video streaming service must stay up during a big sports event, and so on.</span></span> <span data-ttu-id="9b0b5-177">Pendant les périodes critiques, vous pouvez avoir des déploiements redondants dans plusieurs régions. L’application pourrait donc rencontrer un échec en cas de défaillance d’une région.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-177">During the critical periods, you might have redundant deployments across several regions, so the application could fail over if one region failed.</span></span> <span data-ttu-id="9b0b5-178">Toutefois, un déploiement multi-région étant plus coûteux, durant les périodes moins critiques, vous pouvez exécuter l’application dans une seule région.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-178">However, a multi-region deployment is more expensive, so during less critical times, you might run the application in a single region.</span></span>

### <a name="rto-and-rpo"></a><span data-ttu-id="9b0b5-179">RTO et RPO</span><span class="sxs-lookup"><span data-stu-id="9b0b5-179">RTO and RPO</span></span>
<span data-ttu-id="9b0b5-180">Deux métriques importantes sont à prendre en considération : les objectifs de délai de récupération et de point de récupération.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-180">Two important metrics to consider are the recovery time objective and recovery point objective.</span></span>

* <span data-ttu-id="9b0b5-181">L’**objectif de délai de récupération** (RTO) est la durée maximale acceptable pendant laquelle une application peut être indisponible après un incident.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-181">**Recovery time objective** (RTO) is the maximum acceptable time that an application can be unavailable after an incident.</span></span> <span data-ttu-id="9b0b5-182">Si votre objectif RTO est de 90 minutes, vous devez être en mesure de remettre l’application en état de fonctionnement dans les 90 minutes à partir du début d’une panne.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-182">If your RTO is 90 minutes, you must be able to restore the application to a running state within 90 minutes from the start of a disaster.</span></span> <span data-ttu-id="9b0b5-183">Si vous avez un objectif RTO très faible, vous pouvez conserver un deuxième déploiement fonctionnant de manière continue en veille, pour vous protéger contre une panne régionale.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-183">If you have a very low RTO, you might keep a second deployment continually running on standby, to protect against a regional outage.</span></span>

* <span data-ttu-id="9b0b5-184">L’**objectif de point de récupération** (RPO) est la durée maximale de perte de données acceptable pendant une panne.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-184">**Recovery point objective** (RPO) is the maximum duration of data loss that is acceptable during a disaster.</span></span> <span data-ttu-id="9b0b5-185">Par exemple, si vous stockez des données dans une base de données unique, sans aucune réplication vers d’autres bases de données, et effectuez des sauvegardes toutes les heures, vous risquez de perdre jusqu’à une heure de données.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-185">For example, if you store data in a single database, with no replication to other databases, and perform hourly backups, you could lose up to an hour of data.</span></span> 

<span data-ttu-id="9b0b5-186">Les objectifs RTO et RPO sont des exigences de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-186">RTO and RPO are business requirements.</span></span> <span data-ttu-id="9b0b5-187">Procéder à une évaluation des risques peut vous aider à définir les objectifs RTO et RPO de l’application.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-187">Conducting a risk assessment can help you define the application's RTO and RPO.</span></span> <span data-ttu-id="9b0b5-188">Une autre métrique commune est le **temps moyen de récupération** (MTTR), qui est la durée moyenne nécessaire à la restauration de l’application après une panne.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-188">Another common metric is **mean time to recover** (MTTR), which is the average time that it takes to restore the application after a failure.</span></span> <span data-ttu-id="9b0b5-189">La métrique MTTR est un fait empirique concernant un système.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-189">MTTR is an empirical fact about a system.</span></span> <span data-ttu-id="9b0b5-190">Si la métrique MTTR dépasse celle de l’objectif RTO, une défaillance du système entraînera une interruption inacceptable des opérations, car il ne sera pas possible de restaurer le système au sein de l’objectif RTO défini.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-190">If MTTR exceeds the RTO, then a failure in the system will cause an unacceptable business disruption, because it won't be possible to restore the system within the defined RTO.</span></span> 

### <a name="slas"></a><span data-ttu-id="9b0b5-191">Contrats SLA</span><span class="sxs-lookup"><span data-stu-id="9b0b5-191">SLAs</span></span>
<span data-ttu-id="9b0b5-192">Dans Azure, les [contrats de niveau de service][sla] (SLA) décrivent les engagements de Microsoft en matière de temps de fonctionnement et de connectivité.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-192">In Azure, the [Service Level Agreement][sla] (SLA) describes Microsoft’s commitments for uptime and connectivity.</span></span> <span data-ttu-id="9b0b5-193">Si le contrat SLA pour un service particulier est de 99,9 %, cela signifie que le service doit être disponible 99,9 % du temps.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-193">If the SLA for a particular service is 99.9%, it means you should expect the service to be available 99.9% of the time.</span></span>

> [!NOTE]
> <span data-ttu-id="9b0b5-194">Le contrat SLA Azure comprend également des dispositions permettant d’obtenir un crédit de service si le contrat SLA n’est pas rempli, ainsi que des définitions spécifiques de « disponibilité » pour chaque service.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-194">The Azure SLA also includes provisions for obtaining a service credit if the SLA is not met, along with specific definitions of "availability" for each service.</span></span> <span data-ttu-id="9b0b5-195">Cet aspect du contrat SLA agit comme une stratégie d’application.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-195">That aspect of the SLA acts as an enforcement policy.</span></span> 
> 
> 

<span data-ttu-id="9b0b5-196">Vous devez définir vos propres contrats SLA cibles pour chaque charge de travail dans votre solution.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-196">You should define your own target SLAs for each workload in your solution.</span></span> <span data-ttu-id="9b0b5-197">Un contrat SLA permet d’évaluer si l’architecture répond aux exigences de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-197">An SLA makes it possible to evaluate whether the architecture meets the business requirements.</span></span> <span data-ttu-id="9b0b5-198">Par exemple, si une charge de travail requiert une disponibilité de 99,99 %, mais dépend d’un service avec un contrat SLA de 99,9 %, ce service ne peut pas être un point de défaillance unique dans le système.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-198">For example, if a workload requires 99.99% uptime, but depends on a service with a 99.9% SLA, that service cannot be a single-point of failure in the system.</span></span> <span data-ttu-id="9b0b5-199">Une solution consiste à posséder un chemin d’accès de secours en cas d’échec du service, ou à prendre d’autres mesures pour récupérer suite à un échec dans ce service.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-199">One remedy is to have a fallback path in case the service fails, or take other measures to recover from a failure in that service.</span></span> 

<span data-ttu-id="9b0b5-200">Le tableau suivant présente les temps d’arrêt cumulatifs potentiels pour différents niveaux de contrat SLA.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-200">The following table shows the potential cumulative downtime for various SLA levels.</span></span> 

| <span data-ttu-id="9b0b5-201">Contrat SLA</span><span class="sxs-lookup"><span data-stu-id="9b0b5-201">SLA</span></span> | <span data-ttu-id="9b0b5-202">Temps d’arrêt par semaine</span><span class="sxs-lookup"><span data-stu-id="9b0b5-202">Downtime per week</span></span> | <span data-ttu-id="9b0b5-203">Temps d’arrêt par mois</span><span class="sxs-lookup"><span data-stu-id="9b0b5-203">Downtime per month</span></span> | <span data-ttu-id="9b0b5-204">Temps d’arrêt par an</span><span class="sxs-lookup"><span data-stu-id="9b0b5-204">Downtime per year</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="9b0b5-205">99 %</span><span class="sxs-lookup"><span data-stu-id="9b0b5-205">99%</span></span> |<span data-ttu-id="9b0b5-206">1,68 heure</span><span class="sxs-lookup"><span data-stu-id="9b0b5-206">1.68 hours</span></span> |<span data-ttu-id="9b0b5-207">7,2 heures</span><span class="sxs-lookup"><span data-stu-id="9b0b5-207">7.2 hours</span></span> |<span data-ttu-id="9b0b5-208">3,65 jours</span><span class="sxs-lookup"><span data-stu-id="9b0b5-208">3.65 days</span></span> |
| <span data-ttu-id="9b0b5-209">99,9 %</span><span class="sxs-lookup"><span data-stu-id="9b0b5-209">99.9%</span></span> |<span data-ttu-id="9b0b5-210">10,1 minutes</span><span class="sxs-lookup"><span data-stu-id="9b0b5-210">10.1 minutes</span></span> |<span data-ttu-id="9b0b5-211">43,2 minutes</span><span class="sxs-lookup"><span data-stu-id="9b0b5-211">43.2 minutes</span></span> |<span data-ttu-id="9b0b5-212">8,76 heures</span><span class="sxs-lookup"><span data-stu-id="9b0b5-212">8.76 hours</span></span> |
| <span data-ttu-id="9b0b5-213">99,95 %</span><span class="sxs-lookup"><span data-stu-id="9b0b5-213">99.95%</span></span> |<span data-ttu-id="9b0b5-214">5 minutes</span><span class="sxs-lookup"><span data-stu-id="9b0b5-214">5 minutes</span></span> |<span data-ttu-id="9b0b5-215">21,6 minutes</span><span class="sxs-lookup"><span data-stu-id="9b0b5-215">21.6 minutes</span></span> |<span data-ttu-id="9b0b5-216">4,38 heures</span><span class="sxs-lookup"><span data-stu-id="9b0b5-216">4.38 hours</span></span> |
| <span data-ttu-id="9b0b5-217">99,99 %</span><span class="sxs-lookup"><span data-stu-id="9b0b5-217">99.99%</span></span> |<span data-ttu-id="9b0b5-218">1,01 minute</span><span class="sxs-lookup"><span data-stu-id="9b0b5-218">1.01 minutes</span></span> |<span data-ttu-id="9b0b5-219">4,32 minutes</span><span class="sxs-lookup"><span data-stu-id="9b0b5-219">4.32 minutes</span></span> |<span data-ttu-id="9b0b5-220">52,56 minutes</span><span class="sxs-lookup"><span data-stu-id="9b0b5-220">52.56 minutes</span></span> |
| <span data-ttu-id="9b0b5-221">99, 999 %</span><span class="sxs-lookup"><span data-stu-id="9b0b5-221">99.999%</span></span> |<span data-ttu-id="9b0b5-222">6 secondes</span><span class="sxs-lookup"><span data-stu-id="9b0b5-222">6 seconds</span></span> |<span data-ttu-id="9b0b5-223">25,9 secondes</span><span class="sxs-lookup"><span data-stu-id="9b0b5-223">25.9 seconds</span></span> |<span data-ttu-id="9b0b5-224">5,26 minutes</span><span class="sxs-lookup"><span data-stu-id="9b0b5-224">5.26 minutes</span></span> |

<span data-ttu-id="9b0b5-225">Bien entendu, une plus grande disponibilité est préférable, tout le reste étant égal.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-225">Of course, higher availability is better, everything else being equal.</span></span> <span data-ttu-id="9b0b5-226">Mais si vous cherchez à obtenir davantage de 9, le coût et la complexité nécessaires pour atteindre ce niveau augmenteront.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-226">But as you strive for more 9s, the cost and complexity to achieve that level of availability grows.</span></span> <span data-ttu-id="9b0b5-227">Une disponibilité de 99,99 % se traduit par environ 5 minutes de temps d’arrêt total par mois.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-227">An uptime of 99.99% translates to about 5 minutes of total downtime per month.</span></span> <span data-ttu-id="9b0b5-228">L’augmentation du coût et de la complexité en vaut-elle la peine pour atteindre cinq 9 (99,999 %) de disponibilité ?</span><span class="sxs-lookup"><span data-stu-id="9b0b5-228">Is it worth the additional complexity and cost to reach five 9s?</span></span> <span data-ttu-id="9b0b5-229">La réponse dépend des exigences de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-229">The answer depends on the business requirements.</span></span> 

<span data-ttu-id="9b0b5-230">Voici quelques autres considérations à prendre en compte lors de la définition d’un contrat SLA :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-230">Here are some other considerations when defining an SLA:</span></span>

* <span data-ttu-id="9b0b5-231">Pour obtenir les quatre 9 (99,99 %), vous ne pouvez probablement pas avoir recours à une intervention manuelle pour récupérer en cas de défaillances.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-231">To achieve four 9's (99.99%), you probably can't rely on manual intervention to recover from failures.</span></span> <span data-ttu-id="9b0b5-232">L’application doit pouvoir effectuer des diagnostics et se réparer elle-même.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-232">The application must be self-diagnosing and self-healing.</span></span> 
* <span data-ttu-id="9b0b5-233">Au-delà de quatre 9, il devient difficile de détecter les pannes assez rapidement pour respecter les engagements du contrat SLA.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-233">Beyond four 9's, it is challenging to detect outages quickly enough to meet the SLA.</span></span>
* <span data-ttu-id="9b0b5-234">Pensez à la fenêtre de temps contre laquelle est mesuré votre contrat SLA.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-234">Think about the time window that your SLA is measured against.</span></span> <span data-ttu-id="9b0b5-235">Plus la fenêtre est petite, plus les tolérances seront strictes.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-235">The smaller the window, the tighter the tolerances.</span></span> <span data-ttu-id="9b0b5-236">Cela n’a pas de sens de définir votre contrat SLA en termes de temps de fonctionnement par heure ou par jour.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-236">It probably doesn't make sense to define your SLA in terms of hourly or daily uptime.</span></span> 

### <a name="composite-slas"></a><span data-ttu-id="9b0b5-237">Contrats SLA composites</span><span class="sxs-lookup"><span data-stu-id="9b0b5-237">Composite SLAs</span></span>
<span data-ttu-id="9b0b5-238">Envisagez une application web App Service qui écrit à Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-238">Consider an App Service web app that writes to Azure SQL Database.</span></span> <span data-ttu-id="9b0b5-239">Au moment de la rédaction, ces services Azure possèdent les contrats SLA suivants :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-239">At the time of this writing, these Azure services have the following SLAs:</span></span>

* <span data-ttu-id="9b0b5-240">Applications web App Service = 99,95%</span><span class="sxs-lookup"><span data-stu-id="9b0b5-240">App Service Web Apps = 99.95%</span></span>
* <span data-ttu-id="9b0b5-241">SQL Database = 99,99%</span><span class="sxs-lookup"><span data-stu-id="9b0b5-241">SQL Database = 99.99%</span></span>

![Contrat SLA composite](./images/sla1.png)

<span data-ttu-id="9b0b5-243">Quel est le temps d’arrêt maximal attendu pour cette application ?</span><span class="sxs-lookup"><span data-stu-id="9b0b5-243">What is the maximum downtime you would expect for this application?</span></span> <span data-ttu-id="9b0b5-244">En cas d’échec d’un service, l’application entière échoue.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-244">If either service fails, the whole application fails.</span></span> <span data-ttu-id="9b0b5-245">En règle générale, la probabilité d’échec de chaque service est indépendante, par conséquent le contrat SLA composite pour cette application est de 99,95 % &times; 99,99 % = 99,94 %.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-245">In general, the probability of each service failing is independent, so the composite SLA for this application is 99.95% &times; 99.99% = 99.94%.</span></span> <span data-ttu-id="9b0b5-246">Ce taux est inférieur aux contrats SLA individuels, ce qui n’est pas surprenant, car une application qui repose sur plusieurs services possède davantage de points de défaillance potentiels.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-246">That's lower than the individual SLAs, which isn't surprising, because an application that relies on multiple services has more potential failure points.</span></span> 

<span data-ttu-id="9b0b5-247">En revanche, vous pouvez améliorer le contrat SLA composite en créant des chemins d’accès de secours indépendants.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-247">On the other hand, you can improve the composite SLA by creating independent fallback paths.</span></span> <span data-ttu-id="9b0b5-248">Par exemple, si SQL Database n’est pas disponible, placez des transactions dans une file d’attente pour un traitement ultérieur.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-248">For example, if SQL Database is unavailable, put transactions into a queue, to be processed later.</span></span>

![Contrat SLA composite](./images/sla2.png)

<span data-ttu-id="9b0b5-250">Grâce à cette conception, l’application est toujours disponible, même si elle ne peut pas se connecter à la base de données.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-250">With this design, the application is still available even if it can't connect to the database.</span></span> <span data-ttu-id="9b0b5-251">Toutefois, cela échoue si la base de données et la file d’attente échouent en même temps.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-251">However, it fails if the database and the queue both fail at the same time.</span></span> <span data-ttu-id="9b0b5-252">Le pourcentage de temps attendu pour une défaillance simultanée est 0,0001 &times; 0,001, donc le contrat SLA composite pour ce chemin d’accès combiné est :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-252">The expected percentage of time for a simultaneous failure is 0.0001 &times; 0.001, so the composite SLA for this combined path is:</span></span>  

* <span data-ttu-id="9b0b5-253">Base de données OU file d’attente = 1,0 &minus; (0,0001 &times; 0,001) = 99,99999 %</span><span class="sxs-lookup"><span data-stu-id="9b0b5-253">Database OR queue = 1.0 &minus; (0.0001 &times; 0.001) = 99.99999%</span></span>

<span data-ttu-id="9b0b5-254">Le contrat SLA composite total est de :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-254">The total composite SLA is:</span></span>

* <span data-ttu-id="9b0b5-255">Application web ET (base de données OU file d’attente) = 99,95 % &times; 99,99999 % = ~99,95%</span><span class="sxs-lookup"><span data-stu-id="9b0b5-255">Web app AND (database OR queue) = 99.95% &times; 99.99999% = ~99.95%</span></span>

<span data-ttu-id="9b0b5-256">Mais il existe des compromis à cette approche.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-256">But there are tradeoffs to this approach.</span></span> <span data-ttu-id="9b0b5-257">La logique d’application est plus complexe, vous payez pour la file d’attente, et il peut y avoir des problèmes de cohérence des données à prendre en compte.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-257">The application logic is more complex, you are paying for the queue, and there may be data consistency issues to consider.</span></span>

<span data-ttu-id="9b0b5-258">**Contrat SLA pour déploiement multi-région**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-258">**SLA for multi-region deployments**.</span></span> <span data-ttu-id="9b0b5-259">Une autre technique de haute disponibilité consiste à déployer l’application dans plusieurs régions, et à utiliser Azure Traffic Manager pour basculer au cas où l’application échoue dans une région.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-259">Another HA technique is to deploy the application in more than one region, and use Azure Traffic Manager to fail over if the application fails in one region.</span></span> <span data-ttu-id="9b0b5-260">Pour un déploiement dans deux régions, le contrat SLA composite est calculé comme suit.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-260">For a two-region deployment, the composite SLA is calculated as follows.</span></span> 

<span data-ttu-id="9b0b5-261">Considérons *N* comme le contrat SLA composite pour l’application déployée dans une région.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-261">Let *N* be the composite SLA for the application deployed in one region.</span></span> <span data-ttu-id="9b0b5-262">Les risques que l’application échoue dans les deux régions en même temps sont de (1 &minus; N) &times; (1 &minus; N).</span><span class="sxs-lookup"><span data-stu-id="9b0b5-262">The expected chance that the application will fail in both regions at the same time is (1 &minus; N) &times; (1 &minus; N).</span></span> <span data-ttu-id="9b0b5-263">Par conséquent :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-263">Therefore,</span></span>

* <span data-ttu-id="9b0b5-264">Contrat SLA combiné pour les deux régions = 1 &minus; (1 &minus; N) (1 &minus; N) = N + (1 &minus; N) N</span><span class="sxs-lookup"><span data-stu-id="9b0b5-264">Combined SLA for both regions = 1 &minus; (1 &minus; N)(1 &minus; N) = N + (1 &minus; N)N</span></span>

<span data-ttu-id="9b0b5-265">Enfin, vous devez factoriser dans le [contrat SLA pour Traffic Manager][tm-sla].</span><span class="sxs-lookup"><span data-stu-id="9b0b5-265">Finally, you must factor in the [SLA for Traffic Manager][tm-sla].</span></span> <span data-ttu-id="9b0b5-266">Au moment de la rédaction, le contrat SLA pour Traffic Manager est de 99,99 %.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-266">At the time of this writing, the SLA for Traffic Manager SLA is 99.99%.</span></span>

* <span data-ttu-id="9b0b5-267">Contrat SLA combiné = 99.99 % &times; (contrat SLA combiné pour les deux régions)</span><span class="sxs-lookup"><span data-stu-id="9b0b5-267">Composite SLA = 99.99% &times; (combined SLA for both regions)</span></span>

<span data-ttu-id="9b0b5-268">De plus, un échec n’est pas instantané et peut entraîner un temps d’arrêt durant un basculement.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-268">Also, failing over is not instantaneous and can result in some downtime during a failover.</span></span> <span data-ttu-id="9b0b5-269">Consultez [Surveillance et basculement des points de terminaison Traffic Manager][tm-failover].</span><span class="sxs-lookup"><span data-stu-id="9b0b5-269">See [Traffic Manager endpoint monitoring and failover][tm-failover].</span></span>

<span data-ttu-id="9b0b5-270">Le numéro de contrat SLA calculé est une base utile, mais il ne dit pas tout sur la disponibilité.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-270">The calculated SLA number is a useful baseline, but it doesn't tell the whole story about availability.</span></span> <span data-ttu-id="9b0b5-271">Souvent, il arrive qu’une application se dégrade normalement lorsqu’un chemin d’accès non critique échoue.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-271">Often, an application can degrade gracefully when a non-critical path fails.</span></span> <span data-ttu-id="9b0b5-272">Imaginez une application qui propose un catalogue de livres.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-272">Consider an application that shows a catalog of books.</span></span> <span data-ttu-id="9b0b5-273">Si l’application ne peut pas récupérer l’image miniature de la couverture, elle affichera une image de substitution.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-273">If the application can't retrieve the thumbnail image for the cover, it might show a placeholder image.</span></span> <span data-ttu-id="9b0b5-274">Dans ce cas, le fait que l’application n’ait pas réussi à obtenir l’image ne réduit pas son temps de fonctionnement, mais cela affecte l’expérience utilisateur.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-274">In that case, failing to get the image does not reduce the application's uptime, although it affects the user experience.</span></span>  

## <a name="design-for-resiliency"></a><span data-ttu-id="9b0b5-275">Conception pour la résilience</span><span class="sxs-lookup"><span data-stu-id="9b0b5-275">Design for resiliency</span></span>

<span data-ttu-id="9b0b5-276">Pendant la phase de conception, vous devez effectuer une analyse du mode d’échec (FMA).</span><span class="sxs-lookup"><span data-stu-id="9b0b5-276">During the design phase, you should perform a failure mode analysis (FMA).</span></span> <span data-ttu-id="9b0b5-277">Une analyse FMA vise à identifier les points de défaillance possibles et à définir la manière dont l’application y répondra.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-277">The goal of an FMA is to identify possible points of failure, and define how the application will respond to those failures.</span></span>

* <span data-ttu-id="9b0b5-278">Comment l’application détectera-t-elle ce type d’échec ?</span><span class="sxs-lookup"><span data-stu-id="9b0b5-278">How will the application detect this type of failure?</span></span>
* <span data-ttu-id="9b0b5-279">Comment l’application répondra-t-elle à ce type d’échec ?</span><span class="sxs-lookup"><span data-stu-id="9b0b5-279">How will the application respond to this type of failure?</span></span>
* <span data-ttu-id="9b0b5-280">Comment enregistrerez-vous et surveillerez-vous ce type d’échec ?</span><span class="sxs-lookup"><span data-stu-id="9b0b5-280">How will you log and monitor this type of failure?</span></span> 

<span data-ttu-id="9b0b5-281">Pour plus d’informations sur le processus FMA, avec des recommandations spécifiques pour Azure, consultez le [Guide de résilience Azure : analyse du mode d’échec][fma].</span><span class="sxs-lookup"><span data-stu-id="9b0b5-281">For more information about the FMA process, with specific recommendations for Azure, see [Azure resiliency guidance: Failure mode analysis][fma].</span></span>

### <a name="example-of-identifying-failure-modes-and-detection-strategy"></a><span data-ttu-id="9b0b5-282">Exemple d’identification des modes d’échec et de stratégie de détection</span><span class="sxs-lookup"><span data-stu-id="9b0b5-282">Example of identifying failure modes and detection strategy</span></span>
<span data-ttu-id="9b0b5-283">**Point de défaillance :** appel à un service web externe / API.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-283">**Failure point:** Call to an external web service / API.</span></span>

| <span data-ttu-id="9b0b5-284">Mode d’échec</span><span class="sxs-lookup"><span data-stu-id="9b0b5-284">Failure mode</span></span> | <span data-ttu-id="9b0b5-285">Stratégie de détection</span><span class="sxs-lookup"><span data-stu-id="9b0b5-285">Detection strategy</span></span> |
| --- | --- |
| <span data-ttu-id="9b0b5-286">Le service est indisponible</span><span class="sxs-lookup"><span data-stu-id="9b0b5-286">Service is unavailable</span></span> |<span data-ttu-id="9b0b5-287">HTTP 5xx</span><span class="sxs-lookup"><span data-stu-id="9b0b5-287">HTTP 5xx</span></span> |
| <span data-ttu-id="9b0b5-288">Limitation</span><span class="sxs-lookup"><span data-stu-id="9b0b5-288">Throttling</span></span> |<span data-ttu-id="9b0b5-289">HTTP 429 (Trop de demandes)</span><span class="sxs-lookup"><span data-stu-id="9b0b5-289">HTTP 429 (Too Many Requests)</span></span> |
| <span data-ttu-id="9b0b5-290">Authentification</span><span class="sxs-lookup"><span data-stu-id="9b0b5-290">Authentication</span></span> |<span data-ttu-id="9b0b5-291">HTTP 401 (Non autorisé)</span><span class="sxs-lookup"><span data-stu-id="9b0b5-291">HTTP 401 (Unauthorized)</span></span> |
| <span data-ttu-id="9b0b5-292">Temps de réponse lent</span><span class="sxs-lookup"><span data-stu-id="9b0b5-292">Slow response</span></span> |<span data-ttu-id="9b0b5-293">Délai d’expiration de la requête</span><span class="sxs-lookup"><span data-stu-id="9b0b5-293">Request times out</span></span> |


### <a name="redundancy-and-designing-for-failure"></a><span data-ttu-id="9b0b5-294">Redondance et conception pour les défaillances</span><span class="sxs-lookup"><span data-stu-id="9b0b5-294">Redundancy and designing for failure</span></span>

<span data-ttu-id="9b0b5-295">Les défaillances n’ont pas toutes la même incidence.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-295">Failures can vary in the scope of their impact.</span></span> <span data-ttu-id="9b0b5-296">Certaines défaillances matérielles, comme une panne de disque, peuvent affecter un seul ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-296">Some hardware failures, such as a failed disk, may affect a single host machine.</span></span> <span data-ttu-id="9b0b5-297">Un commutateur réseau défaillant peut impacter un rack entier de serveurs.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-297">A failed network switch could affect a whole server rack.</span></span> <span data-ttu-id="9b0b5-298">Vous déplorerez moins fréquemment des défaillances perturbant un centre de données dans son ensemble, comme une panne d’alimentation.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-298">Less common are failures that disrupt a whole data center, such as loss of power in a data center.</span></span> <span data-ttu-id="9b0b5-299">Exceptionnellement, une région entière peut être indisponible.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-299">Rarely, an entire region could become unavailable.</span></span>

<span data-ttu-id="9b0b5-300">La redondance est l’un des moyens de rendre une application résiliente.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-300">One of the main ways to make an application resilient is through redundancy.</span></span> <span data-ttu-id="9b0b5-301">Toutefois, vous devez planifier en fonction de cette redondance lorsque vous concevez l’application.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-301">But you need to plan for this redundancy when you design the application.</span></span> <span data-ttu-id="9b0b5-302">Par ailleurs, le niveau de redondance dont vous avez besoin dépend des exigences de votre entreprise. Toutes les applications ne nécessitent pas une redondance entre les régions à titre de prévention contre les pannes régionales.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-302">Also, the level of redundancy that you need depends on your business requirements &mdash; not every application needs redundancy across regions to guard against a regional outage.</span></span> <span data-ttu-id="9b0b5-303">En général, il existe un compromis entre redondance et fiabilité supérieures d’un côté contre complexité et coûts plus élevés de l’autre.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-303">In general, there is a tradeoff between greater redundancy and reliability versus higher cost and complexity.</span></span>  

<span data-ttu-id="9b0b5-304">Azure offre un certain nombre de fonctionnalités servant à rendre une application redondante à tous les nivaux de défaillances, d’une machine virtuelle unique à une région entière.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-304">Azure has a number of features to make an application redundant at every level of failure, from an individual VM to an entire region.</span></span> 

![](./images/redundancy.svg)

<span data-ttu-id="9b0b5-305">**Machine virtuelle unique**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-305">**Single VM**.</span></span> <span data-ttu-id="9b0b5-306">Azure fournit un contrat SLA de durée de fonctionnement pour les machines virtuelles uniques.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-306">Azure provides an uptime SLA for single VMs.</span></span> <span data-ttu-id="9b0b5-307">Bien que vous puissiez obtenir un contrat supérieur en exécutant deux machines virtuelles ou plus, une machine virtuelle unique peut présenter une fiabilité suffisante pour certaines charges de travail.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-307">Although you can get a higher SLA by running two or more VMs, a single VM may be reliable enough for some workloads.</span></span> <span data-ttu-id="9b0b5-308">Pour les charges de travail de production, nous vous recommandons d’utiliser au moins deux machines virtuelles pour la redondance.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-308">For production workloads, we recommend using two or more VMs for redundancy.</span></span> 

<span data-ttu-id="9b0b5-309">**Groupes à haute disponibilité**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-309">**Availability sets**.</span></span> <span data-ttu-id="9b0b5-310">Pour vous protéger contre les défaillances matérielles localisées, comme une panne de disque ou de commutateur réseau, déployez au moins deux machines virtuelles dans un groupe à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-310">To protect against localized hardware failures, such as a disk or network switch failing, deploy two or more VMs in an availability set.</span></span> <span data-ttu-id="9b0b5-311">Un groupe à haute disponibilité se compose d’au moins deux *domaines d’erreur* qui partagent une source d’alimentation et un commutateur réseau.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-311">An availability set consists of two or more *fault domains* that share a common power source and network switch.</span></span> <span data-ttu-id="9b0b5-312">Les machines virtuelles d’un groupe à haute disponibilité sont distribuées entre les domaines d’erreur. Ainsi, si une défaillance matérielle affecte un domaine d’erreur, le trafic réseau peut toujours être acheminé vers les machines virtuelles des autres domaines d’erreur.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-312">VMs in an availability set are distributed across the fault domains, so if a hardware failure affects one fault domain, network traffic can still be routed the VMs in the other fault domains.</span></span> <span data-ttu-id="9b0b5-313">Pour plus d’informations sur les groupes à haute disponibilité, consultez la section [Gestion de la disponibilité des machines virtuelles Windows dans Azure](/azure/virtual-machines/windows/manage-availability).</span><span class="sxs-lookup"><span data-stu-id="9b0b5-313">For more information about Availability Sets, see [Manage the availability of Windows virtual machines in Azure](/azure/virtual-machines/windows/manage-availability).</span></span>

<span data-ttu-id="9b0b5-314">**Zones de disponibilité**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-314">**Availability zones**.</span></span>  <span data-ttu-id="9b0b5-315">Une zone de disponibilité est une zone physiquement séparée au sein d’une région Azure.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-315">An Availability Zone is a physically separate zone within an Azure region.</span></span> <span data-ttu-id="9b0b5-316">Chaque zone de disponibilité possède une source d’alimentation, un réseau et un système de refroidissement propres.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-316">Each Availability Zone has a distinct power source, network, and cooling.</span></span> <span data-ttu-id="9b0b5-317">Le déploiement des machines virtuelles entre les zones de disponibilité aide à protéger une application contre les défaillances à l’échelle du centre de données.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-317">Deploying VMs across availability zones helps to protect an application against datacenter-wide failures.</span></span> 

<span data-ttu-id="9b0b5-318">**Régions jumelées**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-318">**Paired regions**.</span></span> <span data-ttu-id="9b0b5-319">Pour protéger une application contre une panne régionale, vous pouvez la déployer dans plusieurs régions, en vous appuyant sur Azure Traffic Manager pour distribuer le trafic Internet entre les différentes régions.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-319">To protect an application against a regional outage, you can deploy the application across multiple regions, using Azure Traffic Manager to distribute internet traffic to the different regions.</span></span> <span data-ttu-id="9b0b5-320">Chaque région Azure est jumelée à une autre région.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-320">Each Azure region is paired with another region.</span></span> <span data-ttu-id="9b0b5-321">Ensemble, elles forment une [paire régionale](/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="9b0b5-321">Together, these form a [regional pair](/azure/best-practices-availability-paired-regions).</span></span> <span data-ttu-id="9b0b5-322">Une région se trouve dans la même zone géographique que la région avec laquelle elle est jumelée (à l’exception de Brésil Sud) pour répondre aux exigences de la résidence de données en termes d’impôts et d’application de la loi.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-322">With the exception of Brazil South, regional pairs are located within the same geography in order to meet data residency requirements for tax and law enforcement jurisdiction purposes.</span></span>

<span data-ttu-id="9b0b5-323">Lorsque vous concevez une application multirégion, tenez compte du fait que la latence du réseau entre les régions et plus importante qu’au sein d’une région unique.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-323">When you design a multi-region application, take into account that network latency across regions is higher than within a region.</span></span> <span data-ttu-id="9b0b5-324">Par exemple, si vous répliquez une base de données pour prendre en charge un basculement, utilisez la réplication des données synchrone au sein d’une région unique, mais la réplication des données asynchrones entre plusieurs régions.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-324">For example, if you are replicating a database to enable failover, use synchronous data replication within a region, but asynchronous data replication across regions.</span></span>

| &nbsp; | <span data-ttu-id="9b0b5-325">Groupe à haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="9b0b5-325">Availability Set</span></span> | <span data-ttu-id="9b0b5-326">Zone de disponibilité</span><span class="sxs-lookup"><span data-stu-id="9b0b5-326">Availability Zone</span></span> | <span data-ttu-id="9b0b5-327">Région jumelée</span><span class="sxs-lookup"><span data-stu-id="9b0b5-327">Paired region</span></span> |
|--------|------------------|-------------------|---------------|
| <span data-ttu-id="9b0b5-328">Étendue de la défaillance</span><span class="sxs-lookup"><span data-stu-id="9b0b5-328">Scope of failure</span></span> | <span data-ttu-id="9b0b5-329">Rack</span><span class="sxs-lookup"><span data-stu-id="9b0b5-329">Rack</span></span> | <span data-ttu-id="9b0b5-330">Centre de données</span><span class="sxs-lookup"><span data-stu-id="9b0b5-330">Datacenter</span></span> | <span data-ttu-id="9b0b5-331">Région</span><span class="sxs-lookup"><span data-stu-id="9b0b5-331">Region</span></span> |
| <span data-ttu-id="9b0b5-332">Routage des requêtes</span><span class="sxs-lookup"><span data-stu-id="9b0b5-332">Request routing</span></span> | <span data-ttu-id="9b0b5-333">Équilibreur de charge</span><span class="sxs-lookup"><span data-stu-id="9b0b5-333">Load Balancer</span></span> | <span data-ttu-id="9b0b5-334">Équilibreur de charge entre les zones</span><span class="sxs-lookup"><span data-stu-id="9b0b5-334">Cross-zone Load Balancer</span></span> | <span data-ttu-id="9b0b5-335">Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="9b0b5-335">Traffic Manager</span></span> |
| <span data-ttu-id="9b0b5-336">Latence du réseau</span><span class="sxs-lookup"><span data-stu-id="9b0b5-336">Network latency</span></span> | <span data-ttu-id="9b0b5-337">Très faible</span><span class="sxs-lookup"><span data-stu-id="9b0b5-337">Very low</span></span> | <span data-ttu-id="9b0b5-338">Faible</span><span class="sxs-lookup"><span data-stu-id="9b0b5-338">Low</span></span> | <span data-ttu-id="9b0b5-339">Moyenne à élevée</span><span class="sxs-lookup"><span data-stu-id="9b0b5-339">Mid to high</span></span> |
| <span data-ttu-id="9b0b5-340">Réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="9b0b5-340">Virtual network</span></span>  | <span data-ttu-id="9b0b5-341">Réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="9b0b5-341">VNet</span></span> | <span data-ttu-id="9b0b5-342">Réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="9b0b5-342">VNet</span></span> | <span data-ttu-id="9b0b5-343">Homologation de réseaux virtuels entre régions</span><span class="sxs-lookup"><span data-stu-id="9b0b5-343">Cross-region VNet peering</span></span> |

## <a name="implement-resiliency-strategies"></a><span data-ttu-id="9b0b5-344">Implémenter des stratégies de résilience</span><span class="sxs-lookup"><span data-stu-id="9b0b5-344">Implement resiliency strategies</span></span>
<span data-ttu-id="9b0b5-345">Cette section contient une enquête concernant quelques stratégies de résilience courantes.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-345">This section provides a survey of some common resiliency strategies.</span></span> <span data-ttu-id="9b0b5-346">La plupart d’entre elles ne sont pas limitées à une technologie particulière.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-346">Most of these are not limited to a particular technology.</span></span> <span data-ttu-id="9b0b5-347">Les descriptions de cette section résument l’idée générale de chaque technique, avec des liens pour obtenir des informations supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-347">The descriptions in this section summarize the general idea behind each technique, with links to further reading.</span></span>

<span data-ttu-id="9b0b5-348">**Relancez des échecs temporaires**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-348">**Retry transient failures**.</span></span> <span data-ttu-id="9b0b5-349">Les échecs temporaires peuvent résulter d’une perte momentanée de la connectivité réseau, d’une connexion à une base de données interrompue ou d’un délai d’attente lorsqu’un service est occupé.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-349">Transient failures can be caused by momentary loss of network connectivity, a dropped database connection, or a timeout when a service is busy.</span></span> <span data-ttu-id="9b0b5-350">Parfois, un échec temporaire peut être résolu simplement en relançant la requête.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-350">Often, a transient failure can be resolved simply by retrying the request.</span></span> <span data-ttu-id="9b0b5-351">Pour de nombreux services Azure, le Kit de développement logiciel client implémente des relances automatiques, d’une façon transparente pour l’appelant ; consultez [Guide spécifique relatif au service de relance][retry-service-specific guidance].</span><span class="sxs-lookup"><span data-stu-id="9b0b5-351">For many Azure services, the client SDK implements automatic retries, in a way that is transparent to the caller; see [Retry service specific guidance][retry-service-specific guidance].</span></span>

<span data-ttu-id="9b0b5-352">Chaque tentative de relance augmente la latence totale.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-352">Each retry attempt adds to the total latency.</span></span> <span data-ttu-id="9b0b5-353">En outre, un trop grand nombre de demandes en échec peut provoquer un goulot d’étranglement, étant donné que les demandes s’accumulent dans la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-353">Also, too many failed requests can cause a bottleneck, as pending requests accumulate in the queue.</span></span> <span data-ttu-id="9b0b5-354">Ces demandes bloquées peuvent contenir des ressources système critiques telles que la mémoire, des threads, les connexions de la base de données, etc. Cela peut provoquer une succession d’échecs.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-354">These blocked requests might hold critical system resources such as memory, threads, database connections, and so on, which can cause cascading failures.</span></span> <span data-ttu-id="9b0b5-355">Pour éviter ce problème, augmentez le délai entre chaque relance et limitez le nombre total de demandes en échec.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-355">To avoid this, increase the delay between each retry attempt, and limit the total number of failed requests.</span></span> 

![](./images/retry.png)

<span data-ttu-id="9b0b5-356">**Équilibrez la charge sur les instances**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-356">**Load balance across instances**.</span></span> <span data-ttu-id="9b0b5-357">Pour l’extensibilité, une application cloud doit être en mesure de monter en charge en ajoutant d’autres instances.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-357">For scalability, a cloud application should be able to scale out by adding more instances.</span></span> <span data-ttu-id="9b0b5-358">Cette approche améliore également la résilience, car des instances défectueuses peuvent être supprimées de la rotation.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-358">This approach also improves resiliency, because unhealthy instances can be removed from rotation.</span></span> <span data-ttu-id="9b0b5-359">Par exemple : </span><span class="sxs-lookup"><span data-stu-id="9b0b5-359">For example:</span></span>

* <span data-ttu-id="9b0b5-360">Placez au moins deux machines virtuelles derrière un équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-360">Put two or more VMs behind a load balancer.</span></span> <span data-ttu-id="9b0b5-361">L’équilibreur de charge répartit le trafic vers toutes les machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-361">The load balancer distributes traffic to all the VMs.</span></span> <span data-ttu-id="9b0b5-362">Consultez [Exécuter des machines virtuelles à charge équilibrée à des fins d’extensibilité et de disponibilité][ra-multi-vm].</span><span class="sxs-lookup"><span data-stu-id="9b0b5-362">See [Run load-balanced VMs for scalability and availability][ra-multi-vm].</span></span>
* <span data-ttu-id="9b0b5-363">Montez en charge une application Azure App Service à plusieurs instances.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-363">Scale out an Azure App Service app to multiple instances.</span></span> <span data-ttu-id="9b0b5-364">App Service équilibre automatiquement la charge entre les instances.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-364">App Service automatically balances load across instances.</span></span> <span data-ttu-id="9b0b5-365">Consultez [Application web de base][ra-basic-web].</span><span class="sxs-lookup"><span data-stu-id="9b0b5-365">See [Basic web application][ra-basic-web].</span></span>
* <span data-ttu-id="9b0b5-366">Utilisez [Azure Traffic Manager] [ tm] pour répartir le trafic sur un ensemble de points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-366">Use [Azure Traffic Manager][tm] to distribute traffic across a set of endpoints.</span></span>

<span data-ttu-id="9b0b5-367">**Répliquez des données**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-367">**Replicate data**.</span></span> <span data-ttu-id="9b0b5-368">La réplication de données est une stratégie générale pour gérer les échecs non temporaires dans un magasin de données.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-368">Replicating data is a general strategy for handling non-transient failures in a data store.</span></span> <span data-ttu-id="9b0b5-369">De nombreuses technologies de stockage fournissent une stratégie de réplication intégrée, y compris Azure SQL Database, Cosmos DB et Apache Cassandra.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-369">Many storage technologies provide built-in replication, including Azure SQL Database, Cosmos DB, and Apache Cassandra.</span></span> <span data-ttu-id="9b0b5-370">Il est important de tenir compte des chemins d’accès de lecture et d’écriture.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-370">It's important to consider both the read and write paths.</span></span> <span data-ttu-id="9b0b5-371">Selon la technologie de stockage, vous pouvez trouver plusieurs réplicas accessibles en écriture, ou un seul réplica accessible en écriture et plusieurs réplicas en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-371">Depending on the storage technology, you might have multiple writable replicas, or a single writable replica and multiple read-only replicas.</span></span> 

<span data-ttu-id="9b0b5-372">Pour optimiser la disponibilité, les réplicas peuvent être placés dans plusieurs régions.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-372">To maximize availability, replicas can be placed in multiple regions.</span></span> <span data-ttu-id="9b0b5-373">Toutefois, cela augmente la latence lors de la réplication des données.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-373">However, this increases the latency when replicating the data.</span></span> <span data-ttu-id="9b0b5-374">En règle générale, la réplication entre les régions est effectuée de manière asynchrone, ce qui implique un modèle de cohérence éventuel et une perte de données potentielle si un réplica échoue.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-374">Typically, replicating across regions is done asynchronously, which implies an eventual consistency model and potential data loss if a replica fails.</span></span> 

<span data-ttu-id="9b0b5-375">**Appliquer une dégradation normale**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-375">**Degrade gracefully**.</span></span> <span data-ttu-id="9b0b5-376">Si un service échoue et qu’il n’existe aucun chemin d’accès de basculement, l’application devrait se dégrader normalement, tout en offrant une expérience utilisateur acceptable.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-376">If a service fails and there is no failover path, the application may be able to degrade gracefully while still providing an acceptable user experience.</span></span> <span data-ttu-id="9b0b5-377">Par exemple : </span><span class="sxs-lookup"><span data-stu-id="9b0b5-377">For example:</span></span>

* <span data-ttu-id="9b0b5-378">Placer un élément de travail dans une file d’attente, pour qu’il soit traité ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-378">Put a work item on a queue, to be handled later.</span></span> 
* <span data-ttu-id="9b0b5-379">Retourner une valeur estimée.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-379">Return an estimated value.</span></span>
* <span data-ttu-id="9b0b5-380">Utiliser des données mises en cache localement.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-380">Use locally cached data.</span></span> 
* <span data-ttu-id="9b0b5-381">Afficher un message d’erreur pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-381">Show the user an error message.</span></span> <span data-ttu-id="9b0b5-382">(Cette option est préférable plutôt que l’application cesse de répondre aux demandes.)</span><span class="sxs-lookup"><span data-stu-id="9b0b5-382">(This option is better than having the application stop responding to requests.)</span></span>

<span data-ttu-id="9b0b5-383">**Limitez les utilisateurs à volume important**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-383">**Throttle high-volume users**.</span></span> <span data-ttu-id="9b0b5-384">Parfois, un petit nombre d’utilisateurs peut créer une charge excessive.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-384">Sometimes a small number of users create excessive load.</span></span> <span data-ttu-id="9b0b5-385">Cela peut avoir un impact sur les autres utilisateurs, réduisant ainsi la disponibilité globale de votre application.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-385">That can have an impact on other users, reducing the overall availability of your application.</span></span>

<span data-ttu-id="9b0b5-386">Si un seul client soumet un nombre excessif de demandes, l’application peut limiter le client pendant un certain temps.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-386">When a single client makes an excessive number of requests, the application might throttle the client for a certain period of time.</span></span> <span data-ttu-id="9b0b5-387">Pendant la période de limitation, l’application refuse certaines ou toutes les demandes de ce client (en fonction de la stratégie de limitation exacte).</span><span class="sxs-lookup"><span data-stu-id="9b0b5-387">During the throttling period, the application refuses some or all of the requests from that client (depending on the exact throttling strategy).</span></span> <span data-ttu-id="9b0b5-388">Le seuil de limitation peut dépendre du niveau de service du client.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-388">The threshold for throttling might depend on the customer's service tier.</span></span> 

<span data-ttu-id="9b0b5-389">La limitation n’implique pas que le client agissait à des fins malveillantes, uniquement qu’il a dépassé son quota de service.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-389">Throttling does not imply the client was necessarily acting maliciously, only that it exceeded its service quota.</span></span> <span data-ttu-id="9b0b5-390">Dans certains cas, un consommateur peut constamment dépasser son quota, ou bien mal se comporter.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-390">In some cases, a consumer might consistently exceed their quota or otherwise behave badly.</span></span> <span data-ttu-id="9b0b5-391">Dans ce cas, vous pouvez aller plus loin et bloquer l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-391">In that case, you might go further and block the user.</span></span> <span data-ttu-id="9b0b5-392">En règle générale, cela se fait en bloquant une clé API ou une plage d’adresses IP.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-392">Typically, this is done by blocking an API key or an IP address range.</span></span> <span data-ttu-id="9b0b5-393">Pour en savoir plus, consultez le [Modèle de limitation][throttling-pattern].</span><span class="sxs-lookup"><span data-stu-id="9b0b5-393">For more information, see [Throttling Pattern][throttling-pattern].</span></span>

<span data-ttu-id="9b0b5-394">**Utilisez un disjoncteur**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-394">**Use a circuit breaker**.</span></span> <span data-ttu-id="9b0b5-395">Le modèle [Disjoncteur][circuit-breaker-pattern] peut empêcher qu’une application ne tente d’exécuter à plusieurs reprises une opération qui risque d’échouer.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-395">The [Circuit Breaker][circuit-breaker-pattern] pattern can prevent an application from repeatedly trying an operation that is likely to fail.</span></span> <span data-ttu-id="9b0b5-396">Le disjoncteur inclut dans un wrapper des appels vers un service et suit le nombre d’échecs récents.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-396">The circuit breaker wraps calls to a service and tracks the number of recent failures.</span></span> <span data-ttu-id="9b0b5-397">Si le nombre d’échec dépasse un seuil, le disjoncteur renvoie un code d’erreur sans avoir appelé le service.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-397">If the failure count exceeds a threshold, the circuit breaker starts returning an error code without calling the service.</span></span> <span data-ttu-id="9b0b5-398">Le service a ainsi le temps de récupérer.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-398">This gives the service time to recover.</span></span> 

<span data-ttu-id="9b0b5-399">**Utilisez le nivellement de charge pour lisser les pics de trafic**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-399">**Use load leveling to smooth out spikes in traffic**.</span></span> <span data-ttu-id="9b0b5-400">Les applications peuvent rencontrer des pics soudains dans le trafic, ce qui peut surcharger les services sur le serveur principal.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-400">Applications may experience sudden spikes in traffic, which can overwhelm services on the backend.</span></span> <span data-ttu-id="9b0b5-401">Si un serveur principal ne parvient pas à répondre aux demandes assez rapidement, cela peut provoquer un envoi des demandes en file d’attente (sauvegarde) ou une limitation de l’application par le service.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-401">If a backend service cannot respond to requests quickly enough, it may cause requests to queue (back up), or cause the service to throttle the application.</span></span> <span data-ttu-id="9b0b5-402">Pour éviter ce problème, vous pouvez utiliser une file d’attente en tant que mémoire tampon.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-402">To avoid this, you can use a queue as a buffer.</span></span> <span data-ttu-id="9b0b5-403">Lorsqu’il y a un nouvel élément de travail, au lieu d’appeler le serveur principal immédiatement, l’application met un élément de travail en file d’attente pour qu’il soit exécuté de façon asynchrone.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-403">When there is a new work item, instead of calling the backend service immediately, the application queues a work item to run asynchronously.</span></span> <span data-ttu-id="9b0b5-404">La file d’attente agit comme une mémoire tampon qui lisse des pics de charge.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-404">The queue acts as a buffer that smooths out peaks in the load.</span></span> <span data-ttu-id="9b0b5-405">Pour en savoir plus, consultez [Modèle de nivellement de la charge basé sur une file d’attente][load-leveling-pattern].</span><span class="sxs-lookup"><span data-stu-id="9b0b5-405">For more information, see [Queue-Based Load Leveling Pattern][load-leveling-pattern].</span></span>

<span data-ttu-id="9b0b5-406">**Isolez les ressources critiques**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-406">**Isolate critical resources**.</span></span> <span data-ttu-id="9b0b5-407">Des successions d’échecs peuvent parfois se produire dans un sous-système, provoquant des défaillances dans d’autres parties de l’application.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-407">Failures in one subsystem can sometimes cascade, causing failures in other parts of the application.</span></span> <span data-ttu-id="9b0b5-408">Cela peut se produire si une défaillance empêche que certaines ressources, telles que des threads ou des sockets, ne soient libérées en temps voulu, menant à un épuisement des ressources.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-408">This can happen if a failure causes some resources, such as threads or sockets, not to get freed in a timely manner, leading to resource exhaustion.</span></span> 

<span data-ttu-id="9b0b5-409">Pour éviter ce problème, vous pouvez partitionner un système en groupes isolés, de manière à ce qu’une défaillance présente dans une partition ne détériore pas l’ensemble du système.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-409">To avoid this, you can partition a system into isolated groups, so that a failure in one partition does not bring down the entire system.</span></span> <span data-ttu-id="9b0b5-410">Cette technique est parfois appelée le modèle de cloisonnement.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-410">This technique is sometimes called the Bulkhead pattern.</span></span>

<span data-ttu-id="9b0b5-411">Exemples :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-411">Examples:</span></span>

* <span data-ttu-id="9b0b5-412">Partitionnez une base de données (par exemple, par le client) et affectez un pool distinct d’instances de serveur web pour chaque partition.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-412">Partition a database (for example, by tenant) and assign a separate pool of web server instances for each partition.</span></span>  
* <span data-ttu-id="9b0b5-413">Utilisez des pools de threads distincts pour isoler différents services.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-413">Use separate thread pools to isolate calls to different services.</span></span> <span data-ttu-id="9b0b5-414">Cela permet d’éviter les successions d’échecs en cas de défaillance d’un des services.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-414">This helps to prevent cascading failures if one of the services fails.</span></span> <span data-ttu-id="9b0b5-415">Pour obtenir un exemple, consultez la bibliothèque [Netflix Hystrix][hystrix].</span><span class="sxs-lookup"><span data-stu-id="9b0b5-415">For an example, see the Netflix [Hystrix library][hystrix].</span></span>
* <span data-ttu-id="9b0b5-416">Utilisez des [conteneurs][containers] pour limiter les ressources disponibles pour un sous-système spécifique.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-416">Use [containers][containers] to limit the resources available to a particular subsystem.</span></span> 

![](./images/bulkhead.png)

<span data-ttu-id="9b0b5-417">**Appliquez des transactions de compensation**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-417">**Apply compensating transactions**.</span></span> <span data-ttu-id="9b0b5-418">Une [transaction de compensation][compensating-transaction-pattern] est une transaction qui annule les effets d’une autre transaction terminée.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-418">A [compensating transaction][compensating-transaction-pattern] is a transaction that undoes the effects of another completed transaction.</span></span> <span data-ttu-id="9b0b5-419">Dans un système distribué, il est parfois difficile d’obtenir une cohérence transactionnelle élevée.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-419">In a distributed system, it can be very difficult to achieve strong transactional consistency.</span></span> <span data-ttu-id="9b0b5-420">Les transactions de compensation sont un moyen de garantir la cohérence à l’aide d’une série de transactions individuelles plus petites, qui peuvent être annulées à chaque étape.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-420">Compensating transactions are a way to achieve consistency by using a series of smaller, individual transactions that can be undone at each step.</span></span>

<span data-ttu-id="9b0b5-421">Par exemple, pour réserver un voyage, un client peut réserver une voiture, un hôtel et un vol.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-421">For example, to book a trip, a customer might reserve a car, a hotel room, and a flight.</span></span> <span data-ttu-id="9b0b5-422">Si une de ces étapes échoue, l’opération entière échoue.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-422">If any of these steps fails, the entire operation fails.</span></span> <span data-ttu-id="9b0b5-423">Au lieu de tenter d’utiliser une unique transaction distribuée pour l’intégralité de l’opération, vous pouvez définir une transaction de compensation pour chaque étape.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-423">Instead of trying to use a single distributed transaction for the entire operation, you can define a compensating transaction for each step.</span></span> <span data-ttu-id="9b0b5-424">Par exemple, pour annuler la réservation d’une voiture, vous annulez la réservation.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-424">For example, to undo a car reservation, you cancel the reservation.</span></span> <span data-ttu-id="9b0b5-425">Pour exécuter l’ensemble de l’opération, un coordinateur exécute chaque étape.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-425">In order to complete the whole operation, a coordinator executes each step.</span></span> <span data-ttu-id="9b0b5-426">Si une étape échoue, le coordinateur applique des transactions de compensation pour annuler toutes les étapes déjà effectuées.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-426">If any step fails, the coordinator applies compensating transactions to undo any steps that were completed.</span></span> 

## <a name="test-for-resiliency"></a><span data-ttu-id="9b0b5-427">Tester la résilience</span><span class="sxs-lookup"><span data-stu-id="9b0b5-427">Test for resiliency</span></span>
<span data-ttu-id="9b0b5-428">En règle générale, vous ne pouvez pas tester la résilience de la même façon que vous testez les fonctionnalités de l’application (en exécutant des tests unitaires, etc).</span><span class="sxs-lookup"><span data-stu-id="9b0b5-428">Generally, you can't test resiliency in the same way that you test application functionality (by running unit tests and so on).</span></span> <span data-ttu-id="9b0b5-429">Au lieu de cela, vous devez tester le fonctionnement de la charge de travail de bout en bout dans les conditions d’échec qui ne se produisent que par intermittence.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-429">Instead, you must test how the end-to-end workload performs under failure conditions which only occur intermittently.</span></span>

<span data-ttu-id="9b0b5-430">Les tests sont un processus itératif.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-430">Testing is an iterative process.</span></span> <span data-ttu-id="9b0b5-431">Testez l’application, mesurez le résultat, analysez et résolvez tous les échecs résultants, puis répétez le processus.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-431">Test the application, measure the outcome, analyze and address any failures that result, and repeat the process.</span></span>

<span data-ttu-id="9b0b5-432">**Test d’injection d’erreurs**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-432">**Fault injection testing**.</span></span> <span data-ttu-id="9b0b5-433">Testez la résilience du système lors de pannes, en déclenchant des échecs réels ou simulés.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-433">Test the resiliency of the system during failures, either by triggering actual failures or by simulating them.</span></span> <span data-ttu-id="9b0b5-434">Voici quelques scénarios courants de défaillance à tester :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-434">Here are some common failure scenarios to test:</span></span>

* <span data-ttu-id="9b0b5-435">Arrêt des instances de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-435">Shut down VM instances.</span></span>
* <span data-ttu-id="9b0b5-436">Blocage des processus.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-436">Crash processes.</span></span>
* <span data-ttu-id="9b0b5-437">Expiration des certificats.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-437">Expire certificates.</span></span>
* <span data-ttu-id="9b0b5-438">Changement des clés d’accès.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-438">Change access keys.</span></span>
* <span data-ttu-id="9b0b5-439">Arrêt du service DNS sur les contrôleurs de domaine.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-439">Shut down the DNS service on domain controllers.</span></span>
* <span data-ttu-id="9b0b5-440">Limitation des ressources système disponibles, comme la RAM ou le nombre de threads.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-440">Limit available system resources, such as RAM or number of threads.</span></span>
* <span data-ttu-id="9b0b5-441">Démontage des disques.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-441">Unmount disks.</span></span>
* <span data-ttu-id="9b0b5-442">Redéploiement d’une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-442">Redeploy a VM.</span></span>

<span data-ttu-id="9b0b5-443">Mesurez les temps de récupération et vérifiez qu’ils répondent aux exigences de votre entreprise.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-443">Measure the recovery times and verify that your business requirements are met.</span></span> <span data-ttu-id="9b0b5-444">Testez également des combinaisons de mode d’échec.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-444">Test combinations of failure modes as well.</span></span> <span data-ttu-id="9b0b5-445">Assurez-vous que les échecs ne produisent de manière successive et soient gérés de manière isolée.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-445">Make sure that failures don't cascade, and are handled in an isolated way.</span></span>

<span data-ttu-id="9b0b5-446">C’est une autre raison qui démontre pourquoi il est important d’analyser les points de défaillance possibles pendant la phase de conception.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-446">This is another reason why it's important to analyze possible failure points during the design phase.</span></span> <span data-ttu-id="9b0b5-447">Les résultats de cette analyse doivent être entrés dans votre plan de test.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-447">The results of that analysis should be inputs into your test plan.</span></span>

<span data-ttu-id="9b0b5-448">**Test de charge**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-448">**Load testing**.</span></span> <span data-ttu-id="9b0b5-449">Testez la charge de l’application à l’aide d’un outil tel que [Visual Studio Team Services][vsts] ou [Apache JMeter][jmeter].</span><span class="sxs-lookup"><span data-stu-id="9b0b5-449">Load test the application using a tool such as [Visual Studio Team Services][vsts] or [Apache JMeter][jmeter].</span></span> <span data-ttu-id="9b0b5-450">Le test de charge est essentiel pour identifier les défaillances qui se produisent uniquement lors du chargement, telles que la saturation de la base de données principale ou la limitation du service.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-450">Load testing is crucial for identifying failures that only happen under load, such as the backend database being overwhelmed or service throttling.</span></span> <span data-ttu-id="9b0b5-451">Testez la charge maximale à l’aide des données de production ou de données synthétiques qui soient aussi proches que possible des données de production.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-451">Test for peak load, using production data or synthetic data that is as close to production data as possible.</span></span> <span data-ttu-id="9b0b5-452">L’objectif est de voir comment se comporte l’application dans des conditions réelles.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-452">The goal is to see how the application behaves under real-world conditions.</span></span>   

## <a name="deploy-using-reliable-processes"></a><span data-ttu-id="9b0b5-453">Déployer à l’aide de processus fiables</span><span class="sxs-lookup"><span data-stu-id="9b0b5-453">Deploy using reliable processes</span></span>
<span data-ttu-id="9b0b5-454">Une fois qu’une application est déployée en production, les mises à jour deviennent une source possible d’erreurs.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-454">Once an application is deployed to production, updates are a possible source of errors.</span></span> <span data-ttu-id="9b0b5-455">Dans le pire des cas, une mise à jour incorrecte peut entraîner un temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-455">In the worst case, a bad update can cause downtime.</span></span> <span data-ttu-id="9b0b5-456">Pour éviter cela, le processus de déploiement doit être prévisible et renouvelable.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-456">To avoid this, the deployment process must be predictable and repeatable.</span></span> <span data-ttu-id="9b0b5-457">Le déploiement inclut l’approvisionnement des ressources Azure, le déploiement du code de l’application, et l’application des paramètres de configuration.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-457">Deployment includes provisioning Azure resources, deploying application code, and applying configuration settings.</span></span> <span data-ttu-id="9b0b5-458">Une mise à jour peut impliquer les trois, ou un sous-ensemble.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-458">An update may involve all three, or a subset.</span></span> 

<span data-ttu-id="9b0b5-459">Le point essentiel est que les déploiements manuels sont sujets à l’erreur.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-459">The crucial point is that manual deployments are prone to error.</span></span> <span data-ttu-id="9b0b5-460">Par conséquent, il est recommandé d’avoir un processus idempotent automatisé, que vous pouvez exécuter à la demande et exécutez de nouveau si quelque chose échoue.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-460">Therefore, it's recommended to have an automated, idempotent process that you can run on demand, and re-run if something fails.</span></span> 

* <span data-ttu-id="9b0b5-461">Utilisez les modèles Azure Resource Manager afin d’automatiser l’approvisionnement des ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-461">Use Azure Resource Manager templates to automate provisioning of Azure resources.</span></span>
* <span data-ttu-id="9b0b5-462">Utilisez la [Configuration de l’état souhaité Azure Automation][dsc] (DSC) pour configurer les machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-462">Use [Azure Automation Desired State Configuration][dsc] (DSC) to configure VMs.</span></span>
* <span data-ttu-id="9b0b5-463">Utilisez un processus de déploiement automatisé pour le code d’application.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-463">Use an automated deployment process for application code.</span></span>

<span data-ttu-id="9b0b5-464">Voici deux concepts liés au déploiement résilient : *l’infrastructure en tant que code* et *l’infrastructure immuable*.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-464">Two concepts related to resilient deployment are *infrastructure as code* and *immutable infrastructure*.</span></span>

* <span data-ttu-id="9b0b5-465">**L’infrastructure en tant que code** consiste à utiliser un code pour gérer et configurer l’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-465">**Infrastructure as code** is the practice of using code to provision and configure infrastructure.</span></span> <span data-ttu-id="9b0b5-466">L’infrastructure en tant que code peut utiliser une approche déclarative ou une approche impérative (ou une combinaison des deux).</span><span class="sxs-lookup"><span data-stu-id="9b0b5-466">Infrastructure as code may use a declarative approach or an imperative approach (or a combination of both).</span></span> <span data-ttu-id="9b0b5-467">Les modèles Resource Manager sont un exemple d’approche déclarative.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-467">Resource Manager templates are an example of a declarative approach.</span></span> <span data-ttu-id="9b0b5-468">Les scripts PowerShell sont un exemple d’approche impérative.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-468">PowerShell scripts are an example of an imperative approach.</span></span>
* <span data-ttu-id="9b0b5-469">**L’infrastructure immuable** est le principe selon lequel vous ne devez pas modifier l’infrastructure après son déploiement en production.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-469">**Immutable infrastructure** is the principle that you shouldn’t modify infrastructure after it’s deployed to production.</span></span> <span data-ttu-id="9b0b5-470">Dans le cas contraire, vous pouvez parvenir à un état dans lequel les modifications ad hoc ont été appliquées. Il est alors difficile de savoir avec exactitude ce qui a changé et de raisonner sur le système.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-470">Otherwise, you can get into a state where ad hoc changes have been applied, so it's hard to know exactly what changed, and hard to reason about the system.</span></span> 

<span data-ttu-id="9b0b5-471">Une autre question qui se pose est comment déployer une mise à jour de l’application.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-471">Another question is how to roll out an application update.</span></span> <span data-ttu-id="9b0b5-472">Nous vous recommandons des techniques telles que le déploiement bleu-vert ou les versions de contrôle de validité, qui envoient les mises à jour de manière hautement contrôlée, afin de limiter les conséquences possibles d’un déploiement incorrect.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-472">We recommend techniques such as blue-green deployment or canary releases, which push updates in highly controlled way to minimize possible impacts from a bad deployment.</span></span>

* <span data-ttu-id="9b0b5-473">[le déploiement bleu-vert][blue-green] est une technique dans laquelle une mise à jour est déployée dans un environnement de production distinct de l’application en temps réel.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-473">[Blue-green deployment][blue-green] is a technique where an update is deployed into a production environment separate from the live application.</span></span> <span data-ttu-id="9b0b5-474">Après avoir validé le déploiement, passez le routage du trafic vers la version mise à jour.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-474">After you validate the deployment, switch the traffic routing to the updated version.</span></span> <span data-ttu-id="9b0b5-475">Cela est permis, par exemple, par les applications web Azure App Service avec des emplacements de préproduction.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-475">For example, Azure App Service Web Apps enables this with staging slots.</span></span>
* <span data-ttu-id="9b0b5-476">[Les versions de contrôle de validité][canary-release] sont similaires aux déploiements bleu-vert.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-476">[Canary releases][canary-release] are similar to blue-green deployments.</span></span> <span data-ttu-id="9b0b5-477">Au lieu de passer tout le trafic vers la version mise à jour, vous déployez la mise à jour pour un petit pourcentage d’utilisateurs, en routant une partie du trafic vers le nouveau déploiement.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-477">Instead of switching all traffic to the updated version, you roll out the update to a small percentage of users, by routing a portion of the traffic to the new deployment.</span></span> <span data-ttu-id="9b0b5-478">Si un problème se produit, arrêtez et revenez à l’ancien déploiement.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-478">If there is a problem, back off and revert to the old deployment.</span></span> <span data-ttu-id="9b0b5-479">Dans le cas contraire, routez davantage du trafic vers la nouvelle version, jusqu’à ce qu’elle obtienne 100 % du trafic.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-479">Otherwise, route more of the traffic to the new version, until it gets 100% of the traffic.</span></span>

<span data-ttu-id="9b0b5-480">Peu importe l’approche que vous choisissez, assurez-vous que vous pouvez revenir au dernier déploiement correct, au cas où la nouvelle version ne fonctionne pas.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-480">Whatever approach you take, make sure that you can roll back to the last-known-good deployment, in case the new version is not functioning.</span></span> <span data-ttu-id="9b0b5-481">En outre, le cas échéant, les journaux d’application doivent indiquer quelle version a provoqué l’erreur.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-481">Also, if errors occur, the application logs must indicate which version caused the error.</span></span> 

## <a name="monitor-to-detect-failures"></a><span data-ttu-id="9b0b5-482">Surveiller et détecter des défaillances</span><span class="sxs-lookup"><span data-stu-id="9b0b5-482">Monitor to detect failures</span></span>
<span data-ttu-id="9b0b5-483">La surveillance et les diagnostics sont cruciaux pour assurer la résilience.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-483">Monitoring and diagnostics are crucial for resiliency.</span></span> <span data-ttu-id="9b0b5-484">En cas de problème, vous devez savoir qu’il y a un échec, et vous devez en comprendre la cause.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-484">If something fails, you need to know that it failed, and you need insights into the cause of the failure.</span></span> 

<span data-ttu-id="9b0b5-485">La surveillance d’un système distribué à grande échelle constitue une difficulté importante.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-485">Monitoring a large-scale distributed system poses a significant challenge.</span></span> <span data-ttu-id="9b0b5-486">Pensez à une application qui s’exécute sur quelques dizaines de machines virtuelles &mdash; il n’est pas pratique de se connecter à chaque machine virtuelle une à une, et d’examiner les fichiers journaux, en essayant de résoudre un problème.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-486">Think about an application that runs on a few dozen VMs &mdash; it's not practical to log into each VM, one at a time, and look through log files, trying to troubleshoot a problem.</span></span> <span data-ttu-id="9b0b5-487">De plus, le nombre d’instances de machine virtuelle n’est probablement pas statique.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-487">Moreover, the number of VM instances is probably not static.</span></span> <span data-ttu-id="9b0b5-488">Les machines virtuelles sont ajoutées et supprimées tandis que l’application augmente et diminue la taille des instances. Parfois une instance peut échouer et doit être réapprovisionnée.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-488">VMs get added and removed as the application scales in and out, and occasionally an instance may fail and need to be reprovisioned.</span></span> <span data-ttu-id="9b0b5-489">En outre, une application cloud classique peut utiliser plusieurs banques de données (stockage Azure, SQL Database, Cosmos DB, cache Redis), et une seule action utilisateur peut couvrir plusieurs sous-systèmes.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-489">In addition, a typical cloud application might use multiple data stores (Azure storage, SQL Database, Cosmos DB, Redis cache), and a single user action may span multiple subsystems.</span></span> 

<span data-ttu-id="9b0b5-490">Vous pouvez considérer le processus de surveillance et de diagnostics comme un pipeline avec plusieurs étapes distinctes :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-490">You can think of the monitoring and diagnostics process as a pipeline with several distinct stages:</span></span>

![Contrat SLA composite](./images/monitoring.png)

* <span data-ttu-id="9b0b5-492">**Instrumentation**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-492">**Instrumentation**.</span></span> <span data-ttu-id="9b0b5-493">Les données brutes pour la surveillance et les diagnostics proviennent de diverses sources, comprenant les journaux d’application, les journaux de serveur web, les compteurs de performance du système d’exploitation, les journaux de base de données et les diagnostics intégrés dans la plateforme Azure.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-493">The raw data for monitoring and diagnostics comes from a variety of sources, including application logs, web server logs, OS performance counters, database logs, and diagnostics built into the Azure platform.</span></span> <span data-ttu-id="9b0b5-494">La plupart des services Azure possèdent une fonctionnalité de diagnostics que vous pouvez utiliser pour déterminer la cause des problèmes.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-494">Most Azure services have a diagnostics feature that you can use to determine the cause of problems.</span></span>
* <span data-ttu-id="9b0b5-495">**Collecte et stockage**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-495">**Collection and storage**.</span></span> <span data-ttu-id="9b0b5-496">Les données d’instrumentation brutes peuvent être contenues dans divers emplacements et sous des formats variés (par exemple, journaux des traces au niveau de l’application, les journaux IIS, les compteurs de performances).</span><span class="sxs-lookup"><span data-stu-id="9b0b5-496">Raw instrumentation data can be held in various locations and with various formats (e.g., application trace logs, IIS logs, performance counters).</span></span> <span data-ttu-id="9b0b5-497">Ces sources distinctes sont collectées, consolidées et placées dans un stockage fiable.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-497">These disparate sources are collected, consolidated, and put into reliable storage.</span></span>
* <span data-ttu-id="9b0b5-498">**Analyse et diagnostic**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-498">**Analysis and diagnosis**.</span></span> <span data-ttu-id="9b0b5-499">Une fois que les données sont consolidées, elles peuvent être analysées pour résoudre les problèmes et fournir une vue d’ensemble de l’intégrité de l’application.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-499">After the data is consolidated, it can be analyzed to troubleshoot issues and provide an overall view of application health.</span></span>
* <span data-ttu-id="9b0b5-500">**Visualisation et alertes**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-500">**Visualization and alerts**.</span></span> <span data-ttu-id="9b0b5-501">Dans cette étape, les données de télémétrie sont présentées de manière à ce qu’un opérateur puisse repérer rapidement les problèmes ou les tendances.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-501">In this stage, telemetry data is presented in such a way that an operator can quickly notice problems or trends.</span></span> <span data-ttu-id="9b0b5-502">Les exemples comprennent des tableaux de bord ou des alertes par courrier électronique.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-502">Example include dashboards or email alerts.</span></span>  

<span data-ttu-id="9b0b5-503">La surveillance est différente de la détection de défaillance.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-503">Monitoring is not the same as failure detection.</span></span> <span data-ttu-id="9b0b5-504">Par exemple, votre application peut détecter un échec temporaire et réessayer, n’entraînant aucun temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-504">For example, your application might detect a transient error and retry, resulting in no downtime.</span></span> <span data-ttu-id="9b0b5-505">Mais il doit également connecter l’opération de relance pour que vous puissiez surveiller le taux d’échec, afin d’obtenir une vue d’ensemble de l’intégrité de l’application.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-505">But it should also log the retry operation, so that you can monitor the error rate, in order to get an overall picture of application health.</span></span> 

<span data-ttu-id="9b0b5-506">Les journaux d’application sont une source importante de données de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-506">Application logs are an important source of diagnostics data.</span></span> <span data-ttu-id="9b0b5-507">Les meilleures pratiques pour la journalisation de l’application sont :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-507">Best practices for application logging include:</span></span>

* <span data-ttu-id="9b0b5-508">Journalisation en production.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-508">Log in production.</span></span> <span data-ttu-id="9b0b5-509">Autrement, vous perdez de la vision où vous en avez le plus besoin.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-509">Otherwise, you lose insight where you need it most.</span></span>
* <span data-ttu-id="9b0b5-510">Journalisation des événements au niveau des limites de service.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-510">Log events at service boundaries.</span></span> <span data-ttu-id="9b0b5-511">Vous devez inclure un ID de corrélation qui franchit les limites de service.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-511">Include a correlation ID that flows across service boundaries.</span></span> <span data-ttu-id="9b0b5-512">Si une transaction passe par plusieurs services et que l’un d’entre eux échoue, l’ID de corrélation vous aidera à déterminer la raison pour laquelle la transaction a échoué.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-512">If a transaction flows through multiple services and one of them fails, the correlation ID will help you pinpoint why the transaction failed.</span></span>
* <span data-ttu-id="9b0b5-513">Utilisez la journalisation sémantique, également appelée journalisation structurée.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-513">Use semantic logging, also known as structured logging.</span></span> <span data-ttu-id="9b0b5-514">Les journaux non structurés rendent difficile l’automatisation de la consommation et de l’analyse des données du journal, qui est nécessaire à l’échelle du cloud.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-514">Unstructured logs make it hard to automate the consumption and analysis of the log data, which is needed at cloud scale.</span></span>
* <span data-ttu-id="9b0b5-515">Utilisez la journalisation asynchrone.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-515">Use asynchronous logging.</span></span> <span data-ttu-id="9b0b5-516">Dans le cas contraire, le système de journalisation peut provoquer l’échec de l’application en provoquant la sauvegarde des demandes, comme elles sont bloquées en attendant d’écrire un événement de Journalisation.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-516">Otherwise, the logging system itself can cause the application to fail by causing requests to back up, as they block while waiting to write a logging event.</span></span>
* <span data-ttu-id="9b0b5-517">La journalisation de l’application est différente de l’audit.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-517">Application logging is not the same as auditing.</span></span> <span data-ttu-id="9b0b5-518">L’audit peut être effectué pour des raisons réglementaires ou de conformité.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-518">Auditing may be done for compliance or regulatory reasons.</span></span> <span data-ttu-id="9b0b5-519">Par conséquent, les enregistrements d’audit doivent être complets, et il n’est pas acceptable d’en supprimer lors du traitement des transactions.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-519">As such, audit records must be complete, and it's not acceptable to drop any while processing transactions.</span></span> <span data-ttu-id="9b0b5-520">Si une application nécessite un audit, il doit être maintenu séparé de la journalisation des diagnostics.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-520">If an application requires auditing, this should be kept separate from diagnostics logging.</span></span> 

<span data-ttu-id="9b0b5-521">Pour plus d’informations sur la surveillance et les diagnostics, consultez [Guide de surveillance et de diagnostics][monitoring-guidance].</span><span class="sxs-lookup"><span data-stu-id="9b0b5-521">For more information about monitoring and diagnostics, see [Monitoring and diagnostics guidance][monitoring-guidance].</span></span>

## <a name="respond-to-failures"></a><span data-ttu-id="9b0b5-522">Répondre aux défaillances</span><span class="sxs-lookup"><span data-stu-id="9b0b5-522">Respond to failures</span></span>
<span data-ttu-id="9b0b5-523">Les sections précédentes ont porté sur les stratégies de récupération automatique, qui sont critiques pour la haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-523">Previous sections have focused on automated recovery strategies, which are critical for high availability.</span></span> <span data-ttu-id="9b0b5-524">Toutefois, une intervention manuelle est parfois nécessaire.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-524">However, sometimes manual intervention is needed.</span></span>

* <span data-ttu-id="9b0b5-525">**Alertes**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-525">**Alerts**.</span></span> <span data-ttu-id="9b0b5-526">Surveillez votre application pour trouver des signes précurseurs pouvant nécessiter une intervention proactive.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-526">Monitor your application for warning signs that may require proactive intervention.</span></span> <span data-ttu-id="9b0b5-527">Par exemple, si vous voyez que SQL Database ou Cosmos DB limitent régulièrement votre application, vous devrez peut-être améliorer la capacité de votre base de données ou optimiser vos requêtes.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-527">For example, if you see that SQL Database or Cosmos DB consistently throttles your application, you might need to increase your database capacity or optimize your queries.</span></span> <span data-ttu-id="9b0b5-528">Dans cet exemple, même si l’application peut gérer les erreurs de limitation en toute transparence, votre télémétrie doit toujours déclencher une alerte afin que vous puissiez suivre l’activité.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-528">In this example, even though the application might handle the throttling errors transparently, your telemetry should still raise an alert so that you can follow up.</span></span>  
* <span data-ttu-id="9b0b5-529">**Basculement manuel**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-529">**Manual failover**.</span></span> <span data-ttu-id="9b0b5-530">Certains systèmes ne peuvent pas basculer automatiquement et nécessitent un basculement manuel.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-530">Some systems cannot fail over automatically and require a manual failover.</span></span> 
* <span data-ttu-id="9b0b5-531">**Test de disponibilité opérationnelle**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-531">**Operational readiness testing**.</span></span> <span data-ttu-id="9b0b5-532">Si votre application bascule dans une région secondaire, vous devez effectuer un test de disponibilité opérationnelle avant de basculer vers la région principale.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-532">If your application fails over to a secondary region, you should perform an operational readiness test before you fail back to the primary region.</span></span> <span data-ttu-id="9b0b5-533">Le test permet de vérifier que la région principale est intègre et de nouveau prête à recevoir du trafic.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-533">The test should verify that the primary region is healthy and ready to receive traffic again.</span></span>
* <span data-ttu-id="9b0b5-534">**Vérification de la cohérence des données**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-534">**Data consistency check**.</span></span> <span data-ttu-id="9b0b5-535">Si une défaillance se produit dans un magasin de données, des incohérences de données pourront être trouvées lorsque le magasin sera de nouveau disponible, en particulier si les données ont été répliquées.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-535">If a failure happens in a data store, there may be data inconsistencies when the store becomes available again, especially if the data was replicated.</span></span> 
* <span data-ttu-id="9b0b5-536">**Restauration à partir de la sauvegarde**.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-536">**Restoring from backup**.</span></span> <span data-ttu-id="9b0b5-537">Par exemple, si SQL Database subit une panne régionale, vous pouvez effectuer une géo-restauration de la base de données à partir de la dernière sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-537">For example, if SQL Database experiences a regional outage, you can geo-restore the database from the latest backup.</span></span>

<span data-ttu-id="9b0b5-538">Documentez et testez votre plan de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-538">Document and test your disaster recovery plan.</span></span> <span data-ttu-id="9b0b5-539">Évaluez l’impact commercial des défaillances d’application.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-539">Evaluate the business impact of application failures.</span></span> <span data-ttu-id="9b0b5-540">Automatisez le processus autant que possible et documentez toutes les étapes manuelles, telles que le basculement manuel ou la restauration des données à partir des sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-540">Automate the process as much as possible, and document any manual steps, such as manual failover or data restoration from backups.</span></span> <span data-ttu-id="9b0b5-541">Testez régulièrement votre processus de récupération d’urgence pour valider et améliorer le plan.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-541">Regularly test your disaster recovery process to validate and improve the plan.</span></span> 

## <a name="summary"></a><span data-ttu-id="9b0b5-542">Résumé</span><span class="sxs-lookup"><span data-stu-id="9b0b5-542">Summary</span></span>
<span data-ttu-id="9b0b5-543">Cet article décrit la résilience d’un point de vue global, en mettant en évidence certains des défis uniques du cloud.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-543">This article discussed resiliency from a holistic perspective, emphasizing some of the unique challenges of the cloud.</span></span> <span data-ttu-id="9b0b5-544">Ceux-ci incluent la nature distribuée du cloud computing, l’utilisation de matériel standard, et la présence des défaillances réseau temporaires.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-544">These include the distributed nature of cloud computing, the use of commodity hardware, and the presence of transient network faults.</span></span>

<span data-ttu-id="9b0b5-545">Voici les principaux points de l’article à retenir :</span><span class="sxs-lookup"><span data-stu-id="9b0b5-545">Here are the major points to take away from this article:</span></span>

* <span data-ttu-id="9b0b5-546">La résilience entraîne une plus grande disponibilité et une réduction du délai moyen pour récupérer en cas de panne.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-546">Resiliency leads to higher availability, and lower mean time to recover from failures.</span></span> 
* <span data-ttu-id="9b0b5-547">L’obtention de la résilience dans le cloud requiert un ensemble de techniques diverses à partir de solutions traditionnelles locales.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-547">Achieving resiliency in the cloud requires a different set of techniques from traditional on-premises solutions.</span></span> 
* <span data-ttu-id="9b0b5-548">La résilience ne se produit pas par accident.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-548">Resiliency does not happen by accident.</span></span> <span data-ttu-id="9b0b5-549">Elle doit être conçue et intégrée dès le début.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-549">It must be designed and built in from the start.</span></span>
* <span data-ttu-id="9b0b5-550">La résilience touche chaque partie du cycle de vie de l’application, depuis la planification et le codage jusqu’aux opérations.</span><span class="sxs-lookup"><span data-stu-id="9b0b5-550">Resiliency touches every part of the application lifecycle, from planning and coding to operations.</span></span>
* <span data-ttu-id="9b0b5-551">Testez et surveillez !</span><span class="sxs-lookup"><span data-stu-id="9b0b5-551">Test and monitor!</span></span>


<!-- links -->

[blue-green]: http://martinfowler.com/bliki/BlueGreenDeployment.html
[canary-release]: http://martinfowler.com/bliki/CanaryRelease.html
[circuit-breaker-pattern]: https://msdn.microsoft.com/library/dn589784.aspx
[compensating-transaction-pattern]: https://msdn.microsoft.com/library/dn589804.aspx
[containers]: https://en.wikipedia.org/wiki/Operating-system-level_virtualization
[dsc]: /azure/automation/automation-dsc-overview
[contingency-planning-guide]: http://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-34r1.pdf
[fma]: failure-mode-analysis.md
[hystrix]: http://techblog.netflix.com/2012/11/hystrix.html
[jmeter]: http://jmeter.apache.org/
[load-leveling-pattern]: ../patterns/queue-based-load-leveling.md
[monitoring-guidance]: ../best-practices/monitoring.md
[ra-basic-web]: ../reference-architectures/app-service-web-app/basic-web-app.md
[ra-multi-vm]: ../reference-architectures/virtual-machines-windows/multi-vm.md
[checklist]: ../checklist/resiliency.md
[retry-pattern]: ../patterns/retry.md
[retry-service-specific guidance]: ../best-practices/retry-service-specific.md
[sla]: https://azure.microsoft.com/support/legal/sla/
[throttling-pattern]: ../patterns/throttling.md
[tm]: https://azure.microsoft.com/services/traffic-manager/
[tm-failover]: /azure/traffic-manager/traffic-manager-monitoring
[tm-sla]: https://azure.microsoft.com/support/legal/sla/traffic-manager/v1_0/
[vsts]: https://www.visualstudio.com/features/vso-cloud-load-testing-vs.aspx
