---
title: Échec et récupération d’urgence pour les applications Azure
description: Approches de la vue d’ensemble de la récupération d’urgence dans Azure
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: f00341b06b8092c798d6260317226190cbace66b
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646557"
---
# <a name="failure-and-disaster-recovery-for-azure-applications"></a><span data-ttu-id="cb8f5-103">Échec et récupération d’urgence pour les applications Azure</span><span class="sxs-lookup"><span data-stu-id="cb8f5-103">Failure and disaster recovery for Azure applications</span></span>

<span data-ttu-id="cb8f5-104">*Récupération d’urgence* est le processus de restauration des fonctionnalités de l’application à la suite d’une perte catastrophique.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-104">*Disaster recovery* is the process of restoring application functionality in the wake of a catastrophic loss.</span></span>

<span data-ttu-id="cb8f5-105">Votre tolérance des fonctionnalités réduites lors d’un sinistre est une décision qui varie d’une application à l’autre.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-105">Your tolerance for reduced functionality during a disaster is a business decision that varies from one application to the next.</span></span> <span data-ttu-id="cb8f5-106">Il peut être acceptable pour certaines applications doit être totalement indisponible ou partiellement disponibles avec des fonctionnalités réduites ou retardée de traitement pour une période donnée.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-106">It might be acceptable for some applications to be completely unavailable or to be partially available with reduced functionality or delayed processing for a period of time.</span></span> <span data-ttu-id="cb8f5-107">Pour d’autres applications, des fonctionnalités réduites sont inacceptable.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-107">For other applications, any reduced functionality is unacceptable.</span></span>

## <a name="disaster-recovery-plan"></a><span data-ttu-id="cb8f5-108">Plan de récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="cb8f5-108">Disaster recovery plan</span></span>

<span data-ttu-id="cb8f5-109">Commencez par créer un plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-109">Start by creating a recovery plan.</span></span> <span data-ttu-id="cb8f5-110">Le plan est considérée comme terminé une fois qu’il a été entièrement testée.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-110">The plan is considered complete after it has been fully tested.</span></span> <span data-ttu-id="cb8f5-111">Inclure les personnes, les processus et les applications nécessaires pour rétablir les fonctionnalités au sein de l’accord de niveau de service (SLA) que vous avez défini pour vos clients.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-111">Include the people, processes, and applications needed to restore functionality within the service-level agreement (SLA) you've defined for your customers.</span></span>

<span data-ttu-id="cb8f5-112">Prenez en compte les suggestions suivantes lors de la création et le test de votre plan de récupération d’urgence :</span><span class="sxs-lookup"><span data-stu-id="cb8f5-112">Consider the following suggestions when creating and testing your disaster recovery plan:</span></span>

- <span data-ttu-id="cb8f5-113">Dans votre plan, incluez le processus pour contacter le support et pour faire remonter les problèmes.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-113">In your plan, include the process for contacting support and for escalating issues.</span></span> <span data-ttu-id="cb8f5-114">Ces informations aideront à éviter les temps d’arrêt prolongé lorsque vous travaillez au cours du processus de récupération pour la première fois.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-114">This information will help to avoid prolonged downtime as you work out the recovery process for the first time.</span></span>
- <span data-ttu-id="cb8f5-115">Évaluez l’impact commercial des défaillances d’application.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-115">Evaluate the business impact of application failures.</span></span>
- <span data-ttu-id="cb8f5-116">Choisissez une architecture de récupération de plusieurs régions pour les applications stratégiques.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-116">Choose a cross-region recovery architecture for mission-critical applications.</span></span>
- <span data-ttu-id="cb8f5-117">Identifiez un propriétaire spécifique du plan de récupération d’urgence, incluant des phases d’automatisation et de test.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-117">Identify a specific owner of the disaster recovery plan, including automation and testing.</span></span>
- <span data-ttu-id="cb8f5-118">Documentez le processus, en particulier toutes les étapes manuelles.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-118">Document the process, especially any manual steps.</span></span>
- <span data-ttu-id="cb8f5-119">Automatiser le processus autant que possible.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-119">Automate the process as much as possible.</span></span>
- <span data-ttu-id="cb8f5-120">Établir une stratégie de sauvegarde pour tous les référence et les données transactionnelles et test de restauration sauvegarde régulièrement.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-120">Establish a backup strategy for all reference and transactional data, and test backup restoration regularly.</span></span>
- <span data-ttu-id="cb8f5-121">Configurer des alertes pour la pile des services Azure consommés par votre application.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-121">Set up alerts for the stack of the Azure services consumed by your application.</span></span>
- <span data-ttu-id="cb8f5-122">Former le personnel chargé des opérations d’exécution du plan.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-122">Train operations staff to execute the plan.</span></span>
- <span data-ttu-id="cb8f5-123">Effectuer des simulations d’urgence régulières pour valider et améliorer le plan.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-123">Perform regular disaster simulations to validate and improve the plan.</span></span>

<span data-ttu-id="cb8f5-124">Si vous utilisez [Azure Site Recovery](/azure/site-recovery/) pour répliquer des machines virtuelles (VM), créez un plan de récupération entièrement automatisés pour effectuer le basculement de l’application entière.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-124">If you're using [Azure Site Recovery](/azure/site-recovery/) to replicate virtual machines (VMs), create a fully automated recovery plan to fail over the entire application.</span></span>

## <a name="manual-responses"></a><span data-ttu-id="cb8f5-125">Réponses manuelles</span><span class="sxs-lookup"><span data-stu-id="cb8f5-125">Manual responses</span></span>

<span data-ttu-id="cb8f5-126">Automation est idéale, certaines stratégies de récupération d’urgence exigent des réponses manuelles.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-126">Although automation is ideal, some strategies for disaster recovery require manual responses.</span></span>

### <a name="alerts"></a><span data-ttu-id="cb8f5-127">Alertes</span><span class="sxs-lookup"><span data-stu-id="cb8f5-127">Alerts</span></span>

<span data-ttu-id="cb8f5-128">Surveillez votre application pour trouver des signes précurseurs pouvant nécessiter une intervention proactive.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-128">Monitor your application for warning signs that may require proactive intervention.</span></span> <span data-ttu-id="cb8f5-129">Par exemple, si la base de données SQL Azure ou Azure Cosmos DB limite régulièrement votre application, vous devrez peut-être augmenter la capacité de votre base de données ou optimiser vos requêtes.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-129">For example, if Azure SQL Database or Azure Cosmos DB consistently throttles your application, you might need to increase your database capacity or optimize your queries.</span></span> <span data-ttu-id="cb8f5-130">Même si l’application peut gérer les erreurs de limitation en toute transparence, vos données de télémétrie doivent toujours déclencher une alerte afin que vous pouvez suivre.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-130">Even though the application might handle the throttling errors transparently, your telemetry should still raise an alert so that you can follow up.</span></span>

<span data-ttu-id="cb8f5-131">Pour les limites de service et les seuils de quota, nous vous recommandons de configurer des alertes sur les journaux de métriques et diagnostics de ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-131">For service limits and quota thresholds, we recommend configuring alerts on Azure resources metrics and diagnostics logs.</span></span> <span data-ttu-id="cb8f5-132">Dans la mesure du possible, configurez des alertes sur les mesures, qui sont une latence plus faible que les journaux de diagnostics.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-132">When possible, set up alerts on metrics, which are lower latency than diagnostics logs.</span></span>

<span data-ttu-id="cb8f5-133">Via [Resource Health](/azure/service-health/resource-health-checks-resource-types), Azure fournit certaines d’intégrité intégrés vérifications d’état qui peuvent vous aider à diagnostiquer les problèmes de limitation de service Azure.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-133">Through [Resource Health](/azure/service-health/resource-health-checks-resource-types), Azure provides some built-in health status checks that can help you diagnose Azure service throttling issues.</span></span>

### <a name="failover"></a><span data-ttu-id="cb8f5-134">Basculement</span><span class="sxs-lookup"><span data-stu-id="cb8f5-134">Failover</span></span>

<span data-ttu-id="cb8f5-135">Configurer une stratégie de récupération d’urgence pour chaque application Azure et de ses services Azure.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-135">Configure a disaster recovery strategy for each Azure application and its Azure services.</span></span> <span data-ttu-id="cb8f5-136">Stratégies de déploiement acceptable pour prendre en charge la récupération d’urgence peuvent varier selon les contrats SLA requis pour tous les composants de chaque application.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-136">Acceptable deployment strategies to support disaster recovery may vary based on the SLAs required for all components of each application.</span></span>  

<span data-ttu-id="cb8f5-137">Azure fournit des fonctionnalités différentes dans de nombreux services Azure pour permettre un basculement manuel, tel que [redis cache géo-réplicas](/azure/azure-cache-for-redis/cache-how-to-geo-replication), ou pour automatisé de basculement, tel que [groupes de basculement automatique SQL](/azure/sql-database/sql-database-auto-failover-group).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-137">Azure provides different features within many Azure services to allow for manual failover, such as [redis cache geo-replicas](/azure/azure-cache-for-redis/cache-how-to-geo-replication), or for automated failover, such as [SQL auto-failover groups](/azure/sql-database/sql-database-auto-failover-group).</span></span> <span data-ttu-id="cb8f5-138">Par exemple : </span><span class="sxs-lookup"><span data-stu-id="cb8f5-138">For example:</span></span>

- <span data-ttu-id="cb8f5-139">Pour une application qui utilise principalement des machines virtuelles, vous pouvez utiliser Azure Site Recovery pour les niveaux web et logique.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-139">For an application that mainly uses virtual machines, you can use Azure Site Recovery for the web and logic tiers.</span></span> <span data-ttu-id="cb8f5-140">Pour plus d’informations, consultez [architecture de récupération d’urgence Azure vers Azure](/azure/site-recovery/azure-to-azure-architecture).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-140">For more information, see [Azure to Azure disaster recovery architecture](/azure/site-recovery/azure-to-azure-architecture).</span></span> <span data-ttu-id="cb8f5-141">Pour SQL Server sur des machines virtuelles, utilisez [groupes de disponibilité SQL Server Always On](/azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-availability-group-dr).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-141">For SQL Server on VMs, use [SQL Server Always On availability groups](/azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-availability-group-dr).</span></span>
- <span data-ttu-id="cb8f5-142">Pour une application qui utilise le Service d’application et de la base de données SQL Azure, vous pouvez utiliser un plan de Service d’application de niveau plus petits configuré dans la région secondaire, qui opère lorsqu’un basculement se produit.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-142">For an application that uses App Service and Azure SQL Database, you can use a smaller tier App Service plan configured in the secondary region, which autoscales when a failover occurs.</span></span> <span data-ttu-id="cb8f5-143">Utilisez les groupes de basculement pour le niveau de base de données.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-143">Use failover groups for the database tier.</span></span>

<span data-ttu-id="cb8f5-144">Dans les deux cas, un [Azure Traffic Manager](/azure/traffic-manager/traffic-manager-overview) profil offre pour le basculement automatique entre les régions.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-144">In either scenario, an [Azure Traffic Manager](/azure/traffic-manager/traffic-manager-overview) profile provides for the automated failover across regions.</span></span> <span data-ttu-id="cb8f5-145">[Équilibreurs de charge](/azure/load-balancer/load-balancer-overview) ou [passerelles d’application](/azure/application-gateway/overview) doivent être configurés dans la région secondaire pour prendre en charge une disponibilité plus rapide lors du basculement.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-145">[Load balancers](/azure/load-balancer/load-balancer-overview) or [application gateways](/azure/application-gateway/overview) should be set up in the secondary region to support faster availability upon failover.</span></span>

### <a name="operational-readiness-testing"></a><span data-ttu-id="cb8f5-146">Test de disponibilité opérationnelle</span><span class="sxs-lookup"><span data-stu-id="cb8f5-146">Operational readiness testing</span></span>

<span data-ttu-id="cb8f5-147">Effectuer un test de disponibilité opérationnelle pour le basculement vers la région secondaire et pour la restauration automatique vers la région primaire.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-147">Perform an operational readiness test for failover to the secondary region and for failback to the primary region.</span></span> <span data-ttu-id="cb8f5-148">De nombreux services Azure prennent en charge les basculements manuels ou les tests de basculement dans le cadre de simulations de reprise d’activité.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-148">Many Azure services support manual failover or test failover for disaster recovery drills.</span></span> <span data-ttu-id="cb8f5-149">Vous pouvez également simuler une panne en cours d’arrêt ou en supprimant des services Azure.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-149">Alternatively, you can simulate an outage by shutting down or removing Azure services.</span></span>

## <a name="application-failure"></a><span data-ttu-id="cb8f5-150">Échec de l’application</span><span class="sxs-lookup"><span data-stu-id="cb8f5-150">Application failure</span></span>

<span data-ttu-id="cb8f5-151">Échecs d’application sont récupérables ou non récupérable.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-151">Application failures are either recoverable or nonrecoverable.</span></span> <span data-ttu-id="cb8f5-152">Vous pouvez atténuer une erreur récupérable, mais des erreurs non récupérable provoqueront l’arrêt de l’application.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-152">You can mitigate a recoverable error, but nonrecoverable errors will bring down the application.</span></span>

- <span data-ttu-id="cb8f5-153">Certaines défaillances peuvent être adressés en toute transparence en gérant automatiquement les erreurs et en prenant d’autres mesures.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-153">Some failures can be addressed transparently by handling faults automatically and taking alternate actions.</span></span> <span data-ttu-id="cb8f5-154">Par exemple, Traffic Manager gère automatiquement les défaillances résultant du logiciel de matériel ou système d’exploitation sous-jacent dans la machine virtuelle hôte.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-154">For example, Traffic Manager automatically handles failures that result from the underlying hardware or operating system software in the host virtual machine.</span></span>
- <span data-ttu-id="cb8f5-155">Avec des erreurs, l’application peut continuer le traitement des demandes des utilisateurs avec des fonctionnalités réduites.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-155">With some errors, the application can continue handling user requests with reduced functionality.</span></span>
- <span data-ttu-id="cb8f5-156">Les interruptions de service plus graves peuvent rendre l’application non disponible.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-156">More severe service disruptions might render the application unavailable.</span></span>

<span data-ttu-id="cb8f5-157">Un système bien conçu sépare les responsabilités au niveau du service &mdash; au moment du design et de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-157">A well-designed system separates responsibilities at the service level &mdash; at design time and at runtime.</span></span> <span data-ttu-id="cb8f5-158">Cette séparation empêche une interruption de service dépendant d’arrêter l’application entière.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-158">This separation prevents a dependent service disruption from bringing down the entire application.</span></span> <span data-ttu-id="cb8f5-159">Par exemple, considérez une application de commerce électronique avec les modules suivants :</span><span class="sxs-lookup"><span data-stu-id="cb8f5-159">For example, consider a web commerce application with the following modules:</span></span>

![AJOUTER UN LIEN À UNE IMAGE CLIPART](./_images/disaster-recovery.png)

<span data-ttu-id="cb8f5-161">Si la base de données pour l’hébergement des commandes tombe en panne, le service de traitement des commandes ne peut pas traiter les transactions commerciales.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-161">If the database for hosting orders goes down, the Order Processing service can't process sales transactions.</span></span> <span data-ttu-id="cb8f5-162">Selon l’architecture, il peut être impossible pour les services de finalisation des commandes et de traitement des commandes continuer.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-162">Depending on the architecture, it might be impossible for the Order Submission and Order Processing services to continue.</span></span> <span data-ttu-id="cb8f5-163">Toutefois, si les données de produit sont stockées dans un autre emplacement, le catalogue de produits est toujours disponible, même si les autres parties de l’application peuvent être indisponibles.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-163">However, if product data is stored in a different location, the Product Catalog is still available, even though other parts of the application might be unavailable.</span></span>

<span data-ttu-id="cb8f5-164">C’est à vous pour déterminer comment l’application va informer les utilisateurs des problèmes temporaires et pour générer les notifications appropriées dans le système.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-164">It's up to you to determine how the application will inform users of any temporary problems and to build appropriate notifications into the system.</span></span> <span data-ttu-id="cb8f5-165">Dans l’exemple précédent, l’application peut autoriser pour afficher les produits et pour les ajouter à un panier d’achat.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-165">In the previous example, the application might allow for viewing products and for adding them to a shopping cart.</span></span> <span data-ttu-id="cb8f5-166">Toutefois, lorsque le client tente d’effectuer un achat, l’application doit notifier ces derniers que la fonctionnalité de commande est temporairement indisponible.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-166">However, when the customer attempts to make a purchase, the application should notify them that the ordering functionality is temporarily unavailable.</span></span> <span data-ttu-id="cb8f5-167">Bien que pas idéal pour le client, cette approche empêche une interruption du service de l’application.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-167">Although not ideal for the customer, this approach prevents an application-wide service disruption.</span></span>

## <a name="data-corruption-and-restoration"></a><span data-ttu-id="cb8f5-168">Une restauration et une altération des données</span><span class="sxs-lookup"><span data-stu-id="cb8f5-168">Data corruption and restoration</span></span>

<span data-ttu-id="cb8f5-169">Si un magasin de données échoue, il peut-être des incohérences de données lorsqu’il redevient disponible, en particulier si les données ont été répliquées.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-169">If a data store fails, there might be data inconsistencies when it becomes available again, especially if the data was replicated.</span></span> <span data-ttu-id="cb8f5-170">Comprendre l’objectif de temps de récupération (RTO) et d’un point de récupération (objectif) des magasins de données répliquées peut vous aider à prédire la quantité de perte de données.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-170">Understanding the recovery time objective (RTO) and recovery point objective (RPO) of replicated data stores can help you predict the amount of data loss.</span></span>

<span data-ttu-id="cb8f5-171">Pour comprendre si le basculement entre les régions est démarré manuellement ou par Microsoft, consultez les contrats SLA de service Azure.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-171">To understand whether the cross-regional failover is started manually or by Microsoft, review the Azure service SLAs.</span></span> <span data-ttu-id="cb8f5-172">Pour les services avec aucun SLA pour le basculement entre régions, Microsoft généralement décide quand basculer et généralement hiérarchise la récupération de données dans la région primaire.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-172">For services with no SLAs for cross-regional failover, Microsoft typically decides when to fail over and usually prioritizes recovery of data in the primary region.</span></span> <span data-ttu-id="cb8f5-173">Si les données dans la région primaire sont considéré comme irrécupérables, Microsoft bascule vers la région secondaire.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-173">If data in the primary region is deemed unrecoverable, Microsoft fails over to the secondary region.</span></span>

### <a name="restoring-data-from-backups"></a><span data-ttu-id="cb8f5-174">Restauration des données à partir de sauvegardes</span><span class="sxs-lookup"><span data-stu-id="cb8f5-174">Restoring data from backups</span></span>

<span data-ttu-id="cb8f5-175">Sauvegardes vous permet de protéger contre la perte d’un composant de l’application en raison d’une suppression accidentelle ou une altération des données.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-175">Backups protect you from losing a component of the application because of accidental deletion or data corruption.</span></span> <span data-ttu-id="cb8f5-176">Ils conservent une version fonctionnelle du composant à partir d’un moment antérieur, vous pouvez utiliser pour la restaurer.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-176">They preserve a functional version of the component from an earlier time, which you can use to restore it.</span></span>

<span data-ttu-id="cb8f5-177">Stratégies de récupération d’urgence ne sont pas un substitut pour les sauvegardes, mais les sauvegardes régulières des données d’application prend en charge certains scénarios de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-177">Disaster recovery strategies are not a replacement for backups, but regular backups of application data support some disaster recovery scenarios.</span></span> <span data-ttu-id="cb8f5-178">Vos choix de stockage de sauvegarde doit être basée sur votre stratégie de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-178">Your backup storage choices should be based on your disaster recovery strategy.</span></span>

<span data-ttu-id="cb8f5-179">La fréquence d’exécution du processus de sauvegarde détermine votre RPO.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-179">The frequency of running the backup process determines your RPO.</span></span> <span data-ttu-id="cb8f5-180">Par exemple, si vous effectuez des sauvegardes toutes les heures et un incident survient deux minutes avant la sauvegarde, vous perdrez ainsi 58 minutes de données.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-180">For example, if you perform hourly backups and a disaster occurs two minutes before the backup, you will lose 58 minutes of data.</span></span> <span data-ttu-id="cb8f5-181">Votre plan de récupération d’urgence doit inclure des méthodes de résolution de perte de données.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-181">Your disaster recovery plan should include how you will address lost data.</span></span>

<span data-ttu-id="cb8f5-182">Il est courant pour les données dans une banque de données aux données de référence dans un autre magasin.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-182">It's common for data in one data store to reference data in another store.</span></span> <span data-ttu-id="cb8f5-183">Par exemple, considérez une base de données SQL avec une colonne qui accède à un objet blob dans stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-183">For example, consider a SQL Database with a column that links to a blob in Azure Storage.</span></span> <span data-ttu-id="cb8f5-184">Si les sauvegardes ne sont pas effectuées simultanément, la base de données peut avoir un pointeur vers un objet blob qui n’a pas été sauvegardé avant la défaillance.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-184">If backups don't happen simultaneously, the database might have a pointer to a blob that wasn't backed up before the failure.</span></span> <span data-ttu-id="cb8f5-185">L’application ou le plan de récupération d’urgence doit implémenter des processus pour gérer cette incohérence après une récupération.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-185">The application or the disaster recovery plan must implement processes to handle this inconsistency after a recovery.</span></span>

> [!NOTE]
> <span data-ttu-id="cb8f5-186">Dans certains scénarios, tels que celui de machines virtuelles sauvegardées à l’aide [sauvegarde Azure](/azure/backup/backup-azure-vms-first-look-arm), vous pouvez restaurer uniquement à partir d’une sauvegarde dans la même région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-186">In some scenarios, such as that of VMs backed up using [Azure Backup](/azure/backup/backup-azure-vms-first-look-arm), you can restore only from a backup in the same region.</span></span> <span data-ttu-id="cb8f5-187">D’autres services Azure, tel que [Cache Azure pour Redis](/azure/azure-cache-for-redis/cache-how-to-geo-replication), fournir des sauvegardes géo-répliquée, que vous pouvez utiliser pour restaurer les services entre les régions.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-187">Other Azure services, such as [Azure Cache for Redis](/azure/azure-cache-for-redis/cache-how-to-geo-replication), provide geo-replicated backups, which you can use to restore services across regions.</span></span>

### <a name="azure-storage-and-azure-sql-database"></a><span data-ttu-id="cb8f5-188">Stockage Azure et Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="cb8f5-188">Azure Storage and Azure SQL Database</span></span>

<span data-ttu-id="cb8f5-189">Azure stocke automatiquement les données de stockage Azure et base de données SQL trois fois dans différents domaines d’erreur dans la même région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-189">Azure automatically stores Azure Storage and SQL Database data three times within different fault domains in the same region.</span></span> <span data-ttu-id="cb8f5-190">Si vous utilisez la géoréplication, les données sont stockées dans trois domaines supplémentaires dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-190">If you use geo-replication, the data is stored three additional times in a different region.</span></span> <span data-ttu-id="cb8f5-191">Toutefois, si les données sont endommagées ou supprimées dans la copie principale (par exemple, en raison d’une erreur de l’utilisateur), la réplication des modifications dans les autres copies.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-191">However, if the data is corrupted or deleted in the primary copy (for example, because of user error), the changes replicate to the other copies.</span></span>

<span data-ttu-id="cb8f5-192">Vous avez deux options pour la gestion de la corruption potentielle des données ou la suppression :</span><span class="sxs-lookup"><span data-stu-id="cb8f5-192">You have two options for managing potential data corruption or deletion:</span></span>

- <span data-ttu-id="cb8f5-193">**Créer une stratégie de sauvegarde personnalisée.**</span><span class="sxs-lookup"><span data-stu-id="cb8f5-193">**Create a custom backup strategy.**</span></span> <span data-ttu-id="cb8f5-194">Vous pouvez stocker vos sauvegardes dans Azure ou en local, en fonction de vos besoins et les règles de gouvernance.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-194">You can store your backups in Azure or on-premises, depending on your business requirements and governance regulations.</span></span>
- <span data-ttu-id="cb8f5-195">**Utilisez l’option de restauration de point-à-temps** pour récupérer une base de données SQL.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-195">**Use the point-in-time restore option** to recover a SQL Database.</span></span>

#### <a name="azure-storage-recovery"></a><span data-ttu-id="cb8f5-196">Récupération de stockage Azure</span><span class="sxs-lookup"><span data-stu-id="cb8f5-196">Azure Storage recovery</span></span>

<span data-ttu-id="cb8f5-197">Vous pouvez développer un processus de sauvegarde personnalisé pour le stockage Azure ou utiliser un des nombreux outils de sauvegarde tiers.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-197">You can develop a custom backup process for Azure Storage or use one of many third-party backup tools.</span></span>

<span data-ttu-id="cb8f5-198">Stockage Azure fournit la résilience des données via des réplicas automatisés, mais il n’empêche pas les utilisateurs ou code d’application à partir de la corruption des données.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-198">Azure Storage provides data resiliency through automated replicas, but it doesn't prevent application code or users from corrupting data.</span></span> <span data-ttu-id="cb8f5-199">La conservation de données fidélité après une erreur d’application ou un utilisateur nécessite des techniques plus avancées, telles que la copie des données vers un emplacement de stockage secondaire avec un journal d’audit.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-199">Maintaining data fidelity after application or user error requires more advanced techniques, such as copying the data to a secondary storage location with an audit log.</span></span> <span data-ttu-id="cb8f5-200">Vous disposez de plusieurs options :</span><span class="sxs-lookup"><span data-stu-id="cb8f5-200">You have several options:</span></span>

- [<span data-ttu-id="cb8f5-201">**Objets BLOB de blocs.**</span><span class="sxs-lookup"><span data-stu-id="cb8f5-201">**Block blobs.**</span></span>](/rest/api/storageservices/understanding-block-blobs--append-blobs--and-page-blobs) <span data-ttu-id="cb8f5-202">Créez un instantané à un point dans le temps de chaque objet blob de blocs.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-202">Create a point-in-time snapshot of each block blob.</span></span> <span data-ttu-id="cb8f5-203">Pour chaque instantané, vous êtes facturé uniquement pour le stockage requis pour stocker les différences dans l’objet blob depuis l’état de capture instantanée précédente.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-203">For each snapshot, you are charged only for the storage required to store the differences within the blob since the previous snapshot state.</span></span> <span data-ttu-id="cb8f5-204">Les instantanés dépendent de l’objet blob d’origine, nous vous recommandons de copier vers un autre objet blob ou même vers un autre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-204">The snapshots are dependent on the original blob, so we recommend copying to another blob or even to another storage account.</span></span> <span data-ttu-id="cb8f5-205">Cette approche garantit que les données de sauvegarde sont protégées contre une suppression accidentelle.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-205">This approach ensures that backup data is protected against accidental deletion.</span></span> <span data-ttu-id="cb8f5-206">Utilisez [AzCopy](/azure/storage/common/storage-use-azcopy) ou [Azure PowerShell](/azure/storage/common/storage-powershell-guide-full) pour copier les objets BLOB vers un autre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-206">Use [AzCopy](/azure/storage/common/storage-use-azcopy) or [Azure PowerShell](/azure/storage/common/storage-powershell-guide-full) to copy the blobs to another storage account.</span></span>

    <span data-ttu-id="cb8f5-207">Pour plus d’informations, consultez [Création d’un instantané d’objet blob](/rest/api/storageservices/creating-a-snapshot-of-a-blob).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-207">For more information, see [Creating a Snapshot of a Blob](/rest/api/storageservices/creating-a-snapshot-of-a-blob).</span></span>

- [<span data-ttu-id="cb8f5-208">**Azure Files.**</span><span class="sxs-lookup"><span data-stu-id="cb8f5-208">**Azure Files.**</span></span>](/azure/storage/files/storage-files-introduction) <span data-ttu-id="cb8f5-209">Utilisez [des instantanés de partage](/azure/storage/files/storage-snapshots-files), AzCopy ou PowerShell pour copier vos fichiers vers un autre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-209">Use [share snapshots](/azure/storage/files/storage-snapshots-files), AzCopy, or PowerShell to copy your files to another storage account.</span></span>
- [<span data-ttu-id="cb8f5-210">**Stockage Table Azure.**</span><span class="sxs-lookup"><span data-stu-id="cb8f5-210">**Azure Table storage.**</span></span>](/azure/storage/tables/table-storage-overview) <span data-ttu-id="cb8f5-211">Utilisez AzCopy pour exporter les données de table vers un autre compte de stockage dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-211">Use AzCopy to export the table data into another storage account in another region.</span></span>

#### <a name="sql-database-recovery"></a><span data-ttu-id="cb8f5-212">Récupération de la base de données SQL</span><span class="sxs-lookup"><span data-stu-id="cb8f5-212">SQL Database recovery</span></span>

<span data-ttu-id="cb8f5-213">Pour protéger votre entreprise contre la perte de données, base de données SQL automatiquement effectue une combinaison de sauvegardes de base de données complète une fois par semaine, sauvegardes de base de données différentielle toutes les heures et journaux de transactions sauvegardes chaque 5 à 10 minutes.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-213">To protect your business from data loss, SQL Database automatically performs a combination of full database backups weekly, differential database backups hourly, and transaction log backups every 5 to 10 minutes.</span></span> <span data-ttu-id="cb8f5-214">Pour les niveaux de base, Standard et Premium de SQL Database, utilisez point-à-temps pour restaurer une base de données à une heure antérieure.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-214">For the Basic, Standard, and Premium SQL Database tiers, use point-in-time restore to restore a database to an earlier time.</span></span> <span data-ttu-id="cb8f5-215">Pour plus d’informations, consultez les articles suivants :</span><span class="sxs-lookup"><span data-stu-id="cb8f5-215">See the following articles for more information:</span></span>

- [<span data-ttu-id="cb8f5-216">Récupérer une base de données SQL Azure à l’aide des sauvegardes automatisées d’une base de données</span><span class="sxs-lookup"><span data-stu-id="cb8f5-216">Recover an Azure SQL database using automated database backups</span></span>](/azure/sql-database/sql-database-recovery-using-backups)
- [<span data-ttu-id="cb8f5-217">Vue d’ensemble de la continuité de l’activité avec la base de données Azure SQL</span><span class="sxs-lookup"><span data-stu-id="cb8f5-217">Overview of business continuity with Azure SQL Database</span></span>](/azure/sql-database/sql-database-business-continuity)

<span data-ttu-id="cb8f5-218">Une autre option consiste à utiliser la géo-réplication active pour base de données SQL, qui réplique automatiquement les modifications de base de données dans des bases de données secondaires dans la région Azure identiques ou différente.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-218">Another option is to use active geo-replication for SQL Database, which automatically replicates database changes to secondary databases in the same or different Azure region.</span></span> <span data-ttu-id="cb8f5-219">Pour plus d’informations, consultez [création et à l’aide de la géo-réplication active](/azure/sql-database/sql-database-active-geo-replication).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-219">For more information, see [Creating and using active geo-replication](/azure/sql-database/sql-database-active-geo-replication).</span></span>

<span data-ttu-id="cb8f5-220">Vous pouvez également utiliser une approche plus manuelle pour la sauvegarde et de restauration :</span><span class="sxs-lookup"><span data-stu-id="cb8f5-220">You can also use a more manual approach for backup and restore:</span></span>

- <span data-ttu-id="cb8f5-221">Utilisez le **copie de base de données** commande pour créer une copie de sauvegarde de la base de données avec une cohérence transactionnelle.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-221">Use the **DATABASE COPY** command to create a backup copy of the database with transactional consistency.</span></span>
- <span data-ttu-id="cb8f5-222">Utiliser le Service Azure SQL Database Import/Export, qui prend en charge des bases de données exportation vers des fichiers BACPAC (fichiers compressés contenant votre schéma de base de données et les données associées) qui sont stockés dans le stockage Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-222">Use the Azure SQL Database Import/Export Service, which supports exporting databases to BACPAC files (compressed files containing your database schema and associated data) that are stored in Azure Blob storage.</span></span> <span data-ttu-id="cb8f5-223">Pour vous protéger contre une interruption de service à l’échelle de la région, copiez les fichiers BACPAC dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-223">To protect against a region-wide service disruption, copy the BACPAC files to an alternate region.</span></span>

### <a name="sql-server-on-vms"></a><span data-ttu-id="cb8f5-224">SQL Server sur une machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="cb8f5-224">SQL Server on VMs</span></span>

<span data-ttu-id="cb8f5-225">Pour SQL Server s’exécutant sur des machines virtuelles, vous avez deux options : sauvegardes traditionnelles et envoi de journaux.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-225">For SQL Server running on VMs, you have two options: traditional backups and log shipping.</span></span>

- <span data-ttu-id="cb8f5-226">Avec les sauvegardes traditionnelles, vous pouvez restaurer à un point spécifique dans le temps, mais le processus de récupération est lent.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-226">With traditional backups, you can restore to a specific point in time, but the recovery process is slow.</span></span> <span data-ttu-id="cb8f5-227">Restauration de sauvegardes traditionnelles nécessite que vous démarrez avec une sauvegarde complète initiale et puis appliquez toutes les sauvegardes incrémentielles.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-227">Restoring traditional backups requires that you start with an initial full backup and then apply any incremental backups.</span></span>
- <span data-ttu-id="cb8f5-228">Vous pouvez configurer une session de copie de journal pour retarder la restauration de sauvegardes de journaux.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-228">You can configure a log shipping session to delay the restore of log backups.</span></span> <span data-ttu-id="cb8f5-229">Cela fournit une fenêtre permettant de récupérer des erreurs identifiées sur le réplica principal.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-229">This provides a window to recover from errors made on the primary replica.</span></span>

### <a name="azure-database-for-mysql-and-azure-database-for-postgresql"></a><span data-ttu-id="cb8f5-230">Azure Database pour MySQL et base de données Azure pour PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="cb8f5-230">Azure Database for MySQL and Azure Database for PostgreSQL</span></span>

<span data-ttu-id="cb8f5-231">Dans la base de données Azure pour MySQL et base de données Azure pour PostgreSQL, le service de base de données crée automatiquement une sauvegarde toutes les cinq minutes.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-231">In Azure Database for MySQL and Azure Database for PostgreSQL, the database service automatically makes a backup every five minutes.</span></span> <span data-ttu-id="cb8f5-232">Vous pouvez utiliser ces sauvegardes automatisées pour restaurer le serveur et ses bases de données à partir d’un point antérieur dans le temps vers un nouveau serveur.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-232">You can use these automated backups to restore the server and its databases from an earlier point in time to a new server.</span></span> <span data-ttu-id="cb8f5-233">Pour plus d'informations, consultez les pages suivantes :</span><span class="sxs-lookup"><span data-stu-id="cb8f5-233">For more information, see:</span></span>

- [<span data-ttu-id="cb8f5-234">Sauvegarde et restauration d’un serveur Azure Database pour MySQL à l’aide du portail Azure</span><span class="sxs-lookup"><span data-stu-id="cb8f5-234">How to back up and restore a server in Azure Database for MySQL by using the Azure portal</span></span>](/azure/mysql/howto-restore-server-portal)
- [<span data-ttu-id="cb8f5-235">Comment sauvegarder et restaurer un serveur de base de données Azure pour PostgreSQL à l’aide du portail Azure</span><span class="sxs-lookup"><span data-stu-id="cb8f5-235">How to back up and restore a server in Azure Database for PostgreSQL using the Azure portal</span></span>](/azure/postgresql/howto-restore-server-portal)

### <a name="azure-cosmos-db"></a><span data-ttu-id="cb8f5-236">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="cb8f5-236">Azure Cosmos DB</span></span>

<span data-ttu-id="cb8f5-237">COSMOS DB crée automatiquement une sauvegarde à intervalles réguliers.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-237">Cosmos DB automatically makes a backup at regular intervals.</span></span> <span data-ttu-id="cb8f5-238">Les sauvegardes sont stockées séparément dans un autre service de stockage et sont répliquées dans le monde entier pour vous protéger contre les sinistres régionaux.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-238">Backups are stored separately in another storage service and are replicated globally to protect against regional disasters.</span></span> <span data-ttu-id="cb8f5-239">En cas de suppression accidentelle de votre base de données ou collection, vous pouvez émettre un ticket de support ou appeler le support technique Azure pour restaurer les données à partir de la dernière sauvegarde automatique.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-239">If you accidentally delete your database or collection, you can file a support ticket or call Azure support to restore the data from the last automatic backup.</span></span> <span data-ttu-id="cb8f5-240">Pour plus d’informations, consultez [sauvegarde en ligne et restauration de la demande dans Azure Cosmos DB](/azure/cosmos-db/online-backup-and-restore).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-240">For more information, see [Online backup and on-demand restore in Azure Cosmos DB](/azure/cosmos-db/online-backup-and-restore).</span></span>

### <a name="azure-virtual-machines"></a><span data-ttu-id="cb8f5-241">Machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="cb8f5-241">Azure Virtual Machines</span></span>

<span data-ttu-id="cb8f5-242">Pour protéger les Machines virtuelles à partir d’erreurs d’application ou une suppression accidentelle, utilisez [sauvegarde Azure](/azure/backup/).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-242">To protect Azure Virtual Machines from application errors or accidental deletion, use [Azure Backup](/azure/backup/).</span></span> <span data-ttu-id="cb8f5-243">Les sauvegardes créées sont cohérentes sur plusieurs disques de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-243">The created backups are consistent across multiple VM disks.</span></span> <span data-ttu-id="cb8f5-244">En outre, le coffre de sauvegarde Azure peut être répliqué entre les régions pour prendre en charge la récupération d’une perte régionale.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-244">In addition, the Azure Backup vault can be replicated across regions to support recovery from a regional loss.</span></span>

## <a name="network-outage"></a><span data-ttu-id="cb8f5-245">Panne du réseau</span><span class="sxs-lookup"><span data-stu-id="cb8f5-245">Network outage</span></span>

<span data-ttu-id="cb8f5-246">Lorsque certaines parties du réseau Azure sont inaccessibles, vous n’êtes peut-être pas en mesure d’accéder aux données ou votre application.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-246">When parts of the Azure network are inaccessible, you might not be able to access your application or data.</span></span> <span data-ttu-id="cb8f5-247">Dans ce cas, nous vous recommandons de conception de la stratégie de récupération d’urgence pour exécuter la plupart des applications avec des fonctionnalités réduites.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-247">In this situation, we recommend designing the disaster recovery strategy to run most applications with reduced functionality.</span></span>

<span data-ttu-id="cb8f5-248">Si la réduction des fonctionnalités n’est pas une option, les options restantes sont des interruptions de service ou le basculement vers une autre région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-248">If reducing functionality isn't an option, the remaining options are application downtime or failover to an alternate region.</span></span>

<span data-ttu-id="cb8f5-249">Dans un scénario de fonctionnalité réduite :</span><span class="sxs-lookup"><span data-stu-id="cb8f5-249">In a reduced functionality scenario:</span></span>

- <span data-ttu-id="cb8f5-250">Si votre application ne peut pas accéder à ses données en raison d’une panne du réseau Azure, vous pourrez peut-être exécuter localement avec fonctionnalités réduites des applications à l’aide des données mises en cache.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-250">If your application can't access its data because of an Azure network outage, you might be able to run locally with reduced application functionality by using cached data.</span></span>
- <span data-ttu-id="cb8f5-251">Vous serez peut-être en mesure de stocker des données dans un autre emplacement jusqu'à ce que la connectivité est rétablie.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-251">You might be able to store data in an alternate location until connectivity is restored.</span></span>

## <a name="dependent-service-failure"></a><span data-ttu-id="cb8f5-252">Échec des services dépendants</span><span class="sxs-lookup"><span data-stu-id="cb8f5-252">Dependent service failure</span></span>

<span data-ttu-id="cb8f5-253">Pour chaque service dépendant, vous devez comprendre les implications d’une interruption de service et la façon dont l’application doit répondre.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-253">For each dependent service, you should understand the implications of a service disruption and the way that the application will respond.</span></span> <span data-ttu-id="cb8f5-254">De nombreux services incluent des fonctionnalités qui prennent en charge la résilience et la disponibilité, par conséquent, l’évaluation de chaque service indépendamment est susceptible d’améliorer votre plan de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-254">Many services include features that support resiliency and availability, so evaluating each service independently is likely to improve your disaster recovery plan.</span></span> <span data-ttu-id="cb8f5-255">Par exemple, Azure Event Hubs prend en charge [basculement](/azure/event-hubs/event-hubs-geo-dr#setup-and-failover-flow) à l’espace de noms secondaire.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-255">For example, Azure Event Hubs supports [failing over](/azure/event-hubs/event-hubs-geo-dr#setup-and-failover-flow) to the secondary namespace.</span></span>

## <a name="region-wide-service-disruptions"></a><span data-ttu-id="cb8f5-256">Interruptions de service à l’échelle de la région</span><span class="sxs-lookup"><span data-stu-id="cb8f5-256">Region-wide service disruptions</span></span>

<span data-ttu-id="cb8f5-257">Nombre d’erreurs est faciles à gérer au sein de la même région Azure.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-257">Many failures are manageable within the same Azure region.</span></span> <span data-ttu-id="cb8f5-258">Toutefois, dans l’éventualité d’une interruption de service à l’échelle de la région, les copies localement redondantes de vos données ne sont pas disponibles.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-258">However, in the unlikely event of a region-wide service disruption, the locally redundant copies of your data aren't available.</span></span> <span data-ttu-id="cb8f5-259">Si vous avez activé la géo-réplication, il existe trois copies supplémentaires de vos objets BLOB et les tables dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-259">If you've enabled geo-replication, there are three additional copies of your blobs and tables in a different region.</span></span> <span data-ttu-id="cb8f5-260">Si Microsoft déclare la région perdue, Azure remappe toutes les entrées DNS vers la région secondaire.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-260">If Microsoft declares the region lost, Azure remaps all the DNS entries to the secondary region.</span></span>

> [!NOTE]
> <span data-ttu-id="cb8f5-261">Ce processus se produit uniquement pour les interruptions de service à l’échelle de la région et n’est pas au sein de votre contrôle.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-261">This process occurs only for region-wide service disruptions and is not within your control.</span></span> <span data-ttu-id="cb8f5-262">Envisagez d’utiliser [Azure Site Recovery](/azure/site-recovery/) pour obtenir de meilleurs RPO et RTO.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-262">Consider using [Azure Site Recovery](/azure/site-recovery/) to achieve better RPO and RTO.</span></span> <span data-ttu-id="cb8f5-263">À l’aide de la récupération de Site, vous décidez qu’une indisponibilité est acceptable et quand basculer vers les machines virtuelles répliquées.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-263">Using Site Recovery, you decide what is an acceptable outage and when to fail over to the replicated VMs.</span></span>

<span data-ttu-id="cb8f5-264">Votre réponse à une interruption de service à l’échelle de la région dépend de votre déploiement et de votre plan de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-264">Your response to a region-wide service disruption depends on your deployment and your disaster recovery plan.</span></span>

- <span data-ttu-id="cb8f5-265">En tant qu’une stratégie de contrôle des coûts pour les applications non critiques qui ne nécessitent pas un temps de récupération garanti, il peut être utile pour redéployer vers une autre région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-265">As a cost-control strategy, for non-critical applications that don't require a guaranteed recovery time, it might make sense to redeploy to a different region.</span></span>
- <span data-ttu-id="cb8f5-266">Pour les applications qui sont hébergées dans une autre région avec les rôles déployés, mais ne pas distribuer le trafic entre les régions (*déploiement actif/passif*), basculez vers le service hébergé secondaire dans l’autre région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-266">For applications that are hosted in another region with deployed roles but don't distribute traffic across regions (*active/passive deployment*), switch to the secondary hosted service in the alternate region.</span></span>
- <span data-ttu-id="cb8f5-267">Pour les applications qui ont un déploiement à grande échelle secondaire dans une autre région (*déploiement actif/actif*), acheminer le trafic vers cette région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-267">For applications that have a full-scale secondary deployment in another region (*active/active deployment*), route traffic to that region.</span></span>

<span data-ttu-id="cb8f5-268">Pour en savoir plus sur la récupération d’une interruption de service à l’échelle de la région, consultez [récupérer à partir d’une interruption de service à l’échelle de la région](../resiliency/recovery-loss-azure-region.md).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-268">To learn more about recovering from a region-wide service disruption, see [Recover from a region-wide service disruption](../resiliency/recovery-loss-azure-region.md).</span></span>

### <a name="vm-recovery"></a><span data-ttu-id="cb8f5-269">Récupération de machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="cb8f5-269">VM recovery</span></span>

<span data-ttu-id="cb8f5-270">Pour les applications critiques, planifiez la récupération de machines virtuelles en cas d’une interruption de service à l’échelle de la région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-270">For critical apps, plan for recovering VMs in the event of a region-wide service disruption.</span></span>

- <span data-ttu-id="cb8f5-271">Utilisation d’Azure Backup ou une autre méthode de sauvegarde à créer entre les régions des sauvegardes cohérentes des applications.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-271">Use Azure Backup or another backup method to create cross-region backups that are application consistent.</span></span> <span data-ttu-id="cb8f5-272">(La réplication du coffre de sauvegarde doit être configurée au moment de la création.)</span><span class="sxs-lookup"><span data-stu-id="cb8f5-272">(Replication of the Backup vault must be configured at the time of creation.)</span></span>
- <span data-ttu-id="cb8f5-273">Utilisez Site Recovery pour répliquer les régions pour le basculement d’application d’un seul clic et un test de basculement.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-273">Use Site Recovery to replicate across regions for one-click application failover and failover testing.</span></span>
- <span data-ttu-id="cb8f5-274">Traffic Manager permet d’automatiser le basculement du trafic utilisateur vers une autre région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-274">Use Traffic Manager to automate user traffic failover to another region.</span></span>

<span data-ttu-id="cb8f5-275">Pour plus d’informations, consultez [récupérer à partir d’une interruption de service à l’échelle de la région, les machines virtuelles](../resiliency/recovery-loss-azure-region.md#virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-275">To learn more, see [Recover from a region-wide service disruption, Virtual machines](../resiliency/recovery-loss-azure-region.md#virtual-machines).</span></span>

### <a name="storage-recovery"></a><span data-ttu-id="cb8f5-276">Récupération du stockage</span><span class="sxs-lookup"><span data-stu-id="cb8f5-276">Storage recovery</span></span>

<span data-ttu-id="cb8f5-277">Pour protéger votre stockage en cas d’une interruption de service à l’échelle de la région :</span><span class="sxs-lookup"><span data-stu-id="cb8f5-277">To protect your storage in the event of a region-wide service disruption:</span></span>

- <span data-ttu-id="cb8f5-278">Utilisation du stockage géo-redondant.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-278">Use geo-redundant storage.</span></span>
- <span data-ttu-id="cb8f5-279">Savoir où votre espace de stockage géo-répliquée.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-279">Know where your storage is geo-replicated.</span></span> <span data-ttu-id="cb8f5-280">Cela affecte où vous déployez d’autres instances de vos données qui nécessitent une affinité régionale avec votre stockage.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-280">This affects where you deploy other instances of your data that require regional affinity with your storage.</span></span>
- <span data-ttu-id="cb8f5-281">Vérifier la cohérence des données après le basculement et, si nécessaire, restaurez à partir d’une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-281">Check data for consistency after failover and, if necessary, restore from a backup.</span></span>

<span data-ttu-id="cb8f5-282">Pour plus d’informations, consultez [conception d’applications hautement disponibles à l’aide de RA-GRS](/azure/storage/common/storage-designing-ha-apps-with-ragrs).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-282">To learn more, see [Designing highly available applications using RA-GRS](/azure/storage/common/storage-designing-ha-apps-with-ragrs).</span></span>

### <a name="sql-database-and-sql-server"></a><span data-ttu-id="cb8f5-283">Base de données SQL et SQL Server</span><span class="sxs-lookup"><span data-stu-id="cb8f5-283">SQL Database and SQL Server</span></span>

<span data-ttu-id="cb8f5-284">Azure SQL Database fournit deux types de récupération :</span><span class="sxs-lookup"><span data-stu-id="cb8f5-284">Azure SQL Database provides two types of recovery:</span></span>

- <span data-ttu-id="cb8f5-285">Utilisez la géo-restauration pour restaurer une base de données à partir d’une copie de sauvegarde dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-285">Use geo-restore to restore a database from a backup copy in another region.</span></span> <span data-ttu-id="cb8f5-286">Pour plus d’informations, consultez [récupérer une base de données SQL Azure à l’aide de sauvegardes de bases de données automatisées](/azure/sql-database/sql-database-recovery-using-backups).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-286">For more information, see [Recover an Azure SQL database using automated database backups](/azure/sql-database/sql-database-recovery-using-backups).</span></span>
- <span data-ttu-id="cb8f5-287">Géo-réplication active permet de basculer vers une base de données secondaire.</span><span class="sxs-lookup"><span data-stu-id="cb8f5-287">Use active geo-replication to fail over to a secondary database.</span></span> <span data-ttu-id="cb8f5-288">Pour plus d’informations, consultez [création et à l’aide de la géo-réplication active](/azure/sql-database/sql-database-active-geo-replication).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-288">For more information, see [Creating and using active geo-replication](/azure/sql-database/sql-database-active-geo-replication).</span></span>

<span data-ttu-id="cb8f5-289">Pour SQL Server s’exécutant sur des machines virtuelles, consultez [haute disponibilité et récupération d’urgence pour SQL Server dans les Machines virtuelles](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span><span class="sxs-lookup"><span data-stu-id="cb8f5-289">For SQL Server running on VMs, see [High availability and disaster recovery for SQL Server in Azure Virtual Machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>

## <a name="service-specific-guidance"></a><span data-ttu-id="cb8f5-290">Guide spécifique relatif au service</span><span class="sxs-lookup"><span data-stu-id="cb8f5-290">Service-specific guidance</span></span>

<span data-ttu-id="cb8f5-291">Les articles suivants décrivent la récupération d’urgence pour certains services Azure :</span><span class="sxs-lookup"><span data-stu-id="cb8f5-291">The following articles describe disaster recovery for specific Azure services:</span></span>

| <span data-ttu-id="cb8f5-292">de diffusion en continu</span><span class="sxs-lookup"><span data-stu-id="cb8f5-292">Service</span></span>                       | <span data-ttu-id="cb8f5-293">Article</span><span class="sxs-lookup"><span data-stu-id="cb8f5-293">Article</span></span>                                                                                                                                                                                       |
|-------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="cb8f5-294">Azure Database pour MySQL</span><span class="sxs-lookup"><span data-stu-id="cb8f5-294">Azure Database for MySQL</span></span>      | [<span data-ttu-id="cb8f5-295">Vue d’ensemble de la continuité d’activité avec Azure Database pour MySQL</span><span class="sxs-lookup"><span data-stu-id="cb8f5-295">Overview of business continuity with Azure Database for MySQL</span></span>](/azure/mysql/concepts-business-continuity)                                                  |
| <span data-ttu-id="cb8f5-296">Azure Database pour PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="cb8f5-296">Azure Database for PostgreSQL</span></span> | [<span data-ttu-id="cb8f5-297">Vue d’ensemble de la continuité d’activité avec Azure Database pour PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="cb8f5-297">Overview of business continuity with Azure Database for PostgreSQL</span></span>](/azure/postgresql/concepts-business-continuity)                                        |
| <span data-ttu-id="cb8f5-298">Services cloud Azure</span><span class="sxs-lookup"><span data-stu-id="cb8f5-298">Azure Cloud Services</span></span>          | [<span data-ttu-id="cb8f5-299">Que faire si une interruption de service Azure affecte Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="cb8f5-299">What to do in the event of an Azure service disruption that impacts Azure Cloud Services</span></span>](/azure/cloud-services/cloud-services-disaster-recovery-guidance) |
| <span data-ttu-id="cb8f5-300">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="cb8f5-300">Cosmos DB</span></span>                     | [<span data-ttu-id="cb8f5-301">Haute disponibilité avec Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="cb8f5-301">High availability with Azure Cosmos DB</span></span>](/azure/cosmos-db/high-availability)                                                                                |
| <span data-ttu-id="cb8f5-302">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="cb8f5-302">Azure Key Vault</span></span>               | [<span data-ttu-id="cb8f5-303">Disponibilité et redondance d’Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="cb8f5-303">Azure Key Vault availability and redundancy</span></span>](/azure/key-vault/key-vault-disaster-recovery-guidance)                                                        |
| <span data-ttu-id="cb8f5-304">Stockage Azure</span><span class="sxs-lookup"><span data-stu-id="cb8f5-304">Azure Storage</span></span>                 | [<span data-ttu-id="cb8f5-305">Récupération d'urgence et basculement de compte de stockage (préversion) dans Stockage Azure</span><span class="sxs-lookup"><span data-stu-id="cb8f5-305">Disaster recovery and storage account failover (preview) in Azure Storage</span></span>](/azure/storage/common/storage-disaster-recovery-guidance)                       |
| <span data-ttu-id="cb8f5-306">Base de données SQL</span><span class="sxs-lookup"><span data-stu-id="cb8f5-306">SQL Database</span></span>                  | [<span data-ttu-id="cb8f5-307">Restaurer une base de données SQL Azure ou basculer vers une région secondaire</span><span class="sxs-lookup"><span data-stu-id="cb8f5-307">Restore an Azure SQL Database or failover to a secondary region</span></span>](/azure/sql-database/sql-database-disaster-recovery)                                       |
| <span data-ttu-id="cb8f5-308">Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="cb8f5-308">Virtual Machines</span></span>              | [<span data-ttu-id="cb8f5-309">Ce qu’il faut en cas d’Azure interruption de service affecte Azure Cloud</span><span class="sxs-lookup"><span data-stu-id="cb8f5-309">What to do in the event of an Azure service disruption impacts Azure Cloud</span></span>](/azure/cloud-services/cloud-services-disaster-recovery-guidance)               |
| <span data-ttu-id="cb8f5-310">Réseau virtuel Azure</span><span class="sxs-lookup"><span data-stu-id="cb8f5-310">Azure Virtual Network</span></span>         | [<span data-ttu-id="cb8f5-311">Réseau virtuel – Continuité des activités</span><span class="sxs-lookup"><span data-stu-id="cb8f5-311">Virtual Network – Business Continuity</span></span>](/azure/virtual-network/virtual-network-disaster-recovery-guidance)                                                  |

## <a name="next-steps"></a><span data-ttu-id="cb8f5-312">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="cb8f5-312">Next steps</span></span>

- [<span data-ttu-id="cb8f5-313">Récupérer suite à une altération des données ou une suppression accidentelle</span><span class="sxs-lookup"><span data-stu-id="cb8f5-313">Recover from data corruption or accidental deletion</span></span>](../resiliency/recovery-data-corruption.md)
- [<span data-ttu-id="cb8f5-314">Récupérer à partir d’une interruption de service à l’échelle de la région</span><span class="sxs-lookup"><span data-stu-id="cb8f5-314">Recover from a region-wide service disruption</span></span>](../resiliency/recovery-loss-azure-region.md)