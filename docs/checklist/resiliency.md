---
title: "Liste de vérification de résilience"
description: "Liste de vérification fournissant des indications relatives aux problématiques de résilience durant la conception."
author: petertaylor9999
ms.date: 01/10/2018
ms.custom: resiliency, checklist
ms.openlocfilehash: 51f807715d0ac929806b9a5a13da4efa00566592
ms.sourcegitcommit: a7aae13569e165d4e768ce0aaaac154ba612934f
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/30/2018
---
# <a name="resiliency-checklist"></a><span data-ttu-id="8b6b7-103">Liste de vérification de résilience</span><span class="sxs-lookup"><span data-stu-id="8b6b7-103">Resiliency checklist</span></span>

<span data-ttu-id="8b6b7-104">La résilience est la capacité d’un système à récupérer après des défaillances et à continuer de fonctionner ; elle est l’un des [piliers de la qualité logicielle](../guide/pillars.md).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-104">Resiliency is the ability of a system to recover from failures and continue to function, and is one of the [pillars of software quality](../guide/pillars.md).</span></span> <span data-ttu-id="8b6b7-105">La conception de votre application pour la résilience nécessite de planifier et de prévenir les différents modes d’échec susceptibles de se produire.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-105">Designing your application for resiliency requires planning for and mitigating a variety of failure modes that could occur.</span></span> <span data-ttu-id="8b6b7-106">Utilisez cette liste de vérification pour passer en revue l’architecture de votre application en termes de résilience.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-106">Use this checklist to review your application architecture from a resiliency standpoint.</span></span> 

## <a name="requirements"></a><span data-ttu-id="8b6b7-107">Configuration requise</span><span class="sxs-lookup"><span data-stu-id="8b6b7-107">Requirements</span></span>

<span data-ttu-id="8b6b7-108">**Définissez les exigences de disponibilité de votre client.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-108">**Define your customer's availability requirements.**</span></span> <span data-ttu-id="8b6b7-109">Votre client aura des exigences de disponibilité spécifiques pour les composants de votre application, ce qui aura une incidence sur sa conception.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-109">Your customer will have availability requirements for the components in your application and this will affect your application's design.</span></span> <span data-ttu-id="8b6b7-110">Obtenez l’accord de votre client concernant les objectifs de disponibilité de chaque élément de votre application. Sinon, votre conception risque de ne pas répondre à ses attentes.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-110">Get agreement from your customer for the availability targets of each piece of your application, otherwise your design may not meet the customer's expectations.</span></span> <span data-ttu-id="8b6b7-111">Pour plus d’informations, consultez [Définissez vos exigences en matière de résilience](../resiliency/index.md#defining-your-resiliency-requirements).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-111">For more information, see [Defining your resiliency requirements](../resiliency/index.md#defining-your-resiliency-requirements).</span></span>

## <a name="application-design"></a><span data-ttu-id="8b6b7-112">Conception des applications</span><span class="sxs-lookup"><span data-stu-id="8b6b7-112">Application Design</span></span>

<span data-ttu-id="8b6b7-113">**Effectuez une analyse du mode d’échec pour votre application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-113">**Perform a failure mode analysis (FMA) for your application.**</span></span> <span data-ttu-id="8b6b7-114">L’analyse du mode d’échec est un processus qui permet d’intégrer la résilience dans une application au début de la phase de conception.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-114">FMA is a process for building resiliency into an application early in the design stage.</span></span> <span data-ttu-id="8b6b7-115">Pour plus d’informations, consultez [Analyse du mode d’échec][fma].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-115">For more information, see [Failure mode analysis][fma].</span></span> <span data-ttu-id="8b6b7-116">Les objectifs d’une analyse du mode d’échec incluent :</span><span class="sxs-lookup"><span data-stu-id="8b6b7-116">The goals of an FMA include:</span></span>  

* <span data-ttu-id="8b6b7-117">Identifier les types d’échecs qu’une application peut rencontrer.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-117">Identify what types of failures an application might experience.</span></span>
* <span data-ttu-id="8b6b7-118">Déterminer les effets et l’impact potentiels de chaque type d’échec sur l’application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-118">Capture the potential effects and impact of each type of failure on the application.</span></span>
* <span data-ttu-id="8b6b7-119">Identifier les stratégies de récupération.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-119">Identify recovery strategies.</span></span>
  

<span data-ttu-id="8b6b7-120">**Déployez plusieurs instances des services.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-120">**Deploy multiple instances of services.**</span></span> <span data-ttu-id="8b6b7-121">Si votre application repose sur une seule instance unique d’un service, cela crée un point de défaillance unique.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-121">If your application depends on a single instance of a service, it creates a single point of failure.</span></span> <span data-ttu-id="8b6b7-122">L’approvisionnement de plusieurs instances améliore à la fois la résilience et l’extensibilité.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-122">Provisioning multiple instances improves both resiliency and scalability.</span></span> <span data-ttu-id="8b6b7-123">Pour [Azure App Service](/azure/app-service/app-service-value-prop-what-is/), sélectionnez un [plan App Service](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) qui offre plusieurs instances.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-123">For [Azure App Service](/azure/app-service/app-service-value-prop-what-is/), select an [App Service Plan](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) that offers multiple instances.</span></span> <span data-ttu-id="8b6b7-124">Pour les Azure Cloud Services, configurez chacun de vos rôles de manière à utiliser [plusieurs instances](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-124">For Azure Cloud Services, configure each of your roles to use [multiple instances](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span></span> <span data-ttu-id="8b6b7-125">Pour [Machines virtuelles Azure](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), assurez-vous que votre architecture de machine virtuelle inclut plusieurs machines virtuelles et que chaque machine virtuelle est incluse dans un [groupe à haute disponibilité][availability-sets].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-125">For [Azure Virtual Machines (VMs)](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), ensure that your VM architecture includes more than one VM and that each VM is included in an [availability set][availability-sets].</span></span>   

<span data-ttu-id="8b6b7-126">**Utilisez la mise à l’échelle automatique pour répondre aux augmentations de charge.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-126">**Use autoscaling to respond to increases in load.**</span></span> <span data-ttu-id="8b6b7-127">Si votre application n’est pas configurée pour augmenter automatiquement la taille des instances quand la charge augmente, les services de votre application risquent d’échouer s’ils sont saturés de requêtes utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-127">If your application is not configured to scale out automatically as load increases, it's possible that your application's services will fail if they become saturated with user requests.</span></span> <span data-ttu-id="8b6b7-128">Pour plus d’informations, consultez les articles suivants :</span><span class="sxs-lookup"><span data-stu-id="8b6b7-128">For more details, see the following:</span></span>

* <span data-ttu-id="8b6b7-129">Informations générales : [Liste de contrôle de l’extensibilité](./scalability.md)</span><span class="sxs-lookup"><span data-stu-id="8b6b7-129">General: [Scalability checklist](./scalability.md)</span></span>
* <span data-ttu-id="8b6b7-130">Azure App Service : [Mise à l’échelle manuelle ou automatique du nombre d’instances][app-service-autoscale]</span><span class="sxs-lookup"><span data-stu-id="8b6b7-130">Azure App Service: [Scale instance count manually or automatically][app-service-autoscale]</span></span>
* <span data-ttu-id="8b6b7-131">Services cloud : [Mise à l’échelle automatique d’un service cloud][cloud-service-autoscale]</span><span class="sxs-lookup"><span data-stu-id="8b6b7-131">Cloud Services: [How to auto scale a cloud service][cloud-service-autoscale]</span></span>
* <span data-ttu-id="8b6b7-132">Machines virtuelles : [Mise à l’échelle automatique et groupes de machines virtuelles identiques][vmss-autoscale]</span><span class="sxs-lookup"><span data-stu-id="8b6b7-132">Virtual Machines: [Automatic scaling and virtual machine scale sets][vmss-autoscale]</span></span>

<span data-ttu-id="8b6b7-133">**Utilisez l’équilibrage de charge pour distribuer les requêtes.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-133">**Use load balancing to distribute requests.**</span></span> <span data-ttu-id="8b6b7-134">L’équilibrage de charge distribue les requêtes de votre application à des instances de service intègres en supprimant les instances non intègres de la rotation.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-134">Load balancing distributes your application's requests to healthy service instances by removing unhealthy instances from rotation.</span></span> <span data-ttu-id="8b6b7-135">Si votre service utilise Azure App Service ou Azure Cloud Services, sa charge est déjà équilibrée pour vous.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-135">If your service uses Azure App Service or Azure Cloud Services, it is already load balanced for you.</span></span> <span data-ttu-id="8b6b7-136">Cependant, si votre application utilise Machines virtuelles Azure, vous devez approvisionner un équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-136">However, if your application uses Azure VMs, you will need to provision a load balancer.</span></span> <span data-ttu-id="8b6b7-137">Pour plus d’informations, consultez la [vue d’ensemble d’Azure Load Balancer](/azure/load-balancer/load-balancer-overview/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-137">See the [Azure Load Balancer](/azure/load-balancer/load-balancer-overview/) overview for more details.</span></span>

<span data-ttu-id="8b6b7-138">**Configurez les passerelles Azure Application Gateway de manière à utiliser plusieurs instances.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-138">**Configure Azure Application Gateways to use multiple instances.**</span></span> <span data-ttu-id="8b6b7-139">Selon les exigences de votre application, une passerelle [Azure Application Gateway](/azure/application-gateway/application-gateway-introduction/) peut être mieux adaptée pour distribuer les requêtes aux services de votre application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-139">Depending on your application's requirements, an [Azure Application Gateway](/azure/application-gateway/application-gateway-introduction/) may be better suited to distributing requests to your application's services.</span></span> <span data-ttu-id="8b6b7-140">Cependant, les instances uniques du service Application Gateway ne sont pas garanties par un contrat de niveau de service (SLA). Par conséquent, il se peut que votre application échoue en cas d’échec de l’instance Application Gateway.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-140">However, single instances of the Application Gateway service are not guaranteed by an SLA so it's possible that your application could fail if the Application Gateway instance fails.</span></span> <span data-ttu-id="8b6b7-141">Approvisionnez plusieurs instances Application Gateway moyennes ou grandes pour garantir la disponibilité du service selon les conditions du [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-141">Provision more than one medium or larger Application Gateway instance to guarantee availability of the service under the terms of the [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/).</span></span>

<span data-ttu-id="8b6b7-142">**Utilisez des groupes à haute disponibilité pour chaque couche Application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-142">**Use Availability Sets for each application tier.**</span></span> <span data-ttu-id="8b6b7-143">Le placement des instances dans un [groupe à haute disponibilité][availability-sets] permet de bénéficier d’un [SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines/) supérieur.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-143">Placing your instances in an [availability set][availability-sets] provides a higher [SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines/).</span></span> 

<span data-ttu-id="8b6b7-144">**Envisagez de déployer votre application dans plusieurs régions.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-144">**Consider deploying your application across multiple regions.**</span></span> <span data-ttu-id="8b6b7-145">Si votre application est déployée dans une seule région, si la région entière devient indisponible (éventualité hautement improbable), votre application sera elle aussi indisponible.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-145">If your application is deployed to a single region, in the rare event the entire region becomes unavailable, your application will also be unavailable.</span></span> <span data-ttu-id="8b6b7-146">Il se peut que cette situation soit inacceptable au regard des conditions du SLA de votre application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-146">This may be unacceptable under the terms of your application's SLA.</span></span> <span data-ttu-id="8b6b7-147">Si c’est le cas, envisagez de déployer votre application et ses services dans plusieurs régions.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-147">If so, consider deploying your application and its services across multiple regions.</span></span> <span data-ttu-id="8b6b7-148">Un déploiement dans plusieurs régions peut s’appuyer sur un modèle actif (répartissant les requêtes entre plusieurs instances actives) ou sur un modèle actif/passif (conservant une instance active en réserve en cas d’échec de l’instance principale).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-148">A multi-region deployment can use an active-active pattern (distributing requests across multiple active instances) or an active-passive pattern (keeping a "warm" instance in reserve, in case the primary instance fails).</span></span> <span data-ttu-id="8b6b7-149">Nous vous recommandons de déployer plusieurs instances des services de votre application sur des paires régionales.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-149">We recommend that you deploy multiple instances of your application's services across regional pairs.</span></span> <span data-ttu-id="8b6b7-150">Pour plus d’informations, consultez [Continuité des activités et récupération d’urgence (BCDR) : régions jumelées d’Azure](/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-150">For more information, see [Business continuity and disaster recovery (BCDR): Azure Paired Regions](/azure/best-practices-availability-paired-regions).</span></span>

<span data-ttu-id="8b6b7-151">**Utilisez Azure Traffic Manager pour acheminer le trafic de votre application vers des régions différentes.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-151">**Use Azure Traffic Manager to route your application's traffic to different regions.**</span></span>  <span data-ttu-id="8b6b7-152">[Azure Traffic Manager][ traffic-manager] effectue un équilibrage de charge au niveau du DNS et achemine le trafic vers des régions différentes en fonction de la méthode de [routage du trafic][ traffic-manager-routing] que vous spécifiez et de l’intégrité des points de terminaison de votre application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-152">[Azure Traffic Manager][traffic-manager] performs load balancing at the DNS level and will route traffic to different regions based on the [traffic routing][traffic-manager-routing] method you specify and the health of your application's endpoints.</span></span> <span data-ttu-id="8b6b7-153">Sans Traffic Manager, vous êtes limité à une seule région pour votre déploiement, ce qui limite la mise à l’échelle, augmente la latence pour certains utilisateurs et entraîne l’arrêt de l’application en cas d’interruption de service à l’échelle de la région.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-153">Without Traffic Manager, you are limited to a single region for your deployment, which limits scale, increases latency for some users, and causes application downtime in the case of a region-wide service disruption.</span></span>

<span data-ttu-id="8b6b7-154">**Configurez et testez les sondes d’intégrité pour vos équilibreurs de charge et vos gestionnaires de trafic.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-154">**Configure and test health probes for your load balancers and traffic managers.**</span></span> <span data-ttu-id="8b6b7-155">Assurez-vous que votre logique d’intégrité vérifie les composants critiques du système et répond correctement aux sondes d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-155">Ensure that your health logic checks the critical parts of the system and responds appropriately to health probes.</span></span>

* <span data-ttu-id="8b6b7-156">Les sondes d’intégrité pour [Azure Traffic Manager][traffic-manager] et [Azure Load Balancer][load-balancer] remplissent une fonction spécifique.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-156">The health probes for [Azure Traffic Manager][traffic-manager] and [Azure Load Balancer][load-balancer] serve a specific function.</span></span> <span data-ttu-id="8b6b7-157">Pour Traffic Manager, la sonde d’intégrité détermine si un basculement vers une autre région est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-157">For Traffic Manager, the health probe determines whether to fail over to another region.</span></span> <span data-ttu-id="8b6b7-158">Pour un équilibreur de charge, elle détermine s’il faut supprimer une machine virtuelle de la rotation.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-158">For a load balancer, it determines whether to remove a VM from rotation.</span></span>      
* <span data-ttu-id="8b6b7-159">Pour une sonde de Traffic Manager, votre point de terminaison d’intégrité doit vérifier les dépendances critiques qui sont déployées dans la même région et dont l’échec devrait déclencher un basculement vers une autre région.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-159">For a Traffic Manager probe, your health endpoint should check any critical dependencies that are deployed within the same region, and whose failure should trigger a failover to another region.</span></span>  
* <span data-ttu-id="8b6b7-160">Pour un équilibreur de charge, le point de terminaison d’intégrité doit établir un rapport de l’intégrité de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-160">For a load balancer, the health endpoint should report the health of the VM.</span></span> <span data-ttu-id="8b6b7-161">N’incluez pas d’autres niveaux ou de services externes.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-161">Don't include other tiers or external services.</span></span> <span data-ttu-id="8b6b7-162">Autrement, si un échec se produit en dehors de la machine virtuelle, l’équilibreur de charge supprimera la machine virtuelle de la rotation.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-162">Otherwise, a failure that occurs outside the VM will cause the load balancer to remove the VM from rotation.</span></span>
* <span data-ttu-id="8b6b7-163">Pour savoir comment implémenter la surveillance de l’intégrité dans votre application, consultez [Modèle Surveillance de point de terminaison](https://msdn.microsoft.com/library/dn589789.aspx).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-163">For guidance on implementing health monitoring in your application, see [Health Endpoint Monitoring Pattern](https://msdn.microsoft.com/library/dn589789.aspx).</span></span>

<span data-ttu-id="8b6b7-164">**Surveillez les services tiers.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-164">**Monitor third-party services.**</span></span> <span data-ttu-id="8b6b7-165">Si votre application présente des dépendances vis-à-vis de services tiers, identifiez où et comment ces services tiers peuvent échouer et les effets que ces échecs auront sur votre application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-165">If your application has dependencies on third-party services, identify where and how these third-party services can fail and what effect those failures will have on your application.</span></span> <span data-ttu-id="8b6b7-166">Un service tiers peut ne pas inclure de surveillance et de diagnostics. Par conséquent, il est important que vous journalisiez vos appels de ces services et que vous les mettiez en corrélation avec la journalisation de l’intégrité et des diagnostics de votre application à l’aide d’un identificateur unique.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-166">A third-party service may not include monitoring and diagnostics, so it's important to log your invocations of them and correlate them with your application's health and diagnostic logging using a unique identifier.</span></span> <span data-ttu-id="8b6b7-167">Pour plus d’informations sur les pratiques éprouvées en matière de surveillance et de diagnostics, consultez [Guide de surveillance et de diagnostics][monitoring-and-diagnostics-guidance].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-167">For more information on proven practices for monitoring and diagnostics, see [Monitoring and Diagnostics guidance][monitoring-and-diagnostics-guidance].</span></span>

<span data-ttu-id="8b6b7-168">**Assurez-vous que les services tiers que vous consommez incluent un contrat de niveau de service (SLA).**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-168">**Ensure that any third-party service you consume provides an SLA.**</span></span> <span data-ttu-id="8b6b7-169">Si votre application dépend d’un service tiers, mais que ce service tiers n’offre aucune garantie de disponibilité sous la forme d’un contrat SLA, la disponibilité de votre application ne peut pas non plus être garantie.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-169">If your application depends on a third-party service, but the third party provides no guarantee of availability in the form of an SLA, your application's availability also cannot be guaranteed.</span></span> <span data-ttu-id="8b6b7-170">Le niveau de votre contrat SLA repose sur le composant le moins disponible de votre application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-170">Your SLA is only as good as the least available component of your application.</span></span>

<span data-ttu-id="8b6b7-171">**Implémentez des modèles de résilience pour les opérations distantes si nécessaire.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-171">**Implement resiliency patterns for remote operations where appropriate.**</span></span> <span data-ttu-id="8b6b7-172">Si votre application dépend de la communication entre des services distants, suivez les modèles de conception pour traiter les échecs temporaires, par exemple le [modèle Nouvelle tentative][retry-pattern] et le [modèle Disjoncteur][circuit-breaker].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-172">If your application depends on communication between remote services, follow design patterns for dealing with transient failures, such as [Retry Pattern][retry-pattern], and [Circuit Breaker Pattern][circuit-breaker].</span></span> <span data-ttu-id="8b6b7-173">Pour plus d’informations, consultez [Stratégies de résilience](../resiliency/index.md#resiliency-strategies).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-173">For more information, see [Resiliency strategies](../resiliency/index.md#resiliency-strategies).</span></span>

<span data-ttu-id="8b6b7-174">**Implémentez des opérations asynchrones dès que possible.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-174">**Implement asynchronous operations whenever possible.**</span></span> <span data-ttu-id="8b6b7-175">Les opérations synchrones peuvent monopoliser les ressources et de bloquer les autres opérations pendant que l’appelant attend la fin du processus.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-175">Synchronous operations can monopolize resources and block other operations while the caller waits for the process to complete.</span></span> <span data-ttu-id="8b6b7-176">Concevez chaque partie de votre application de manière à permettre les opérations asynchrones dès que possible.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-176">Design each part of your application to allow for asynchronous operations whenever possible.</span></span> <span data-ttu-id="8b6b7-177">Pour plus d’informations sur l’implémentation de la programmation asynchrone en C#, consultez [Programmation asynchrone avec async et await][asynchronous-c-sharp].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-177">For more information on how to implement asynchronous programming in C#, see [Asynchronous Programming with async and await][asynchronous-c-sharp].</span></span>

## <a name="data-management"></a><span data-ttu-id="8b6b7-178">Gestion des données</span><span class="sxs-lookup"><span data-stu-id="8b6b7-178">Data management</span></span>

<span data-ttu-id="8b6b7-179">**Étudiez les méthodes de réplication pour les sources de données de votre application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-179">**Understand the replication methods for your application's data sources.**</span></span> <span data-ttu-id="8b6b7-180">Vos données d’application seront stockées dans des sources de données différentes et présenteront des exigences de disponibilité distinctes.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-180">Your application data will be stored in different data sources and have different availability requirements.</span></span> <span data-ttu-id="8b6b7-181">Évaluer les méthodes de réplication pour chaque type de stockage de données dans Azure, y compris la [réplication Stockage Azure](/azure/storage/storage-redundancy/) et [géoréplication active de SQL Database](/azure/sql-database/sql-database-geo-replication-overview/), pour vous assurer que les exigences de votre application en matière de données sont satisfaites.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-181">Evaluate the replication methods for each type of data storage in Azure, including [Azure Storage Replication](/azure/storage/storage-redundancy/) and [SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/) to ensure that your application's data requirements are satisfied.</span></span>

<span data-ttu-id="8b6b7-182">**Assurez-vous qu’aucun compte d’utilisateur n’a accès à la fois aux données de production et aux données de sauvegarde.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-182">**Ensure that no single user account has access to both production and backup data.**</span></span> <span data-ttu-id="8b6b7-183">Si un même compte d’utilisateur est autorisé à écrire dans les sources de production et de sauvegarde, vos sauvegardes de données risquent d’être compromises.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-183">Your data backups are compromised if one single user account has permission to write to both production and backup sources.</span></span> <span data-ttu-id="8b6b7-184">En effet, un utilisateur malveillant pourrait supprimer volontairement toutes vos données, tandis qu’un utilisateur normal pourrait les supprimer accidentellement.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-184">A malicious user could purposely delete all your data, while a regular user could accidentally delete it.</span></span> <span data-ttu-id="8b6b7-185">Concevez votre application de manière à limiter les autorisations de chaque compte d’utilisateur afin que seuls les utilisateurs qui ont besoin d’un accès en écriture disposent d’un tel accès, et que celui-ci ne s’applique qu’aux données de production ou de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-185">Design your application to limit the permissions of each user account so that only the users that require write access have write access and it's only to either production or backup, but not both.</span></span>

<span data-ttu-id="8b6b7-186">**Documentez le processus de basculement et de restauration automatique de votre source de données et testez-le.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-186">**Document your data source fail over and fail back process and test it.**</span></span> <span data-ttu-id="8b6b7-187">Si votre source de données connaît une erreur irrécupérable, un opérateur humain devra suivre un ensemble d’instructions documentées pour effectuer un basculement vers une nouvelle source de données.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-187">In the case where your data source fails catastrophically, a human operator will have to follow a set of documented instructions to fail over to a new data source.</span></span> <span data-ttu-id="8b6b7-188">Si les étapes documentées comportent des erreurs, l’opérateur ne sera pas en mesure de les suivre et de basculer la ressource correctement.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-188">If the documented steps have errors, an operator will not be able to successfully follow them and fail over the resource.</span></span> <span data-ttu-id="8b6b7-189">Testez régulièrement la procédure pour vérifier qu’un opérateur qui la suit est en mesure de basculer et de restaurer la source de données avec succès.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-189">Regularly test the instruction steps to verify that an operator following them is able to successfully fail over and fail back the data source.</span></span>

<span data-ttu-id="8b6b7-190">**Validez vos sauvegardes de données.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-190">**Validate your data backups.**</span></span> <span data-ttu-id="8b6b7-191">Vérifiez régulièrement que vos données de sauvegarde sont celles attendues en exécutant un script pour valider l’intégrité des données, le schéma et les requêtes.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-191">Regularly verify that your backup data is what you expect by running a script to validate data integrity, schema, and queries.</span></span> <span data-ttu-id="8b6b7-192">Cela ne sert à rien de disposer d’une sauvegarde si celle-ci ne permet pas de restaurer les sources de données.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-192">There's no point having a backup if it's not useful to restore your data sources.</span></span> <span data-ttu-id="8b6b7-193">Consignez et signalez toute incohérence pour que le service de sauvegarde puisse être réparé.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-193">Log and report any inconsistencies so the backup service can be repaired.</span></span>

<span data-ttu-id="8b6b7-194">**Envisagez d’utiliser un type de compte de stockage géoredondant.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-194">**Consider using a storage account type that is geo-redundant.**</span></span> <span data-ttu-id="8b6b7-195">Les données stockées dans un compte Stockage Azure sont toujours répliquées localement.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-195">Data stored in an Azure Storage account is always replicated locally.</span></span> <span data-ttu-id="8b6b7-196">Cependant, plusieurs stratégies de réplication sont proposées lors du provisionnement d’un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-196">However, there are multiple replication strategies to choose from when a Storage Account is provisioned.</span></span> <span data-ttu-id="8b6b7-197">Sélectionnez [Stockage géo-redondant avec accès en lecture (RA-GRS)](/azure/storage/storage-redundancy/#read-access-geo-redundant-storage) pour que vos données d’application soient protégées dans l’éventualité peu probable où une région entière deviendrait indisponible.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-197">Select [Azure Read-Access Geo Redundant Storage (RA-GRS)](/azure/storage/storage-redundancy/#read-access-geo-redundant-storage) to protect your application data against the rare case when an entire region becomes unavailable.</span></span>

> [!NOTE]
> <span data-ttu-id="8b6b7-198">Pour les machines virtuelles, ne vous appuyez pas sur la réplication RA-GRS pour restaurer les disques de machine virtuelle (fichiers VHD).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-198">For VMs, do not rely on RA-GRS replication to restore the VM disks (VHD files).</span></span> <span data-ttu-id="8b6b7-199">Utilisez le service [Sauvegarde Azure][azure-backup] à la place.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-199">Instead, use [Azure Backup][azure-backup].</span></span>   
>
>

## <a name="security"></a><span data-ttu-id="8b6b7-200">Sécurité</span><span class="sxs-lookup"><span data-stu-id="8b6b7-200">Security</span></span>

<span data-ttu-id="8b6b7-201">**Implémentez la protection de niveau application contre les attaques par déni de service distribué (DDoS).**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-201">**Implement application-level protection against distributed denial of service (DDoS) attacks.**</span></span> <span data-ttu-id="8b6b7-202">Les services Azure sont protégés contre les attaques DDoS au niveau de la couche réseau.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-202">Azure services are protected against DDos attacks at the network layer.</span></span> <span data-ttu-id="8b6b7-203">Cependant, Azure ne peut pas assurer une protection contre les attaques de la couche Application, car il est difficile de distinguer les requêtes utilisateur réelles des requêtes utilisateur malveillantes.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-203">However, Azure cannot protect against application-layer attacks, because it is difficult to distinguish between true user requests from malicious user requests.</span></span> <span data-ttu-id="8b6b7-204">Pour plus d’informations sur la protection contre les attaques DDoS ciblant la couche Application, consultez la section Protecting against DDoS (Protection contre les attaques DDoS) du document [Microsoft Azure Network Security](http://download.microsoft.com/download/C/A/3/CA3FC5C0-ECE0-4F87-BF4B-D74064A00846/AzureNetworkSecurity_v3_Feb2015.pdf) (Sécurité réseau de Microsoft Azure) (téléchargement au format PDF).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-204">For more information on how to protect against application-layer DDoS attacks, see the "Protecting against DDoS" section of [Microsoft Azure Network Security](http://download.microsoft.com/download/C/A/3/CA3FC5C0-ECE0-4F87-BF4B-D74064A00846/AzureNetworkSecurity_v3_Feb2015.pdf) (PDF download).</span></span>

<span data-ttu-id="8b6b7-205">**Implémentez le principe des privilèges minimum pour l’accès aux ressources de l’application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-205">**Implement the principle of least privilege for access to the application's resources.**</span></span> <span data-ttu-id="8b6b7-206">L’accès par défaut aux ressources de l’application doit être le plus restrictif possible.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-206">The default for access to the application's resources should be as restrictive as possible.</span></span> <span data-ttu-id="8b6b7-207">Accordez des autorisations de niveau supérieur sur approbation.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-207">Grant higher level permissions on an approval basis.</span></span> <span data-ttu-id="8b6b7-208">Si vous octroyez par défaut un accès trop permissif aux ressources de votre application, quelqu’un pourrait supprimer des ressources volontairement ou accidentellement.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-208">Granting overly permissive access to your application's resources by default can result in someone purposely or accidentally deleting resources.</span></span> <span data-ttu-id="8b6b7-209">Azure fournit un [contrôle d’accès en fonction du rôle](/azure/active-directory/role-based-access-built-in-roles/) pour gérer les privilèges utilisateur, mais il est important de vérifier les autorisations avec des privilèges minimum pour les autres ressources qui présentent leur propre système d’autorisations, telles que SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-209">Azure provides [role-based access control](/azure/active-directory/role-based-access-built-in-roles/) to manage user privileges, but it's important to verify least privilege permissions for other resources that have their own permissions systems such as SQL Server.</span></span>

## <a name="testing"></a><span data-ttu-id="8b6b7-210">Test</span><span class="sxs-lookup"><span data-stu-id="8b6b7-210">Testing</span></span>

<span data-ttu-id="8b6b7-211">**Effectuez des tests de basculement et de restauration automatique pour votre application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-211">**Perform failover and failback testing for your application.**</span></span> <span data-ttu-id="8b6b7-212">Si vous n’avez pas entièrement testé le basculement et la restauration automatique, vous n’avez aucune garantie que les services dépendants de votre application redeviendront actifs de manière synchronisée au cours de la récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-212">If you haven't fully tested failover and failback, you can't be certain that the dependent services in your application come back up in a synchronized manner during disaster recovery.</span></span> <span data-ttu-id="8b6b7-213">Assurez-vous que les services dépendants de votre application sont basculés et restaurés dans l’ordre correct.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-213">Ensure that your application's dependent services failover and fail back in the correct order.</span></span>

<span data-ttu-id="8b6b7-214">**Effectuez des tests d’injection d’erreurs pour votre application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-214">**Perform fault-injection testing for your application.**</span></span> <span data-ttu-id="8b6b7-215">Votre application peut échouer pour de nombreuses raisons : expiration de certificat, épuisement des ressources système d’une machine virtuelle, défaillances de stockage, etc.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-215">Your application can fail for many different reasons, such as certificate expiration, exhaustion of system resources in a VM, or storage failures.</span></span> <span data-ttu-id="8b6b7-216">Testez votre application dans un environnement aussi proche que possible de l’environnement de production, en simulant ou en déclenchant des échecs réels.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-216">Test your application in an environment as close as possible to production, by simulating or triggering real failures.</span></span> <span data-ttu-id="8b6b7-217">Par exemple, supprimez des certificats, consommez artificiellement les ressources système ou supprimez une source de stockage.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-217">For example, delete certificates, artificially consume system resources, or delete a storage source.</span></span> <span data-ttu-id="8b6b7-218">Vérifiez la capacité de votre application à récupérer des erreurs de tout type, qu’elles surviennent de façon isolée ou simultanée.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-218">Verify your application's ability to recover from all types of faults, alone and in combination.</span></span> <span data-ttu-id="8b6b7-219">Assurez-vous que les erreurs ne se propagent pas ou ne se produisent pas de manière successive dans votre système.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-219">Check that failures are not propagating or cascading through your system.</span></span>

<span data-ttu-id="8b6b7-220">**Exécutez des tests en production en utilisant à la fois des données utilisateur de synthèse et des données utilisateur réelles.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-220">**Run tests in production using both synthetic and real user data.**</span></span> <span data-ttu-id="8b6b7-221">Étant donné que les environnements de test et de production sont rarement identiques, il est important d’utiliser un déploiement Blue/Green ou de contrôle de validité et de tester votre application en production.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-221">Test and production are rarely identical, so it's important to use blue/green or a canary deployment and test your application in production.</span></span> <span data-ttu-id="8b6b7-222">Vous pouvez ainsi tester votre application en production avec une charge réelle et vous assurer qu’elle fonctionnera comme prévu quand elle sera entièrement déployée.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-222">This allows you to test your application in production under real load and ensure it will function as expected when fully deployed.</span></span>

## <a name="deployment"></a><span data-ttu-id="8b6b7-223">Déploiement</span><span class="sxs-lookup"><span data-stu-id="8b6b7-223">Deployment</span></span>

<span data-ttu-id="8b6b7-224">**Documentez le processus de mise en production de votre application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-224">**Document the release process for your application.**</span></span> <span data-ttu-id="8b6b7-225">Sans documentation détaillée du processus de mise en production, un opérateur risque de déployer une mise à jour incorrecte ou de mal configurer les paramètres de votre application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-225">Without detailed release process documentation, an operator might deploy a bad update or improperly configure settings for your application.</span></span> <span data-ttu-id="8b6b7-226">Définissez et documentez clairement votre processus de mise en production et assurez-vous que toute l’équipe chargée des opérations a accès à cette documentation.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-226">Clearly define and document your release process, and ensure that it's available to the entire operations team.</span></span> 

<span data-ttu-id="8b6b7-227">**Automatisez le processus de déploiement de votre application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-227">**Automate your application's deployment process.**</span></span> <span data-ttu-id="8b6b7-228">Si votre personnel chargé des opérations est obligé de déployer manuellement votre application, des erreurs humaines risquent de faire échouer le déploiement.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-228">If your operations staff is required to manually deploy your application, human error can cause the deployment to fail.</span></span> 

<span data-ttu-id="8b6b7-229">**Concevez votre processus de mise en production de manière à optimiser la disponibilité de l’application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-229">**Design your release process to maximize application availability.**</span></span> <span data-ttu-id="8b6b7-230">Si votre processus de mise en production nécessite le passage hors connexion des services pendant le déploiement, votre application sera indisponible jusqu’à ce qu’ils soient à nouveau en ligne.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-230">If your release process requires services to go offline during deployment, your application will be unavailable until they come back online.</span></span> <span data-ttu-id="8b6b7-231">Utilisez la technique de déploiement [Blue/Green](http://martinfowler.com/bliki/BlueGreenDeployment.html) ou [de contrôle de validité](http://martinfowler.com/bliki/CanaryRelease.html) pour déployer votre application en production.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-231">Use the [blue/green](http://martinfowler.com/bliki/BlueGreenDeployment.html) or [canary release](http://martinfowler.com/bliki/CanaryRelease.html) deployment technique to deploy your application to production.</span></span> <span data-ttu-id="8b6b7-232">Ces deux techniques impliquent le déploiement de votre code de mise en production parallèlement au code de production pour que les utilisateurs du code de mise en production puissent être redirigés vers le code de production en cas de défaillance.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-232">Both of these techniques involve deploying your release code alongside production code so users of release code can be redirected to production code in the event of a failure.</span></span>

<span data-ttu-id="8b6b7-233">**Consignez et évaluez les déploiements de votre application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-233">**Log and audit your application's deployments.**</span></span> <span data-ttu-id="8b6b7-234">Si vous utilisez des techniques de déploiement intermédiaire telles qu’un déploiement Blue/Green ou de contrôle de validité, plusieurs versions de votre application seront exécutées en production.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-234">If you use staged deployment techniques such as blue/green or canary releases there will be more than one version of your application running in production.</span></span> <span data-ttu-id="8b6b7-235">Si un problème survient, il est essentiel de déterminer quelle version de votre application en est à l’origine.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-235">If a problem should occur, it's critical to determine which version of your application is causing a problem.</span></span> <span data-ttu-id="8b6b7-236">Implémentez une stratégie de journalisation fiable pour capturer le plus d’informations possible concernant la version.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-236">Implement a robust logging strategy to capture as much version-specific information as possible.</span></span>

<span data-ttu-id="8b6b7-237">**Mettez en place un plan de restauration pour le déploiement.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-237">**Have a rollback plan for deployment.**</span></span> <span data-ttu-id="8b6b7-238">Le déploiement de votre application peut échouer et provoquer l’indisponibilité de votre application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-238">It's possible that your application deployment could fail and cause your application to become unavailable.</span></span> <span data-ttu-id="8b6b7-239">Concevez un processus de restauration pour revenir à la dernière version valide connue et réduire le temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-239">Design a rollback process to go back to a last known good version and minimize downtime.</span></span> 

## <a name="operations"></a><span data-ttu-id="8b6b7-240">Opérations</span><span class="sxs-lookup"><span data-stu-id="8b6b7-240">Operations</span></span>

<span data-ttu-id="8b6b7-241">**Implémentez les meilleures pratiques en matière de surveillance et d’alerte dans votre application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-241">**Implement best practices for monitoring and alerting in your application.**</span></span> <span data-ttu-id="8b6b7-242">En l’absence de systèmes de surveillance, de diagnostic et d’alerte appropriés, vous n’aurez aucun moyen de détecter les défaillances dans votre application et de les signaler à un opérateur à des fins de résolution.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-242">Without proper monitoring, diagnostics, and alerting, there is no way to detect failures in your application and alert an operator to fix them.</span></span> <span data-ttu-id="8b6b7-243">Pour plus d’informations, consultez [Guide de surveillance et de diagnostic][monitoring-and-diagnostics-guidance].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-243">For more information, see [Monitoring and Diagnostics guidance][monitoring-and-diagnostics-guidance].</span></span>

<span data-ttu-id="8b6b7-244">**Mesurez les statistiques d’appels distants et mettez ces informations à disposition de l’équipe responsable de l’application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-244">**Measure remote call statistics and make the information available to the application team.**</span></span>  <span data-ttu-id="8b6b7-245">Si vous n’effectuez pas de suivi et de rapport des statistiques d’appels distants en temps réel, et que vous n’offrez pas un moyen simple de consulter ces informations, l’équipe ne bénéficiera pas d’une vue instantanée de l’intégrité de votre application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-245">If you don't track and report remote call statistics in real time and provide an easy way to review this information, the operations team will not have an instantaneous view into the health of your application.</span></span> <span data-ttu-id="8b6b7-246">Par ailleurs, si vous mesurez seulement la durée moyenne des appels distants, vous ne disposerez pas d’informations suffisantes pour déceler les problèmes affectant les services.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-246">And if you only measure average remote call time, you will not have enough information to reveal issues in the services.</span></span> <span data-ttu-id="8b6b7-247">Résumez les mesures liées aux appels distants, telles que la latence, le débit et les erreurs, dans les centiles 99 et 95.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-247">Summarize remote call metrics such as latency, throughput, and errors in the 99 and 95 percentiles.</span></span> <span data-ttu-id="8b6b7-248">Effectuez une analyse statistique sur les mesures pour détecter les erreurs qui se produisent dans chaque centile.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-248">Perform statistical analysis on the metrics to uncover errors that occur within each percentile.</span></span>

<span data-ttu-id="8b6b7-249">**Suivez le nombre d’exceptions temporaires et de nouvelles tentatives sur une plage de temps appropriée.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-249">**Track the number of transient exceptions and retries over an appropriate timeframe.**</span></span> <span data-ttu-id="8b6b7-250">Si vous ne suivez et ne surveillez pas les exceptions temporaires et les nouvelles tentatives au fil du temps, il se peut qu’une défaillance ou un problème soit dissimulé par la logique de nouvelle tentative de votre application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-250">If you don't track and monitor transient exceptions and retry attempts over time, it's possible that an issue or failure could be hidden by your application's retry logic.</span></span> <span data-ttu-id="8b6b7-251">Autrement dit, si votre surveillance et votre journalisation montrent uniquement la réussite ou l’échec d’une opération, le fait que l’opération a dû être retentée plusieurs fois en raison d’exceptions sera dissimulé.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-251">That is, if your monitoring and logging only shows success or failure of an operation, the fact that the operation had to be retried multiple times due to exceptions will be hidden.</span></span> <span data-ttu-id="8b6b7-252">Une augmentation des exceptions au fil du temps indique que le service rencontre un problème et risque d’échouer.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-252">A trend of increasing exceptions over time indicates that the service is having an issue and may fail.</span></span> <span data-ttu-id="8b6b7-253">Pour plus d’informations, consultez [Guide spécifique relatif au service de nouvelle tentative][retry-service-guidance].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-253">For more information, see [Retry service specific guidance][retry-service-guidance].</span></span>

<span data-ttu-id="8b6b7-254">**Implémentez un système d’avertissement anticipé qui alerte un opérateur.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-254">**Implement an early warning system that alerts an operator.**</span></span> <span data-ttu-id="8b6b7-255">Identifiez les indicateurs de performance clés de l’intégrité de votre application, tels que les exceptions temporaires et la latence des appels distants, et définissez des valeurs de seuil appropriées pour chacun d’eux.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-255">Identify the key performance indicators of your application's health, such as transient exceptions and remote call latency, and set appropriate threshold values for each of them.</span></span> <span data-ttu-id="8b6b7-256">Envoyez une alerte à l’équipe chargée des opérations quand une valeur de seuil est atteinte.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-256">Send an alert to operations when the threshold value is reached.</span></span> <span data-ttu-id="8b6b7-257">Définissez ces seuils à des niveaux qui identifient les problèmes avant qu’ils ne deviennent critiques et n’exigent la mise en œuvre d’une récupération.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-257">Set these thresholds at levels that identify issues before they become critical and require a recovery response.</span></span>

<span data-ttu-id="8b6b7-258">**Assurez-vous que plusieurs personnes de l’équipe sont formées pour surveiller l’application et effectuer les étapes de récupération manuelle.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-258">**Ensure that more than one person on the team is trained to monitor the application and perform any manual recovery steps.**</span></span> <span data-ttu-id="8b6b7-259">Si vous avez un seul opérateur dans l’équipe qui peut surveiller l’application et déclencher la procédure de récupération, celui-ci constitue un point de défaillance unique.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-259">If you only have a single operator on the team who can monitor the application and kick off recovery steps, that person becomes a single point of failure.</span></span> <span data-ttu-id="8b6b7-260">Formez plusieurs personnes sur la détection et la récupération et assurez-vous qu’au moins une d’entre elles est disponible à tout moment.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-260">Train multiple individuals on detection and recovery and make sure there is always at least one active at any time.</span></span>

<span data-ttu-id="8b6b7-261">**Assurez-vous que votre application ne se heurte pas aux [limites d’abonnement Azure](/azure/azure-subscription-service-limits/).**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-261">**Ensure that your application does not run up against [Azure subscription limits](/azure/azure-subscription-service-limits/).**</span></span> <span data-ttu-id="8b6b7-262">Les abonnements Azure présentent des limites pour certains types de ressources, par exemple le nombre de groupes de ressources, le nombre de cœurs et le nombre de comptes de stockage.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-262">Azure subscriptions have limits on certain resource types, such as number of resource groups, number of cores, and number of storage accounts.</span></span>  <span data-ttu-id="8b6b7-263">Si les exigences de votre application dépassent les limites d’abonnement Azure, créez un autre abonnement Azure et approvisionnez des ressources suffisantes pour celui-ci.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-263">If your application requirements exceed Azure subscription limits, create another Azure subscription and provision sufficient resources there.</span></span>

<span data-ttu-id="8b6b7-264">**Assurez-vous que votre application ne se heurte pas aux [limites par service](/azure/azure-subscription-service-limits/).**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-264">**Ensure that your application does not run up against [per-service limits](/azure/azure-subscription-service-limits/).**</span></span> <span data-ttu-id="8b6b7-265">Les services Azure individuels présentent des limites en termes de consommation, telles que des limites sur le stockage, le débit, le nombre de connexions, les requêtes par seconde et d’autres mesures.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-265">Individual Azure services have consumption limits &mdash; for example, limits on storage, throughput, number of connections, requests per second, and other metrics.</span></span> <span data-ttu-id="8b6b7-266">Si votre application tente d’utiliser des ressources au-delà de ces limites, elle échouera.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-266">Your application will fail if it attempts to use resources beyond these limits.</span></span> <span data-ttu-id="8b6b7-267">Cela donnera lieu à une limitation du service et potentiellement à un temps d’arrêt pour les utilisateurs touchés.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-267">This will result in service throttling and possible downtime for affected users.</span></span> <span data-ttu-id="8b6b7-268">Selon le service spécifique et les exigences de votre application, vous pouvez souvent éviter ces limites en montant en puissance (par exemple, en choisissant un autre niveau tarifaire) ou en montant en charge (en ajoutant de nouvelles instances).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-268">Depending on the specific service and your application requirements, you can often avoid these limits by scaling up (for example, choosing another pricing tier) or scaling out (adding new instances).</span></span>  

<span data-ttu-id="8b6b7-269">**Concevez votre application de telle sorte que ses exigences de stockage soient inférieures ou égales aux objectifs d’extensibilité et de performance du stockage Azure.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-269">**Design your application's storage requirements to fall within Azure storage scalability and performance targets.**</span></span> <span data-ttu-id="8b6b7-270">Le stockage Azure étant conçu pour fonctionner selon des objectifs d’extensibilité et de performance prédéfinis, vous devez concevoir votre application de manière à ce que son utilisation du stockage soit inférieure ou égale à ces objectifs.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-270">Azure storage is designed to function within predefined scalability and performance targets, so design your application to utilize storage within those targets.</span></span> <span data-ttu-id="8b6b7-271">Si vous dépassez ces objectifs, le stockage de votre application sera limité.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-271">If you exceed these targets your application will experience storage throttling.</span></span> <span data-ttu-id="8b6b7-272">Pour résoudre ce problème, approvisionnez des comptes de stockage supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-272">To fix this, provision additional Storage Accounts.</span></span> <span data-ttu-id="8b6b7-273">Si vous vous heurtez à la limite des comptes de stockage, approvisionnez des abonnements Azure supplémentaires, puis approvisionnez-y des comptes de stockage supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-273">If you run up against the Storage Account limit, provision additional Azure Subscriptions and then provision additional Storage Accounts there.</span></span> <span data-ttu-id="8b6b7-274">Pour plus d'informations, consultez [Objectifs d'extensibilité et de performances d'Azure Storage](/azure/storage/storage-scalability-targets/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-274">For more information, see [Azure Storage Scalability and Performance Targets](/azure/storage/storage-scalability-targets/).</span></span>

<span data-ttu-id="8b6b7-275">**Sélectionnez la taille de machine virtuelle appropriée pour votre application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-275">**Select the right VM size for your application.**</span></span> <span data-ttu-id="8b6b7-276">Mesurez l’utilisation réelle de l’UC, de la mémoire, du disque et des E/S de vos machines virtuelles en production et vérifiez que la taille de machine virtuelle que vous avez choisie est suffisante.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-276">Measure the actual CPU, memory, disk, and I/O of your VMs in production and verify that the VM size you've selected is sufficient.</span></span> <span data-ttu-id="8b6b7-277">Si ce n’est pas le cas, il se peut que votre application rencontre des problèmes de capacité quand les machines virtuelles sont proches de leurs limites.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-277">If not, your application may experience capacity issues as the VMs approach their limits.</span></span> <span data-ttu-id="8b6b7-278">Les tailles de machine virtuelle sont décrites en détail dans [Tailles des machines virtuelles dans Azure](/azure/virtual-machines/virtual-machines-windows-sizes/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-278">VM sizes are described in detail in [Sizes for virtual machines in Azure](/azure/virtual-machines/virtual-machines-windows-sizes/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="8b6b7-279">**Déterminez si la charge de travail de votre application est stable ou fluctue au fil du temps.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-279">**Determine if your application's workload is stable or fluctuating over time.**</span></span> <span data-ttu-id="8b6b7-280">Si votre charge de travail fluctue au fil du temps, utilisez les groupes de machines virtuelles identiques Azure pour mettre automatiquement à l’échelle le nombre d’instances de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-280">If your workload fluctuates over time, use Azure VM scale sets to automatically scale the number of VM instances.</span></span> <span data-ttu-id="8b6b7-281">Autrement, vous devrez augmenter ou diminuer manuellement le nombre de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-281">Otherwise, you will have to manually increase or decrease the number of VMs.</span></span> <span data-ttu-id="8b6b7-282">Pour plus d’informations, consultez [Présentation des groupes de machines virtuelles identiques Azure](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-282">For more information, see the [Virtual Machine Scale Sets Overview](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span></span>

<span data-ttu-id="8b6b7-283">**Sélectionnez le niveau de service approprié pour Azure SQL Database.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-283">**Select the right service tier for Azure SQL Database.**</span></span> <span data-ttu-id="8b6b7-284">Si votre application utilise Azure SQL Database, assurez-vous que vous avez choisi le niveau de service approprié.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-284">If your application uses Azure SQL Database, ensure that you have selected the appropriate service tier.</span></span> <span data-ttu-id="8b6b7-285">Si vous sélectionnez un niveau qui ne permet pas de gérer les exigences de votre application en matière d’unités de transaction de base de données (DTU), votre utilisation de données sera limitée.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-285">If you select a tier that is not able to handle your application's database transaction unit (DTU) requirements, your data use will be throttled.</span></span> <span data-ttu-id="8b6b7-286">Pour plus d’informations sur la sélection du plan de service approprié, consultez [Options et performances de SQL Database : comprendre ce qui est disponible dans chaque niveau de service](/azure/sql-database/sql-database-service-tiers/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-286">For more information on selecting the correct service plan, see [SQL Database options and performance: Understand what's available in each service tier](/azure/sql-database/sql-database-service-tiers/).</span></span>

<span data-ttu-id="8b6b7-287">**Créez un processus pour l’interaction avec le support Azure.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-287">**Create a process for interacting with Azure support.**</span></span> <span data-ttu-id="8b6b7-288">Si le processus de contact du [support Azure](https://azure.microsoft.com/support/plans/) n’est pas défini avant qu’il soit nécessaire de contacter ce dernier, le temps d’arrêt sera prolongé du fait de l’accès au processus de support pour la première fois.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-288">If the process for contacting [Azure support](https://azure.microsoft.com/support/plans/) is not set before the need to contact support arises, downtime will be prolonged as the support process is navigated for the first time.</span></span> <span data-ttu-id="8b6b7-289">Incluez le processus pour contacter le support et faire remonter les problèmes dans le cadre de la résilience de votre application dès le début.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-289">Include the process for contacting support and escalating issues as part of your application's resiliency from the outset.</span></span>

<span data-ttu-id="8b6b7-290">**Assurez-vous que votre application n’utilise pas plus que le nombre maximal de comptes de stockage par abonnement.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-290">**Ensure that your application doesn't use more than the maximum number of storage accounts per subscription.**</span></span> <span data-ttu-id="8b6b7-291">Azure autorise un maximum de 200 comptes de stockage par abonnement.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-291">Azure allows a maximum of 200 storage accounts per subscription.</span></span> <span data-ttu-id="8b6b7-292">Si votre application requiert plus de comptes de stockage qu’il n’y en a actuellement dans votre abonnement, vous devez créer un nouvel abonnement et y créer des comptes de stockage supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-292">If your application requires more storage accounts than are currently available in your subscription, you will have to create a new subscription and create additional storage accounts there.</span></span> <span data-ttu-id="8b6b7-293">Pour plus d’informations, consultez [Abonnement Azure et limites, quotas et contraintes de service](/azure/azure-subscription-service-limits/#storage-limits).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-293">For more information, see [Azure subscription and service limits, quotas, and constraints](/azure/azure-subscription-service-limits/#storage-limits).</span></span>

<span data-ttu-id="8b6b7-294">**Assurez-vous que votre application ne dépasse pas les objectifs d’extensibilité pour les disques de machine virtuelle.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-294">**Ensure that your application doesn't exceed the scalability targets for virtual machine disks.**</span></span> <span data-ttu-id="8b6b7-295">Une machine virtuelle IaaS Azure prend en charge l’attachement d’un nombre de disques de données qui dépend de plusieurs facteurs, notamment la taille de machine virtuelle et le type de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-295">An Azure IaaS VM supports attaching a number of data disks depending on several factors, including the VM size and type of storage account.</span></span> <span data-ttu-id="8b6b7-296">Si votre application dépasse les objectifs d’extensibilité pour les disques de machine virtuelle, approvisionnez des comptes de stockage supplémentaires et créez-y les disques de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-296">If your application exceeds the scalability targets for virtual machine disks, provision additional storage accounts and create the virtual machine disks there.</span></span> <span data-ttu-id="8b6b7-297">Pour plus d’informations, consultez [Objectifs de performance et d’extensibilité de Stockage Azure](/azure/storage/storage-scalability-targets/#scalability-targets-for-virtual-machine-disks).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-297">For more information, see [Azure Storage Scalability and Performance Targets](/azure/storage/storage-scalability-targets/#scalability-targets-for-virtual-machine-disks)</span></span>

## <a name="telemetry"></a><span data-ttu-id="8b6b7-298">Télémétrie</span><span class="sxs-lookup"><span data-stu-id="8b6b7-298">Telemetry</span></span>

<span data-ttu-id="8b6b7-299">**Consignez des données de télémétrie pendant l’exécution de l’application dans l’environnement de production.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-299">**Log telemetry data while the application is running in the production environment.**</span></span> <span data-ttu-id="8b6b7-300">Enregistrez des informations de télémétrie fiables pendant l’exécution de l’application dans l’environnement de production ou vous ne disposerez pas de suffisamment d’informations pour diagnostiquer la cause des problèmes pendant son utilisation.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-300">Capture robust telemetry information while the application is running in the production environment or you will not have sufficient information to diagnose the cause of issues while it's actively serving users.</span></span> <span data-ttu-id="8b6b7-301">Pour plus d’informations, consultez [Surveillance et diagnostics][monitoring-and-diagnostics-guidance].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-301">For more information, see [Monitoring and Diagnostics][monitoring-and-diagnostics-guidance].</span></span>

<span data-ttu-id="8b6b7-302">**Implémentez la journalisation à l’aide d’un modèle asynchrone.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-302">**Implement logging using an asynchronous pattern.**</span></span> <span data-ttu-id="8b6b7-303">Si les opérations de journalisation sont synchrones, elles risquent de bloquer le code de votre application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-303">If logging operations are synchronous, they might block your application code.</span></span> <span data-ttu-id="8b6b7-304">Assurez-vous que vos opérations de journalisation sont implémentées en tant qu’opérations asynchrones.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-304">Ensure that your logging operations are implemented as asynchronous operations.</span></span>

<span data-ttu-id="8b6b7-305">**Mettez en corrélation les données de journalisation au-delà des limites des services.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-305">**Correlate log data across service boundaries.**</span></span> <span data-ttu-id="8b6b7-306">Dans une application multiniveau classique, une requête utilisateur peut franchir les limites de plusieurs services.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-306">In a typical n-tier application, a user request may traverse several service boundaries.</span></span> <span data-ttu-id="8b6b7-307">Par exemple, en général, une requête utilisateur provient de la couche Web, est transmise à la couche Métier et enfin conservée dans la couche Données.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-307">For example, a user request typically originates in the web tier and is passed to the business tier and finally persisted in the data tier.</span></span> <span data-ttu-id="8b6b7-308">Dans des scénarios plus complexes, une requête utilisateur peut être distribuée à de nombreux services et magasins de données différents.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-308">In more complex scenarios, a user request may be distributed to many different services and data stores.</span></span> <span data-ttu-id="8b6b7-309">Assurez-vous que votre système de journalisation met en corrélation les appels au-delà des limites des services pour que vous puissiez suivre la requête dans l’ensemble de votre application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-309">Ensure that your logging system correlates calls across service boundaries so you can track the request throughout your application.</span></span>

## <a name="azure-resources"></a><span data-ttu-id="8b6b7-310">Ressources Azure</span><span class="sxs-lookup"><span data-stu-id="8b6b7-310">Azure Resources</span></span>

<span data-ttu-id="8b6b7-311">**Utilisez les modèles Azure Resource Manager pour approvisionner des ressources.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-311">**Use Azure Resource Manager templates to provision resources.**</span></span> <span data-ttu-id="8b6b7-312">Les modèles Resource Manager permettent d’automatiser plus facilement les déploiements via PowerShell ou l’interface de ligne de commande Azure, ce qui donne lieu à un processus de déploiement plus fiable.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-312">Resource Manager templates make it easier to automate deployments via PowerShell or the Azure CLI, which leads to a more reliable deployment process.</span></span> <span data-ttu-id="8b6b7-313">Pour plus d’informations, consultez [Présentation d’Azure Resource Manager][resource-manager].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-313">For more information, see [Azure Resource Manager overview][resource-manager].</span></span>

<span data-ttu-id="8b6b7-314">**Nommez les ressources de façon explicite.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-314">**Give resources meaningful names.**</span></span> <span data-ttu-id="8b6b7-315">Vous pourrez ainsi plus facilement localiser une ressource spécifique et comprendre son rôle.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-315">Giving resources meaningful names makes it easier to locate a specific resource and understand its role.</span></span> <span data-ttu-id="8b6b7-316">Pour plus d’informations, consultez [Conventions d’affectation de noms pour les ressources Azure](../best-practices/naming-conventions.md).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-316">For more information, see [Naming conventions for Azure resources](../best-practices/naming-conventions.md)</span></span>

<span data-ttu-id="8b6b7-317">**Utilisez le contrôle d’accès en fonction du rôle (RBAC).**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-317">**Use role-based access control (RBAC).**</span></span> <span data-ttu-id="8b6b7-318">Utilisez le contrôle RBAC pour contrôler l’accès aux ressources Azure que vous déployez.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-318">Use RBAC to control access to the Azure resources that you deploy.</span></span> <span data-ttu-id="8b6b7-319">Le contrôle RBAC vous permet d’assigner des rôles d’autorisation aux membres de votre équipe DevOps afin d’empêcher les suppressions ou les modifications accidentelles des ressources déployées.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-319">RBAC lets you assign authorization roles to members of your DevOps team, to prevent accidental deletion or changes to deployed resources.</span></span> <span data-ttu-id="8b6b7-320">Pour plus d’informations, consultez [Prise en main de la gestion des accès dans le portail Azure](/azure/active-directory/role-based-access-control-what-is/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-320">For more information, see [Get started with access management in the Azure portal](/azure/active-directory/role-based-access-control-what-is/)</span></span>

<span data-ttu-id="8b6b7-321">**Utilisez les verrous de ressources pour les ressources critiques, telles que les machines virtuelles.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-321">**Use resource locks for critical resources, such as VMs.**</span></span> <span data-ttu-id="8b6b7-322">Les verrous de ressources empêchent un opérateur de supprimer accidentellement une ressource.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-322">Resource locks prevent an operator from accidentally deleting a resource.</span></span> <span data-ttu-id="8b6b7-323">Pour plus d’informations, consultez [Verrouiller des ressources avec Azure Resource Manager](/azure/azure-resource-manager/resource-group-lock-resources/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-323">For more information, see [Lock resources with Azure Resource Manager](/azure/azure-resource-manager/resource-group-lock-resources/)</span></span>

<span data-ttu-id="8b6b7-324">**Choisissez des paires régionales.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-324">**Choose regional pairs.**</span></span> <span data-ttu-id="8b6b7-325">En cas de déploiement dans deux régions, choisissez des régions de la même paire régionale.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-325">When deploying to two regions, choose regions from the same regional pair.</span></span> <span data-ttu-id="8b6b7-326">En cas de panne étendue, la récupération d’une région est hiérarchisée pour chaque paire.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-326">In the event of a broad outage, recovery of one region is prioritized out of every pair.</span></span> <span data-ttu-id="8b6b7-327">Certains services de stockage géoredondant fournissent une réplication automatique vers la région jumelée.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-327">Some services such as Geo-Redundant Storage provide automatic replication to the paired region.</span></span> <span data-ttu-id="8b6b7-328">Pour plus d’informations, consultez [Continuité des activités et récupération d’urgence (BCDR) : régions jumelées d’Azure](/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-328">For more information, see [Business continuity and disaster recovery (BCDR): Azure Paired Regions](/azure/best-practices-availability-paired-regions)</span></span>

<span data-ttu-id="8b6b7-329">**Organisez les groupes de ressources par fonction et cycle de vie.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-329">**Organize resource groups by function and lifecycle.**</span></span>  <span data-ttu-id="8b6b7-330">En règle générale, un groupe de ressources doit contenir des ressources qui partagent le même cycle de vie.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-330">In general, a resource group should contain resources that share the same lifecycle.</span></span> <span data-ttu-id="8b6b7-331">Cela simplifie la gestion des déploiements, la suppression des déploiements de test et l’attribution des droits d’accès, réduisant ainsi le risque de suppression ou de modification accidentelle d’un déploiement de production.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-331">This makes it easier to manage deployments, delete test deployments, and assign access rights, reducing the chance that a production deployment is accidentally deleted or modified.</span></span> <span data-ttu-id="8b6b7-332">Créez des groupes de ressources distincts pour les environnements de production, de développement et de test.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-332">Create separate resource groups for production, development, and test environments.</span></span> <span data-ttu-id="8b6b7-333">Dans un déploiement multirégion, placez les ressources pour chaque région dans des groupes de ressources distincts.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-333">In a multi-region deployment, put resources for each region into separate resource groups.</span></span> <span data-ttu-id="8b6b7-334">Vous pourrez ainsi plus facilement redéployer une région sans affecter les autres régions.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-334">This makes it easier to redeploy one region without affecting the other region(s).</span></span>

## <a name="azure-services"></a><span data-ttu-id="8b6b7-335">Services Azure</span><span class="sxs-lookup"><span data-stu-id="8b6b7-335">Azure Services</span></span>
<span data-ttu-id="8b6b7-336">Les éléments de liste de vérification suivants s’appliquent à des services spécifiques dans Azure.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-336">The following checklist items apply to specific services in Azure.</span></span>

- [<span data-ttu-id="8b6b7-337">App Service</span><span class="sxs-lookup"><span data-stu-id="8b6b7-337">App Service</span></span>](#app-service)
- [<span data-ttu-id="8b6b7-338">Application Gateway</span><span class="sxs-lookup"><span data-stu-id="8b6b7-338">Application Gateway</span></span>](#application-gateway)
- [<span data-ttu-id="8b6b7-339">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="8b6b7-339">Cosmos DB</span></span>](#cosmos-db)
- [<span data-ttu-id="8b6b7-340">Cache Redis</span><span class="sxs-lookup"><span data-stu-id="8b6b7-340">Redis Cache</span></span>](#redis-cache)
- [<span data-ttu-id="8b6b7-341">action</span><span class="sxs-lookup"><span data-stu-id="8b6b7-341">Search</span></span>](#search)
- [<span data-ttu-id="8b6b7-342">Stockage</span><span class="sxs-lookup"><span data-stu-id="8b6b7-342">Storage</span></span>](#storage)
- [<span data-ttu-id="8b6b7-343">Base de données SQL</span><span class="sxs-lookup"><span data-stu-id="8b6b7-343">SQL Database</span></span>](#sql-database)
- [<span data-ttu-id="8b6b7-344">SQL Server exécuté dans une machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="8b6b7-344">SQL Server running in a VM</span></span>](#sql-server-running-in-a-vm)
- [<span data-ttu-id="8b6b7-345">Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="8b6b7-345">Traffic Manager</span></span>](#traffic-manager)
- [<span data-ttu-id="8b6b7-346">Machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="8b6b7-346">Virtual Machines</span></span>](#virtual-machines)
- [<span data-ttu-id="8b6b7-347">Réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="8b6b7-347">Virtual Network</span></span>](#virtual-network)

### <a name="app-service"></a><span data-ttu-id="8b6b7-348">App Service</span><span class="sxs-lookup"><span data-stu-id="8b6b7-348">App Service</span></span>

<span data-ttu-id="8b6b7-349">**Utilisez le niveau Standard ou Premium.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-349">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="8b6b7-350">Ces niveaux prennent en charge les emplacements de préproduction et les sauvegardes automatisées.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-350">These tiers support staging slots and automated backups.</span></span> <span data-ttu-id="8b6b7-351">Pour plus d’informations, consultez la rubrique [Présentation détaillée des plans Azure App Service](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)</span><span class="sxs-lookup"><span data-stu-id="8b6b7-351">For more information, see [Azure App Service plans in-depth overview](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)</span></span>

<span data-ttu-id="8b6b7-352">**Évitez de monter ou de descendre en puissance.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-352">**Avoid scaling up or down.**</span></span> <span data-ttu-id="8b6b7-353">À la place, sélectionnez un niveau et une taille d’instance répondant à vos besoins de performances sous une charge normale, puis [augmentez la taille des instances](/azure/app-service-web/web-sites-scale/) pour gérer les changements dans le volume de trafic.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-353">Instead, select a tier and instance size that meet your performance requirements under typical load, and then [scale out](/azure/app-service-web/web-sites-scale/) the instances to handle changes in traffic volume.</span></span> <span data-ttu-id="8b6b7-354">Le fait de monter ou de descendre en puissance peut déclencher un redémarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-354">Scaling up and down may trigger an application restart.</span></span>  

<span data-ttu-id="8b6b7-355">**Stockez la configuration en tant que paramètres de l’application.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-355">**Store configuration as app settings.**</span></span> <span data-ttu-id="8b6b7-356">Utilisez les paramètres de l’application pour conserver les paramètres de configuration en tant que paramètres de l’application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-356">Use app settings to hold configuration settings as app settings.</span></span> <span data-ttu-id="8b6b7-357">Définissez les paramètres dans vos modèles Resource Manager ou à l’aide de PowerShell afin de pouvoir les appliquer dans le cadre d’un processus de déploiement/mise à jour automatisé, ce qui est plus fiable.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-357">Define the settings in your Resource Manager templates, or using PowerShell, so that you can apply them as part of an automated deployment / update process, which is more reliable.</span></span> <span data-ttu-id="8b6b7-358">Pour plus d’informations, consultez [Configurer des applications web dans Azure App Service](/azure/app-service-web/web-sites-configure/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-358">For more information, see [Configure web apps in Azure App Service](/azure/app-service-web/web-sites-configure/).</span></span>

<span data-ttu-id="8b6b7-359">**Créez des plans App Service distincts pour la production et les tests.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-359">**Create separate App Service plans for production and test.**</span></span> <span data-ttu-id="8b6b7-360">N’utilisez pas les emplacements de votre déploiement de production pour les tests.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-360">Don't use slots on your production deployment for testing.</span></span>  <span data-ttu-id="8b6b7-361">Toutes les applications qui se trouvent dans un même plan App Service partagent les mêmes instances de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-361">All apps within the same App Service plan share the same VM instances.</span></span> <span data-ttu-id="8b6b7-362">Si vous placez des déploiements de production et de test dans le même plan, cela peut avoir un impact négatif sur le déploiement de production.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-362">If you put production and test deployments in the same plan, it can negatively affect the production deployment.</span></span> <span data-ttu-id="8b6b7-363">Par exemple, des tests de charge peuvent dégrader le site de production réelle.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-363">For example, load tests might degrade the live production site.</span></span> <span data-ttu-id="8b6b7-364">En plaçant les déploiements de test dans un plan séparé, vous les isolez de la version de production.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-364">By putting test deployments into a separate plan, you isolate them from the production version.</span></span>  

<span data-ttu-id="8b6b7-365">**Séparez les applications web des API web.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-365">**Separate web apps from web APIs.**</span></span> <span data-ttu-id="8b6b7-366">Si votre solution présente à la fois un serveur web frontal et une API web, envisagez de les décomposer en applications App Service distinctes.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-366">If your solution has both a web front-end and a web API, consider decomposing them into separate App Service apps.</span></span> <span data-ttu-id="8b6b7-367">Cette conception facilite la décomposition de la solution par charge de travail.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-367">This design makes it easier to decompose the solution by workload.</span></span> <span data-ttu-id="8b6b7-368">Vous pouvez exécuter l’application web et l’API dans des plans App Service distincts et donc les mettre à l’échelle indépendamment l’une de l’autre.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-368">You can run the web app and the API in separate App Service plans, so they can be scaled independently.</span></span> <span data-ttu-id="8b6b7-369">Si vous n’avez pas besoin de ce niveau d’extensibilité au départ, vous pouvez déployer les applications dans le même plan et les déplacer ultérieurement dans des plans distincts si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-369">If you don't need that level of scalability at first, you can deploy the apps into the same plan, and move them into separate plans later, if needed.</span></span>

<span data-ttu-id="8b6b7-370">**Évitez d’utiliser la fonctionnalité de sauvegarde d’App Service pour sauvegarder des bases de données SQL Azure.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-370">**Avoid using the App Service backup feature to back up Azure SQL databases.**</span></span> <span data-ttu-id="8b6b7-371">Utilisez les [sauvegardes automatisées SQL Database][sql-backup] à la place.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-371">Instead, use [SQL Database automated backups][sql-backup].</span></span> <span data-ttu-id="8b6b7-372">La fonctionnalité de sauvegarde d’App Service exporte la base de données dans un fichier .bacpac SQL, ce qui consomme des DTU.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-372">App Service backup exports the database to a SQL .bacpac file, which costs DTUs.</span></span>  

<span data-ttu-id="8b6b7-373">**Tirez parti d’un emplacement de préproduction pour vos déploiements.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-373">**Deploy to a staging slot.**</span></span> <span data-ttu-id="8b6b7-374">Créez un emplacement de déploiement pour la préproduction.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-374">Create a deployment slot for staging.</span></span> <span data-ttu-id="8b6b7-375">Déployez les mises à jour de l’application dans l’emplacement de préproduction et vérifiez le déploiement avant de le basculer en production.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-375">Deploy application updates to the staging slot, and verify the deployment before swapping it into production.</span></span> <span data-ttu-id="8b6b7-376">Cela réduit le risque de déploiement d’une mise à jour incorrecte en production.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-376">This reduces the chance of a bad update in production.</span></span> <span data-ttu-id="8b6b7-377">De plus, toutes les instances seront ainsi préparées avant d’être basculées en production.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-377">It also ensures that all instances are warmed up before being swapped into production.</span></span> <span data-ttu-id="8b6b7-378">Un grand nombre d’applications présentent un temps de préparation et de démarrage à froid important.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-378">Many applications have a significant warmup and cold-start time.</span></span> <span data-ttu-id="8b6b7-379">Pour plus d’informations, consultez [Configurer des environnements intermédiaires pour les applications web dans Azure App Service](/azure/app-service-web/web-sites-staged-publishing/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-379">For more information, see [Set up staging environments for web apps in Azure App Service](/azure/app-service-web/web-sites-staged-publishing/).</span></span>

<span data-ttu-id="8b6b7-380">**Créez un emplacement de déploiement pour stocker le dernier déploiement valide connu.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-380">**Create a deployment slot to hold the last-known-good (LKG) deployment.**</span></span> <span data-ttu-id="8b6b7-381">Quand vous déployez une mise à jour en production, déplacez le déploiement de production précédent dans l’emplacement réservé au dernier déploiement valide connu.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-381">When you deploy an update to production, move the previous production deployment into the LKG slot.</span></span> <span data-ttu-id="8b6b7-382">Vous pourrez ainsi plus facilement effectuer une restauration en cas de déploiement incorrect.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-382">This makes it easier to roll back a bad deployment.</span></span> <span data-ttu-id="8b6b7-383">Si vous détectez un problème plus tard, vous pourrez rapidement revenir à la dernière version correcte connue.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-383">If you discover a problem later, you can quickly revert to the LKG version.</span></span> <span data-ttu-id="8b6b7-384">Pour plus d’informations, voir la rubrique [Application web de base](../reference-architectures/app-service-web-app/basic-web-app.md).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-384">For more information, see [Basic web application](../reference-architectures/app-service-web-app/basic-web-app.md).</span></span>

<span data-ttu-id="8b6b7-385">**Activez la journalisation des diagnostics**, y compris la journalisation d’application la journalisation de serveur web.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-385">**Enable diagnostics logging**, including application logging and web server logging.</span></span> <span data-ttu-id="8b6b7-386">La journalisation est importante pour la surveillance et les diagnostics.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-386">Logging is important for monitoring and diagnostics.</span></span> <span data-ttu-id="8b6b7-387">Consultez [Activer la journalisation des diagnostics pour les applications web dans Azure App Service](/azure/app-service-web/web-sites-enable-diagnostic-log/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-387">See [Enable diagnostics logging for web apps in Azure App Service](/azure/app-service-web/web-sites-enable-diagnostic-log/)</span></span>

<span data-ttu-id="8b6b7-388">**Effectuez la journalisation dans un stockage Blob.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-388">**Log to blob storage.**</span></span> <span data-ttu-id="8b6b7-389">Cela facilite la collecte et l’analyse des données.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-389">This makes it easier to collect and analyze the data.</span></span>

<span data-ttu-id="8b6b7-390">**Créez un compte de stockage distinct pour les journaux.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-390">**Create a separate storage account for logs.**</span></span> <span data-ttu-id="8b6b7-391">N’utilisez pas le même compte de stockage pour les journaux et les données d’application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-391">Don't use the same storage account for logs and application data.</span></span> <span data-ttu-id="8b6b7-392">Cela permet d’empêcher la journalisation de dégrader les performances de l’application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-392">This helps to prevent logging from reducing application performance.</span></span>

<span data-ttu-id="8b6b7-393">**Analysez les performances.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-393">**Monitor performance.**</span></span> <span data-ttu-id="8b6b7-394">Utilisez un service d’analyse des performances tel que [New Relic](http://newrelic.com/) ou [Application Insights](/azure/application-insights/app-insights-overview/) pour analyser les performances et le comportement de l’application sous charge.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-394">Use a performance monitoring service such as [New Relic](http://newrelic.com/) or [Application Insights](/azure/application-insights/app-insights-overview/) to monitor application performance and behavior under load.</span></span>  <span data-ttu-id="8b6b7-395">L’analyse des performances vous offre des renseignements en temps réel sur l’application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-395">Performance monitoring gives you real-time insight into the application.</span></span> <span data-ttu-id="8b6b7-396">Elle vous permet de diagnostiquer les problèmes et d’effectuer une analyse des causes premières des échecs.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-396">It enables you to diagnose issues and perform root-cause analysis of failures.</span></span>

### <a name="application-gateway"></a><span data-ttu-id="8b6b7-397">Application Gateway</span><span class="sxs-lookup"><span data-stu-id="8b6b7-397">Application Gateway</span></span>

<span data-ttu-id="8b6b7-398">**Approvisionnez au moins deux instances.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-398">**Provision at least two instances.**</span></span> <span data-ttu-id="8b6b7-399">Déployez une passerelle Application Gateway avec au moins deux instances.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-399">Deploy Application Gateway with at least two instances.</span></span> <span data-ttu-id="8b6b7-400">Une seule instance constitue un point de défaillance unique.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-400">A single instance is a single point of failure.</span></span> <span data-ttu-id="8b6b7-401">Utilisez deux instances ou plus à des fins de redondance et d’extensibilité.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-401">Use two or more instances for redundancy and scalability.</span></span> <span data-ttu-id="8b6b7-402">Afin d’être éligible au [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/), vous devez approvisionner au moins deux instances moyennes ou grandes.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-402">In order to qualify for the [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/), you must provision two or more medium or larger instances.</span></span>

### <a name="cosmos-db"></a><span data-ttu-id="8b6b7-403">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="8b6b7-403">Cosmos DB</span></span>

<span data-ttu-id="8b6b7-404">**Répliquez la base de données dans différentes régions.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-404">**Replicate the database across regions.**</span></span> <span data-ttu-id="8b6b7-405">Cosmos DB vous permet d’associer n’importe quel nombre de régions Azure à un compte de base de données Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-405">Cosmos DB allows you to associate any number of Azure regions with a Cosmos DB database account.</span></span> <span data-ttu-id="8b6b7-406">Une base de données Cosmos DB peut présenter une région d’écriture et plusieurs régions de lecture.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-406">A Cosmos DB database can have one write region and multiple read regions.</span></span> <span data-ttu-id="8b6b7-407">En cas de défaillance dans la région d’écriture, vous pouvez lire les données à partir d’un autre réplica.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-407">If there is a failure in the write region, you can read from another replica.</span></span> <span data-ttu-id="8b6b7-408">Le Kit de développement logiciel (SDK) client gère cela automatiquement.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-408">The Client SDK handles this automatically.</span></span> <span data-ttu-id="8b6b7-409">Vous pouvez également basculer la région d’écriture vers une autre région.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-409">You can also fail over the write region to another region.</span></span> <span data-ttu-id="8b6b7-410">Pour en savoir plus, voir [Comment distribuer des données mondialement avec Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-410">For more information, see [How to distribute data globally with Azure Cosmos DB](/azure/cosmos-db/distribute-data-globally).</span></span>

### <a name="redis-cache"></a><span data-ttu-id="8b6b7-411">Cache Redis</span><span class="sxs-lookup"><span data-stu-id="8b6b7-411">Redis Cache</span></span>

<span data-ttu-id="8b6b7-412">**Configurez la géoréplication**.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-412">**Configure Geo-replication**.</span></span> <span data-ttu-id="8b6b7-413">La géoréplication fournit un mécanisme permettant de lier deux instances Cache Redis Azure de niveau Premium.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-413">Geo-replication provides a mechanism for linking two Premium tier Azure Redis Cache instances.</span></span> <span data-ttu-id="8b6b7-414">Les données écrites dans le cache principal sont répliquées dans un cache secondaire en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-414">Data written to the primary cache is replicated to a secondary read-only cache.</span></span> <span data-ttu-id="8b6b7-415">Pour plus d’informations, consultez [Comment configurer la géoréplication pour Cache Redis Azure](/azure/redis-cache/cache-how-to-geo-replication).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-415">For more information, see [How to configure Geo-replication for Azure Redis Cache](/azure/redis-cache/cache-how-to-geo-replication)</span></span>

<span data-ttu-id="8b6b7-416">**Configurez la persistance des données.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-416">**Configure data persistence.**</span></span> <span data-ttu-id="8b6b7-417">La persistance Redis vous permet de conserver les données stockées dans Redis.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-417">Redis persistence allows you to persist data stored in Redis.</span></span> <span data-ttu-id="8b6b7-418">Vous pouvez également prendre des instantanés et sauvegarder les données que vous pouvez charger en cas de défaillance matérielle.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-418">You can also take snapshots and back up the data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="8b6b7-419">Pour plus d’informations, consultez [Comment configurer la persistance des données pour un Cache Redis Azure Premium](/azure/redis-cache/cache-how-to-premium-persistence).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-419">For more information, see [How to configure data persistence for a Premium Azure Redis Cache](/azure/redis-cache/cache-how-to-premium-persistence)</span></span>

<span data-ttu-id="8b6b7-420">Si vous utilisez Cache Redis comme un cache de données temporaire et non comme un magasin persistant, ces recommandations peuvent ne pas s’appliquer.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-420">If you are using Redis Cache as a temporary data cache and not as a persistent store, these recommendations may not apply.</span></span> 

### <a name="search"></a><span data-ttu-id="8b6b7-421">action</span><span class="sxs-lookup"><span data-stu-id="8b6b7-421">Search</span></span>

<span data-ttu-id="8b6b7-422">**Approvisionnez plusieurs réplicas.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-422">**Provision more than one replica.**</span></span> <span data-ttu-id="8b6b7-423">Utilisez au moins deux réplicas pour une haute disponibilité en lecture ou trois pour une haute disponibilité en lecture-écriture.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-423">Use at least two replicas for read high-availability, or three for read-write high-availability.</span></span>

<span data-ttu-id="8b6b7-424">**Configurez des indexeurs pour les déploiements multirégions.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-424">**Configure indexers for multi-region deployments.**</span></span> <span data-ttu-id="8b6b7-425">Si vous disposez d’un déploiement multirégion, prenez en considération vos options pour la continuité de l’indexation.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-425">If you have a multi-region deployment, consider your options for continuity in indexing.</span></span>

  * <span data-ttu-id="8b6b7-426">Si la source de données est géorépliquée, vous devez généralement pointer chaque indexeur de chaque service Recherche Azure sur son réplica de source de données local.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-426">If the data source is geo-replicated, you should generally point each indexer of each regional Azure Search service to its local data source replica.</span></span> <span data-ttu-id="8b6b7-427">Cependant, cette approche n’est pas recommandée pour les jeux de données volumineux stockés dans Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-427">However, that approach is not recommended for large datasets stored in Azure SQL Database.</span></span> <span data-ttu-id="8b6b7-428">En effet, Recherche Azure peut effectuer une indexation incrémentielle à partir des réplicas SQL Database principaux, mais pas à partir des réplicas secondaires.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-428">The reason is that Azure Search cannot perform incremental indexing from secondary SQL Database replicas, only from primary replicas.</span></span> <span data-ttu-id="8b6b7-429">Pointez tous les indexeurs sur le réplica principal à la place.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-429">Instead, point all indexers to the primary replica.</span></span> <span data-ttu-id="8b6b7-430">Après un basculement, pointez les indexeurs Recherche Azure sur le nouveau réplica principal.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-430">After a failover, point the Azure Search indexers at the new primary replica.</span></span>  
  * <span data-ttu-id="8b6b7-431">Si la source de données n’est pas géorépliquée, pointez plusieurs indexeurs sur la même source de données afin que les services Recherche Azure de plusieurs régions effectuent une indexation continue et indépendante à partir de la source de données.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-431">If the data source is not geo-replicated, point multiple indexers at the same data source, so that Azure Search services in multiple regions continuously and independently index from the data source.</span></span> <span data-ttu-id="8b6b7-432">Pour plus d’informations, consultez [Considérations sur les performances et l’optimisation de Recherche Azure][search-optimization].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-432">For more information, see [Azure Search performance and optimization considerations][search-optimization].</span></span>

### <a name="storage"></a><span data-ttu-id="8b6b7-433">Stockage</span><span class="sxs-lookup"><span data-stu-id="8b6b7-433">Storage</span></span>

<span data-ttu-id="8b6b7-434">**Pour les données d’application, utilisez le stockage géographiquement redondant avec accès en lecture (RA-GRS).**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-434">**For application data, use read-access geo-redundant storage (RA-GRS).**</span></span> <span data-ttu-id="8b6b7-435">Le stockage RA-GRS réplique les données vers une région secondaire et offre un accès en lecture seule à partir de la région secondaire.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-435">RA-GRS storage replicates the data to a secondary region, and provides read-only access from the secondary region.</span></span> <span data-ttu-id="8b6b7-436">En cas de panne de stockage dans la région primaire, l’application peut lire les données à partir de la région secondaire.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-436">If there is a storage outage in the primary region, the application can read the data from the secondary region.</span></span> <span data-ttu-id="8b6b7-437">Pour plus d’informations, consultez l’article [Réplication de Stockage Azure](/azure/storage/storage-redundancy/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-437">For more information, see [Azure Storage replication](/azure/storage/storage-redundancy/).</span></span>

<span data-ttu-id="8b6b7-438">**Pour les disques de machine virtuelle, utilisez Managed Disks.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-438">**For VM disks, use Managed Disks.**</span></span> <span data-ttu-id="8b6b7-439">Le service [Managed Disks][managed-disks] augmente la fiabilité des machines virtuelles dans un groupe à haute disponibilité en isolant suffisamment les disques les uns des autres pour éviter les points de défaillance uniques.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-439">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="8b6b7-440">Par ailleurs, les disques Managed Disks ne sont pas soumis aux limites d’IOPS des disques durs virtuels créés dans un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-440">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="8b6b7-441">Pour plus d’informations, consultez [Gérer la disponibilité des machines virtuelles Windows dans Azure][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-441">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="8b6b7-442">**Pour le service Stockage File d’attente, créez une file d’attente de sauvegarde dans une autre région.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-442">**For Queue storage, create a backup queue in another region.**</span></span> <span data-ttu-id="8b6b7-443">Pour le service Stockage File d’attente, un réplica en lecture seule présente peu d’utilité, car vous ne pouvez pas mettre des éléments en file d’attente ou les en enlever.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-443">For Queue storage, a read-only replica has limited use, because you can't queue or dequeue items.</span></span> <span data-ttu-id="8b6b7-444">Créez une file d’attente de sauvegarde dans une autre région à la place.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-444">Instead, create a backup queue in a storage account in another region.</span></span> <span data-ttu-id="8b6b7-445">En cas de panne de stockage, l’application peut utiliser la file d’attente de sauvegarde jusqu’à ce que la région primaire redevienne disponible.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-445">If there is a storage outage, the application can use the backup queue, until the primary region becomes available again.</span></span> <span data-ttu-id="8b6b7-446">De cette façon, l’application peut continuer à traiter les nouvelles requêtes.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-446">That way, the application can still process new requests.</span></span>  

### <a name="sql-database"></a><span data-ttu-id="8b6b7-447">Base de données SQL</span><span class="sxs-lookup"><span data-stu-id="8b6b7-447">SQL Database</span></span>

<span data-ttu-id="8b6b7-448">**Utilisez le niveau Standard ou Premium.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-448">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="8b6b7-449">Ces niveaux offrent une limite de restauration dans le temps plus importante (35 jours).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-449">These tiers provide a longer point-in-time restore period (35 days).</span></span> <span data-ttu-id="8b6b7-450">Pour plus d’informations, consultez les [options et performances de SQL Database](/azure/sql-database/sql-database-service-tiers/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-450">For more information, see [SQL Database options and performance](/azure/sql-database/sql-database-service-tiers/).</span></span>

<span data-ttu-id="8b6b7-451">**Activez l’audit SQL Database.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-451">**Enable SQL Database auditing.**</span></span> <span data-ttu-id="8b6b7-452">L’audit peut être utilisé pour identifier les attaques malveillantes et les erreurs humaines.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-452">Auditing can be used to diagnose malicious attacks or human error.</span></span> <span data-ttu-id="8b6b7-453">Pour en savoir plus, voir [Prise en main de l’audit de base de données SQL](/azure/sql-database/sql-database-auditing-get-started/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-453">For more information, see [Get started with SQL database auditing](/azure/sql-database/sql-database-auditing-get-started/).</span></span>

<span data-ttu-id="8b6b7-454">**Utilisez la géoréplication active.** Utilisez la géoréplication active pour créer une base de données secondaire accessible en lecture dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-454">**Use Active Geo-Replication** Use Active Geo-Replication to create a readable secondary in a different region.</span></span>  <span data-ttu-id="8b6b7-455">Si votre base de données primaire échoue ou doit simplement être mise hors connexion, vous pouvez effectuer un basculement manuel vers la base de données secondaire.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-455">If your primary database fails, or simply needs to be taken offline, perform a manual failover to the secondary database.</span></span>  <span data-ttu-id="8b6b7-456">La base de données secondaire reste en lecture seule jusqu’à ce que vous effectuiez le basculement vers cette dernière.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-456">Until you fail over, the secondary database remains read-only.</span></span>  <span data-ttu-id="8b6b7-457">Pour plus d’informations, consultez [Géoréplication active de SQL Database](/azure/sql-database/sql-database-geo-replication-overview/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-457">For more information, see [SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/).</span></span>

<span data-ttu-id="8b6b7-458">**Utilisez le partitionnement.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-458">**Use sharding.**</span></span> <span data-ttu-id="8b6b7-459">Envisagez d’utiliser le partitionnement pour partitionner la base de données horizontalement.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-459">Consider using sharding to partition the database horizontally.</span></span> <span data-ttu-id="8b6b7-460">Le partitionnement peut assurer une isolation des erreurs.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-460">Sharding can provide fault isolation.</span></span> <span data-ttu-id="8b6b7-461">Pour plus d’informations, consultez [Montée en charge avec Azure SQL Database](/azure/sql-database/sql-database-elastic-scale-introduction/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-461">For more information, see [Scaling out with Azure SQL Database](/azure/sql-database/sql-database-elastic-scale-introduction/).</span></span>

<span data-ttu-id="8b6b7-462">**Utilisez la limite de restauration dans le temps pour récupérer des erreurs humaines.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-462">**Use point-in-time restore to recover from human error.**</span></span>  <span data-ttu-id="8b6b7-463">La limite de restauration dans le temps permet de revenir à un état antérieur de la base de données.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-463">Point-in-time restore returns your database to an earlier point in time.</span></span> <span data-ttu-id="8b6b7-464">Pour plus d’informations, consultez [Récupérer une base de données SQL Azure à l’aide des sauvegardes automatisées d’une base de données][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-464">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

<span data-ttu-id="8b6b7-465">**Utilisez la géorestauration pour récupérer d’une panne de service.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-465">**Use geo-restore to recover from a service outage.**</span></span> <span data-ttu-id="8b6b7-466">La géorestauration assure la restauration d’une base de données à partir d’une sauvegarde géoredondante.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-466">Geo-restore restores a database from a geo-redundant backup.</span></span>  <span data-ttu-id="8b6b7-467">Pour plus d’informations, consultez [Récupérer une base de données SQL Azure à l’aide des sauvegardes automatisées d’une base de données][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-467">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

### <a name="sql-server-running-in-a-vm"></a><span data-ttu-id="8b6b7-468">SQL Server exécuté dans une machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="8b6b7-468">SQL Server running in a VM</span></span>

<span data-ttu-id="8b6b7-469">**Répliquez la base de données.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-469">**Replicate the database.**</span></span> <span data-ttu-id="8b6b7-470">Utilisez les groupes de disponibilité Always On SQL Server pour répliquer la base de données.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-470">Use SQL Server Always On Availability Groups to replicate the database.</span></span> <span data-ttu-id="8b6b7-471">Vous bénéficierez ainsi d’une haute disponibilité en cas d’échec d’une instance SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-471">Provides high availability if one SQL Server instance fails.</span></span> <span data-ttu-id="8b6b7-472">Pour plus d’informations, consultez [Exécuter des machines virtuelles Windows pour une architecture multiniveau](../reference-architectures/virtual-machines-windows/n-tier.md).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-472">For more information, see [Run Windows VMs for an N-tier application](../reference-architectures/virtual-machines-windows/n-tier.md)</span></span>

<span data-ttu-id="8b6b7-473">**Sauvegardez la base de données.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-473">**Back up the database**.</span></span> <span data-ttu-id="8b6b7-474">Si vous utilisez déjà le service [Sauvegarde Azure](https://azure.microsoft.com/documentation/services/backup/) pour sauvegarder vos machines virtuelles, envisagez d’utiliser [Sauvegarde Azure pour les charges de travail SQL Server à l’aide de DPM](/azure/backup/backup-azure-backup-sql/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-474">If you are already using [Azure Backup](https://azure.microsoft.com/documentation/services/backup/) to back up your VMs, consider using [Azure Backup for SQL Server workloads using DPM](/azure/backup/backup-azure-backup-sql/).</span></span> <span data-ttu-id="8b6b7-475">Avec cette approche, il y a un rôle d’administrateur de sauvegarde pour l’organisation et une procédure de récupération unifiée pour les machines virtuelles et SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-475">With this approach, there is one backup administrator role for the organization and a unified recovery procedure for VMs and SQL Server.</span></span> <span data-ttu-id="8b6b7-476">Autrement, utilisez la [sauvegarde gérée SQL Server dans Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-476">Otherwise, use [SQL Server Managed Backup to Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span></span>

### <a name="traffic-manager"></a><span data-ttu-id="8b6b7-477">Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="8b6b7-477">Traffic Manager</span></span>

<span data-ttu-id="8b6b7-478">**Effectuez une restauration manuelle.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-478">**Perform manual failback.**</span></span> <span data-ttu-id="8b6b7-479">Après un basculement Traffic Manager, effectuez une restauration manuelle plutôt que de recourir à la restauration automatique.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-479">After a Traffic Manager failover, perform manual failback, rather than automatically failing back.</span></span> <span data-ttu-id="8b6b7-480">Avant d’effectuer la restauration, vérifiez que tous les sous-systèmes de l’application sont intègres.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-480">Before failing back, verify that all application subsystems are healthy.</span></span>  <span data-ttu-id="8b6b7-481">Sinon, l’application risque d’alterner continuellement entre les centres de données.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-481">Otherwise, you can create a situation where the application flips back and forth between data centers.</span></span> <span data-ttu-id="8b6b7-482">Pour plus d’informations, consultez [Exécuter des machines virtuelles Windows dans plusieurs régions à des fins de haute disponibilité](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-482">For more information, see [Run VMs in multiple regions for high availability](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span></span>

<span data-ttu-id="8b6b7-483">**Créez un point de terminaison de sonde d’intégrité.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-483">**Create a health probe endpoint.**</span></span> <span data-ttu-id="8b6b7-484">Créez un point de terminaison personnalisé qui rend compte de l’intégrité globale de l’application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-484">Create a custom endpoint that reports on the overall health of the application.</span></span> <span data-ttu-id="8b6b7-485">Cela permet à Traffic Manager d’effectuer un basculement en cas d’échec d’un chemin critique, et pas simplement du serveur frontal.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-485">This enables Traffic Manager to fail over if any critical path fails, not just the front end.</span></span> <span data-ttu-id="8b6b7-486">Le point de terminaison doit retourner un code d’erreur HTTP si une dépendance critique est défectueuse ou inaccessible.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-486">The endpoint should return an HTTP error code if any critical dependency is unhealthy or unreachable.</span></span> <span data-ttu-id="8b6b7-487">Cependant, ne signalez pas les erreurs liées aux services non critiques.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-487">Don't report errors for non-critical services, however.</span></span> <span data-ttu-id="8b6b7-488">Sinon, la sonde d’intégrité risque de déclencher un basculement inutilement, créant de faux positifs.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-488">Otherwise, the health probe might trigger failover when it's not needed, creating false positives.</span></span> <span data-ttu-id="8b6b7-489">Pour plus d’informations, consultez [Surveillance et basculement des points de terminaison Traffic Manager](/azure/traffic-manager/traffic-manager-monitoring/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-489">For more information, see [Traffic Manager endpoint monitoring and failover](/azure/traffic-manager/traffic-manager-monitoring/).</span></span>

### <a name="virtual-machines"></a><span data-ttu-id="8b6b7-490">Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="8b6b7-490">Virtual Machines</span></span>

<span data-ttu-id="8b6b7-491">**Évitez d’exécuter une charge de travail de production sur une machine virtuelle unique.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-491">**Avoid running a production workload on a single VM.**</span></span> <span data-ttu-id="8b6b7-492">Un déploiement de machine virtuelle unique ne résiste pas aux maintenances planifiées ou non planifiées.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-492">A single VM deployment is not resilient to planned or unplanned maintenance.</span></span> <span data-ttu-id="8b6b7-493">Au lieu de cela, placez plusieurs machines virtuelles dans un groupe à haute disponibilité ou un [groupe de machines virtuelles identiques](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), avec un équilibreur de charge à l’avant.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-493">Instead, put multiple VMs in an availability set or [VM scale set](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), with a load balancer in front.</span></span>

<span data-ttu-id="8b6b7-494">**Spécifiez un groupe à haute disponibilité quand vous approvisionnez la machine virtuelle.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-494">**Specify an availability set when you provision the VM.**</span></span> <span data-ttu-id="8b6b7-495">Actuellement, il n’existe aucun moyen d’ajouter une machine virtuelle à un groupe à haute disponibilité après l’approvisionnement de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-495">Currently, there is no way to add a VM to an availability set after the VM is provisioned.</span></span> <span data-ttu-id="8b6b7-496">Quand vous ajoutez une nouvelle machine virtuelle à un groupe à haute disponibilité, veillez à créer une carte réseau pour la machine virtuelle, puis ajoutez cette carte au pool d’adresses principal sur l’équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-496">When you add a new VM to an existing availability set, make sure to create a NIC for the VM, and add the NIC to the back-end address pool on the load balancer.</span></span> <span data-ttu-id="8b6b7-497">Sinon, l’équilibreur de charge n’acheminera pas le trafic vers cette machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-497">Otherwise, the load balancer won't route network traffic to that VM.</span></span>

<span data-ttu-id="8b6b7-498">**Placez chaque couche Application dans un groupe à haute disponibilité distinct.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-498">**Put each application tier into a separate Availability Set.**</span></span> <span data-ttu-id="8b6b7-499">Dans une application multiniveau, ne placez pas de machines virtuelles de niveaux différents dans le même groupe à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-499">In an N-tier application, don't put VMs from different tiers into the same availability set.</span></span> <span data-ttu-id="8b6b7-500">Les machines virtuelles d’un groupe à haute disponibilité sont réparties dans des domaines d’erreur et des domaines de mise à jour.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-500">VMs in an availability set are placed across fault domains (FDs) and update domains (UD).</span></span> <span data-ttu-id="8b6b7-501">Toutefois, pour tirer parti de la redondance des domaines d’erreur et des domaines de mise à jour, chaque machine virtuelle du groupe à haute disponibilité doit être en mesure de gérer les mêmes requêtes de clients.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-501">However, to get the redundancy benefit of FDs and UDs, every VM in the availability set must be able to handle the same client requests.</span></span>

<span data-ttu-id="8b6b7-502">**Choisissez la taille de machine virtuelle appropriée en fonction des exigences de performances.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-502">**Choose the right VM size based on performance requirements.**</span></span> <span data-ttu-id="8b6b7-503">Quand vous déplacez une charge de travail existante vers Azure, commencez par choisir la taille de machine virtuelle qui correspond le mieux à vos serveurs locaux.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-503">When moving an existing workload to Azure, start with the VM size that's the closest match to your on-premises servers.</span></span> <span data-ttu-id="8b6b7-504">Mesurez ensuite les performances de votre charge de travail réelle en termes de processeur, de mémoire et d’IOPS de disque, puis ajustez la taille si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-504">Then measure the performance of your actual workload with respect to CPU, memory, and disk IOPS, and adjust the size if needed.</span></span> <span data-ttu-id="8b6b7-505">Vous aurez ainsi l’assurance que l’application se comportera comme prévu dans un environnement cloud.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-505">This helps to ensure the application behaves as expected in a cloud environment.</span></span> <span data-ttu-id="8b6b7-506">En outre, si vous avez besoin de plusieurs cartes réseau, tenez compte de la limite de la carte réseau pour chaque taille.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-506">Also, if you need multiple NICs, be aware of the NIC limit for each size.</span></span>

<span data-ttu-id="8b6b7-507">**Utilisez le service Managed Disks pour les disques durs virtuels.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-507">**Use Managed Disks for VHDs.**</span></span> <span data-ttu-id="8b6b7-508">Le service [Managed Disks][managed-disks] augmente la fiabilité des machines virtuelles dans un groupe à haute disponibilité en isolant suffisamment les disques les uns des autres pour éviter les points de défaillance uniques.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-508">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="8b6b7-509">Par ailleurs, les disques Managed Disks ne sont pas soumis aux limites d’IOPS des disques durs virtuels créés dans un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-509">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="8b6b7-510">Pour plus d’informations, consultez [Gérer la disponibilité des machines virtuelles Windows dans Azure][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-510">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="8b6b7-511">**Installez les applications sur un disque de données plutôt que sur le disque du système d’exploitation.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-511">**Install applications on a data disk, not the OS disk.**</span></span> <span data-ttu-id="8b6b7-512">Sinon, il se peut que vous atteigniez la limite de taille du disque.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-512">Otherwise, you may reach the disk size limit.</span></span>

<span data-ttu-id="8b6b7-513">**Utilisez le service Sauvegarde Azure pour sauvegarder les machines virtuelles.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-513">**Use Azure Backup to back up VMs.**</span></span> <span data-ttu-id="8b6b7-514">Les sauvegardes assurent une protection contre la perte accidentelle de données.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-514">Backups protect against accidental data loss.</span></span> <span data-ttu-id="8b6b7-515">Pour plus d’informations, consultez [Protéger les machines virtuelles Azure avec un coffre Recovery Services](/azure/backup/backup-azure-vms-first-look-arm/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-515">For more information, see [Protect Azure VMs with a recovery services vault](/azure/backup/backup-azure-vms-first-look-arm/).</span></span>

<span data-ttu-id="8b6b7-516">**Activez les journaux de diagnostic**, y compris les mesures d’intégrité de base, les journaux d’infrastructure et les [diagnostics de démarrage][boot-diagnostics].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-516">**Enable diagnostic logs**, including basic health metrics, infrastructure logs, and [boot diagnostics][boot-diagnostics].</span></span> <span data-ttu-id="8b6b7-517">Les diagnostics de démarrage peuvent vous aider à identifier le problème de démarrage si votre machine virtuelle refuse de démarrer.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-517">Boot diagnostics can help you diagnose a boot failure if your VM gets into a non-bootable state.</span></span> <span data-ttu-id="8b6b7-518">Pour plus d’informations, consultez [Présentation des journaux de diagnostic Azure][diagnostics-logs].</span><span class="sxs-lookup"><span data-stu-id="8b6b7-518">For more information, see [Overview of Azure Diagnostic Logs][diagnostics-logs].</span></span>

<span data-ttu-id="8b6b7-519">**Utilisez l’extension AzureLogCollector**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-519">**Use the AzureLogCollector extension.**</span></span> <span data-ttu-id="8b6b7-520">(machines virtuelles Windows uniquement). Cette extension agrège les journaux de la plateforme Azure et les charge dans le stockage Azure, sans que l’opérateur ait à se connecter à distance à la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-520">(Windows VMs only.) This extension aggregates Azure platform logs and uploads them to Azure storage, without the operator remotely logging into the VM.</span></span> <span data-ttu-id="8b6b7-521">Pour plus d’informations, consultez [Extension AzureLogCollector](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-521">For more information, see [AzureLogCollector Extension](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

### <a name="virtual-network"></a><span data-ttu-id="8b6b7-522">Réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="8b6b7-522">Virtual Network</span></span>

<span data-ttu-id="8b6b7-523">**Pour mettre sur liste verte ou bloquer des adresses IP publiques, ajoutez un groupe de sécurité réseau (NSG) au sous-réseau.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-523">**To whitelist or block public IP addresses, add an NSG to the subnet.**</span></span> <span data-ttu-id="8b6b7-524">Bloquez l’accès aux utilisateurs malveillants ou autorisez l’accès uniquement aux utilisateurs qui disposent du privilège requis pour accéder à l’application.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-524">Block access from malicious users, or allow access only from users who have privilege to access the application.</span></span>  

<span data-ttu-id="8b6b7-525">**Créez une sonde d’intégrité personnalisée.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-525">**Create a custom health probe.**</span></span> <span data-ttu-id="8b6b7-526">Les sondes d’intégrité de Load Balancer peuvent tester le protocole TCP ou HTTP.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-526">Load Balancer Health Probes can test either HTTP or TCP.</span></span> <span data-ttu-id="8b6b7-527">Si une machine virtuelle exécute un serveur HTTP, la sonde HTTP est un meilleur indicateur de l’état d’intégrité qu’une sonde TCP.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-527">If a VM runs an HTTP server, the HTTP probe is a better indicator of health status than a TCP probe.</span></span> <span data-ttu-id="8b6b7-528">Pour une sonde HTTP, utilisez un point de terminaison personnalisé qui signale l’intégrité globale de l’application, y compris toutes les dépendances critiques.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-528">For an HTTP probe, use a custom endpoint that reports the overall health of the application, including all critical dependencies.</span></span> <span data-ttu-id="8b6b7-529">Pour plus d’informations, consultez [Vue d’ensemble de Azure Load Balancer](/azure/load-balancer/load-balancer-overview/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-529">For more information, see [Azure Load Balancer overview](/azure/load-balancer/load-balancer-overview/).</span></span>

<span data-ttu-id="8b6b7-530">**Ne bloquez la sonde d’intégrité.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-530">**Don't block the health probe.**</span></span> <span data-ttu-id="8b6b7-531">La sonde d’intégrité de Load Balancer est envoyée à partir d’une adresse IP connue, à savoir 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-531">The Load Balancer Health probe is sent from a known IP address, 168.63.129.16.</span></span> <span data-ttu-id="8b6b7-532">Ne bloquez le trafic à destination ou en provenance de cette adresse IP dans aucune stratégie de pare-feu ou règle NSG.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-532">Don't block traffic to or from this IP in any firewall policies or network security group (NSG) rules.</span></span> <span data-ttu-id="8b6b7-533">Si vous bloquez la sonde d’intégrité, l’équilibreur de charge supprimera la machine virtuelle de la rotation.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-533">Blocking the health probe would cause the load balancer to remove the VM from rotation.</span></span>

<span data-ttu-id="8b6b7-534">**Activez la journalisation de Load Balancer.**</span><span class="sxs-lookup"><span data-stu-id="8b6b7-534">**Enable Load Balancer logging.**</span></span> <span data-ttu-id="8b6b7-535">Les journaux indiquent combien de machines virtuelles sur le serveur principal ne reçoivent pas de trafic réseau en raison d’une absence de réponse de la part de la sonde.</span><span class="sxs-lookup"><span data-stu-id="8b6b7-535">The logs show how many VMs on the back-end are not receiving network traffic due to failed probe responses.</span></span> <span data-ttu-id="8b6b7-536">Pour plus d’informations, consultez [Analyse des journaux d’Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/).</span><span class="sxs-lookup"><span data-stu-id="8b6b7-536">For more information, see [Log analytics for Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/).</span></span>


<!-- links -->
[app-service-autoscale]: /azure/monitoring-and-diagnostics/insights-how-to-scale/
[asynchronous-c-sharp]: /dotnet/articles/csharp/async
[availability-sets]:/azure/virtual-machines/virtual-machines-windows-manage-availability/
[azure-backup]: https://azure.microsoft.com/documentation/services/backup/
[boot-diagnostics]: https://azure.microsoft.com/blog/boot-diagnostics-for-virtual-machines-v2/
[circuit-breaker]: ../patterns/circuit-breaker.md
[cloud-service-autoscale]: /azure/cloud-services/cloud-services-how-to-scale/
[diagnostics-logs]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs/
[fma]: ../resiliency/failure-mode-analysis.md
[resilient-deployment]: ../resiliency/index.md#resilient-deployment
[load-balancer]: /azure/load-balancer/load-balancer-overview/
[managed-disks]: /azure/storage/storage-managed-disks-overview
[monitoring-and-diagnostics-guidance]: ../best-practices/monitoring.md
[resource-manager]: /azure/azure-resource-manager/resource-group-overview/
[retry-pattern]: ../patterns/retry.md
[retry-service-guidance]: ../best-practices/retry-service-specific.md
[search-optimization]: /azure/search/search-performance-optimization/
[sql-backup]: /azure/sql-database/sql-database-automated-backups/
[sql-restore]: /azure/sql-database/sql-database-recovery-using-backups/
[traffic-manager]: /azure/traffic-manager/traffic-manager-overview/
[traffic-manager-routing]: /azure/traffic-manager/traffic-manager-routing-methods/
[vm-manage-availability]: /azure/virtual-machines/windows/manage-availability#use-managed-disks-for-vms-in-an-availability-set
[vmss-autoscale]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview/
