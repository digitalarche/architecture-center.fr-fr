---
title: Accélérer la modélisation basée sur des images numériques dans Azure
titleSuffix: Azure Example Scenarios
description: Accélérer la modélisation basée sur des images numériques dans Azure en utilisant Avere et Agisoft PhotoScan
author: adamboeglin
ms.date: 01/11/2019
ms.topic: example-scenario
ms.service: architecture-center
ms.subservice: example-scenario
ms.custom: cat-team, Linux, HPC
social_image_url: /azure/architecture/example-scenario/infrastructure/media/architecture-image-modeling.png
ms.openlocfilehash: 981d9f01ef12f75d9b292196f754f3a0affa791a
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59640377"
---
# <a name="accelerate-digital-image-based-modeling-on-azure"></a><span data-ttu-id="868b4-103">Accélérer la modélisation basée sur des images numériques dans Azure</span><span class="sxs-lookup"><span data-stu-id="868b4-103">Accelerate digital image-based modeling on Azure</span></span>

<span data-ttu-id="868b4-104">Cet exemple de scénario fournit des conseils sur la conception et l’architecture aux organisations qui veulent effectuer une modélisation basée sur des images sur l’infrastructure IaaS Azure.</span><span class="sxs-lookup"><span data-stu-id="868b4-104">This example scenario provides architecture and design guidance for any organization that wants to perform image-based modeling on Azure infrastructure-as-a-service (IaaS).</span></span> <span data-ttu-id="868b4-105">Le scénario est conçu pour l’exécution de logiciels de photogrammétrie sur Machines virtuelles Azure en utilisant un stockage hautes performances qui accélère le temps de traitement.</span><span class="sxs-lookup"><span data-stu-id="868b4-105">The scenario is designed for running photogrammetry software on Azure Virtual Machines (VMs) using high-performance storage that accelerates processing time.</span></span> <span data-ttu-id="868b4-106">L’environnement peut faire l’objet d’un scale-up ou d’un scale-down en fonction des besoins et prend en charge plusieurs téraoctets de stockage sans sacrifier les performances.</span><span class="sxs-lookup"><span data-stu-id="868b4-106">The environment can be scaled up and down as needed and supports terabytes of storage without sacrificing performance.</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="868b4-107">Cas d’usage appropriés</span><span class="sxs-lookup"><span data-stu-id="868b4-107">Relevant use cases</span></span>

<span data-ttu-id="868b4-108">Les cas d’usage appropriés sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="868b4-108">Relevant use cases include:</span></span>

- <span data-ttu-id="868b4-109">Modélisation et mesure de bâtiments, ingénierie des structures et investigation scientifique des lieux d’accident.</span><span class="sxs-lookup"><span data-stu-id="868b4-109">Modeling and measuring buildings, engineering structures, and forensic accident scenes.</span></span>
- <span data-ttu-id="868b4-110">Création d’effets visuels pour les jeux sur ordinateur et les films.</span><span class="sxs-lookup"><span data-stu-id="868b4-110">Creating visual effects for computer games and movies.</span></span>
- <span data-ttu-id="868b4-111">Utilisation d’images numériques pour générer indirectement des mesures d’objets de différentes échelles, comme dans la planification urbaine et d’autres applications.</span><span class="sxs-lookup"><span data-stu-id="868b4-111">Using digital images to indirectly generate measurements of objects of various scales as in urban planning and other applications.</span></span>

## <a name="architecture"></a><span data-ttu-id="868b4-112">Architecture</span><span class="sxs-lookup"><span data-stu-id="868b4-112">Architecture</span></span>

<span data-ttu-id="868b4-113">Cet exemple décrit l’utilisation du logiciel de photogrammétrie Agisoft PhotoScan avec le stockage Avere vFXT.</span><span class="sxs-lookup"><span data-stu-id="868b4-113">This example describes the use of Agisoft PhotoScan photogrammetry software backed by Avere vFXT storage.</span></span> <span data-ttu-id="868b4-114">PhotoScan a été choisi pour sa popularité dans les applications de système d’information géographique, pour la documentation de patrimoine culturel, pour le développement de jeux et pour la production d’effets visuels.</span><span class="sxs-lookup"><span data-stu-id="868b4-114">PhotoScan was chosen for its popularity in geographic information system (GIS) applications, cultural heritage documentation, game development, and visual effects production.</span></span> <span data-ttu-id="868b4-115">Il convient pour la photogrammétrie de proximité et aérienne.</span><span class="sxs-lookup"><span data-stu-id="868b4-115">It is suitable for both close-range photogrammetry and aerial photogrammetry.</span></span>

<span data-ttu-id="868b4-116">Les concepts de cet article s’appliquent aux charges de travail de computing haute performance (HPC) basées sur un planificateur et aux nœuds worker gérés comme infrastructure.</span><span class="sxs-lookup"><span data-stu-id="868b4-116">The concepts in this article apply to any high-performance computing (HPC) workload based on a scheduler and worker nodes managed as infrastructure.</span></span>  <span data-ttu-id="868b4-117">Pour cette charge de travail, Avere vFXT a été sélectionné pour ses performances supérieures lors de tests d’évaluation.</span><span class="sxs-lookup"><span data-stu-id="868b4-117">For this workload, Avere vFXT was selected for its superior performance during benchmark tests.</span></span>  <span data-ttu-id="868b4-118">Cependant, le scénario découple le stockage du traitement : d’autres solutions de stockage peuvent donc être utilisées (consultez [alternatives](#alternatives) plus loin dans ce document).</span><span class="sxs-lookup"><span data-stu-id="868b4-118">However, the scenario decouples the storage from the processing so that other storage solutions can be used (see [alternatives](#alternatives) later in this document).</span></span>

<span data-ttu-id="868b4-119">Cette architecture comprend également des contrôleurs de domaine Active Directory pour contrôler l’accès aux ressources Azure et fournir une résolution de noms interne via le DNS (Domain Name System).</span><span class="sxs-lookup"><span data-stu-id="868b4-119">This architecture also includes Active Directory domain controllers to control access to Azure resources and provide internal name resolution through the Domain Name System (DNS).</span></span> <span data-ttu-id="868b4-120">Des ordinateurs Jump Box fournissent aux administrateurs un accès aux machines virtuelles Windows et Linux qui exécutent la solution.</span><span class="sxs-lookup"><span data-stu-id="868b4-120">Jump boxes provide administrator access to the Windows and Linux VMs that run the solution.</span></span>

![Diagramme d'architecture](./media/architecture-image-modeling.png)

1. <span data-ttu-id="868b4-122">Un utilisateur soumet un certain nombre d’images à PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="868b4-122">User submits a number of images to PhotoScan.</span></span>
2. <span data-ttu-id="868b4-123">Le planificateur PhotoScan s’exécute sur une machine virtuelle Windows qui sert de nœud principal et pilote le traitement des images de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="868b4-123">The PhotoScan Scheduler runs on a Windows VM that serves as the head node and directs processing of the user's images.</span></span>
3. <span data-ttu-id="868b4-124">PhotoScan recherche des points communs sur les photographies et construit la géométrie (maillage) en utilisant les nœuds de traitement PhotoScan qui s’exécutent sur des machines virtuelles avec des GPU (Graphics Processing Unit).</span><span class="sxs-lookup"><span data-stu-id="868b4-124">PhotoScan searches for common points on the photographs and constructs the geometry (mesh) using the PhotoScan processing nodes running on VMs with graphics processing units (GPUs).</span></span>
4. <span data-ttu-id="868b4-125">Avere vFXT fournit une solution de stockage haute performance sur Azure basée sur NFSv3 et constituée d’au moins quatre machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="868b4-125">Avere vFXT provides a high-performance storage solution on Azure based on Network File System version 3 (NFSv3) and comprised of at least four VMs.</span></span>
5. <span data-ttu-id="868b4-126">PhotoScan effectue le rendu du modèle.</span><span class="sxs-lookup"><span data-stu-id="868b4-126">PhotoScan renders the model.</span></span>

### <a name="components"></a><span data-ttu-id="868b4-127">Composants</span><span class="sxs-lookup"><span data-stu-id="868b4-127">Components</span></span>

- <span data-ttu-id="868b4-128">[Agisoft PhotoScan](http://www.agisoft.com/) : Le planificateur PhotoScan s’exécute sur une machine virtuelle Windows Server 2016 et les nœuds de traitement utilisent cinq machines virtuelles avec des GPU qui exécutent CentOS Linux 7.5.</span><span class="sxs-lookup"><span data-stu-id="868b4-128">[Agisoft PhotoScan](http://www.agisoft.com/): The PhotoScan Scheduler runs on a Windows 2016 Server VM, and the processing nodes use five VMs with GPUs that run CentOS Linux 7.5.</span></span>
- <span data-ttu-id="868b4-129">[Avere vFXT](/azure/avere-vfxt/avere-vfxt-overview) est une solution de mise en cache de fichiers qui utilise le stockage d’objets et un stockage NAS traditionnel pour optimiser le stockage de jeux de données volumineux.</span><span class="sxs-lookup"><span data-stu-id="868b4-129">[Avere vFXT](/azure/avere-vfxt/avere-vfxt-overview) is a file caching solution that uses object storage and traditional network-attached storage (NAS) to optimize storage of large datasets.</span></span> <span data-ttu-id="868b4-130"> Il inclut :</span><span class="sxs-lookup"><span data-stu-id="868b4-130">It includes:</span></span>
  - <span data-ttu-id="868b4-131">Contrôleur Avere.</span><span class="sxs-lookup"><span data-stu-id="868b4-131">Avere Controller.</span></span> <span data-ttu-id="868b4-132">Cette machine virtuelle exécute le script qui installe le cluster Avere vFXT et exécute Ubuntu 18.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="868b4-132">This VM executes the script that installs the Avere vFXT cluster and runs Ubuntu 18.04 LTS.</span></span> <span data-ttu-id="868b4-133">La machine virtuelle peut être utilisée ultérieurement pour ajouter ou supprimer des nœuds de cluster ainsi que pour détruire le cluster.</span><span class="sxs-lookup"><span data-stu-id="868b4-133">The VM can be used later to add or remove cluster nodes and to destroy the cluster as well.</span></span>
  - <span data-ttu-id="868b4-134">Cluster vFXT.</span><span class="sxs-lookup"><span data-stu-id="868b4-134">vFXT cluster.</span></span> <span data-ttu-id="868b4-135">Au moins trois machines virtuelles sont utilisées, une pour chacun des nœuds Avere vFXT basés sur Avere OS 5.0.2.1.</span><span class="sxs-lookup"><span data-stu-id="868b4-135">At least three VMs are used, one for each of the Avere vFXT nodes based on Avere OS 5.0.2.1.</span></span> <span data-ttu-id="868b4-136">Ces machines virtuelles forment le cluster vFXT, qui est attaché à Stockage Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="868b4-136">These VMs form the vFXT cluster, which is attached to Azure Blob storage.</span></span>
- <span data-ttu-id="868b4-137">Les [contrôleurs de domaine Microsoft Active Directory](/windows/desktop/ad/active-directory-domain-services) permettent à l’hôte d’accéder aux ressources du domaine et fournissent la résolution de noms DNS.</span><span class="sxs-lookup"><span data-stu-id="868b4-137">[Microsoft Active Directory domain controllers](/windows/desktop/ad/active-directory-domain-services) allow the host access to domain resources and provide DNS name resolution.</span></span> <span data-ttu-id="868b4-138">AVERE vFXT ajoute un nombre d’enregistrements A &mdash; , par exemple, chaque enregistrement A dans un cluster vFXT pointe vers l’adresse IP de chaque nœud de vFXT Avere.</span><span class="sxs-lookup"><span data-stu-id="868b4-138">Avere vFXT adds a number of A records &mdash; for example, each A record in a vFXT cluster points to the IP address of each Avere vFXT node.</span></span> <span data-ttu-id="868b4-139">Dans cette configuration, toutes les machines virtuelles utilisent le modèle de tourniquet (round robin) pour accéder aux exportations de vFXT.</span><span class="sxs-lookup"><span data-stu-id="868b4-139">In this setup, all VMs use the round-robin pattern to access vFXT exports.</span></span>
- <span data-ttu-id="868b4-140">Les [autres machines virtuelles](/azure/virtual-machines/) servent d’ordinateurs Jump Box utilisées par l’administrateur pour accéder au nœud du planificateur et aux nœuds de traitement.</span><span class="sxs-lookup"><span data-stu-id="868b4-140">[Other VMs](/azure/virtual-machines/) serve as jump boxes used by the administrator to access the scheduler and processing nodes.</span></span> <span data-ttu-id="868b4-141">L’ordinateur Jump Box Windows est obligatoire pour permettre à l’administrateur d’accéder au nœud principal via le protocole RDP.</span><span class="sxs-lookup"><span data-stu-id="868b4-141">The Windows jumpbox is mandatory to allow the administrator to access the head node via remote desktop protocol.</span></span> <span data-ttu-id="868b4-142">Le deuxième ordinateur Jump Box est facultatif et exécute Linux pour l’administration des nœuds worker.</span><span class="sxs-lookup"><span data-stu-id="868b4-142">The second jumpbox is optional and runs Linux for administration of the worker nodes.</span></span>
- <span data-ttu-id="868b4-143">Les [groupes de sécurité réseau](/azure/virtual-network/manage-network-security-group) limitent l’accès à l’adresse IP publique et autorisent les ports 3389 et 22 pour l’accès aux machines virtuelles attachées au sous-réseau de l’ordinateur Jump Box.</span><span class="sxs-lookup"><span data-stu-id="868b4-143">[Network security groups](/azure/virtual-network/manage-network-security-group) (NSGs) limit access to the public IP address (PIP) and allow ports 3389 and 22 for access to the VMs attached to the Jumpbox subnet.</span></span>
- <span data-ttu-id="868b4-144">Le [peering de réseau virtuel](/azure/virtual-network/virtual-network-peering-overview) connecte un réseau virtuel PhotoScan à un réseau virtuel Avere.</span><span class="sxs-lookup"><span data-stu-id="868b4-144">[Virtual network peering](/azure/virtual-network/virtual-network-peering-overview) connects a PhotoScan virtual network to an Avere virtual network.</span></span>
- <span data-ttu-id="868b4-145">[Stockage Blob Azure](/azure/storage/blobs/storage-blobs-introduction) fonctionne avec Avere vFXT comme serveur de fichiers principal pour stocker les données validées à traiter.</span><span class="sxs-lookup"><span data-stu-id="868b4-145">[Azure Blob storage](/azure/storage/blobs/storage-blobs-introduction) works with Avere vFXT as the core filer to store the committed data being processed.</span></span> <span data-ttu-id="868b4-146">Avere vFXT identifie les données actives stockées dans Stockage Blob Azure et les place dans les disques SSD utilisés pour la mise en cache dans ses nœuds de calcul quand un travail PhotoScan s’exécute.</span><span class="sxs-lookup"><span data-stu-id="868b4-146">Avere vFXT identifies the active data stored in Azure Blob and tiers it into solid-state drives (SSD) used for caching in its compute nodes while a PhotoScan job is running.</span></span> <span data-ttu-id="868b4-147">Si des modifications sont apportées, les données sont validées de façon asynchrone dans le serveur de fichiers principal.</span><span class="sxs-lookup"><span data-stu-id="868b4-147">If changes are made, the data is asynchronously committed back to the core filer.</span></span>
- <span data-ttu-id="868b4-148">[Azure Key Vault](/azure/key-vault/key-vault-overview) est utilisé pour stocker les mots de passe de l’administrateur et le code d’activation de PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="868b4-148">[Azure Key Vault](/azure/key-vault/key-vault-overview) is used to store the administrator passwords and PhotoScan activation code.</span></span>

### <a name="alternatives"></a><span data-ttu-id="868b4-149">Autres solutions</span><span class="sxs-lookup"><span data-stu-id="868b4-149">Alternatives</span></span>

- <span data-ttu-id="868b4-150">Pour tirer parti des services Azure dans la gestion d’un cluster HPC, utilisez des outils comme Azure CycleCloud ou Azure Batch, au lieu de gérer les ressources via des modèles ou des scripts.</span><span class="sxs-lookup"><span data-stu-id="868b4-150">To take advantage of Azure services for managing an HPC cluster, use tools such as Azure CycleCloud or Azure Batch instead of managing the resources through templates or scripts.</span></span>
- <span data-ttu-id="868b4-151">Déployez le système de fichiers virtuel parallèle BeeGFS comme stockage back-end sur Azure au lieu d’Avere vFXT.</span><span class="sxs-lookup"><span data-stu-id="868b4-151">Deploy the BeeGFS parallel virtual file system as the back-end storage on Azure instead of Avere vFXT.</span></span> <span data-ttu-id="868b4-152">Utilisez le [modèle BeeGFS](https://github.com/paulomarquesc/beegfs-template) pour déployer cette solution de bout en bout sur Azure.</span><span class="sxs-lookup"><span data-stu-id="868b4-152">Use the [BeeGFS template](https://github.com/paulomarquesc/beegfs-template) to deploy this end-to-end solution on Azure.</span></span>
- <span data-ttu-id="868b4-153">Déployez la solution de stockage de votre choix, comme GlusterFS, Lustre ou les espaces de stockage direct de Windows.</span><span class="sxs-lookup"><span data-stu-id="868b4-153">Deploy the storage solution of your choice, such as GlusterFS, Lustre, or Windows Storage Spaces Direct.</span></span> <span data-ttu-id="868b4-154">Pour cela, modifiez le [modèle PhotoScan](https://github.com/paulomarquesc/photoscan-template) pour qu’il utilise la solution de stockage souhaitée.</span><span class="sxs-lookup"><span data-stu-id="868b4-154">To do this, edit the [PhotoScan template](https://github.com/paulomarquesc/photoscan-template) to work with the storage solution you want.</span></span>
- <span data-ttu-id="868b4-155">Déployez les nœuds worker avec le système d’exploitation Windows au lieu de Linux, qui est l’option par défaut.</span><span class="sxs-lookup"><span data-stu-id="868b4-155">Deploy the worker nodes with the Windows operating system instead of Linux, the default option.</span></span> <span data-ttu-id="868b4-156">Si vous choisissez des nœuds Windows, les options d’intégration du stockage ne sont pas exécutées par les modèles de déploiement.</span><span class="sxs-lookup"><span data-stu-id="868b4-156">When choosing Windows nodes, storage integration options are not executed by the deployment templates.</span></span> <span data-ttu-id="868b4-157">Vous devez intégrer manuellement l’environnement à une solution de stockage, ou personnaliser le modèle PhotoScan pour fournir cette automatisation, comme décrit dans le [dépôt](https://github.com/paulomarquesc/photoscan-template/blob/master/docs/AverePostDeploymentSteps.md).</span><span class="sxs-lookup"><span data-stu-id="868b4-157">You must manually integrate the environment with an existing storage solution, or customize the PhotoScan template to provide such automation, as described in the [repository](https://github.com/paulomarquesc/photoscan-template/blob/master/docs/AverePostDeploymentSteps.md).</span></span>

## <a name="considerations"></a><span data-ttu-id="868b4-158">Considérations</span><span class="sxs-lookup"><span data-stu-id="868b4-158">Considerations</span></span>

<span data-ttu-id="868b4-159">Ce scénario est conçu spécifiquement pour fournir un stockage haute performance pour une charge de travail HPC, qu’elle soit déployée sur Windows ou sur Linux.</span><span class="sxs-lookup"><span data-stu-id="868b4-159">This scenario is designed specifically to provide high-performance storage for an HPC workload, whether it is deployed on Windows or Linux.</span></span> <span data-ttu-id="868b4-160">D’une façon générale, la configuration du stockage de la charge de travail HPC doit correspondre aux bonnes pratiques appropriées utilisées pour les déploiements locaux.</span><span class="sxs-lookup"><span data-stu-id="868b4-160">In general, the storage configuration of the HPC workload should match the appropriate best practices used for on-premises deployments.</span></span>

<span data-ttu-id="868b4-161">Les considérations relatives au déploiement dépendent des applications et des services utilisés, mais il faut prendre en compte quelques remarques :</span><span class="sxs-lookup"><span data-stu-id="868b4-161">Deployment considerations depend on the applications and services used, but a few notes apply:</span></span>

- <span data-ttu-id="868b4-162">Lors de la création d’applications haute performance, utilisez Stockage Azure Premium et [optimisez la couche Application](/azure/virtual-machines/windows/premium-storage-performance).</span><span class="sxs-lookup"><span data-stu-id="868b4-162">When building high-performance applications, use Azure Premium Storage and [optimize the application layer](/azure/virtual-machines/windows/premium-storage-performance).</span></span> <span data-ttu-id="868b4-163">Optimisez le stockage pour les accès fréquents en utilisant le [niveau d’accès chaud](/azure/storage/blobs/storage-blob-storage-tiers) de Stockage Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="868b4-163">Optimize storage for frequent access using Azure Blob [hot tier access](/azure/storage/blobs/storage-blob-storage-tiers).</span></span>
- <span data-ttu-id="868b4-164">Utiliser un stockage [option de réplication](/azure/storage/common/storage-redundancy) qui répond à vos besoins de disponibilité et les performances.</span><span class="sxs-lookup"><span data-stu-id="868b4-164">Use a storage [replication option](/azure/storage/common/storage-redundancy) that meets your availability and performance requirements.</span></span> <span data-ttu-id="868b4-165">Dans cet exemple, Avere vFXT est configuré par défaut pour la haute disponibilité, avec un stockage localement redondant (LRS).</span><span class="sxs-lookup"><span data-stu-id="868b4-165">In this example, Avere vFXT is configured for high availability by default, with locally redundant storage (LRS).</span></span> <span data-ttu-id="868b4-166">Pour l’équilibrage de charge, toutes les machines virtuelles utilisent le modèle de tourniquet (round robin) pour accéder aux exportations de vFXT.</span><span class="sxs-lookup"><span data-stu-id="868b4-166">For load balancing, all VMs in this setup use the round-robin pattern to access vFXT exports.</span></span>
- <span data-ttu-id="868b4-167">Si le stockage back-end est utilisé à la fois par des clients Windows et des clients Linux, utilisez des serveurs Samba pour prendre en charge les nœuds Windows.</span><span class="sxs-lookup"><span data-stu-id="868b4-167">If the backend storage will be consumed by both Windows clients and Linux clients, use Samba servers to support the Windows nodes.</span></span> <span data-ttu-id="868b4-168">Une [version](https://github.com/paulomarquesc/beegfs-template) de cet exemple de scénario basé sur BeeGFS utilise Samba pour prendre en charge le nœud du planificateur de la charge de travail HPC (PhotoScan) s’exécutant sur Windows.</span><span class="sxs-lookup"><span data-stu-id="868b4-168">A [version](https://github.com/paulomarquesc/beegfs-template) of this example scenario based on BeeGFS uses Samba to support the scheduler node of the HPC workload (PhotoScan) running on Windows.</span></span> <span data-ttu-id="868b4-169">Un équilibreur de charge est déployé pour agir comme remplacement intelligent pour le tourniquet (round robin) DNS.</span><span class="sxs-lookup"><span data-stu-id="868b4-169">A load balancer is deployed to act like a smart replacement for DNS round robin.</span></span>
- <span data-ttu-id="868b4-170">Exécutez les applications HPC en utilisant le type de machine virtuelle le mieux adapté à votre charge de travail [Windows](/azure/virtual-machines/windows/sizes-hpc) ou [Linux](/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="868b4-170">Run HPC applications using the VM type best suited for your [Windows](/azure/virtual-machines/windows/sizes-hpc) or [Linux](/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) workload.</span></span>
- <span data-ttu-id="868b4-171">Pour isoler la charge de travail HPC des ressources de stockage, déployez chaque ressource dans son propre réseau virtuel, puis utilisez le [peering](/azure/virtual-network/virtual-network-peering-overview) de réseau virtuel pour connecter les deux réseaux.</span><span class="sxs-lookup"><span data-stu-id="868b4-171">To isolate the HPC workload from the storage resources, deploy each in its own virtual network, then use virtual network [peering](/azure/virtual-network/virtual-network-peering-overview) to connect the two.</span></span> <span data-ttu-id="868b4-172">Le peering crée une connexion haut débit à faible latence entre les ressources dans différents réseaux virtuels et route le trafic à travers l’infrastructure principale Microsoft via des adresses IP privées uniquement.</span><span class="sxs-lookup"><span data-stu-id="868b4-172">Peering creates a low-latency, high-bandwidth connection between resources in different virtual networks and routes traffic through the Microsoft backbone infrastructure through private IP addresses only.</span></span>

### <a name="security"></a><span data-ttu-id="868b4-173">Sécurité</span><span class="sxs-lookup"><span data-stu-id="868b4-173">Security</span></span>

<span data-ttu-id="868b4-174">Cet exemple se concentre sur le déploiement d’une solution de stockage haute performance pour une charge de travail HPC et n’est pas une solution de sécurité.</span><span class="sxs-lookup"><span data-stu-id="868b4-174">This example focuses on deploying a high-performance storage solution for an HPC workload and is not a security solution.</span></span> <span data-ttu-id="868b4-175">Veillez à impliquer votre équipe de sécurité pour les éventuelles modifications.</span><span class="sxs-lookup"><span data-stu-id="868b4-175">Make sure to involve your security team for any changes.</span></span>

<span data-ttu-id="868b4-176">Pour renforcer la sécurité, cet exemple d’infrastructure permet à toutes les machines virtuelles Windows d’être jointes au domaine et utilise Active Directory pour l’authentification centralisée.</span><span class="sxs-lookup"><span data-stu-id="868b4-176">For added security, this example infrastructure enables all the Windows VMs to be domain-joined and uses Active Directory for central authentication.</span></span> <span data-ttu-id="868b4-177">Il fournit également des services DNS personnalisés pour toutes les machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="868b4-177">It also provides custom DNS services for all VMs.</span></span> <span data-ttu-id="868b4-178">Pour aider à protéger l’environnement, ce modèle s’appuie sur des [groupes de sécurité réseau](/azure/virtual-network/security-overview).</span><span class="sxs-lookup"><span data-stu-id="868b4-178">To help protect the environment, this template relies on [network security groups (NSGs)](/azure/virtual-network/security-overview).</span></span> <span data-ttu-id="868b4-179">Les groupes de sécurité réseau offrent des filtres de trafic et des règles de sécurité de base.</span><span class="sxs-lookup"><span data-stu-id="868b4-179">NSGs offer basic traffic filters and security rules.</span></span>

<span data-ttu-id="868b4-180">Considérez les options suivantes pour améliorer la sécurité dans ce scénario :</span><span class="sxs-lookup"><span data-stu-id="868b4-180">Consider the following options to further improve security in this scenario:</span></span>

- <span data-ttu-id="868b4-181">Utilisez des appliances de réseau virtuel, comme Fortinet, Checkpoint et Juniper.</span><span class="sxs-lookup"><span data-stu-id="868b4-181">Use network virtual appliances such as Fortinet, Checkpoint, and Juniper.</span></span>
- <span data-ttu-id="868b4-182">Appliquez le [contrôle d’accès en fonction du rôle](/azure/role-based-access-control/overview) aux groupes de ressources.</span><span class="sxs-lookup"><span data-stu-id="868b4-182">Apply [role-based access control](/azure/role-based-access-control/overview) to the resource groups.</span></span>
- <span data-ttu-id="868b4-183">Activez l’accès [JIT](/azure/security-center/security-center-just-in-time) aux machines virtuelles si les ordinateurs Jump Box sont accessibles via Internet.</span><span class="sxs-lookup"><span data-stu-id="868b4-183">Enable VM [JIT](/azure/security-center/security-center-just-in-time) access if jump boxes are accessed via the Internet.</span></span>
- <span data-ttu-id="868b4-184">Utilisez [Azure Key Vault](/azure/key-vault/quick-create-portal) pour stocker les mots de passe utilisés par les comptes d’administrateur.</span><span class="sxs-lookup"><span data-stu-id="868b4-184">Use [Azure Key Vault](/azure/key-vault/quick-create-portal) to store the passwords used by administrator accounts.</span></span>

## <a name="pricing"></a><span data-ttu-id="868b4-185">Tarifs</span><span class="sxs-lookup"><span data-stu-id="868b4-185">Pricing</span></span>

<span data-ttu-id="868b4-186">Le coût d’exécution de ce scénario peut varier considérablement selon plusieurs facteurs.</span><span class="sxs-lookup"><span data-stu-id="868b4-186">The cost of running this scenario can vary greatly depending on multiple factors.</span></span>  <span data-ttu-id="868b4-187">Le nombre et la taille des machines virtuelles, la quantité de stockage nécessaire et le temps nécessaire pour effectuer un travail détermineront le coût.</span><span class="sxs-lookup"><span data-stu-id="868b4-187">The number and size of VMs, how much storage is required, and the amount of time to complete a job will determine your cost.</span></span>

<span data-ttu-id="868b4-188">L’exemple de profil de coûts suivant dans la [calculatrice de prix Azure](https://azure.com/e/42362ddfd2e245a28a8e78bc609c80f3) est basé sur une configuration classique pour Avere vFXT et PhotoScan :</span><span class="sxs-lookup"><span data-stu-id="868b4-188">The following sample cost profile in the [Azure pricing calculator](https://azure.com/e/42362ddfd2e245a28a8e78bc609c80f3) is based on a typical configuration for Avere vFXT and PhotoScan:</span></span>

- <span data-ttu-id="868b4-189">1 machine virtuelle Ubuntu A1\_v2 pour exécuter le contrôleur Avere.</span><span class="sxs-lookup"><span data-stu-id="868b4-189">1 A1\_v2 Ubuntu VM to run the Avere controller.</span></span>
- <span data-ttu-id="868b4-190">3 machines virtuelles Avere OS D16s\_v3 : une pour chacun des nœuds Avere vFXT qui forment le cluster vFXT.</span><span class="sxs-lookup"><span data-stu-id="868b4-190">3 D16s\_v3 Avere OS VMs, one for each of the Avere vFXT nodes that form the vFXT cluster.</span></span>
- <span data-ttu-id="868b4-191">5 machines virtuelles Linux NC24\_v2 pour fournir les GPU nécessaires aux nœuds de traitement PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="868b4-191">5 NC24\_v2 Linux VMs to provide the GPUs needed by the PhotoScan processing nodes.</span></span>
- <span data-ttu-id="868b4-192">1 machine virtuelle CentOS D8s\_v3 pour le nœud du planificateur PhotoScan.</span><span class="sxs-lookup"><span data-stu-id="868b4-192">1 D8s\_v3 CentOS VM for the PhotoScan scheduler node.</span></span>
- <span data-ttu-id="868b4-193">1 machine virtuelle CentOS DS2\_v2 utilisée comme ordinateur Jump Box de l’administrateur.</span><span class="sxs-lookup"><span data-stu-id="868b4-193">1 DS2\_v2 CentOS used as administrator jumpbox.</span></span>
- <span data-ttu-id="868b4-194">2 machines virtuelles DS2\_v2 pour les contrôleurs de domaine Active Directory.</span><span class="sxs-lookup"><span data-stu-id="868b4-194">2 DS2\_v2 VMs for the Active Directory domain controllers.</span></span>
- <span data-ttu-id="868b4-195">Disques managés Premium.</span><span class="sxs-lookup"><span data-stu-id="868b4-195">Premium managed disks.</span></span>
- <span data-ttu-id="868b4-196">Stockage Blob v2 universel (GPv2) avec LRS et niveau d’accès chaud (seuls les comptes de stockage GPv2 exposent l’attribut Niveau d’accès).</span><span class="sxs-lookup"><span data-stu-id="868b4-196">General purpose v2 (GPv2) Blob storage with LRS and hot tier access (only GPv2 storage accounts expose the Access Tier attribute).</span></span>
- <span data-ttu-id="868b4-197">Réseau virtuel prenant en charge le transfert de 10 To de données.</span><span class="sxs-lookup"><span data-stu-id="868b4-197">Virtual network with support for 10 TB data transfer.</span></span>

<span data-ttu-id="868b4-198">Pour plus d’informations sur cette architecture, consultez le [livre électronique](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span><span class="sxs-lookup"><span data-stu-id="868b4-198">For details about this architecture, see the [ebook](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span></span> <span data-ttu-id="868b4-199">Pour voir quel serait le tarif de votre cas d’usage particulier, choisissez des tailles de machines virtuelles différentes dans la calculatrice de prix en fonction du déploiement que vous prévoyez.</span><span class="sxs-lookup"><span data-stu-id="868b4-199">To see how the pricing would change for your particular use case, choose different VM sizes in the pricing calculator to match your expected deployment.</span></span>

## <a name="deployment"></a><span data-ttu-id="868b4-200">Déploiement</span><span class="sxs-lookup"><span data-stu-id="868b4-200">Deployment</span></span>

<span data-ttu-id="868b4-201">Pour obtenir des instructions pas à pas sur le déploiement de cette architecture, notamment tous les prérequis de l’utilisation d’Avere FxT ou BeeGFS, téléchargez le livre électronique : [Deploy Agisoft PhotoScan on Azure With Avere vFXT for Azure or BeeGFS](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span><span class="sxs-lookup"><span data-stu-id="868b4-201">For step-by-step instructions for deploying this architecture, including all the prerequisites for using either Avere FxT or BeeGFS, download the ebook: [Deploy Agisoft PhotoScan on Azure With Avere vFXT for Azure or BeeGFS](https://azure.microsoft.com/en-us/resources/deploy-agisoft-photoscan-on-azure-with-azere-vfxt-for-azure-or-beegfs/).</span></span>

## <a name="related-resources"></a><span data-ttu-id="868b4-202">Ressources associées</span><span class="sxs-lookup"><span data-stu-id="868b4-202">Related resources</span></span>

<span data-ttu-id="868b4-203">Les ressources suivantes fournissent plus d’informations sur les composants utilisés dans ce scénario, ainsi que des approches alternatives pour le traitement par lots sur Azure.</span><span class="sxs-lookup"><span data-stu-id="868b4-203">The following resources will provide more information on the components utilized in this scenario, along with alternative approaches for batch computing on Azure.</span></span>

- <span data-ttu-id="868b4-204">Vue d’ensemble d’[Avere vFXT pour Azure](/azure/avere-vfxt/avere-vfxt-overview)</span><span class="sxs-lookup"><span data-stu-id="868b4-204">Overview of [Avere vFXT for Azure](/azure/avere-vfxt/avere-vfxt-overview)</span></span>
- <span data-ttu-id="868b4-205">Page d’accueil d’[Agisoft PhotoScan](https://www.agisoft.com/)</span><span class="sxs-lookup"><span data-stu-id="868b4-205">[Agisoft PhotoScan](https://www.agisoft.com/) home Page</span></span>
- [<span data-ttu-id="868b4-206">Liste de contrôle des performances et de l’extensibilité du Stockage Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="868b4-206">Azure Storage Performance and Scalability Checklist</span></span>](/azure/storage/common/storage-performance-checklist)
- <span data-ttu-id="868b4-207">[Systèmes de fichiers virtuels parallèles sur Microsoft Azure : Tests de performances de Lustre, GlusterFS et BeeGFS](https://azure.microsoft.com/mediahandler/files/resourcefiles/parallel-virtual-file-systems-on-microsoft-azure/Parallel_Virtual_File_Systems_on_Microsoft_Azure.pdf) (PDF)</span><span class="sxs-lookup"><span data-stu-id="868b4-207">[Parallel Virtual File Systems on Microsoft Azure: Performance tests of Lustre, GlusterFS, and BeeGFS](https://azure.microsoft.com/mediahandler/files/resourcefiles/parallel-virtual-file-systems-on-microsoft-azure/Parallel_Virtual_File_Systems_on_Microsoft_Azure.pdf) (PDF)</span></span>
- <span data-ttu-id="868b4-208">Un exemple de scénario pour l’[ingénierie assistée par ordinateur (IAO) sur Azure](/azure/architecture/example-scenario/apps/hpc-saas)</span><span class="sxs-lookup"><span data-stu-id="868b4-208">An example scenario for [computer-aided engineering (CAE) on Azure](/azure/architecture/example-scenario/apps/hpc-saas)</span></span>
- <span data-ttu-id="868b4-209">Page d’accueil de [HPC sur Azure](https://azure.microsoft.com/en-us/solutions/high-performance-computing/)</span><span class="sxs-lookup"><span data-stu-id="868b4-209">[HPC on Azure](https://azure.microsoft.com/en-us/solutions/high-performance-computing/) home page</span></span>
- <span data-ttu-id="868b4-210">Vue d’ensemble de [Big Compute : HPC &amp; Microsoft Batch](https://azure.microsoft.com/en-us/solutions/big-compute/)</span><span class="sxs-lookup"><span data-stu-id="868b4-210">Overview of [Big Compute: HPC &amp; Microsoft Batch](https://azure.microsoft.com/en-us/solutions/big-compute/)</span></span>