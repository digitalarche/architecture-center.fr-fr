---
title: Penser la conception des applications pour augmenter la taille des instances
titleSuffix: Azure Application Architecture Guide
description: Les applications cloud doivent être conçues pour une mise à l’échelle horizontale.
author: MikeWasson
ms.date: 08/30/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seojan19
ms.openlocfilehash: 32ea1e7dc732c819783ad2fc06dbcffd75685d23
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/23/2019
ms.locfileid: "54483732"
---
# <a name="design-to-scale-out"></a><span data-ttu-id="a253f-103">Penser la conception des applications pour augmenter la taille des instances</span><span class="sxs-lookup"><span data-stu-id="a253f-103">Design to scale out</span></span>

## <a name="design-your-application-so-that-it-can-scale-horizontally"></a><span data-ttu-id="a253f-104">Concevoir votre application de manière à permettre sa mise à l’échelle horizontale</span><span class="sxs-lookup"><span data-stu-id="a253f-104">Design your application so that it can scale horizontally</span></span>

<span data-ttu-id="a253f-105">Le principal avantage du cloud est la mise à l’échelle élastique &mdash; la possibilité d’utiliser exactement la capacité dont vous avez besoin, en effectuant une montée en charge à mesure que la charge augmente et une mise à l’échelle lorsque vous n’avez plus besoin de cette capacité supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="a253f-105">A primary advantage of the cloud is elastic scaling &mdash; the ability to use as much capacity as you need, scaling out as load increases, and scaling in when the extra capacity is not needed.</span></span> <span data-ttu-id="a253f-106">Concevez votre application afin qu’elle puisse évoluer horizontalement, par l’ajout ou la suppression de nouvelles instances en fonction de la demande.</span><span class="sxs-lookup"><span data-stu-id="a253f-106">Design your application so that it can scale horizontally, adding or removing new instances as demand requires.</span></span>

## <a name="recommendations"></a><span data-ttu-id="a253f-107">Recommandations</span><span class="sxs-lookup"><span data-stu-id="a253f-107">Recommendations</span></span>

<span data-ttu-id="a253f-108">**Évitez l’adhérence des instances**.</span><span class="sxs-lookup"><span data-stu-id="a253f-108">**Avoid instance stickiness**.</span></span> <span data-ttu-id="a253f-109">L’adhérence, ou *affinité de session*, intervient lorsque les requêtes émanant du même client sont toujours routées vers le même serveur.</span><span class="sxs-lookup"><span data-stu-id="a253f-109">Stickiness, or *session affinity*, is when requests from the same client are always routed to the same server.</span></span> <span data-ttu-id="a253f-110">L’adhérence limite les possibilités de montée en charge de l’application. Par exemple, le trafic provenant d’un utilisateur générant beaucoup de volume ne sera pas distribué entre les différentes instances.</span><span class="sxs-lookup"><span data-stu-id="a253f-110">Stickiness limits the application's ability to scale out. For example, traffic from a high-volume user will not be distributed across instances.</span></span> <span data-ttu-id="a253f-111">L’adhérence peut être due au stockage de l’état de session en mémoire et à l’utilisation de clés spécifiques à l’ordinateur pour le chiffrement.</span><span class="sxs-lookup"><span data-stu-id="a253f-111">Causes of stickiness include storing session state in memory, and using machine-specific keys for encryption.</span></span> <span data-ttu-id="a253f-112">Assurez-vous que n’importe quelle instance peut gérer n’importe quelle requête.</span><span class="sxs-lookup"><span data-stu-id="a253f-112">Make sure that any instance can handle any request.</span></span>

<span data-ttu-id="a253f-113">**Identifiez les goulots d’étranglement**.</span><span class="sxs-lookup"><span data-stu-id="a253f-113">**Identify bottlenecks**.</span></span> <span data-ttu-id="a253f-114">La montée en puissance ne règle pas tous les problèmes de performance.</span><span class="sxs-lookup"><span data-stu-id="a253f-114">Scaling out isn't a magic fix for every performance issue.</span></span> <span data-ttu-id="a253f-115">Par exemple, si votre base de données principale est le goulot d’étranglement, ajouter des serveurs web ne servira à rien.</span><span class="sxs-lookup"><span data-stu-id="a253f-115">For example, if your backend database is the bottleneck, it won't help to add more web servers.</span></span> <span data-ttu-id="a253f-116">Identifiez et éliminez les goulots d’étranglement au niveau du système avant de multiplier les instances.</span><span class="sxs-lookup"><span data-stu-id="a253f-116">Identify and resolve the bottlenecks in the system first, before throwing more instances at the problem.</span></span> <span data-ttu-id="a253f-117">Les parties avec état du système sont les causes les plus courantes des goulots d’étranglement.</span><span class="sxs-lookup"><span data-stu-id="a253f-117">Stateful parts of the system are the most likely cause of bottlenecks.</span></span>

<span data-ttu-id="a253f-118">**Décomposez les charges de travail par exigences d’évolutivité.**</span><span class="sxs-lookup"><span data-stu-id="a253f-118">**Decompose workloads by scalability requirements.**</span></span>  <span data-ttu-id="a253f-119">Les applications se composent souvent de plusieurs charges de travail, avec des exigences différentes en matière d’évolutivité.</span><span class="sxs-lookup"><span data-stu-id="a253f-119">Applications often consist of multiple workloads, with different requirements for scaling.</span></span> <span data-ttu-id="a253f-120">Par exemple, une application peut avoir un site web public et un site d’administration distinct.</span><span class="sxs-lookup"><span data-stu-id="a253f-120">For example, an application might have a public-facing site and a separate administration site.</span></span> <span data-ttu-id="a253f-121">Le site public peut rencontrer des pics de trafic soudains, alors que le site d’administration a une charge moins élevée et plus prévisible.</span><span class="sxs-lookup"><span data-stu-id="a253f-121">The public site may experience sudden surges in traffic, while the administration site has a smaller, more predictable load.</span></span>

<span data-ttu-id="a253f-122">**Déchargez les tâches gourmandes en ressources.**</span><span class="sxs-lookup"><span data-stu-id="a253f-122">**Offload resource-intensive tasks.**</span></span> <span data-ttu-id="a253f-123">Le cas échéant, les tâches qui nécessitent beaucoup de ressources de processeur ou d’E/S doivent être déplacées vers des [tâches en arrière-plan][background-jobs] afin de réduire la charge au niveau du serveur frontal qui traite les requêtes d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="a253f-123">Tasks that require a lot of CPU or I/O resources should be moved to [background jobs][background-jobs] when possible, to minimize the load on the front end that is handling user requests.</span></span>

<span data-ttu-id="a253f-124">**Utilisez les fonctionnalités de mise à l’échelle automatique intégrées**.</span><span class="sxs-lookup"><span data-stu-id="a253f-124">**Use built-in autoscaling features**.</span></span> <span data-ttu-id="a253f-125">De nombreux services de calcul Azure offrent une prise en charge intégrée de la mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="a253f-125">Many Azure compute services have built-in support for autoscaling.</span></span> <span data-ttu-id="a253f-126">Si l’application a une charge de travail régulière et prévisible, nous vous recommandons de planifier la montée en charge,</span><span class="sxs-lookup"><span data-stu-id="a253f-126">If the application has a predictable, regular workload, scale out on a schedule.</span></span> <span data-ttu-id="a253f-127">par exemple pendant les heures ouvrables.</span><span class="sxs-lookup"><span data-stu-id="a253f-127">For example, scale out during business hours.</span></span> <span data-ttu-id="a253f-128">Sinon, lorsque la charge de travail n’est pas prévisible, utilisez les indicateurs de performance tels que la longueur de file d’attente du processeur ou des requêtes pour déclencher la mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="a253f-128">Otherwise, if the workload is not predictable, use performance metrics such as CPU or request queue length to trigger autoscaling.</span></span> <span data-ttu-id="a253f-129">Pour connaître les bonnes pratiques en matière de mise à l’échelle automatique, consultez [Mise à l’échelle automatique][autoscaling].</span><span class="sxs-lookup"><span data-stu-id="a253f-129">For autoscaling best practices, see [Autoscaling][autoscaling].</span></span>

<span data-ttu-id="a253f-130">**Envisagez une mise à l’échelle automatique agressive pour les charges de travail critiques**.</span><span class="sxs-lookup"><span data-stu-id="a253f-130">**Consider aggressive autoscaling for critical workloads**.</span></span> <span data-ttu-id="a253f-131">Pour les charges de travail critiques, il est essentiel d’anticiper la demande.</span><span class="sxs-lookup"><span data-stu-id="a253f-131">For critical workloads, you want to keep ahead of demand.</span></span> <span data-ttu-id="a253f-132">Il est préférable d’ajouter de nouvelles instances rapidement en cas de charge importante afin de pouvoir gérer le trafic supplémentaire, puis de réduire progressivement le nombre d’instances.</span><span class="sxs-lookup"><span data-stu-id="a253f-132">It's better to add new instances quickly under heavy load to handle the additional traffic, and then gradually scale back.</span></span>

<span data-ttu-id="a253f-133">**Pensez la conception des applications pour réduire la taille des instances**.</span><span class="sxs-lookup"><span data-stu-id="a253f-133">**Design for scale in**.</span></span>  <span data-ttu-id="a253f-134">N’oubliez pas que dans le cadre d’une évolutivité élastique, l’application connaîtra des périodes de mise à l’échelle, lorsque des instances sont supprimées.</span><span class="sxs-lookup"><span data-stu-id="a253f-134">Remember that with elastic scale, the application will have periods of scale in, when instances get removed.</span></span> <span data-ttu-id="a253f-135">L’application doit gérer de manière appropriée les instances en cours de suppression.</span><span class="sxs-lookup"><span data-stu-id="a253f-135">The application must gracefully handle instances being removed.</span></span> <span data-ttu-id="a253f-136">Voici quelques méthodes de gestion de la mise à l’échelle :</span><span class="sxs-lookup"><span data-stu-id="a253f-136">Here are some ways to handle scalein:</span></span>

- <span data-ttu-id="a253f-137">Détectez les événements d’arrêt (le cas échéant) et arrêtez correctement les instances.</span><span class="sxs-lookup"><span data-stu-id="a253f-137">Listen for shutdown events (when available) and shut down cleanly.</span></span>
- <span data-ttu-id="a253f-138">Les clients/consommateurs d’un service doivent prendre en charge les nouvelles tentatives et la gestion des erreurs temporaires.</span><span class="sxs-lookup"><span data-stu-id="a253f-138">Clients/consumers of a service should support transient fault handling and retry.</span></span>
- <span data-ttu-id="a253f-139">Pour les tâches longues, envisagez de fragmenter le travail à l’aide de points de contrôle ou du modèle [Canaux et filtres][pipes-filters-pattern].</span><span class="sxs-lookup"><span data-stu-id="a253f-139">For long-running tasks, consider breaking up the work, using checkpoints or the [Pipes and Filters][pipes-filters-pattern] pattern.</span></span>
- <span data-ttu-id="a253f-140">Placez les éléments de travail dans une file d’attente afin qu’une autre instance puisse s’en charger dans le cas où une instance est supprimée au cours du processus de traitement.</span><span class="sxs-lookup"><span data-stu-id="a253f-140">Put work items on a queue so that another instance can pick up the work, if an instance is removed in the middle of processing.</span></span>

<!-- links -->

[autoscaling]: ../../best-practices/auto-scaling.md
[background-jobs]: ../../best-practices/background-jobs.md
[pipes-filters-pattern]: ../../patterns/pipes-and-filters.md
