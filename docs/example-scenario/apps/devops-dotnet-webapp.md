---
title: Pipeline CI/CD avec VSTS
description: Un exemple de compilation et de publication d’une application .NET sur Azure Web Apps
author: christianreddington
ms.date: 07/11/18
ms.openlocfilehash: aea757087f4a505a8c52658abe1841c5455977cc
ms.sourcegitcommit: c49aeef818d7dfe271bc4128b230cfc676f05230
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/11/2018
ms.locfileid: "44389264"
---
# <a name="cicd-pipeline-with-vsts"></a><span data-ttu-id="429fa-103">Pipeline CI/CD avec VSTS</span><span class="sxs-lookup"><span data-stu-id="429fa-103">CI/CD pipeline with VSTS</span></span>

<span data-ttu-id="429fa-104">DevOps est l’intégration du développement, de l’assurance qualité et des opérations informatiques.</span><span class="sxs-lookup"><span data-stu-id="429fa-104">DevOps is the integration of development, quality assurance, and IT operations.</span></span> <span data-ttu-id="429fa-105">DevOps nécessite une culture unifiée et un ensemble solide de processus pour la distribution de logiciels.</span><span class="sxs-lookup"><span data-stu-id="429fa-105">DevOps requires both unified culture and a strong set of processes for delivering software.</span></span>

<span data-ttu-id="429fa-106">Cet exemple de scénario illustre comment les équipes de développement peuvent utiliser Visual Studio Team Services pour déployer une application web .NET de deux couches sur Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="429fa-106">This example scenario demonstrates how development teams can use Visual Studio Team Services to deploy a .NET two-tier web application to Azure App Service.</span></span> <span data-ttu-id="429fa-107">L’application web dépend des services PaaS (platform as a service) Azure en aval.</span><span class="sxs-lookup"><span data-stu-id="429fa-107">The Web Application depends on downstream Azure Platform as a Service (PaaS) services.</span></span> <span data-ttu-id="429fa-108">Ce document souligne également quelques considérations que vous devez avoir lors de la conception d’un tel scénario à l’aide de la plateforme Azure as a service (PaaS).</span><span class="sxs-lookup"><span data-stu-id="429fa-108">This document also points out some considerations that you should make when designing such a scenario using Azure Platform as a Service (PaaS).</span></span>

<span data-ttu-id="429fa-109">L’approche moderne du développement d’applications que représentent l’intégration continue (CI) et le déploiement continu (CD) aide à offrir plus vite de la valeur ajoutée aux utilisateurs par l’intermédiaire d’un service robuste de conception, de test, de déploiement et de monitoring.</span><span class="sxs-lookup"><span data-stu-id="429fa-109">Adopting a modern approach to application development using Continuous Integration (CI) and Continuous Deployment (CD), helps you to accelerate the delivery of value to your users through a robust build, test, deployment, and monitoring service.</span></span> <span data-ttu-id="429fa-110">En utilisant une plateforme telle que Visual Studio Team Services en plus des services Azure tels que App Service, les organisations peuvent s’assurer de rester concentrées sur le développement de leur scénario, plus que la gestion de l’infrastructure pour l’activer.</span><span class="sxs-lookup"><span data-stu-id="429fa-110">By using a platform such as Visual Studio Team Services in addition to Azure services such as App Service, organizations can ensure they remain focused on the development of their scenario, rather than the management of the infrastructure to enable it.</span></span>

## <a name="related-use-cases"></a><span data-ttu-id="429fa-111">Cas d’usage connexes</span><span class="sxs-lookup"><span data-stu-id="429fa-111">Related use cases</span></span>

<span data-ttu-id="429fa-112">Pensez à DevOps pour les cas d’usage suivants :</span><span class="sxs-lookup"><span data-stu-id="429fa-112">Consider DevOps for the following use cases:</span></span>

* <span data-ttu-id="429fa-113">Accélération du développement d’applications et des cycles de vie de déploiement</span><span class="sxs-lookup"><span data-stu-id="429fa-113">Speeding up application development and development life cycles</span></span>
* <span data-ttu-id="429fa-114">Qualité et cohérence de la construction dans un processus de compilation et de mise en production automatisé</span><span class="sxs-lookup"><span data-stu-id="429fa-114">Building quality and consistency into an automated build and release process</span></span>

## <a name="architecture"></a><span data-ttu-id="429fa-115">Architecture</span><span class="sxs-lookup"><span data-stu-id="429fa-115">Architecture</span></span>

![Présentation de l’architecture des composants Azure impliqués dans un scénario DevOps utilisant Visual Studio Team Services et Azure App Service][architecture]

<span data-ttu-id="429fa-117">Ce scénario couvre un pipeline DevOps pour une application web .NET à l’aide de Visual Studio Team Services (VSTS).</span><span class="sxs-lookup"><span data-stu-id="429fa-117">This scenario covers a DevOps pipeline for a .NET web application using Visual Studio Team Services (VSTS).</span></span> <span data-ttu-id="429fa-118">Les données circulent dans le scénario comme suit :</span><span class="sxs-lookup"><span data-stu-id="429fa-118">The data flows through the scenario as follows:</span></span>

1. <span data-ttu-id="429fa-119">Changer le code source de l’application.</span><span class="sxs-lookup"><span data-stu-id="429fa-119">Change application source code.</span></span>
2. <span data-ttu-id="429fa-120">Valider le code de l’application et le fichier web.config de l’application web.</span><span class="sxs-lookup"><span data-stu-id="429fa-120">Commit application code and Web Apps web.config file.</span></span>
3. <span data-ttu-id="429fa-121">L’intégration continue déclenche la génération de l’application et des tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="429fa-121">Continuous integration triggers application build and unit tests.</span></span>
4. <span data-ttu-id="429fa-122">Le déclencheur de déploiement continu orchestre le déploiement d’artefacts d’application  *avec des valeurs de configuration paramétrables propres à l’environnement*.</span><span class="sxs-lookup"><span data-stu-id="429fa-122">Continuous deployment trigger orchestrates deployment of application artifacts *with environment-specific parameterized configuration values*.</span></span>
5. <span data-ttu-id="429fa-123">Déploiement vers Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="429fa-123">Deployment to Azure App Service.</span></span>
6. <span data-ttu-id="429fa-124">Azure Application Insights collecte et analyse les données relatives à l’intégrité, aux performances et à l’utilisation.</span><span class="sxs-lookup"><span data-stu-id="429fa-124">Azure Application Insights collects and analyzes health, performance, and usage data.</span></span>
7. <span data-ttu-id="429fa-125">Passez en revue les informations relatives à l’intégrité, aux performances et à l’utilisation.</span><span class="sxs-lookup"><span data-stu-id="429fa-125">Review health, performance, and usage information.</span></span>

### <a name="components"></a><span data-ttu-id="429fa-126">Composants</span><span class="sxs-lookup"><span data-stu-id="429fa-126">Components</span></span>

* <span data-ttu-id="429fa-127">Les [groupes de ressources][resource-groups] constituent un conteneur logique pour les ressources Azure et fournissent également une limite de contrôle d’accès pour le plan de gestion, considérez un groupe de ressources comme représentant une « unité de déploiement ».</span><span class="sxs-lookup"><span data-stu-id="429fa-127">[Resource Groups][resource-groups] are a logical container for Azure resources and also provide an access control boundary for the management plane - think of a Resource Group as representing a "unit of deployment".</span></span>
* <span data-ttu-id="429fa-128">[Visual Studio Team Services (VSTS)][vsts] est un service qui vous permet de gérer votre cycle de vie de développement de bout en bout, depuis la planification et la gestion du projet jusqu’à la gestion du code, en passant par la compilation et la mise en production.</span><span class="sxs-lookup"><span data-stu-id="429fa-128">[Visual Studio Team Services (VSTS)][vsts] is a service that enables you to manage your development life cycle end-to-end; from planning and project management, to code management, through to build and release.</span></span>
* <span data-ttu-id="429fa-129">[Azure Web Apps][web-apps] est un service PaaS (platform as a service) d’hébergement d’applications web, d’API REST et de backends mobiles.</span><span class="sxs-lookup"><span data-stu-id="429fa-129">[Azure Web Apps][web-apps] is a Platform as a Service (PaaS) service for hosting web applications, REST APIs, and mobile backends.</span></span> <span data-ttu-id="429fa-130">Bien que cet article se concentre sur .NET, il existe plusieurs options de plateforme de développement supplémentaires prises en charge.</span><span class="sxs-lookup"><span data-stu-id="429fa-130">While this article focuses on .NET, there are several additional development platform options supported.</span></span>
* <span data-ttu-id="429fa-131">[Application Insights][application-insights] est un service interne extensible de gestion des performances des applications (APM) destiné aux développeurs web sur de multiples plateformes.</span><span class="sxs-lookup"><span data-stu-id="429fa-131">[Application Insights][application-insights] is a first-party, extensible Application Performance Management (APM) service for web developers on multiple platforms.</span></span>

### <a name="alternative-devops-tooling-options"></a><span data-ttu-id="429fa-132">Autres options d’outils DevOps</span><span class="sxs-lookup"><span data-stu-id="429fa-132">Alternative DevOps tooling options</span></span>

<span data-ttu-id="429fa-133">Alors que cet article se concentre sur Visual Studio Team Services, [Team Foundation Server][team-foundation-server] peut être utilisé comme un substitut local.</span><span class="sxs-lookup"><span data-stu-id="429fa-133">Whilst this article focuses on Visual Studio Team Services, [Team Foundation Server][team-foundation-server] could be used as on premises substitute.</span></span> <span data-ttu-id="429fa-134">Sinon, vous pouvez également trouver une collection de technologies utilisées ensemble pour un pipeline de développement Open Source en tirant parti de [Jenkins][jenkins-on-azure].</span><span class="sxs-lookup"><span data-stu-id="429fa-134">Alternatively, you may also find a collection of technologies being used together for an Open Source development pipeline leveraging [Jenkins][jenkins-on-azure].</span></span>

<span data-ttu-id="429fa-135">Dans une perspective IaC (infrastructure as code), les [modèles Azure Resource Manager][arm-templates] sont inclus dans le projet Azure DevOps, mais vous pouvez éventuellement utiliser [Terraform][terraform] ou [Chef][chef] si vous avez investi dedans.</span><span class="sxs-lookup"><span data-stu-id="429fa-135">From an Infrastructure as Code perspective, [Azure Resource Manager Templates][arm-templates] are included as part of the Azure DevOps project, but you could consider [Terraform][terraform] or [Chef][chef] if you have investments here.</span></span> <span data-ttu-id="429fa-136">Si vous préférez un déploiement IaaS (infrastructure as a service) et que vous avez besoin d’une gestion de la configuration, tournez-vous vers [Azure Automation State Configuration][desired-state-configuration], [Ansible][ansible] ou [Chef][chef].</span><span class="sxs-lookup"><span data-stu-id="429fa-136">If you prefer an Infrastructure as a Service (IaaS) based deployment and require configuration management, then you could consider either [Azure Automation State Configuration][desired-state-configuration], [Ansible][ansible] or [Chef][chef].</span></span>

### <a name="alternatives-to-web-app-hosting"></a><span data-ttu-id="429fa-137">Alternatives à l’hébergement Web App</span><span class="sxs-lookup"><span data-stu-id="429fa-137">Alternatives to Web App Hosting</span></span>

<span data-ttu-id="429fa-138">Alternatives à l’hébergement dans Azure Web Apps :</span><span class="sxs-lookup"><span data-stu-id="429fa-138">Alternatives to hosting in Azure Web Apps:</span></span>

* <span data-ttu-id="429fa-139">[Machine virtuelle][compare-vm-hosting] : pour les charges de travail qui réclament un degré élevé de contrôle ou dépendent de services/composants du système d’exploitation qui ne sont pas possibles avec Web Apps (par exemple, GAC Windows ou COM).</span><span class="sxs-lookup"><span data-stu-id="429fa-139">[VM][compare-vm-hosting] - For workloads that require a high degree of control, or depend on OS components / services that are not possible with Web Apps (for example, the Windows GAC, or COM)</span></span>
* <span data-ttu-id="429fa-140">[Hébergement de conteneur][azure-containers] : où il existe des dépendances de système d’exploitation et une portabilité d’hébergement, ou une densité d’hébergement, sont également des exigences.</span><span class="sxs-lookup"><span data-stu-id="429fa-140">[Container Hosting][azure-containers] - Where there are OS dependencies and hosting portability, or hosting density, are also requirements.</span></span>
* <span data-ttu-id="429fa-141">[Service Fabric][service-fabric] : une bonne option si l’architecture de la charge de travail est concentrée autour des composants distribués qui bénéficient d’un déploiement et d’une exécution sur un cluster avec un degré élevé de contrôle.</span><span class="sxs-lookup"><span data-stu-id="429fa-141">[Service Fabric][service-fabric] - A good option if the workload architecture is focused around distributed components that benefit from being deployed and run across a cluster with a high degree of control.</span></span> <span data-ttu-id="429fa-142">Service Fabric peut également être utilisé pour héberger des conteneurs.</span><span class="sxs-lookup"><span data-stu-id="429fa-142">Service Fabric can also be used to host containers.</span></span>
* <span data-ttu-id="429fa-143">[Fonctions Serverless Azure][azure-functions] : une bonne option si l’architecture de la charge de travail est centrée sur des composants distribués affinés , nécessitant des dépendances minimales, où les composants individuels doivent uniquement être exécutés à la demande (pas de façon continue) et où l’orchestration des composants n’est pas obligatoire.</span><span class="sxs-lookup"><span data-stu-id="429fa-143">[Serverless Azure functions][azure-functions] - A good option if the workload architecture is centered around fine grained distributed components, requiring minimal dependencies, where individual components are only required to run on demand (not continuously) and orchestration of components is not required.</span></span>

### <a name="devops"></a><span data-ttu-id="429fa-144">DevOps</span><span class="sxs-lookup"><span data-stu-id="429fa-144">DevOps</span></span>

<span data-ttu-id="429fa-145">L’**[Intégration continue (CI)][continuous-integration]** doit viser à illustrer une version stable, avec plusieurs développeurs (individuels ou en équipe) validant en permanence des modifications fréquentes sur la base de code partagée.</span><span class="sxs-lookup"><span data-stu-id="429fa-145">**[Continuous Integration (CI)][continuous-integration]** should aim to demonstrate a stable build, with more than one individual developer or team continuously committing small, frequent changes to the shared codebase.</span></span>
<span data-ttu-id="429fa-146">Vous devez effectuer les opérations suivantes dans le cadre de votre pipeline d’intégration continue :</span><span class="sxs-lookup"><span data-stu-id="429fa-146">As part of your Continuous Integration pipeline you should;</span></span>

* <span data-ttu-id="429fa-147">Archiver fréquemment de petites quantités de code (éviter la mise en lots des modifications plus grandes ou plus complexes car il est possible qu’elles soient plus difficiles à fusionner)</span><span class="sxs-lookup"><span data-stu-id="429fa-147">Check in small amounts of code frequently (avoid batching up larger or more complex changes as these can be harder to merge successfully)</span></span>
* <span data-ttu-id="429fa-148">Faire le test unitaire des composants de votre application avec une couverture suffisante du code (y compris les chemins d’accès mécontents)</span><span class="sxs-lookup"><span data-stu-id="429fa-148">Unit Test the components of your application with sufficient code coverage (including the unhappy paths)</span></span>
* <span data-ttu-id="429fa-149">Garantir que la version est exécutée sur la branche partagée, principale (ou jonction).</span><span class="sxs-lookup"><span data-stu-id="429fa-149">Ensuring the build is run against the shared, master (or trunk) branch.</span></span> <span data-ttu-id="429fa-150">Cette branche doit être stable et maintenue comme « déploiement prêt ».</span><span class="sxs-lookup"><span data-stu-id="429fa-150">This branch should be stable and maintained as "deployment ready".</span></span> <span data-ttu-id="429fa-151">Les modifications incomplètes ou en cours doivent être isolées dans une branche distincte avec des fusions « intégration en amont » fréquentes pour éviter des conflits ultérieures.</span><span class="sxs-lookup"><span data-stu-id="429fa-151">Incomplete or work-in-progress changes should be isolated in a separate branch with frequent 'forward integration' merges to avoid conflicts later.</span></span>

<span data-ttu-id="429fa-152">La **[livraison continue (CD)][continuous-delivery]** doit viser à montrer non seulement une version stable, mais également un déploiement stable.</span><span class="sxs-lookup"><span data-stu-id="429fa-152">**[Continuous Delivery (CD)][continuous-delivery]** should aim to demonstrate not only a stable build but a stable deployment.</span></span> <span data-ttu-id="429fa-153">Cela rend la livraison continue un peu plus difficile ; une configuration propre à l’environnement est requise, ainsi qu’un mécanisme permettant de définir correctement ces valeurs.</span><span class="sxs-lookup"><span data-stu-id="429fa-153">This makes realizing CD a little more difficult, environment-specific configuration is required and a mechanism for setting those values correctly.</span></span>

<span data-ttu-id="429fa-154">En outre, une couverture suffisante des tests d’intégration est exigée pour assurer que les différents composants sont configurés et fonctionnent correctement de bout en bout.</span><span class="sxs-lookup"><span data-stu-id="429fa-154">In addition, sufficient coverage of Integration Testing is required to ensure that the various components are configured and working correctly end-to-end.</span></span>

<span data-ttu-id="429fa-155">Il peut également se révéler nécessaire de configurer et de réinitialiser les données spécifiques de l’environnement et de gérer les versions du schéma de la base de données.</span><span class="sxs-lookup"><span data-stu-id="429fa-155">This may also require setting up and resetting environment-specific data and managing database schema versions.</span></span>

<span data-ttu-id="429fa-156">La livraison continue peut également s’étendre aux environnements de test de charge et d’acceptation utilisateur.</span><span class="sxs-lookup"><span data-stu-id="429fa-156">Continuous Delivery may also extend to Load Testing and User Acceptance Testing Environments.</span></span>

<span data-ttu-id="429fa-157">La livraison continue tire parti de la surveillance continue, dans l’idéal, au sein de tous les environnements.</span><span class="sxs-lookup"><span data-stu-id="429fa-157">Continuous Delivery benefits from continuous Monitoring, ideally across all environments.</span></span>
<span data-ttu-id="429fa-158">L’automatisation, par le biais de scripts, de la création et de la configuration de l’infrastructure d’hébergement améliore la cohérence et la fiabilité des déploiements et des tests d’intégration dans les différents environnements (ce qui est beaucoup plus facile pour les charges de travail cloud) ; c’est ce que l’on nomme [IaC, pour « infrastructure as code »][infra-as-code].</span><span class="sxs-lookup"><span data-stu-id="429fa-158">The consistency and reliability of deployments and integration testing across environments is made easier by scripting the creation and configuration or the hosting infrastructure (something that is considerably easier for Cloud-based workloads, see Azure infrastructure as code) - this is also known as ["infrastructure-as-code"][infra-as-code].</span></span>

* <span data-ttu-id="429fa-159">Démarrez la diffusion en continu dès que possible dans le cycle de vie du projet.</span><span class="sxs-lookup"><span data-stu-id="429fa-159">Start Continuous Delivery as early as possible in the project life-cycle.</span></span> <span data-ttu-id="429fa-160">Plus vous la démarrez tard, plus ce sera difficile.</span><span class="sxs-lookup"><span data-stu-id="429fa-160">The later you leave it, the more difficult it will be.</span></span>
* <span data-ttu-id="429fa-161">Les tests d’intégration et unitaires doivent avoir la même priorité que les fonctionnalités du projet</span><span class="sxs-lookup"><span data-stu-id="429fa-161">Integration & unit tests should be given the same priority as the project features</span></span>
* <span data-ttu-id="429fa-162">Utilisez des packages de déploiement indépendants de l’environnement et gérez la configuration spécifique de l’environnement par le biais du processus de mise en production.</span><span class="sxs-lookup"><span data-stu-id="429fa-162">Use environment agnostic deployment packages and manage environment-specific configuration through the release process.</span></span>
* <span data-ttu-id="429fa-163">Protégez une configuration sensible au sein des outils de gestion des mises en production ou en appelant un module de sécurité matériel (HSM), ou un [coffre de clés][azure-key-vault], au cours du processus de mise en production.</span><span class="sxs-lookup"><span data-stu-id="429fa-163">Protect sensitive configuration within the release management tooling or by calling out to a Hardware-security-module (HSM), or [Key Vault][azure-key-vault], during the release process.</span></span> <span data-ttu-id="429fa-164">Ne stockez pas de configuration sensible au sein du contrôle de code source.</span><span class="sxs-lookup"><span data-stu-id="429fa-164">Do not store sensitive configuration within source control.</span></span>

<span data-ttu-id="429fa-165">**Apprentissage continu** : la surveillance la plus efficace d’un environnement CD est fournie par les outils Application-Performance-Monitoring (APM), par exemple [Application Insights][application-insights] de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="429fa-165">**Continuous Learning** - The most effective monitoring of a CD environment is provided by Application-Performance-Monitoring tools (APM for short), for example Microsoft's [Application Insights][application-insights].</span></span> <span data-ttu-id="429fa-166">Une profondeur suffisante de surveillance pour une charge de travail d’application est essentielle pour comprendre les bogues et les performances en charge.</span><span class="sxs-lookup"><span data-stu-id="429fa-166">Sufficient depth of monitoring for an application workload is critical to understand bugs, performance under load.</span></span> <span data-ttu-id="429fa-167">[App Insights peut être intégré dans VSTS pour activer la surveillance continue du pipeline CD][app-insights-cd-monitoring].</span><span class="sxs-lookup"><span data-stu-id="429fa-167">[App Insights can be integrated into VSTS to enable continuous monitoring of the CD pipeline][app-insights-cd-monitoring].</span></span> <span data-ttu-id="429fa-168">Cela peut être utilisé pour permettre la progression automatique à l’étape suivante, sans intervention humaine ou restauration si une alerte est détectée.</span><span class="sxs-lookup"><span data-stu-id="429fa-168">This could be used to enable automatic progression to the next stage, without human intervention, or rollback if an alert is detected.</span></span>

## <a name="considerations"></a><span data-ttu-id="429fa-169">Considérations</span><span class="sxs-lookup"><span data-stu-id="429fa-169">Considerations</span></span>

### <a name="availability"></a><span data-ttu-id="429fa-170">Disponibilité</span><span class="sxs-lookup"><span data-stu-id="429fa-170">Availability</span></span>

<span data-ttu-id="429fa-171">Envisagez l’utilisation des [modèles de conception standards pour la disponibilité][design-patterns-availability] lorsque vous générez votre application cloud.</span><span class="sxs-lookup"><span data-stu-id="429fa-171">Consider leveraging the [typical design patterns for availability][design-patterns-availability] when building your cloud application.</span></span>

<span data-ttu-id="429fa-172">Passez en revue les considérations sur la disponibilité dans [l’architecture de référence d’application web de App Service][app-service-reference-architecture] appropriée</span><span class="sxs-lookup"><span data-stu-id="429fa-172">Review the availability considerations in the appropriate [App Service web application reference architecture][app-service-reference-architecture]</span></span>

<span data-ttu-id="429fa-173">Pour consulter d’autres rubriques relatives à la disponibilité, consultez la [liste de contrôle de la disponibilité][availability] dans le Centre des architectures Azure.</span><span class="sxs-lookup"><span data-stu-id="429fa-173">For other availability topics, see the [availability checklist][availability] in the Azure Architecture Center.</span></span>

### <a name="scalability"></a><span data-ttu-id="429fa-174">Extensibilité</span><span class="sxs-lookup"><span data-stu-id="429fa-174">Scalability</span></span>

<span data-ttu-id="429fa-175">Lors de la création d’une application cloud, soyez conscient des [modèles de conception standards pour l’évolutivité][design-patterns-scalability].</span><span class="sxs-lookup"><span data-stu-id="429fa-175">When building a cloud application be aware of the [typical design patterns for scalability][design-patterns-scalability].</span></span>

<span data-ttu-id="429fa-176">Passez en revue les considérations sur l’extensibilité dans [l’architecture de référence d’application web de App Service][app-service-reference-architecture] appropriée</span><span class="sxs-lookup"><span data-stu-id="429fa-176">Review the scalability considerations in the appropriate [App Service web application reference architecture][app-service-reference-architecture]</span></span>

<span data-ttu-id="429fa-177">Pour consulter d’autres rubriques relatives à l’extensibilité, consultez la [liste de contrôle de l’extensibilité][scalability] dans le Centre des architectures Azure.</span><span class="sxs-lookup"><span data-stu-id="429fa-177">For other scalability topics, see the [scalability checklist][scalability] in the Azure Architecture Center.</span></span>

### <a name="security"></a><span data-ttu-id="429fa-178">Sécurité</span><span class="sxs-lookup"><span data-stu-id="429fa-178">Security</span></span>

<span data-ttu-id="429fa-179">Envisagez l’utilisation des [modèles de conception standards pour la sécurité][design-patterns-security] le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="429fa-179">Consider leveraging the [typical design patterns for security][design-patterns-security] where appropriate.</span></span>

<span data-ttu-id="429fa-180">Passez en revue les considérations sur la sécurité dans [l’architecture de référence d’application web de App Service][app-service-reference-architecture] appropriée.</span><span class="sxs-lookup"><span data-stu-id="429fa-180">Review the security considerations in the appropriate [App Service web application reference architecture][app-service-reference-architecture].</span></span>

<span data-ttu-id="429fa-181">Pour obtenir des conseils d’ordre général sur la conception de solutions sécurisées, consultez la [documentation sur la sécurité Azure][security].</span><span class="sxs-lookup"><span data-stu-id="429fa-181">For general guidance on designing secure solutions, see the [Azure Security Documentation][security].</span></span>

### <a name="resiliency"></a><span data-ttu-id="429fa-182">Résilience</span><span class="sxs-lookup"><span data-stu-id="429fa-182">Resiliency</span></span>

<span data-ttu-id="429fa-183">Examinez les [modèles de conception standards pour la résilience][design-patterns-resiliency] et envisagez de les implémenter le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="429fa-183">Review the [typical design patterns for resiliency][design-patterns-resiliency] and consider implementing these where appropriate.</span></span>

<span data-ttu-id="429fa-184">Vous trouverez différentes [pratiques recommandées pour App Service][resiliency-app-service] dans le Centre des architectures Azure.</span><span class="sxs-lookup"><span data-stu-id="429fa-184">You can find a number of [recommended practices for App Service][resiliency-app-service] in the Azure Architecture Center.</span></span>

<span data-ttu-id="429fa-185">Pour obtenir des conseils d’ordre général sur la conception de solutions résilientes, consultez l’article [Conception d’applications résilientes pour Azure][resiliency].</span><span class="sxs-lookup"><span data-stu-id="429fa-185">For general guidance on designing resilient solutions, see [Designing resilient applications for Azure][resiliency].</span></span>

## <a name="deploy-the-scenario"></a><span data-ttu-id="429fa-186">Déployez le scénario</span><span class="sxs-lookup"><span data-stu-id="429fa-186">Deploy the scenario</span></span>

### <a name="prerequisites"></a><span data-ttu-id="429fa-187">Prérequis</span><span class="sxs-lookup"><span data-stu-id="429fa-187">Prerequisites</span></span>

* <span data-ttu-id="429fa-188">Vous devez disposer d’un compte Azure existant.</span><span class="sxs-lookup"><span data-stu-id="429fa-188">You must have an existing Azure account.</span></span> <span data-ttu-id="429fa-189">Si vous n’avez pas d’abonnement Azure, créez un [compte gratuit][azure-free-account] avant de commencer.</span><span class="sxs-lookup"><span data-stu-id="429fa-189">If you don't have an Azure subscription, create a [free account][azure-free-account] before you begin.</span></span>
* <span data-ttu-id="429fa-190">Vous devez disposer d’un compte Visual Studio Team Services (VSTS) existant.</span><span class="sxs-lookup"><span data-stu-id="429fa-190">You must have an existing Visual Studio Team Services (VSTS) account.</span></span> <span data-ttu-id="429fa-191">Découvrez plus d’informations sur la [création d’un compte Visual Studio Team Services (VSTS)][vsts-account-create].</span><span class="sxs-lookup"><span data-stu-id="429fa-191">Find out more details about [creating a Visual Studio Team Services (VSTS) account][vsts-account-create].</span></span>

### <a name="walk-through"></a><span data-ttu-id="429fa-192">Procédure</span><span class="sxs-lookup"><span data-stu-id="429fa-192">Walk through</span></span>

<span data-ttu-id="429fa-193">Dans ce scénario, vous utiliserez un projet Azure DevOps pour créer votre pipeline CI/CD.</span><span class="sxs-lookup"><span data-stu-id="429fa-193">In this scenario, you'll use the Azure DevOps Project to create your CI/CD pipeline.</span></span>

<span data-ttu-id="429fa-194">Le projet DevOps déploiera automatiquement un plan App Service, App Service et une ressource App Insights, et configurera le projet Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="429fa-194">The DevOps project will deploy an App Service Plan, App Service, and an App Insights resource for you, as well as configure the Visual Studio Team Services Project for you.</span></span>

<span data-ttu-id="429fa-195">Une fois le projet DevOps déployé et généré, vérifiez les modifications du code, les éléments de travail et les résultats des tests associés.</span><span class="sxs-lookup"><span data-stu-id="429fa-195">Once you've deployed the DevOps project and the build is completed, review the associated code changes, work items, and test results.</span></span> <span data-ttu-id="429fa-196">Vous remarquerez qu'aucun résultat de test n’est affiché, car le code ne contient aucun test à exécuter.</span><span class="sxs-lookup"><span data-stu-id="429fa-196">You will notice no test results are displayed, as the code does not contain any tests to run.</span></span>

<span data-ttu-id="429fa-197">Revoyez les définitions de mise en production.</span><span class="sxs-lookup"><span data-stu-id="429fa-197">Review the Release definitions.</span></span> <span data-ttu-id="429fa-198">Notez qu’un pipeline de mise en production a été configuré, libérant notre application dans Dev.</span><span class="sxs-lookup"><span data-stu-id="429fa-198">Notice that a release pipeline has been setup, releasing our application into Dev.</span></span> <span data-ttu-id="429fa-199">Observez qu’il y a un **déclencheur de déploiement continu** défini à partir de l’artefact de version **Drop**, avec des versions automatiques dans les environnements de développement.</span><span class="sxs-lookup"><span data-stu-id="429fa-199">Observe that there is a **continuous deployment trigger** set from the **Drop** build artifact, with automatic releases into the Dev environments.</span></span> <span data-ttu-id="429fa-200">Dans le cadre d’un processus de déploiement continu, vous pouvez voir les versions s’étendre sur plusieurs environnements.</span><span class="sxs-lookup"><span data-stu-id="429fa-200">As part of a Continuous Deployment process, you may see releases span across multiple environments.</span></span> <span data-ttu-id="429fa-201">Une version peut s’étendre sur chaque infrastructure (avec des techniques comme l’infrastructure en tant que code) et également déployer les packages d’application requis, ainsi que toutes les tâches de post-configuration.</span><span class="sxs-lookup"><span data-stu-id="429fa-201">A release can span both infrastructure (using techniques such as Infrastructure as Code), and also deploy the application packages required as well as any post-configuration tasks.</span></span>

<span data-ttu-id="429fa-202">**Considérations supplémentaires.**</span><span class="sxs-lookup"><span data-stu-id="429fa-202">**Additional Considerations.**</span></span>

* <span data-ttu-id="429fa-203">Envisagez l’utilisation de l’une des [tâches de création de jetons][vsts-tokenization] disponibles dans la place de marché VSTS.</span><span class="sxs-lookup"><span data-stu-id="429fa-203">Consider leveraging one of the [tokenization tasks][vsts-tokenization] that are available in the VSTS marketplace.</span></span>
* <span data-ttu-id="429fa-204">Envisagez l’utilisation de la tâche VSTS [Déployer : Azure Key Vault][download-keyvault-secrets] pour télécharger les secrets depuis un coffre de clés Azure vers votre version.</span><span class="sxs-lookup"><span data-stu-id="429fa-204">Consider using the [Deploy: Azure Key Vault][download-keyvault-secrets] VSTS task to download secrets from an Azure KeyVault into your release.</span></span> <span data-ttu-id="429fa-205">Vous pouvez ensuite utiliser ces secrets comme variables dans le cadre de la définition de votre version et vous ne devez pas les stocker dans le contrôle de code source.</span><span class="sxs-lookup"><span data-stu-id="429fa-205">You can then use those secrets as variables as part of your release definition, and should not be storing them in source control.</span></span>
* <span data-ttu-id="429fa-206">Envisagez d’utiliser des [variables de mise en production][vsts-release-variables] dans vos définitions de mise en production pour piloter les changements de configuration de vos environnements.</span><span class="sxs-lookup"><span data-stu-id="429fa-206">Consider using [release variables][vsts-release-variables] in your release definitions to drive configuration changes of your environments.</span></span> <span data-ttu-id="429fa-207">Les variables de mise en production peuvent être étendues à toute une version ou à un environnement donné.</span><span class="sxs-lookup"><span data-stu-id="429fa-207">Release variables can be scoped to an entire release or a given environment.</span></span> <span data-ttu-id="429fa-208">Si vous utilisez des variables pour les informations secrètes, veillez à sélectionner l’icône de cadenas.</span><span class="sxs-lookup"><span data-stu-id="429fa-208">If using variables for secret information, ensure that you select the padlock icon.</span></span>
* <span data-ttu-id="429fa-209">Envisagez d’utiliser des [portes de déploiement][vsts-deployment-gates] dans votre pipeline de mise en production.</span><span class="sxs-lookup"><span data-stu-id="429fa-209">Consider using [deployment gates][vsts-deployment-gates] in your release pipeline.</span></span> <span data-ttu-id="429fa-210">Vous pourrez ainsi tirer parti des données de monitoring en les combinant avec des systèmes externes (par exemple, la gestion des incidents ou d’autres systèmes sur mesure) pour déterminer s’il faut promouvoir une nouvelle version.</span><span class="sxs-lookup"><span data-stu-id="429fa-210">This allows you to leverage monitoring data in association with external systems (for example, incident management or additional bespoke systems) to determine whether a release should be promoted.</span></span>
* <span data-ttu-id="429fa-211">Lorsqu’une intervention manuelle dans un pipeline de mise en production est requise, envisagez d’utiliser la fonctionnalité [approbations][vsts-approvals].</span><span class="sxs-lookup"><span data-stu-id="429fa-211">Where manual intervention in a release pipeline is required, consider using the [approvals][vsts-approvals] functionality.</span></span>
* <span data-ttu-id="429fa-212">Envisagez d’utiliser [Application Insights][application-insights] et des outils de surveillance supplémentaires dès que possible dans votre pipeline de mise en production.</span><span class="sxs-lookup"><span data-stu-id="429fa-212">Consider using [Application Insights][application-insights] and additional monitoring tooling as early as possible in your release pipeline.</span></span> <span data-ttu-id="429fa-213">La plupart des organisations commencent seulement à surveiller leur environnement de production, même si vous pouvez identifier les éventuels bogues plus tôt dans le processus et éviter un impact sur vos utilisateurs en production.</span><span class="sxs-lookup"><span data-stu-id="429fa-213">Most organizations only begin monitoring in their production environment, though you could identify potential bugs earlier in the process and prevent impact to your users in production.</span></span>

## <a name="pricing"></a><span data-ttu-id="429fa-214">Tarifs</span><span class="sxs-lookup"><span data-stu-id="429fa-214">Pricing</span></span>

<span data-ttu-id="429fa-215">Votre évaluation des coûts de Visual Studio Team Services varie en fonction du nombre d’utilisateurs dans votre organisation nécessitant un accès, en plus des facteurs tels que le numéro de build/versions simultanés requis et le nombre d’utilisateurs de test.</span><span class="sxs-lookup"><span data-stu-id="429fa-215">Your Visual Studio Team Services costing will depend upon the number of users in your organization that require access, in addition to factors such as the number of concurrent build/releases required, and number of test users.</span></span> <span data-ttu-id="429fa-216">Ils sont détaillés plus loin sur la [page de tarification VSTS][vsts-pricing-page].</span><span class="sxs-lookup"><span data-stu-id="429fa-216">These are detailed further on the [VSTS pricing page][vsts-pricing-page].</span></span>

* <span data-ttu-id="429fa-217">[Visual Studio Team Services (VSTS)][vsts-pricing-calculator] est un service qui vous permet de gérer votre cycle de vie de développement et qui est payé par utilisateur et de façon mensuelle.</span><span class="sxs-lookup"><span data-stu-id="429fa-217">[Visual Studio Team Services (VSTS)][vsts-pricing-calculator] is a service that enables you to manage your development life cycle and is paid for on a per user, per month basis.</span></span> <span data-ttu-id="429fa-218">Il peut y avoir des frais supplémentaires en fonction des pipelines simultanés nécessaires, en plus des utilisateurs de test supplémentaires et des licences de base utilisateur.</span><span class="sxs-lookup"><span data-stu-id="429fa-218">There may be additional charges dependent upon concurrent pipelines needed, in addition to any additional test users, or user basic licenses.</span></span>

## <a name="related-resources"></a><span data-ttu-id="429fa-219">Ressources associées</span><span class="sxs-lookup"><span data-stu-id="429fa-219">Related Resources</span></span>

* <span data-ttu-id="429fa-220">[Qu’est DevOps ?][devops-whatis]</span><span class="sxs-lookup"><span data-stu-id="429fa-220">[What is DevOps?][devops-whatis]</span></span>
* <span data-ttu-id="429fa-221">[DevOps chez Microsoft - Comment nous collaborons avec Visual Studio Team Services][devops-microsoft]</span><span class="sxs-lookup"><span data-stu-id="429fa-221">[DevOps at Microsoft - How we work with Visual Studio Team Services][devops-microsoft]</span></span>
* <span data-ttu-id="429fa-222">[Didacticiels pas à pas : DevOps avec Visual Studio Team Services][devops-with-vsts]</span><span class="sxs-lookup"><span data-stu-id="429fa-222">[Step-by-step Tutorials: DevOps with Visual Studio Team Services][devops-with-vsts]</span></span>
* <span data-ttu-id="429fa-223">[Créer un pipeline CI/CD pour .NET avec Azure DevOps Project][devops-project-create]</span><span class="sxs-lookup"><span data-stu-id="429fa-223">[Create a CI/CD pipeline for .NET with the Azure DevOps project][devops-project-create]</span></span>

<!-- links -->
[ansible]: /azure/ansible/
[application-insights]: /azure/application-insights/app-insights-overview
[app-service-reference-architecture]: /azure/architecture/reference-architectures/app-service-web-app/
[azure-free-account]: https://azure.microsoft.com/free/?WT.mc_id=A261C142F
[arm-templates]: /azure/azure-resource-manager/resource-group-overview#template-deployment
[architecture]: ./media/devops-dotnet-webapp/architecture-devops-dotnet-webapp.png
[availability]: /azure/architecture/checklist/availability
[chef]: /azure/chef/
[design-patterns-availability]: /azure/architecture/patterns/category/availability
[design-patterns-resiliency]: /azure/architecture/patterns/category/resiliency
[design-patterns-scalability]: /azure/architecture/patterns/category/performance-scalability
[design-patterns-security]: /azure/architecture/patterns/category/security
[desired-state-configuration]: /azure/automation/automation-dsc-overview
[devops-microsoft]: /azure/devops/devops-at-microsoft/
[devops-with-vsts]: https://almvm.azurewebsites.net/labs/vsts/
[application-insights]: https://azure.microsoft.com/en-gb/services/application-insights/
[cloud-based-load-testing]: https://visualstudio.microsoft.com/team-services/cloud-load-testing/
[cloud-based-load-testing-on-premises]: /vsts/test/load-test/clt-with-private-machines?view=vsts
[jenkins-on-azure]: /azure/jenkins/
[devops-whatis]: /azure/devops/what-is-devops
[download-keyvault-secrets]: /vsts/pipelines/tasks/deploy/azure-key-vault?view=vsts
[resource-groups]: /azure/azure-resource-manager/resource-group-overview
[resiliency-app-service]: /azure/architecture/checklist/resiliency-per-service#app-service
[resiliency]: /azure/architecture/checklist/resiliency
[scalability]: /azure/architecture/checklist/scalability
[vsts]: /vsts/?view=vsts#pivot=services
[continuous-integration]: /azure/devops/what-is-continuous-integration
[continuous-delivery]: /azure/devops/what-is-continuous-delivery
[web-apps]: /azure/app-service/app-service-web-overview
[terraform]: /azure/terraform/
[vsts-account-create]: /vsts/organizations/accounts/create-account-msa-or-work-student?view=vsts
[vsts-approvals]: /vsts/pipelines/release/approvals/approvals?view=vsts
[devops-project]: https://portal.azure.com/?feature.customportal=false#create/Microsoft.AzureProject
[vsts-deployment-gates]: /vsts/pipelines/release/approvals/gates?view=vsts
[vsts-pricing-calculator]: https://azure.com/e/498aa024454445a8a352e75724f900b1
[vsts-pricing-page]: https://azure.microsoft.com/en-us/pricing/details/visual-studio-team-services/
[vsts-release-variables]: /vsts/pipelines/release/variables?view=vsts&tabs=batch
[vsts-tokenization]: https://marketplace.visualstudio.com/search?term=token&target=VSTS&category=All%20categories&sortBy=Relevance
[azure-key-vault]: /azure/key-vault/key-vault-overview
[infra-as-code]: https://blogs.msdn.microsoft.com/mvpawardprogram/2018/02/13/infrastructure-as-code/
[team-foundation-server]: https://visualstudio.microsoft.com/tfs/
[infra-as-code]: https://blogs.msdn.microsoft.com/mvpawardprogram/2018/02/13/infrastructure-as-code/
[service-fabric]:/azure/service-fabric/
[azure-functions]:/azure/azure-functions/
[azure-containers]:https://azure.microsoft.com/en-us/overview/containers/
[compare-vm-hosting]:/azure/app-service/choose-web-site-cloud-service-vm
[app-insights-cd-monitoring]:/azure/application-insights/app-insights-vsts-continuous-monitoring
[azure-region-pair-bcdr]:/azure/best-practices-availability-paired-regions
[devops-project-create]: /vsts/pipelines/apps/cd/azure/azure-devops-project-aspnetcore?view=vsts
[security]: /azure/security/