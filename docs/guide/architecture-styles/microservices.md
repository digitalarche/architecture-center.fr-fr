---
title: "Style d’architecture de microservices"
description: "Décrit les avantages, les inconvénients et les bonnes pratiques pour les architectures de microservices sur Azure"
author: MikeWasson
ms.openlocfilehash: 08fd39b6cf0b3c88af654b27e21b2d7dd9fb19b1
ms.sourcegitcommit: 7764a804f000180c37a4f8dbab946b525f784f58
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/09/2018
---
# <a name="microservices-architecture-style"></a><span data-ttu-id="77e2b-103">Style d’architecture de microservices</span><span class="sxs-lookup"><span data-stu-id="77e2b-103">Microservices architecture style</span></span>

<span data-ttu-id="77e2b-104">Une architecture de microservices se compose d’un ensemble de petits services autonomes.</span><span class="sxs-lookup"><span data-stu-id="77e2b-104">A microservices architecture consists of a collection of small, autonomous services.</span></span> <span data-ttu-id="77e2b-105">Chaque service est autonome et doit implémenter une fonctionnalité unique.</span><span class="sxs-lookup"><span data-stu-id="77e2b-105">Each service is self-contained and should implement a single business capability.</span></span> <span data-ttu-id="77e2b-106">Pour obtenir des instructions détaillées sur la création d’une architecture de microservices sur Azure, consultez [Conception, génération et exploitation de microservices sur Azure](../../microservices/index.md).</span><span class="sxs-lookup"><span data-stu-id="77e2b-106">For detailed guidance about building a microservices architecture on Azure, see [Designing, building, and operating microservices on Azure](../../microservices/index.md).</span></span>

![](./images/microservices-logical.svg)
 
<span data-ttu-id="77e2b-107">À certains égards, les microservices sont l’évolution naturelle des architectures orientées services (SOA), mais il existe des différences.</span><span class="sxs-lookup"><span data-stu-id="77e2b-107">In some ways, microservices are the natural evolution of service oriented architectures (SOA), but there are differences between microservices and SOA.</span></span> <span data-ttu-id="77e2b-108">Voici certaines caractéristiques qui définissent un microservice :</span><span class="sxs-lookup"><span data-stu-id="77e2b-108">Here are some defining characteristics of a microservice:</span></span>

- <span data-ttu-id="77e2b-109">Dans une architecture de microservices, les services sont de petite taille, indépendants et faiblement liés.</span><span class="sxs-lookup"><span data-stu-id="77e2b-109">In a microservices architecture, services are small, independent, and loosely coupled.</span></span>

- <span data-ttu-id="77e2b-110">Chaque service est un code base distinct, qui peut être géré par une petite équipe de développement.</span><span class="sxs-lookup"><span data-stu-id="77e2b-110">Each service is a separate codebase, which can be managed by a small development team.</span></span>

- <span data-ttu-id="77e2b-111">Les services peuvent être déployés de manière indépendante.</span><span class="sxs-lookup"><span data-stu-id="77e2b-111">Services can be deployed independently.</span></span> <span data-ttu-id="77e2b-112">Une équipe peut mettre à jour un service existant sans avoir à recréer et redéployer l’application entière.</span><span class="sxs-lookup"><span data-stu-id="77e2b-112">A team can update an existing service without rebuilding and redeploying the entire application.</span></span>

- <span data-ttu-id="77e2b-113">Les services sont responsables de la persistance de leurs propres données ou de leur propre état externe.</span><span class="sxs-lookup"><span data-stu-id="77e2b-113">Services are responsible for persisting their own data or external state.</span></span> <span data-ttu-id="77e2b-114">Ils se distinguent en cela du modèle traditionnel dans lequel une couche de données distincte gère la persistance des données.</span><span class="sxs-lookup"><span data-stu-id="77e2b-114">This differs from the traditional model, where a separate data layer handles data persistence.</span></span>

- <span data-ttu-id="77e2b-115">Les services communiquent entre eux à l’aide d’API bien définies.</span><span class="sxs-lookup"><span data-stu-id="77e2b-115">Services communicate with each other by using well-defined APIs.</span></span> <span data-ttu-id="77e2b-116">Les détails de l’implémentation interne de chaque service sont cachés aux autres services.</span><span class="sxs-lookup"><span data-stu-id="77e2b-116">Internal implementation details of each service are hidden from other services.</span></span>

- <span data-ttu-id="77e2b-117">Les services n’ont pas besoin de partager une pile de technologies, des bibliothèques ou des frameworks identiques.</span><span class="sxs-lookup"><span data-stu-id="77e2b-117">Services don't need to share the same technology stack, libraries, or frameworks.</span></span>

<span data-ttu-id="77e2b-118">Outre les services proprement dits, une architecture de microservices type est constituée d’autres composants :</span><span class="sxs-lookup"><span data-stu-id="77e2b-118">Besides for the services themselves, some other components appear in a typical microservices architecture:</span></span>

<span data-ttu-id="77e2b-119">**Gestion** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-119">**Management**.</span></span> <span data-ttu-id="77e2b-120">le composant de gestion est chargé de placer les services sur les nœuds, d’identifier les défaillances, de rééquilibrer les services entre les nœuds, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="77e2b-120">The management component is responsible for placing services on nodes, identifying failures, rebalancing services across nodes, and so forth.</span></span>  

<span data-ttu-id="77e2b-121">**Découverte des services** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-121">**Service Discovery**.</span></span>  <span data-ttu-id="77e2b-122">tient à jour une liste des services et des nœuds sur lesquels ils se trouvent.</span><span class="sxs-lookup"><span data-stu-id="77e2b-122">Maintains a list of services and which nodes they are located on.</span></span> <span data-ttu-id="77e2b-123">Permet de rechercher le point de terminaison d’un service.</span><span class="sxs-lookup"><span data-stu-id="77e2b-123">Enables service lookup to find the endpoint for a service.</span></span> 

<span data-ttu-id="77e2b-124">**Passerelle d’API** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-124">**API Gateway**.</span></span> <span data-ttu-id="77e2b-125">la passerelle d’API est le point d’entrée des clients.</span><span class="sxs-lookup"><span data-stu-id="77e2b-125">The API gateway is the entry point for clients.</span></span> <span data-ttu-id="77e2b-126">Les clients n’appellent pas les services directement.</span><span class="sxs-lookup"><span data-stu-id="77e2b-126">Clients don't call services directly.</span></span> <span data-ttu-id="77e2b-127">Au lieu de cela, ils appellent la passerelle d’API, qui transfère l’appel aux services appropriés sur le backend.</span><span class="sxs-lookup"><span data-stu-id="77e2b-127">Instead, they call the API gateway, which forwards the call to the appropriate services on the back end.</span></span> <span data-ttu-id="77e2b-128">La passerelle d’API peut agréger les réponses de plusieurs services et retourner la réponse agrégée.</span><span class="sxs-lookup"><span data-stu-id="77e2b-128">The API gateway might aggregate the responses from several services and return the aggregated response.</span></span> 

<span data-ttu-id="77e2b-129">L’utilisation de la passerelle d’API offre les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="77e2b-129">The advantages of using an API gateway include:</span></span>

- <span data-ttu-id="77e2b-130">Il dissocie les clients des services.</span><span class="sxs-lookup"><span data-stu-id="77e2b-130">It decouples clients from services.</span></span> <span data-ttu-id="77e2b-131">Les services peuvent être versionnés ou refactorisés sans avoir à mettre à jour tous les clients.</span><span class="sxs-lookup"><span data-stu-id="77e2b-131">Services can be versioned or refactored without needing to update all of the clients.</span></span>

-  <span data-ttu-id="77e2b-132">Les services peuvent utiliser des protocoles de messagerie qui ne sont pas compatibles avec le web, comme AMQP.</span><span class="sxs-lookup"><span data-stu-id="77e2b-132">Services can use messaging protocols that are not web friendly, such as AMQP.</span></span>

- <span data-ttu-id="77e2b-133">La passerelle d’API peut exécuter d’autres fonctions transversales, telles que l’authentification, la journalisation, la terminaison SSL et l’équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="77e2b-133">The API Gateway can perform other cross-cutting functions such as authentication, logging, SSL termination, and load balancing.</span></span>

## <a name="when-to-use-this-architecture"></a><span data-ttu-id="77e2b-134">Quand utiliser cette architecture</span><span class="sxs-lookup"><span data-stu-id="77e2b-134">When to use this architecture</span></span>

<span data-ttu-id="77e2b-135">Envisagez ce style d’architecture pour :</span><span class="sxs-lookup"><span data-stu-id="77e2b-135">Consider this architecture style for:</span></span>

- <span data-ttu-id="77e2b-136">Les applications volumineuses qui exigent une grande rapidité de diffusion.</span><span class="sxs-lookup"><span data-stu-id="77e2b-136">Large applications that require a high release velocity.</span></span>

- <span data-ttu-id="77e2b-137">Les applications complexes qui doivent offrir une grande scalabilité.</span><span class="sxs-lookup"><span data-stu-id="77e2b-137">Complex applications that need to be highly scalable.</span></span>

- <span data-ttu-id="77e2b-138">Les applications dotées de domaines étoffés ou d’un grand nombre de sous-domaines.</span><span class="sxs-lookup"><span data-stu-id="77e2b-138">Applications with rich domains or many subdomains.</span></span>

- <span data-ttu-id="77e2b-139">Une organisation constituée de petites équipes de développement.</span><span class="sxs-lookup"><span data-stu-id="77e2b-139">An organization that consists of small development teams.</span></span>


## <a name="benefits"></a><span data-ttu-id="77e2b-140">Avantages</span><span class="sxs-lookup"><span data-stu-id="77e2b-140">Benefits</span></span> 

- <span data-ttu-id="77e2b-141">**Déploiements indépendants** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-141">**Independent deployments**.</span></span> <span data-ttu-id="77e2b-142">vous pouvez mettre à jour un service sans avoir à redéployer l’application entière et effectuer une restauration ou une restauration par progression si une mise à jour est une source de problèmes.</span><span class="sxs-lookup"><span data-stu-id="77e2b-142">You can update a service without redeploying the entire application, and roll back or roll forward an update if something goes wrong.</span></span> <span data-ttu-id="77e2b-143">Les résolutions de bogues et les diffusions de fonctionnalités sont plus faciles à gérer et moins risquées.</span><span class="sxs-lookup"><span data-stu-id="77e2b-143">Bug fixes and feature releases are more manageable and less risky.</span></span>

- <span data-ttu-id="77e2b-144">**Développement indépendant** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-144">**Independent development**.</span></span> <span data-ttu-id="77e2b-145">une même équipe de développement peut créer, tester et déployer un service.</span><span class="sxs-lookup"><span data-stu-id="77e2b-145">A single development team can build, test, and deploy a service.</span></span> <span data-ttu-id="77e2b-146">Résultat : l’innovation est continue et la cadence des diffusions est supérieure.</span><span class="sxs-lookup"><span data-stu-id="77e2b-146">The result is continuous innovation and a faster release cadence.</span></span> 

- <span data-ttu-id="77e2b-147">**Petites équipes spécialisées** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-147">**Small, focused teams**.</span></span> <span data-ttu-id="77e2b-148">les équipes peuvent se concentrer sur un seul service.</span><span class="sxs-lookup"><span data-stu-id="77e2b-148">Teams can focus on one service.</span></span> <span data-ttu-id="77e2b-149">la portée de chaque service étant plus limitée, le code base est plus facile à comprendre et les nouveaux membres d’équipes s’intègrent plus facilement.</span><span class="sxs-lookup"><span data-stu-id="77e2b-149">The smaller scope of each service makes the code base easier to understand, and it's easier for new team members to ramp up.</span></span>

- <span data-ttu-id="77e2b-150">**Isolation des erreurs** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-150">**Fault isolation**.</span></span> <span data-ttu-id="77e2b-151">si un service tombe en panne, il n’impacte pas l’ensemble de l’application.</span><span class="sxs-lookup"><span data-stu-id="77e2b-151">If a service goes down, it won't take out the entire application.</span></span> <span data-ttu-id="77e2b-152">Cependant, cela ne signifie pas pour autant que vous bénéficiez d’une résilience ex nihilo.</span><span class="sxs-lookup"><span data-stu-id="77e2b-152">However, that doesn't mean you get resiliency for free.</span></span> <span data-ttu-id="77e2b-153">Vous devez toujours suivre les bonnes pratiques de résilience et les modèles de conception.</span><span class="sxs-lookup"><span data-stu-id="77e2b-153">You still need to follow resiliency best practices and design patterns.</span></span> <span data-ttu-id="77e2b-154">Consultez [Conception d’applications résilientes pour Azure][resiliency-overview].</span><span class="sxs-lookup"><span data-stu-id="77e2b-154">See [Designing resilient applications for Azure][resiliency-overview].</span></span>

- <span data-ttu-id="77e2b-155">**Piles de technologies mixtes** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-155">**Mixed technology stacks**.</span></span> <span data-ttu-id="77e2b-156">les équipes peuvent opter pour les technologies qui se prêtent le mieux à leur service.</span><span class="sxs-lookup"><span data-stu-id="77e2b-156">Teams can pick the technology that best fits their service.</span></span> 

- <span data-ttu-id="77e2b-157">**Mise à l’échelle précise** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-157">**Granular scaling**.</span></span> <span data-ttu-id="77e2b-158">les services peuvent mis à l’échelle de manière indépendante.</span><span class="sxs-lookup"><span data-stu-id="77e2b-158">Services can be scaled independently.</span></span> <span data-ttu-id="77e2b-159">Dans le même temps, la plus grande densité des services par machine virtuelle signifie que les ressources des machines virtuelles sont entièrement exploitées.</span><span class="sxs-lookup"><span data-stu-id="77e2b-159">At the same time, the higher density of services per VM means that VM resources are fully utilized.</span></span> <span data-ttu-id="77e2b-160">En utilisant des contraintes de placement, un service peut être assorti à un profil de machine virtuelle (processeur rapide, mémoire volumineuse, etc.).</span><span class="sxs-lookup"><span data-stu-id="77e2b-160">Using placement constraints, a services can be matched to a VM profile (high CPU, high memory, and so on).</span></span>

## <a name="challenges"></a><span data-ttu-id="77e2b-161">Défis</span><span class="sxs-lookup"><span data-stu-id="77e2b-161">Challenges</span></span>

- <span data-ttu-id="77e2b-162">**Complexité** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-162">**Complexity**.</span></span> <span data-ttu-id="77e2b-163">une application de microservices possède plus d’éléments mobiles qu’une application monolithique équivalente.</span><span class="sxs-lookup"><span data-stu-id="77e2b-163">A microservices application has more moving parts than the equivalent monolithic application.</span></span> <span data-ttu-id="77e2b-164">Si chaque service est plus simple, le système dans son ensemble est plus complexe.</span><span class="sxs-lookup"><span data-stu-id="77e2b-164">Each service is simpler, but the entire system as a whole is more complex.</span></span>

- <span data-ttu-id="77e2b-165">**Développement et tests** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-165">**Development and test**.</span></span> <span data-ttu-id="77e2b-166">développer avec des dépendances de services demande une approche différente.</span><span class="sxs-lookup"><span data-stu-id="77e2b-166">Developing against service dependencies requires a different approach.</span></span> <span data-ttu-id="77e2b-167">Les outils existants ne sont pas nécessairement conçus pour fonctionner avec des dépendances de services.</span><span class="sxs-lookup"><span data-stu-id="77e2b-167">Existing tools are not necessarily designed to work with service dependencies.</span></span> <span data-ttu-id="77e2b-168">Refactoriser au-delà des limites des services peut être une tâche ardue.</span><span class="sxs-lookup"><span data-stu-id="77e2b-168">Refactoring across service boundaries can be difficult.</span></span> <span data-ttu-id="77e2b-169">Il est aussi difficile de tester les dépendances de services, en particulier quand l’application évolue rapidement.</span><span class="sxs-lookup"><span data-stu-id="77e2b-169">It is also challenging to test service dependencies, especially when the application is evolving quickly.</span></span>

- <span data-ttu-id="77e2b-170">**Manque de gouvernance** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-170">**Lack of governance**.</span></span> <span data-ttu-id="77e2b-171">l’approche décentralisée de création de microservices présente des avantages, mais elle peut aussi être une source de problèmes.</span><span class="sxs-lookup"><span data-stu-id="77e2b-171">The decentralized approach to building microservices has advantages, but it can also lead to problems.</span></span> <span data-ttu-id="77e2b-172">Vous pouvez en effet vous trouver face à une diversité de langages et de frameworks telle que l’application devient difficile à gérer.</span><span class="sxs-lookup"><span data-stu-id="77e2b-172">You may end up with so many different languages and frameworks that the application becomes hard to maintain.</span></span> <span data-ttu-id="77e2b-173">Il peut être utile de mettre en place certains standards à l’échelle du projet, sans trop amoindrir la flexibilité des équipes.</span><span class="sxs-lookup"><span data-stu-id="77e2b-173">It may be useful to put some project-wide standards in place, without overly restricting teams' flexibility.</span></span> <span data-ttu-id="77e2b-174">Cela vaut en particulier pour les fonctionnalités transversales, telles que la journalisation.</span><span class="sxs-lookup"><span data-stu-id="77e2b-174">This especially applies to cross-cutting functionality such as logging.</span></span>

- <span data-ttu-id="77e2b-175">**Surcharge du réseau et latence** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-175">**Network congestion and latency**.</span></span> <span data-ttu-id="77e2b-176">l’utilisation de nombreux services granulaires de petite taille peut se traduire par une intensification des communications entre les services.</span><span class="sxs-lookup"><span data-stu-id="77e2b-176">The use of many small, granular services can result in more interservice communication.</span></span> <span data-ttu-id="77e2b-177">De même, si la chaîne des dépendances de services devient trop longue (le service A appelle le service B, qui appelle le service C, etc.), la latence supplémentaire qui s’ensuit peut devenir un problème.</span><span class="sxs-lookup"><span data-stu-id="77e2b-177">Also, if the chain of service dependencies gets too long (service A calls B, which calls C...), the additional latency can become a problem.</span></span> <span data-ttu-id="77e2b-178">Vous devrez faire preuve de circonspection au moment de concevoir des API.</span><span class="sxs-lookup"><span data-stu-id="77e2b-178">You will need to design APIs carefully.</span></span> <span data-ttu-id="77e2b-179">Évitez les API trop bavardes, envisagez des formats de sérialisation et cherchez à utiliser des modèles de communication asynchrone.</span><span class="sxs-lookup"><span data-stu-id="77e2b-179">Avoid overly chatty APIs, think about serialization formats, and look for places to use asynchronous communication patterns.</span></span>

- <span data-ttu-id="77e2b-180">**Intégrité des données** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-180">**Data integrity**.</span></span> <span data-ttu-id="77e2b-181">chaque microservice étant responsable de la persistance de ses propres données,</span><span class="sxs-lookup"><span data-stu-id="77e2b-181">With each microservice responsible for its own data persistence.</span></span> <span data-ttu-id="77e2b-182">la cohérence des données peut être une gageure.</span><span class="sxs-lookup"><span data-stu-id="77e2b-182">As a result, data consistency can be a challenge.</span></span> <span data-ttu-id="77e2b-183">Adoptez la cohérence éventuelle dans la mesure du possible.</span><span class="sxs-lookup"><span data-stu-id="77e2b-183">Embrace eventual consistency where possible.</span></span>

- <span data-ttu-id="77e2b-184">**Gestion** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-184">**Management**.</span></span> <span data-ttu-id="77e2b-185">une expérience réussie avec les microservices exige une culture DevOps mature.</span><span class="sxs-lookup"><span data-stu-id="77e2b-185">To be successful with microservices requires a mature DevOps culture.</span></span> <span data-ttu-id="77e2b-186">La mise en place d’une journalisation corrélée entre les services peut poser des problèmes.</span><span class="sxs-lookup"><span data-stu-id="77e2b-186">Correlated logging across services can be challenging.</span></span> <span data-ttu-id="77e2b-187">En règle générale, la journalisation doit mettre en corrélation plusieurs appels de services pour une même opération utilisateur.</span><span class="sxs-lookup"><span data-stu-id="77e2b-187">Typically, logging must correlate multiple service calls for a single user operation.</span></span>

- <span data-ttu-id="77e2b-188">**Gestion des versions** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-188">**Versioning**.</span></span> <span data-ttu-id="77e2b-189">les mises à jour apportées à un service ne doivent pas perturber les services qui en dépendent.</span><span class="sxs-lookup"><span data-stu-id="77e2b-189">Updates to a service must not break services that depend on it.</span></span> <span data-ttu-id="77e2b-190">Plusieurs services pouvant être mis à jour à tout moment, sans une conception minutieuse, vous risquez de rencontrer des problèmes de compatibilité descendante ou ascendante.</span><span class="sxs-lookup"><span data-stu-id="77e2b-190">Multiple services could be updated at any given time, so without careful design, you might have problems with backward or forward compatibility.</span></span>

- <span data-ttu-id="77e2b-191">**Compétences** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-191">**Skillset**.</span></span> <span data-ttu-id="77e2b-192">les microservices sont des systèmes hautement distribués.</span><span class="sxs-lookup"><span data-stu-id="77e2b-192">Microservices are highly distributed systems.</span></span> <span data-ttu-id="77e2b-193">Évaluez avec soin les chances de réussite en tenant compte des compétences et de l’expérience de l’équipe.</span><span class="sxs-lookup"><span data-stu-id="77e2b-193">Carefully evaluate whether the team has the skills and experience to be successful.</span></span>

## <a name="best-practices"></a><span data-ttu-id="77e2b-194">Meilleures pratiques</span><span class="sxs-lookup"><span data-stu-id="77e2b-194">Best practices</span></span>

- <span data-ttu-id="77e2b-195">Modélisez les services autour du domaine de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="77e2b-195">Model services around the business domain.</span></span> 

- <span data-ttu-id="77e2b-196">Décentralisez tout.</span><span class="sxs-lookup"><span data-stu-id="77e2b-196">Decentralize everything.</span></span> <span data-ttu-id="77e2b-197">Les équipes individuelles sont chargées de concevoir et de créer des services.</span><span class="sxs-lookup"><span data-stu-id="77e2b-197">Individual teams are responsible for designing and building services.</span></span> <span data-ttu-id="77e2b-198">Évitez de partager du code ou des schémas de données.</span><span class="sxs-lookup"><span data-stu-id="77e2b-198">Avoid sharing code or data schemas.</span></span> 

- <span data-ttu-id="77e2b-199">Le stockage de données doit être privé par rapport au service qui détient les données.</span><span class="sxs-lookup"><span data-stu-id="77e2b-199">Data storage should be private to the service that owns the data.</span></span> <span data-ttu-id="77e2b-200">Utilisez le stockage le mieux adapté à chaque service et type de données.</span><span class="sxs-lookup"><span data-stu-id="77e2b-200">Use the best storage for each service and data type.</span></span> 

- <span data-ttu-id="77e2b-201">Les services communiquent via des API bien conçues.</span><span class="sxs-lookup"><span data-stu-id="77e2b-201">Services communicate through well-designed APIs.</span></span> <span data-ttu-id="77e2b-202">Évitez de divulguer les détails d’une implémentation.</span><span class="sxs-lookup"><span data-stu-id="77e2b-202">Avoid leaking implementation details.</span></span> <span data-ttu-id="77e2b-203">Les API doivent modéliser le domaine, et non l’implémentation interne du service.</span><span class="sxs-lookup"><span data-stu-id="77e2b-203">APIs should model the domain, not the internal implementation of the service.</span></span>

- <span data-ttu-id="77e2b-204">Évitez le couplage entre les services.</span><span class="sxs-lookup"><span data-stu-id="77e2b-204">Avoid coupling between services.</span></span> <span data-ttu-id="77e2b-205">Le couplage trouve souvent son origine dans les schémas de base de données partagés et les protocoles de communication rigides.</span><span class="sxs-lookup"><span data-stu-id="77e2b-205">Causes of coupling include shared database schemas and rigid communication protocols.</span></span>

- <span data-ttu-id="77e2b-206">Déchargez les problèmes transversaux, tels que l’authentification et la terminaison SSL, sur la passerelle.</span><span class="sxs-lookup"><span data-stu-id="77e2b-206">Offload cross-cutting concerns, such as authentication and SSL termination, to the gateway.</span></span>

- <span data-ttu-id="77e2b-207">Maintenez la connaissance du domaine à l’extérieur de la passerelle.</span><span class="sxs-lookup"><span data-stu-id="77e2b-207">Keep domain knowledge out of the gateway.</span></span> <span data-ttu-id="77e2b-208">La passerelle doit traiter et acheminer les demandes des clients sans connaître les règles d’entreprise ou la logique du domaine.</span><span class="sxs-lookup"><span data-stu-id="77e2b-208">The gateway should handle and route client requests without any knowledge of the business rules or domain logic.</span></span> <span data-ttu-id="77e2b-209">Sinon, la passerelle devient une dépendance et peut provoquer un couplage entre les services.</span><span class="sxs-lookup"><span data-stu-id="77e2b-209">Otherwise, the gateway becomes a dependency and can cause coupling between services.</span></span>

- <span data-ttu-id="77e2b-210">Le couplage entre les services doit être faible et leur cohésion fonctionnelle élevée.</span><span class="sxs-lookup"><span data-stu-id="77e2b-210">Services should have loose coupling and high functional cohesion.</span></span> <span data-ttu-id="77e2b-211">Les fonctions susceptibles de changer en même temps doivent être empaquetées et déployées ensemble.</span><span class="sxs-lookup"><span data-stu-id="77e2b-211">Functions that are likely to change together should be packaged and deployed together.</span></span> <span data-ttu-id="77e2b-212">Si elles résident dans des services distincts, ces services finissent par être fortement couplés, car une modification dans un service nécessite la mise à jour de l’autre service.</span><span class="sxs-lookup"><span data-stu-id="77e2b-212">If they reside in separate services, those services end up being tightly coupled, because a change in one service will require updating the other service.</span></span> <span data-ttu-id="77e2b-213">Une communication proéminente entre deux services peut être le signe d’un couplage étroit et d’une faible cohésion.</span><span class="sxs-lookup"><span data-stu-id="77e2b-213">Overly chatty communication between two services may be a symptom of tight coupling and low cohesion.</span></span> 

- <span data-ttu-id="77e2b-214">Isolez les défaillances.</span><span class="sxs-lookup"><span data-stu-id="77e2b-214">Isolate failures.</span></span> <span data-ttu-id="77e2b-215">Utilisez des stratégies de résilience pour empêcher que les défaillances au sein d’un service se répercutent en cascade.</span><span class="sxs-lookup"><span data-stu-id="77e2b-215">Use resiliency strategies to prevent failures within a service from cascading.</span></span> <span data-ttu-id="77e2b-216">Consultez [Modèles de résilience][resiliency-patterns] et [Conception d’applications résilientes][resiliency-overview].</span><span class="sxs-lookup"><span data-stu-id="77e2b-216">See [Resiliency patterns][resiliency-patterns] and [Designing resilient applications][resiliency-overview].</span></span>

## <a name="microservices-using-azure-container-service"></a><span data-ttu-id="77e2b-217">Microservices et Azure Container Service</span><span class="sxs-lookup"><span data-stu-id="77e2b-217">Microservices using Azure Container Service</span></span> 

<span data-ttu-id="77e2b-218">Vous pouvez utiliser [Azure Container Service](/azure/container-service/) pour configurer et provisionner un cluster Docker.</span><span class="sxs-lookup"><span data-stu-id="77e2b-218">You can use [Azure Container Service](/azure/container-service/) to configure and provision a Docker cluster.</span></span> <span data-ttu-id="77e2b-219">Azure Container Services prend en charge plusieurs conteneurs et orchestrateurs courants, dont Kubernetes, DC/OS et Docker Swarm.</span><span class="sxs-lookup"><span data-stu-id="77e2b-219">Azure Container Services supports several popular container orchestrators, including Kubernetes, DC/OS, and Docker Swarm.</span></span>

![](./images/microservices-acs.png)
 
<span data-ttu-id="77e2b-220">**Nœuds publics** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-220">**Public nodes**.</span></span> <span data-ttu-id="77e2b-221">ces nœuds sont accessibles via un équilibreur de charge public.</span><span class="sxs-lookup"><span data-stu-id="77e2b-221">These nodes are reachable through a public-facing load balancer.</span></span> <span data-ttu-id="77e2b-222">La passerelle d’API est hébergée sur ces nœuds.</span><span class="sxs-lookup"><span data-stu-id="77e2b-222">The API gateway is hosted on these nodes.</span></span>

<span data-ttu-id="77e2b-223">**Nœuds backend** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-223">**Backend nodes**.</span></span> <span data-ttu-id="77e2b-224">ces nœuds exécutent des services auxquels les clients accèdent via la passerelle d’API.</span><span class="sxs-lookup"><span data-stu-id="77e2b-224">These nodes run services that clients reach via the API gateway.</span></span> <span data-ttu-id="77e2b-225">Ces nœuds ne reçoivent pas directement de trafic Internet.</span><span class="sxs-lookup"><span data-stu-id="77e2b-225">These nodes don't receive Internet traffic directly.</span></span> <span data-ttu-id="77e2b-226">Les nœuds backend peuvent englober plusieurs pools de machines virtuelles, chacun avec un profil matériel différent.</span><span class="sxs-lookup"><span data-stu-id="77e2b-226">The backend nodes might include more than one pool of VMs, each with a different hardware profile.</span></span> <span data-ttu-id="77e2b-227">Par exemple, vous pouvez créer des pools distincts pour des charges de travail de calcul générales, des charges de travail processeur élevées et des charges de travail mémoire élevées.</span><span class="sxs-lookup"><span data-stu-id="77e2b-227">For example, you could create separate pools for general compute workloads, high CPU workloads, and high memory workloads.</span></span> 

<span data-ttu-id="77e2b-228">**Machines virtuelles de gestion** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-228">**Management VMs**.</span></span> <span data-ttu-id="77e2b-229">ces machines virtuelles exécutent les nœuds principaux de l’orchestrateur de conteneur.</span><span class="sxs-lookup"><span data-stu-id="77e2b-229">These VMs run the master nodes for the container orchestrator.</span></span> 

<span data-ttu-id="77e2b-230">**Mise en réseau** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-230">**Networking**.</span></span> <span data-ttu-id="77e2b-231">les nœuds publics, les nœuds backend et les machines virtuelles de gestion sont placés dans des sous-réseaux distincts au sein d’un même réseau virtuel (VNet).</span><span class="sxs-lookup"><span data-stu-id="77e2b-231">The public nodes, backend nodes, and management VMs are placed in separate subnets within the same virtual network (VNet).</span></span> 

<span data-ttu-id="77e2b-232">**Équilibreurs de charge** :</span><span class="sxs-lookup"><span data-stu-id="77e2b-232">**Load balancers**.</span></span>  <span data-ttu-id="77e2b-233">un équilibreur de charge externe fait face aux nœuds publics.</span><span class="sxs-lookup"><span data-stu-id="77e2b-233">An externally facing load balancer sits in front of the public nodes.</span></span> <span data-ttu-id="77e2b-234">Il distribue les demandes Internet aux nœuds publics.</span><span class="sxs-lookup"><span data-stu-id="77e2b-234">It distributes internet requests to the public nodes.</span></span> <span data-ttu-id="77e2b-235">Un autre équilibreur de charge est placé devant les machines virtuelles de gestion pour autoriser le trafic Secure Shell (SSH) vers les machines virtuelles de gestion, en utilisant des règles NAT.</span><span class="sxs-lookup"><span data-stu-id="77e2b-235">Another load balancer is placed in front of the management VMs, to allow secure shell (ssh) traffic to the management VMs, using NAT rules.</span></span>

<span data-ttu-id="77e2b-236">Pour des besoins de fiabilité et de scalabilité, chaque service est répliqué sur plusieurs machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="77e2b-236">For reliability and scalability, each service is replicated across multiple VMs.</span></span> <span data-ttu-id="77e2b-237">Mais comme les services sont aussi relativement légers (par rapport à une application monolithique), ils sont généralement plusieurs à être empaquetés dans une même machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="77e2b-237">However, because services are also relatively lightweight (compared with a monolithic application), multiple services are usually packed into a single VM.</span></span> <span data-ttu-id="77e2b-238">Cette plus forte densité autorise une meilleure utilisation des ressources.</span><span class="sxs-lookup"><span data-stu-id="77e2b-238">Higher density allows better resource utilization.</span></span> <span data-ttu-id="77e2b-239">Si un service déterminé n’utilise pas beaucoup de ressources, vous n’avez pas besoin de dédier une machine virtuelle entière à l’exécution de ce service.</span><span class="sxs-lookup"><span data-stu-id="77e2b-239">If a particular service doesn't use a lot of resources, you don't need to dedicate an entire VM to running that service.</span></span>

<span data-ttu-id="77e2b-240">Le diagramme suivant illustre trois nœuds exécutant quatre services différents (indiqués par différentes formes).</span><span class="sxs-lookup"><span data-stu-id="77e2b-240">The following diagram shows three nodes running four different services (indicated by different shapes).</span></span> <span data-ttu-id="77e2b-241">Notez que chaque service compte au moins deux instances.</span><span class="sxs-lookup"><span data-stu-id="77e2b-241">Notice that each service has at least two instances.</span></span> 
 
![](./images/microservices-node-density.png)

## <a name="microservices-using-azure-service-fabric"></a><span data-ttu-id="77e2b-242">Microservices et Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="77e2b-242">Microservices using Azure Service Fabric</span></span>

<span data-ttu-id="77e2b-243">Le schéma suivant illustre une architecture de microservices utilisant [Azure Service Fabric](/azure/service-fabric/).</span><span class="sxs-lookup"><span data-stu-id="77e2b-243">The following diagram shows a microservices architecture using [Azure Service Fabric](/azure/service-fabric/).</span></span>

![](./images/service-fabric.png)

<span data-ttu-id="77e2b-244">Le cluster Service Fabric est déployé sur un ou plusieurs groupes de machines virtuelles identiques.</span><span class="sxs-lookup"><span data-stu-id="77e2b-244">The Service Fabric cluster is deployed to one or more VM scale sets.</span></span> <span data-ttu-id="77e2b-245">Le cluster peut être constitué de plusieurs groupes de machines virtuelles identiques pour profiter d’une combinaison de types de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="77e2b-245">You might have more than one VM scale set in the cluster, in order to have a mix of VM types.</span></span> <span data-ttu-id="77e2b-246">Une passerelle d’API est placée devant le cluster Service Fabric, avec un équilibreur de charge externe pour réceptionner les demandes des clients.</span><span class="sxs-lookup"><span data-stu-id="77e2b-246">An API Gateway is placed in front of the Service Fabric cluster, with an external load balancer to receive client requests.</span></span>

<span data-ttu-id="77e2b-247">Le runtime Service Fabric assure la gestion du cluster, notamment le placement des services, le basculement des nœuds et le contrôle d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="77e2b-247">The Service Fabric runtime performs cluster management, including service placement, node failover, and health monitoring.</span></span> <span data-ttu-id="77e2b-248">Le runtime est déployé sur les nœuds du cluster proprement dits.</span><span class="sxs-lookup"><span data-stu-id="77e2b-248">The runtime is deployed on the cluster nodes themselves.</span></span> <span data-ttu-id="77e2b-249">Il n’existe pas d’ensemble distinct de machines virtuelles de gestion de cluster.</span><span class="sxs-lookup"><span data-stu-id="77e2b-249">There isn't a separate set of cluster management VMs.</span></span>

<span data-ttu-id="77e2b-250">Les services communiquent entre eux via le proxy inverse intégré à Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="77e2b-250">Services communicate with each other using the reverse proxy that is built into Service Fabric.</span></span> <span data-ttu-id="77e2b-251">Service Fabric propose un service de découverte qui peut résoudre le point de terminaison pour un service nommé.</span><span class="sxs-lookup"><span data-stu-id="77e2b-251">Service Fabric provides a discovery service that can resolve the endpoint for a named service.</span></span>


<!-- links -->

[resiliency-overview]: ../../resiliency/index.md
[resiliency-patterns]: ../../patterns/category/resiliency.md



