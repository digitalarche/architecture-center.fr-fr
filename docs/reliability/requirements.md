---
title: Définition des exigences pour les applications Azure résilientes
description: Vue d’ensemble de la collecte des exigences de disponibilité et la résilience pour les applications Azure
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: 2af2ce4200c285abfda1395862d21efc3c17e577
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646548"
---
# <a name="developing-requirements-for-resilient-azure-applications"></a><span data-ttu-id="186e4-103">Développement de spécifications pour les applications Azure résilientes</span><span class="sxs-lookup"><span data-stu-id="186e4-103">Developing requirements for resilient Azure applications</span></span>

<span data-ttu-id="186e4-104">Création *résilience* (récupération après des échecs) et *disponibilité* (en cours d’exécution dans un état sain, sans temps d’arrêt significatif) dans vos applications commence par collecter les impératifs.</span><span class="sxs-lookup"><span data-stu-id="186e4-104">Building *resiliency* (recovering from failures) and *availability* (running in a healthy state without significant downtime) into your apps begins with gathering requirements.</span></span> <span data-ttu-id="186e4-105">Par exemple, le temps d’inactivité est acceptable ?</span><span class="sxs-lookup"><span data-stu-id="186e4-105">For example, how much downtime is acceptable?</span></span> <span data-ttu-id="186e4-106">Combien les interruptions potentielles coûte votre entreprise ?</span><span class="sxs-lookup"><span data-stu-id="186e4-106">How much does potential downtime cost your business?</span></span> <span data-ttu-id="186e4-107">Quelles sont les exigences de disponibilité de votre client ?</span><span class="sxs-lookup"><span data-stu-id="186e4-107">What are your customer's availability requirements?</span></span> <span data-ttu-id="186e4-108">Combien investir dans rendez votre application hautement disponible ?</span><span class="sxs-lookup"><span data-stu-id="186e4-108">How much do you invest in making your application highly available?</span></span> <span data-ttu-id="186e4-109">Quel est le risque et le coût ?</span><span class="sxs-lookup"><span data-stu-id="186e4-109">What is the risk versus the cost?</span></span>

## <a name="identify-distinct-workloads"></a><span data-ttu-id="186e4-110">Identifier les charges de travail distinctes</span><span class="sxs-lookup"><span data-stu-id="186e4-110">Identify distinct workloads</span></span>

<span data-ttu-id="186e4-111">Solutions de cloud sont généralement consistent de plusieurs applications *charges de travail*.</span><span class="sxs-lookup"><span data-stu-id="186e4-111">Cloud solutions typically consist of multiple application *workloads*.</span></span> <span data-ttu-id="186e4-112">Une charge de travail est une fonctionnalité distincte ou une tâche qui est logiquement séparé des autres tâches en termes de besoins de stockage logique et les données.</span><span class="sxs-lookup"><span data-stu-id="186e4-112">A workload is a distinct capability or task that is logically separated from other tasks in terms of business logic and data storage requirements.</span></span> <span data-ttu-id="186e4-113">Par exemple, une application de commerce électronique peut avoir des charges de travail suivantes :</span><span class="sxs-lookup"><span data-stu-id="186e4-113">For example, an e-commerce app might have the following workloads:</span></span>

- <span data-ttu-id="186e4-114">Parcourir et rechercher un catalogue de produits.</span><span class="sxs-lookup"><span data-stu-id="186e4-114">Browse and search a product catalog.</span></span>
- <span data-ttu-id="186e4-115">Créer et suivre des commandes.</span><span class="sxs-lookup"><span data-stu-id="186e4-115">Create and track orders.</span></span>
- <span data-ttu-id="186e4-116">Afficher les recommandations.</span><span class="sxs-lookup"><span data-stu-id="186e4-116">View recommendations.</span></span>

<span data-ttu-id="186e4-117">Chaque charge de travail a des exigences différentes pour la disponibilité, évolutivité, la cohérence des données et récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="186e4-117">Each workload has different requirements for availability, scalability, data consistency, and disaster recovery.</span></span> <span data-ttu-id="186e4-118">Votre prendre des décisions en équilibrant les coûts par rapport à des risques pour chaque charge de travail.</span><span class="sxs-lookup"><span data-stu-id="186e4-118">Make your business decisions by balancing cost versus risk for each workload.</span></span>

<span data-ttu-id="186e4-119">Également décomposez les charges de travail par objectif de niveau de service.</span><span class="sxs-lookup"><span data-stu-id="186e4-119">Also decompose workloads by service-level objective.</span></span> <span data-ttu-id="186e4-120">Si un service est composé de charges de travail critiques et moins critiques, gérez-les de manière distincte et spécifiez les fonctionnalités du service et le nombre d’instances nécessaires pour répondre à leurs besoins de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="186e4-120">If a service is composed of critical and less-critical workloads, manage them differently and specify the service features and number of instances needed to meet their availability requirements.</span></span>

## <a name="plan-for-usage-patterns"></a><span data-ttu-id="186e4-121">Plan pour les modèles d’utilisation</span><span class="sxs-lookup"><span data-stu-id="186e4-121">Plan for usage patterns</span></span>

<span data-ttu-id="186e4-122">Identifier les différences dans les exigences pendant les périodes critiques et non critiques.</span><span class="sxs-lookup"><span data-stu-id="186e4-122">Identify differences in requirements during critical and non-critical periods.</span></span> <span data-ttu-id="186e4-123">Y a-t-il certaines périodes critiques durant lesquelles le système doit être disponible ?</span><span class="sxs-lookup"><span data-stu-id="186e4-123">Are there certain critical periods when the system must be available?</span></span> <span data-ttu-id="186e4-124">Par exemple, une application de la déclaration d’impôts ne peut pas échouer pendant une date limite de dépôt et une service de diffusion en continu de vidéo ne doit pas rester pendant un événement en direct.</span><span class="sxs-lookup"><span data-stu-id="186e4-124">For example, a tax-filing application can't fail during a filing deadline and a video streaming service shouldn't lag during a live event.</span></span> <span data-ttu-id="186e4-125">Dans ces situations, évaluez le coût par rapport au risque.</span><span class="sxs-lookup"><span data-stu-id="186e4-125">In these situations, weigh the cost against the risk.</span></span>

- <span data-ttu-id="186e4-126">Pour garantir des temps d’activité et répondre aux contrats de niveau de service (SLA) dans des périodes critiques, planifier une redondance entre plusieurs régions en cas d’un échec, même si elle est plus onéreux.</span><span class="sxs-lookup"><span data-stu-id="186e4-126">To ensure uptime and meet service-level agreements (SLAs) in critical periods, plan redundancy across several regions in case one fails, even if it costs more.</span></span>
- <span data-ttu-id="186e4-127">À l’inverse, au cours des périodes non critiques, exécutez votre application dans une seule région pour réduire les coûts.</span><span class="sxs-lookup"><span data-stu-id="186e4-127">Conversely, during non-critical periods, run your application in a single region to minimize costs.</span></span>
- <span data-ttu-id="186e4-128">Dans certains cas, vous pouvez réduire les dépenses supplémentaires à l’aide des techniques sans serveur modernes qui ont de facturation basé sur la consommation.</span><span class="sxs-lookup"><span data-stu-id="186e4-128">In some cases, you can mitigate additional expenses by using modern serverless techniques that have consumption-based billing.</span></span>

## <a name="establish-availability-and-recovery-metrics"></a><span data-ttu-id="186e4-129">Établir des mesures de disponibilité et récupération</span><span class="sxs-lookup"><span data-stu-id="186e4-129">Establish availability and recovery metrics</span></span>

<span data-ttu-id="186e4-130">Créer des numéros de ligne de base pour les deux ensembles de mesures dans le cadre du processus de configuration requise.</span><span class="sxs-lookup"><span data-stu-id="186e4-130">Create baseline numbers for two sets of metrics as part of the requirements process.</span></span> <span data-ttu-id="186e4-131">Le premier jeu vous permet de déterminer où ajouter la redondance des services cloud et les contrats SLA pour fournir aux clients.</span><span class="sxs-lookup"><span data-stu-id="186e4-131">The first set helps you determine where to add redundancy to cloud services and which SLAs to provide to customers.</span></span> <span data-ttu-id="186e4-132">Le deuxième ensemble de vous aider à que planifier votre récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="186e4-132">The second set helps you plan your disaster recovery.</span></span>

### <a name="availability-metrics"></a><span data-ttu-id="186e4-133">Métriques de disponibilité</span><span class="sxs-lookup"><span data-stu-id="186e4-133">Availability metrics</span></span>

<span data-ttu-id="186e4-134">Utiliser ces mesures pour planifier la redondance et de déterminer les contrats SLA du client.</span><span class="sxs-lookup"><span data-stu-id="186e4-134">Use these measures to plan for redundancy and determine customer SLAs.</span></span>

- <span data-ttu-id="186e4-135">**Temps moyen de récupération (MTTR)** est la durée moyenne nécessaire à la restauration d’un composant après une défaillance.</span><span class="sxs-lookup"><span data-stu-id="186e4-135">**Mean time to recover (MTTR)** is the average time it takes to restore a component after a failure.</span></span>
- <span data-ttu-id="186e4-136">**Temps moyen entre défaillances (MTBF)** est la durée pendant laquelle un composant peut raisonnablement s’attendre à dernière entre pannes.</span><span class="sxs-lookup"><span data-stu-id="186e4-136">**Mean time between failures (MTBF)** is the how long a component can reasonably expect to last between outages.</span></span>

### <a name="recovery-metrics"></a><span data-ttu-id="186e4-137">Mesures de récupération</span><span class="sxs-lookup"><span data-stu-id="186e4-137">Recovery metrics</span></span>

<span data-ttu-id="186e4-138">Dériver de ces valeurs en effectuant une évaluation des risques et assurez-vous que vous comprenez les coûts et les risques de temps d’arrêt et pertes de données.</span><span class="sxs-lookup"><span data-stu-id="186e4-138">Derive these values by conducting a risk assessment, and make sure you understand the cost and risk of downtime and data loss.</span></span> <span data-ttu-id="186e4-139">Ces exigences non fonctionnelles d’un système et doivent être définis par les besoins de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="186e4-139">These are nonfunctional requirements of a system and should be dictated by business requirements.</span></span>

- <span data-ttu-id="186e4-140">**L’objectif de temps de récupération (RTO)** est la durée maximale acceptable pendant une application n’est pas disponible après un incident.</span><span class="sxs-lookup"><span data-stu-id="186e4-140">**Recovery time objective (RTO)** is the maximum acceptable time an application is unavailable after an incident.</span></span>
- <span data-ttu-id="186e4-141">**L’objectif de point de récupération (RPO)** est la durée maximale de perte de données qui est acceptable pendant une panne.</span><span class="sxs-lookup"><span data-stu-id="186e4-141">**Recovery point objective (RPO)** is the maximum duration of data loss that's acceptable during a disaster.</span></span>

<span data-ttu-id="186e4-142">Si la valeur MTTR de *n’importe quel* composant critique dans une configuration à haute disponibilité dépasse le RTO de système, une défaillance dans le système peut entraîner une interruption inacceptable des opérations.</span><span class="sxs-lookup"><span data-stu-id="186e4-142">If the MTTR value of *any* critical component in a highly available setup exceeds the system RTO, a failure in the system might cause an unacceptable business disruption.</span></span> <span data-ttu-id="186e4-143">Autrement dit, vous ne pouvez pas restaurer le système au sein de l’objectif RTO défini.</span><span class="sxs-lookup"><span data-stu-id="186e4-143">That is, you can't restore the system within the defined RTO.</span></span>

## <a name="determine-workload-availability-targets"></a><span data-ttu-id="186e4-144">Déterminer les objectifs de disponibilité de la charge de travail</span><span class="sxs-lookup"><span data-stu-id="186e4-144">Determine workload availability targets</span></span>

<span data-ttu-id="186e4-145">Définir vos propres contrats SLA cibles pour chaque charge de travail dans votre solution pour vous pouvez de déterminer si l’architecture répond aux exigences de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="186e4-145">Define your own target SLAs for each workload in your solution so you can determine whether the architecture meets the business requirements.</span></span>

### <a name="consider-cost-and-complexity"></a><span data-ttu-id="186e4-146">Prendre en compte les coûts et la complexité</span><span class="sxs-lookup"><span data-stu-id="186e4-146">Consider cost and complexity</span></span>

<span data-ttu-id="186e4-147">Tout le reste étant égal, une disponibilité plus élevée est préférable.</span><span class="sxs-lookup"><span data-stu-id="186e4-147">Everything else being equal, higher availability is better.</span></span> <span data-ttu-id="186e4-148">Mais si vous cherchez plus de neuf, le coût et la complexité de croître.</span><span class="sxs-lookup"><span data-stu-id="186e4-148">But as you strive for more nines, the cost and complexity grow.</span></span> <span data-ttu-id="186e4-149">Une disponibilité de 99,99 % se traduit par environ cinq minutes de temps d’arrêt total par mois.</span><span class="sxs-lookup"><span data-stu-id="186e4-149">An uptime of 99.99% translates to about five minutes of total downtime per month.</span></span> <span data-ttu-id="186e4-150">Il est intéressant de la complexité supplémentaire et de coût pour atteindre cinq neuf ?</span><span class="sxs-lookup"><span data-stu-id="186e4-150">Is it worth the additional complexity and cost to reach five nines?</span></span> <span data-ttu-id="186e4-151">La réponse dépend des exigences de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="186e4-151">The answer depends on the business requirements.</span></span>

<span data-ttu-id="186e4-152">Voici quelques autres considérations à prendre en compte lors de la définition d’un contrat SLA :</span><span class="sxs-lookup"><span data-stu-id="186e4-152">Here are some other considerations when defining an SLA:</span></span>

- <span data-ttu-id="186e4-153">Pour atteindre quatre neuf (99,99 %), vous ne pouvez pas compter sur une intervention manuelle pour récupérer après des défaillances.</span><span class="sxs-lookup"><span data-stu-id="186e4-153">To achieve four nines (99.99%), you can't rely on manual intervention to recover from failures.</span></span> <span data-ttu-id="186e4-154">L’application doit pouvoir effectuer des diagnostics et se réparer elle-même.</span><span class="sxs-lookup"><span data-stu-id="186e4-154">The application must be self-diagnosing and self-healing.</span></span>
- <span data-ttu-id="186e4-155">Au-delà de quatre neuf, il est difficile de détecter les pannes assez rapidement pour respecter le contrat SLA.</span><span class="sxs-lookup"><span data-stu-id="186e4-155">Beyond four nines, it's challenging to detect outages quickly enough to meet the SLA.</span></span>
- <span data-ttu-id="186e4-156">Pensez à la fenêtre de temps contre laquelle est mesuré votre contrat SLA.</span><span class="sxs-lookup"><span data-stu-id="186e4-156">Think about the time window that your SLA is measured against.</span></span> <span data-ttu-id="186e4-157">Plus la fenêtre est petite, plus les tolérances seront strictes.</span><span class="sxs-lookup"><span data-stu-id="186e4-157">The smaller the window, the tighter the tolerances.</span></span> <span data-ttu-id="186e4-158">Il est inutile de définir votre contrat SLA en termes de disponibilité de toutes les heures ou tous les jour.</span><span class="sxs-lookup"><span data-stu-id="186e4-158">It doesn't make sense to define your SLA in terms of hourly or daily uptime.</span></span>
- <span data-ttu-id="186e4-159">Utilisez les mesures MTBF et MTTR.</span><span class="sxs-lookup"><span data-stu-id="186e4-159">Consider the MTBF and MTTR measurements.</span></span> <span data-ttu-id="186e4-160">Plus votre contrat SLA, moins fréquemment le service peut aller vers le bas et le plus rapidement le service doit récupérer.</span><span class="sxs-lookup"><span data-stu-id="186e4-160">The higher your SLA, the less frequently the service can go down and the quicker the service must recover.</span></span>
- <span data-ttu-id="186e4-161">Obtenez l’accord de vos clients pour les objectifs de disponibilité de chaque élément de votre application et il de document.</span><span class="sxs-lookup"><span data-stu-id="186e4-161">Get agreement from your customers for the availability targets of each piece of your application, and document it.</span></span> <span data-ttu-id="186e4-162">Sinon, votre conception ne répond pas aux attentes des clients.</span><span class="sxs-lookup"><span data-stu-id="186e4-162">Otherwise, your design may not meet the customers' expectations.</span></span>

### <a name="identify-dependencies"></a><span data-ttu-id="186e4-163">Identifier les dépendances</span><span class="sxs-lookup"><span data-stu-id="186e4-163">Identify dependencies</span></span>

<span data-ttu-id="186e4-164">Effectuer des exercices de mappage de dépendances pour identifier les dépendances internes et externes.</span><span class="sxs-lookup"><span data-stu-id="186e4-164">Perform dependency-mapping exercises to identify internal and external dependencies.</span></span> <span data-ttu-id="186e4-165">Exemples incluent des dépendances relatives à la sécurité ou d’identité, telles que Active Directory, ou des services tiers tel qu’un fournisseur de paiement ou par courrier électronique de service de messagerie.</span><span class="sxs-lookup"><span data-stu-id="186e4-165">Examples include dependencies relating to security or identity, such as Active Directory, or third-party services such as a payment provider or e-mail messaging service.</span></span>

<span data-ttu-id="186e4-166">Une attention particulière aux dépendances externes qui peuvent être un point de défaillance unique ou provoquer des goulots d’étranglement.</span><span class="sxs-lookup"><span data-stu-id="186e4-166">Pay particular attention to external dependencies that might be a single point of failure or cause bottlenecks.</span></span> <span data-ttu-id="186e4-167">Si une charge de travail nécessite de 99,99 %, mais dépend d’un service avec un contrat SLA de 99,9 %, ce service ne peut pas être un point de défaillance unique dans le système.</span><span class="sxs-lookup"><span data-stu-id="186e4-167">If a workload requires 99.99% uptime but depends on a service with a 99.9% SLA, that service can't be a single point of failure in the system.</span></span> <span data-ttu-id="186e4-168">Une solution consiste à avoir un chemin d’accès de secours en cas d’échec du service.</span><span class="sxs-lookup"><span data-stu-id="186e4-168">One remedy is to have a fallback path in case the service fails.</span></span> <span data-ttu-id="186e4-169">Vous pouvez également prendre d’autres mesures pour récupérer à partir d’un échec dans ce service.</span><span class="sxs-lookup"><span data-stu-id="186e4-169">Alternatively, take other measures to recover from a failure in that service.</span></span>

<span data-ttu-id="186e4-170">Le tableau suivant présente les temps d’arrêt cumulatifs potentiels pour différents niveaux de contrat SLA.</span><span class="sxs-lookup"><span data-stu-id="186e4-170">The following table shows the potential cumulative downtime for various SLA levels.</span></span>

| <span data-ttu-id="186e4-171">**CONTRAT SLA**</span><span class="sxs-lookup"><span data-stu-id="186e4-171">**SLA**</span></span> | <span data-ttu-id="186e4-172">**Temps d’arrêt par semaine**</span><span class="sxs-lookup"><span data-stu-id="186e4-172">**Downtime per week**</span></span> | <span data-ttu-id="186e4-173">**Temps d’arrêt par mois**</span><span class="sxs-lookup"><span data-stu-id="186e4-173">**Downtime per month**</span></span> | <span data-ttu-id="186e4-174">**Temps d’arrêt par an**</span><span class="sxs-lookup"><span data-stu-id="186e4-174">**Downtime per year**</span></span> |
|---------|-----------------------|------------------------|-----------------------|
| <span data-ttu-id="186e4-175">99 %</span><span class="sxs-lookup"><span data-stu-id="186e4-175">99%</span></span>     | <span data-ttu-id="186e4-176">1,68 heure</span><span class="sxs-lookup"><span data-stu-id="186e4-176">1.68 hours</span></span>            | <span data-ttu-id="186e4-177">7,2 heures</span><span class="sxs-lookup"><span data-stu-id="186e4-177">7.2 hours</span></span>              | <span data-ttu-id="186e4-178">3,65 jours</span><span class="sxs-lookup"><span data-stu-id="186e4-178">3.65 days</span></span>             |
| <span data-ttu-id="186e4-179">99,9 %</span><span class="sxs-lookup"><span data-stu-id="186e4-179">99.9%</span></span>   | <span data-ttu-id="186e4-180">10,1 minutes</span><span class="sxs-lookup"><span data-stu-id="186e4-180">10.1 minutes</span></span>          | <span data-ttu-id="186e4-181">43,2 minutes</span><span class="sxs-lookup"><span data-stu-id="186e4-181">43.2 minutes</span></span>           | <span data-ttu-id="186e4-182">8,76 heures</span><span class="sxs-lookup"><span data-stu-id="186e4-182">8.76 hours</span></span>            |
| <span data-ttu-id="186e4-183">99,95 %</span><span class="sxs-lookup"><span data-stu-id="186e4-183">99.95%</span></span>  | <span data-ttu-id="186e4-184">5 minutes</span><span class="sxs-lookup"><span data-stu-id="186e4-184">5 minutes</span></span>             | <span data-ttu-id="186e4-185">21,6 minutes</span><span class="sxs-lookup"><span data-stu-id="186e4-185">21.6 minutes</span></span>           | <span data-ttu-id="186e4-186">4,38 heures</span><span class="sxs-lookup"><span data-stu-id="186e4-186">4.38 hours</span></span>            |
| <span data-ttu-id="186e4-187">99,99 %</span><span class="sxs-lookup"><span data-stu-id="186e4-187">99.99%</span></span>  | <span data-ttu-id="186e4-188">1,01 minute</span><span class="sxs-lookup"><span data-stu-id="186e4-188">1.01 minutes</span></span>          | <span data-ttu-id="186e4-189">4,32 minutes</span><span class="sxs-lookup"><span data-stu-id="186e4-189">4.32 minutes</span></span>           | <span data-ttu-id="186e4-190">52,56 minutes</span><span class="sxs-lookup"><span data-stu-id="186e4-190">52.56 minutes</span></span>         |
| <span data-ttu-id="186e4-191">99, 999 %</span><span class="sxs-lookup"><span data-stu-id="186e4-191">99.999%</span></span> | <span data-ttu-id="186e4-192">6 secondes</span><span class="sxs-lookup"><span data-stu-id="186e4-192">6 seconds</span></span>             | <span data-ttu-id="186e4-193">25,9 secondes</span><span class="sxs-lookup"><span data-stu-id="186e4-193">25.9 seconds</span></span>           | <span data-ttu-id="186e4-194">5,26 minutes</span><span class="sxs-lookup"><span data-stu-id="186e4-194">5.26 minutes</span></span>          |

## <a name="understand-service-level-agreements"></a><span data-ttu-id="186e4-195">Comprendre les contrats de niveau de service</span><span class="sxs-lookup"><span data-stu-id="186e4-195">Understand service-level agreements</span></span>

<span data-ttu-id="186e4-196">Dans Azure, le [contrat de niveau de Service](https://azure.microsoft.com/en-us/support/legal/sla/) décrivent les engagements de Microsoft de fonctionnement et de connectivité.</span><span class="sxs-lookup"><span data-stu-id="186e4-196">In Azure, the [Service Level Agreement](https://azure.microsoft.com/en-us/support/legal/sla/) describes Microsoft's commitments for uptime and connectivity.</span></span> <span data-ttu-id="186e4-197">Si le contrat SLA pour un service particulier est de 99,9 %, vous devriez le service doit être disponible 99,9 % du temps.</span><span class="sxs-lookup"><span data-stu-id="186e4-197">If the SLA for a particular service is 99.9%, you should expect the service to be available 99.9% of the time.</span></span> <span data-ttu-id="186e4-198">Différents services ont différents contrats SLA.</span><span class="sxs-lookup"><span data-stu-id="186e4-198">Different services have different SLAs.</span></span>

<span data-ttu-id="186e4-199">Le contrat SLA Azure inclut également des dispositions permettant d’obtenir un crédit de service si le contrat SLA n’est pas rempli, ainsi que les définitions spécifiques de *disponibilité* pour chaque service.</span><span class="sxs-lookup"><span data-stu-id="186e4-199">The Azure SLA also includes provisions for obtaining a service credit if the SLA is not met, along with specific definitions of *availability* for each service.</span></span> <span data-ttu-id="186e4-200">Cet aspect du contrat SLA agit comme une stratégie d’application.</span><span class="sxs-lookup"><span data-stu-id="186e4-200">That aspect of the SLA acts as an enforcement policy.</span></span>

### <a name="composite-slas"></a><span data-ttu-id="186e4-201">Contrats SLA composites</span><span class="sxs-lookup"><span data-stu-id="186e4-201">Composite SLAs</span></span>

<span data-ttu-id="186e4-202">*Contrats SLA composites* impliquer plusieurs services prenant en charge une application, chacune avec différents niveaux de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="186e4-202">*Composite SLAs* involve multiple services supporting an application, each with differing levels of availability.</span></span> <span data-ttu-id="186e4-203">Par exemple, considérez une application web app Service qui écrit dans la base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="186e4-203">For example, consider an App Service web app that writes to Azure SQL Database.</span></span> <span data-ttu-id="186e4-204">Au moment de la rédaction, ces services Azure possèdent les contrats SLA suivants :</span><span class="sxs-lookup"><span data-stu-id="186e4-204">At the time of this writing, these Azure services have the following SLAs:</span></span>

- <span data-ttu-id="186e4-205">Applications web App Service = 99,95 %</span><span class="sxs-lookup"><span data-stu-id="186e4-205">App Service web apps = 99.95%</span></span>
- <span data-ttu-id="186e4-206">SQL Database = 99,99%</span><span class="sxs-lookup"><span data-stu-id="186e4-206">SQL Database = 99.99%</span></span>

<span data-ttu-id="186e4-207">Quel est le temps d’arrêt maximal attendu pour cette application ?</span><span class="sxs-lookup"><span data-stu-id="186e4-207">What is the maximum downtime you would expect for this application?</span></span> <span data-ttu-id="186e4-208">En cas d’échec d’un service, l’application entière échoue.</span><span class="sxs-lookup"><span data-stu-id="186e4-208">If either service fails, the whole application fails.</span></span> <span data-ttu-id="186e4-209">La probabilité de chaque échec du service est indépendante, et donc le contrat SLA composite pour cette application est de 99,95 % × 99,99 % = 99,94 %.</span><span class="sxs-lookup"><span data-stu-id="186e4-209">The probability of each service failing is independent, so the composite SLA for this application is 99.95% × 99.99% = 99.94%.</span></span> <span data-ttu-id="186e4-210">Qui est inférieur aux contrats SLA individuels, ce qui n’est pas surprenant, car une application qui s’appuie sur plusieurs services possède plusieurs points de défaillance potentiels.</span><span class="sxs-lookup"><span data-stu-id="186e4-210">That's lower than the individual SLAs, which isn't surprising because an application that relies on multiple services has more potential failure points.</span></span>

<span data-ttu-id="186e4-211">Vous pouvez améliorer le contrat SLA composite en créant des chemins de secours indépendants.</span><span class="sxs-lookup"><span data-stu-id="186e4-211">You can improve the composite SLA by creating independent fallback paths.</span></span> <span data-ttu-id="186e4-212">Par exemple, si la base de données SQL n’est pas disponible, placez des transactions dans une file d’attente pour un traitement ultérieur.</span><span class="sxs-lookup"><span data-stu-id="186e4-212">For example, if SQL Database is unavailable, put transactions into a queue to be processed later.</span></span>

![Contrat SLA composite](_images/composite-sla.png)

<span data-ttu-id="186e4-214">Grâce à cette conception, l’application est toujours disponible, même si elle ne peut pas se connecter à la base de données.</span><span class="sxs-lookup"><span data-stu-id="186e4-214">With this design, the application is still available even if it can't connect to the database.</span></span> <span data-ttu-id="186e4-215">Toutefois, cela échoue si la base de données et la file d’attente échouent en même temps.</span><span class="sxs-lookup"><span data-stu-id="186e4-215">However, it fails if the database and the queue both fail at the same time.</span></span> <span data-ttu-id="186e4-216">Le pourcentage de temps pour une défaillance simultanée attendu est 0,0001 × 0,001, donc le contrat SLA composite pour ce chemin d’accès combiné est :</span><span class="sxs-lookup"><span data-stu-id="186e4-216">The expected percentage of time for a simultaneous failure is 0.0001 × 0.001, so the composite SLA for this combined path is:</span></span>

- <span data-ttu-id="186e4-217">Base de données *ou* file d’attente = 1,0 − (0,0001 × 0,001) = 99,99999 %</span><span class="sxs-lookup"><span data-stu-id="186e4-217">Database *or* queue = 1.0 − (0.0001 × 0.001) = 99.99999%</span></span>

<span data-ttu-id="186e4-218">Le contrat SLA composite total est de :</span><span class="sxs-lookup"><span data-stu-id="186e4-218">The total composite SLA is:</span></span>

- <span data-ttu-id="186e4-219">Application Web *et* (base de données *ou* file d’attente) = 99,95 % × 99,99999 % = \~99,95 %</span><span class="sxs-lookup"><span data-stu-id="186e4-219">Web app *and* (database *or* queue) = 99.95% × 99.99999% = \~99.95%</span></span>

<span data-ttu-id="186e4-220">Il existe des compromis à cette approche.</span><span class="sxs-lookup"><span data-stu-id="186e4-220">There are tradeoffs to this approach.</span></span> <span data-ttu-id="186e4-221">La logique d’application est plus complexe, vous payez pour la file d’attente et vous devez tenir compte des problèmes de cohérence des données.</span><span class="sxs-lookup"><span data-stu-id="186e4-221">The application logic is more complex, you are paying for the queue, and you need to consider data consistency issues.</span></span>

### <a name="slas-for-multiregion-deployments"></a><span data-ttu-id="186e4-222">Contrats SLA pour les déploiements multirégion</span><span class="sxs-lookup"><span data-stu-id="186e4-222">SLAs for multiregion deployments</span></span>

<span data-ttu-id="186e4-223">*Contrats SLA pour les déploiements multirégion* impliquent une technique de haute disponibilité pour déployer l’application dans plusieurs régions et utilisez Azure Traffic Manager pour basculer en cas d’échec de l’application dans une région.</span><span class="sxs-lookup"><span data-stu-id="186e4-223">*SLAs for multiregion deployments* involve a high-availability technique to deploy the application in more than one region and use Azure Traffic Manager to fail over if the application fails in one region.</span></span>

<span data-ttu-id="186e4-224">Le contrat SLA composite pour un déploiement multirégion est calculé comme suit :</span><span class="sxs-lookup"><span data-stu-id="186e4-224">The composite SLA for a multiregion deployment is calculated as follows:</span></span>

- <span data-ttu-id="186e4-225">*N* est le contrat SLA composite pour l’application déployée dans une région.</span><span class="sxs-lookup"><span data-stu-id="186e4-225">*N* is the composite SLA for the application deployed in one region.</span></span>
- <span data-ttu-id="186e4-226">*R* est le nombre de régions où l’application est déployée.</span><span class="sxs-lookup"><span data-stu-id="186e4-226">*R* is the number of regions where the application is deployed.</span></span>

<span data-ttu-id="186e4-227">Les risques que l’application échoue dans toutes les régions en même temps soient ((1 − N) \^ R).</span><span class="sxs-lookup"><span data-stu-id="186e4-227">The expected chance that the application fails in all regions at the same time is ((1 − N) \^ R).</span></span> <span data-ttu-id="186e4-228">Par exemple, si le contrat SLA de région unique est de 99,95 % :</span><span class="sxs-lookup"><span data-stu-id="186e4-228">For example, if the single-region SLA is 99.95%:</span></span>

- <span data-ttu-id="186e4-229">Le contrat SLA combiné pour les deux régions = (1 − (1 − 0.9995) \^ 2) = 99.999975 %</span><span class="sxs-lookup"><span data-stu-id="186e4-229">The combined SLA for two regions = (1 − (1 − 0.9995) \^ 2) = 99.999975%</span></span>
- <span data-ttu-id="186e4-230">Le contrat SLA combiné pour les quatre régions = (1 − (1 − 0.9995) \^ 4) = 99.999999 %</span><span class="sxs-lookup"><span data-stu-id="186e4-230">The combined SLA for four regions =  (1 − (1 − 0.9995) \^ 4)  = 99.999999%</span></span>

<span data-ttu-id="186e4-231">Le [contrat SLA pour Traffic Manager](https://azure.microsoft.com/en-us/support/legal/sla/traffic-manager/v1_0/) est également un facteur.</span><span class="sxs-lookup"><span data-stu-id="186e4-231">The [SLA for Traffic Manager](https://azure.microsoft.com/en-us/support/legal/sla/traffic-manager/v1_0/) is also a factor.</span></span> <span data-ttu-id="186e4-232">Le basculement n’est pas instantané dans les configurations actif / passif, ce qui peuvent entraîner un temps d’arrêt lors d’un basculement.</span><span class="sxs-lookup"><span data-stu-id="186e4-232">Failing over is not instantaneous in active-passive configurations, which can result in downtime during a failover.</span></span> <span data-ttu-id="186e4-233">Consultez [surveillance des points de terminaison de Traffic Manager et le basculement](/azure/traffic-manager/traffic-manager-monitoring).</span><span class="sxs-lookup"><span data-stu-id="186e4-233">See [Traffic Manager endpoint monitoring and failover](/azure/traffic-manager/traffic-manager-monitoring).</span></span>

## <a name="next-steps"></a><span data-ttu-id="186e4-234">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="186e4-234">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="186e4-235">Architecte pour la résilience et disponibilité</span><span class="sxs-lookup"><span data-stu-id="186e4-235">Architect for resiliency and availability</span></span>](./architect.md)
