---
title: "Exécuter des machines virtuelles Windows pour une architecture multiniveau"
description: "Découvrez comment implémenter une architecture multiniveau dans Azure, en privilégiant la disponibilité, la sécurité, la scalabilité et la facilité de gestion."
author: MikeWasson
ms.date: 11/22/2016
pnp.series.title: Windows VM workloads
pnp.series.next: multi-region-application
pnp.series.prev: multi-vm
ms.openlocfilehash: 0654239a5bbd966a2aa776415b7f15ae723ffd63
ms.sourcegitcommit: c9e6d8edb069b8c513de748ce8114c879bad5f49
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/08/2018
---
# <a name="run-windows-vms-for-an-n-tier-application"></a><span data-ttu-id="12ac5-103">Exécuter des machines virtuelles Windows pour une architecture multiniveau</span><span class="sxs-lookup"><span data-stu-id="12ac5-103">Run Windows VMs for an N-tier application</span></span>

<span data-ttu-id="12ac5-104">Cette architecture de référence présente un ensemble de pratiques éprouvées pour l’exécution de machines virtuelles Windows pour une application multiniveau.</span><span class="sxs-lookup"><span data-stu-id="12ac5-104">This reference architecture shows a set of proven practices for running Windows virtual machines (VMs) for an N-tier application.</span></span> [<span data-ttu-id="12ac5-105">**Déployez cette solution**.</span><span class="sxs-lookup"><span data-stu-id="12ac5-105">**Deploy this solution**.</span></span>](#deploy-the-solution) 

<span data-ttu-id="12ac5-106">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="12ac5-106">![[0]][0]</span></span>

<span data-ttu-id="12ac5-107">*Téléchargez un [fichier Visio][visio-download] de cette architecture.*</span><span class="sxs-lookup"><span data-stu-id="12ac5-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="12ac5-108">Architecture</span><span class="sxs-lookup"><span data-stu-id="12ac5-108">Architecture</span></span> 

<span data-ttu-id="12ac5-109">Il existe de nombreuses façons d’implémenter une architecture multiniveau.</span><span class="sxs-lookup"><span data-stu-id="12ac5-109">There are many ways to implement an N-tier architecture.</span></span> <span data-ttu-id="12ac5-110">Le diagramme illustre une application web à 3 niveaux standard.</span><span class="sxs-lookup"><span data-stu-id="12ac5-110">The diagram shows a typical 3-tier web application.</span></span> <span data-ttu-id="12ac5-111">Cette architecture repose sur celle décrite dans [Exécuter des machines virtuelles à charge équilibrée pour la scalabilité et la disponibilité][multi-vm].</span><span class="sxs-lookup"><span data-stu-id="12ac5-111">This architecture builds on [Run load-balanced VMs for scalability and availability][multi-vm].</span></span> <span data-ttu-id="12ac5-112">Les niveaux Web et Business utilisent des machines virtuelles à charge équilibrée.</span><span class="sxs-lookup"><span data-stu-id="12ac5-112">The web and business tiers use load-balanced VMs.</span></span>

* <span data-ttu-id="12ac5-113">**Groupes à haute disponibilité.**</span><span class="sxs-lookup"><span data-stu-id="12ac5-113">**Availability sets.**</span></span> <span data-ttu-id="12ac5-114">Créez un [groupe à haute disponibilité][azure-availability-sets] pour chaque niveau et configurez au moins deux machines virtuelles dans chaque niveau.</span><span class="sxs-lookup"><span data-stu-id="12ac5-114">Create an [availability set][azure-availability-sets] for each tier, and provision at least two VMs in each tier.</span></span> <span data-ttu-id="12ac5-115">Cela rend les machines virtuelles éligibles pour un [niveau contrat de service (SLA)][vm-sla] plus élevé.</span><span class="sxs-lookup"><span data-stu-id="12ac5-115">This makes the VMs eligible for a higher [service level agreement (SLA)][vm-sla] for VMs.</span></span> <span data-ttu-id="12ac5-116">Vous pouvez déployer une seule machine virtuelle dans un groupe à haute disponibilité, mais cette machine virtuelle unique ne sera pas éligible à la garantie de contrat de niveau de service, à moins qu’elle n’utilise le stockage Premium Azure pour tous les systèmes d’exploitation et disques de données.</span><span class="sxs-lookup"><span data-stu-id="12ac5-116">You can deploy a single VM in an availability set, but the single VM will not qualify for an SLA guarantee unless the single VM is using Azure Premium Storage for all OS and data disks.</span></span>  
* <span data-ttu-id="12ac5-117">**Sous-réseaux.**</span><span class="sxs-lookup"><span data-stu-id="12ac5-117">**Subnets.**</span></span> <span data-ttu-id="12ac5-118">Créez un sous-réseau distinct pour chaque niveau.</span><span class="sxs-lookup"><span data-stu-id="12ac5-118">Create a separate subnet for each tier.</span></span> <span data-ttu-id="12ac5-119">Spécifiez la plage d’adresses et le masque de sous-réseau d’après la notation [CIDR].</span><span class="sxs-lookup"><span data-stu-id="12ac5-119">Specify the address range and subnet mask using [CIDR] notation.</span></span> 
* <span data-ttu-id="12ac5-120">**Équilibreurs de charge.**</span><span class="sxs-lookup"><span data-stu-id="12ac5-120">**Load balancers.**</span></span> <span data-ttu-id="12ac5-121">Utilisez un [équilibreur de charge accessible sur Internet][load-balancer-external] pour distribuer le trafic Internet entrant vers le niveau Web et un [équilibreur de charge interne][load-balancer-internal] pour distribuer le trafic réseau du niveau Web vers le niveau Business.</span><span class="sxs-lookup"><span data-stu-id="12ac5-121">Use an [Internet-facing load balancer][load-balancer-external] to distribute incoming Internet traffic to the web tier, and an [internal load balancer][load-balancer-internal] to distribute network traffic from the web tier to the business tier.</span></span>
* <span data-ttu-id="12ac5-122">**Serveur de rebond (jumpbox).**</span><span class="sxs-lookup"><span data-stu-id="12ac5-122">**Jumpbox.**</span></span> <span data-ttu-id="12ac5-123">Également appelée [hôte bastion].</span><span class="sxs-lookup"><span data-stu-id="12ac5-123">Also called a [bastion host].</span></span> <span data-ttu-id="12ac5-124">Machine virtuelle sécurisée sur le réseau, utilisée par les administrateurs pour se connecter aux autres machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="12ac5-124">A secure VM on the network that administrators use to connect to the other VMs.</span></span> <span data-ttu-id="12ac5-125">Le serveur de rebond a un groupe de sécurité réseau qui autorise le trafic distant provenant uniquement d’adresses IP publiques figurant sur une liste verte.</span><span class="sxs-lookup"><span data-stu-id="12ac5-125">The jumpbox has an NSG that allows remote traffic only from public IP addresses on a safe list.</span></span> <span data-ttu-id="12ac5-126">Le groupe de sécurité réseau doit autoriser le trafic RDP (Bureau à distance).</span><span class="sxs-lookup"><span data-stu-id="12ac5-126">The NSG should permit remote desktop (RDP) traffic.</span></span>
* <span data-ttu-id="12ac5-127">**Surveillance.**</span><span class="sxs-lookup"><span data-stu-id="12ac5-127">**Monitoring.**</span></span> <span data-ttu-id="12ac5-128">Des logiciels de surveillance tels que [Nagios], [Zabbix] ou [Icinga] peuvent vous donner une idée du temps de réponse, du temps de fonctionnement de machine virtuelle et de l’intégrité globale de votre système.</span><span class="sxs-lookup"><span data-stu-id="12ac5-128">Monitoring software such as [Nagios], [Zabbix], or [Icinga] can give you insight into response time, VM uptime, and the overall health of your system.</span></span> <span data-ttu-id="12ac5-129">Installez le logiciel de surveillance sur une machine virtuelle placée sur un sous-réseau de gestion distinct.</span><span class="sxs-lookup"><span data-stu-id="12ac5-129">Install the monitoring software on a VM that's placed in a separate management subnet.</span></span>
* <span data-ttu-id="12ac5-130">**Groupes de sécurité réseau.**</span><span class="sxs-lookup"><span data-stu-id="12ac5-130">**NSGs.**</span></span> <span data-ttu-id="12ac5-131">Utilisez des [groupes de sécurité réseau][nsg] pour limiter le trafic réseau au sein du réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="12ac5-131">Use [network security groups][nsg] (NSGs) to restrict network traffic within the VNet.</span></span> <span data-ttu-id="12ac5-132">Par exemple, dans l’architecture à 3 niveaux illustrée ici, le niveau base de données n’accepte pas le trafic en provenance du frontend web, mais uniquement du niveau Business et du sous-réseau de gestion.</span><span class="sxs-lookup"><span data-stu-id="12ac5-132">For example, in the 3-tier architecture shown here, the database tier does not accept traffic from the web front end, only from the business tier and the management subnet.</span></span>
* <span data-ttu-id="12ac5-133">**Groupe de disponibilité SQL Server AlwaysOn.**</span><span class="sxs-lookup"><span data-stu-id="12ac5-133">**SQL Server Always On Availability Group.**</span></span> <span data-ttu-id="12ac5-134">Fournit une haute disponibilité du niveau Données, en activant la réplication et le basculement.</span><span class="sxs-lookup"><span data-stu-id="12ac5-134">Provides high availability at the data tier, by enabling replication and failover.</span></span>
* <span data-ttu-id="12ac5-135">**Serveurs AD DS (Active Directory Domain Services)**.</span><span class="sxs-lookup"><span data-stu-id="12ac5-135">**Active Directory Domain Services (AD DS) Servers**.</span></span> <span data-ttu-id="12ac5-136">Avec les versions antérieures à Windows Server 2016, les groupes de disponibilité SQL Server AlwaysOn doivent être joints à un domaine.</span><span class="sxs-lookup"><span data-stu-id="12ac5-136">Prior to Windows Server 2016, SQL Server Always On Availability Groups must be joined to a domain.</span></span> <span data-ttu-id="12ac5-137">Ceci est dû au fait que les groupes de disponibilité reposent sur la technologie WSFC (Cluster de basculement Windows Server).</span><span class="sxs-lookup"><span data-stu-id="12ac5-137">This is because Availability Groups depend on Windows Server Failover Cluster (WSFC) technology.</span></span> <span data-ttu-id="12ac5-138">Windows Server 2016 introduit la possibilité de créer un cluster de basculement sans Active Directory, auquel cas les serveurs de domaine Active Directory ne sont pas nécessaires pour cette architecture.</span><span class="sxs-lookup"><span data-stu-id="12ac5-138">Windows Server 2016 introduces the ability to create a Failover Cluster without Active Directory, in which case the AD DS servers are not required for this architecture.</span></span> <span data-ttu-id="12ac5-139">Pour plus d’informations, consultez [Nouveautés du clustering de basculement dans Windows Server 2016][wsfc-whats-new].</span><span class="sxs-lookup"><span data-stu-id="12ac5-139">For more information, see [What's new in Failover Clustering in Windows Server 2016][wsfc-whats-new].</span></span>
* <span data-ttu-id="12ac5-140">**Azure DNS**.</span><span class="sxs-lookup"><span data-stu-id="12ac5-140">**Azure DNS**.</span></span> <span data-ttu-id="12ac5-141">[Azure DNS][azure-dns] est un service d’hébergement pour les domaines DNS qui offre une résolution de noms à l’aide de l’infrastructure Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="12ac5-141">[Azure DNS][azure-dns] is a hosting service for DNS domains, providing name resolution using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="12ac5-142">En hébergeant vos domaines dans Azure, vous pouvez gérer vos enregistrements DNS avec les mêmes informations d’identification, les mêmes API, les mêmes outils et la même facturation que vos autres services Azure.</span><span class="sxs-lookup"><span data-stu-id="12ac5-142">By hosting your domains in Azure, you can manage your DNS records using the same credentials, APIs, tools, and billing as your other Azure services.</span></span>

## <a name="recommendations"></a><span data-ttu-id="12ac5-143">Recommandations</span><span class="sxs-lookup"><span data-stu-id="12ac5-143">Recommendations</span></span>

<span data-ttu-id="12ac5-144">Vos exigences peuvent différer de celles de l’architecture décrite ici.</span><span class="sxs-lookup"><span data-stu-id="12ac5-144">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="12ac5-145">Utilisez ces recommandations comme point de départ.</span><span class="sxs-lookup"><span data-stu-id="12ac5-145">Use these recommendations as a starting point.</span></span> 

### <a name="vnet--subnets"></a><span data-ttu-id="12ac5-146">Réseau virtuel / sous-réseaux</span><span class="sxs-lookup"><span data-stu-id="12ac5-146">VNet / Subnets</span></span>

<span data-ttu-id="12ac5-147">Quand vous créez le réseau virtuel, déterminez le nombre d’adresses IP dont vos ressources sur chaque sous-réseau ont besoin.</span><span class="sxs-lookup"><span data-stu-id="12ac5-147">When you create the VNet, determine how many IP addresses your resources in each subnet require.</span></span> <span data-ttu-id="12ac5-148">Spécifiez un masque de sous-réseau et une plage d’adresses de réseau virtuel suffisamment large pour les adresse IP requises, à l’aide de la notation [CIDR].</span><span class="sxs-lookup"><span data-stu-id="12ac5-148">Specify a subnet mask and a VNet address range large enough for the required IP addresses, using [CIDR] notation.</span></span> <span data-ttu-id="12ac5-149">Utilisez un espace d’adressage qui se trouve dans les [blocs d’adresses IP privées][private-ip-space] standard, à savoir 10.0.0.0/8, 172.16.0.0/12 et 192.168.0.0/16.</span><span class="sxs-lookup"><span data-stu-id="12ac5-149">Use an address space that falls within the standard [private IP address blocks][private-ip-space], which are 10.0.0.0/8, 172.16.0.0/12, and 192.168.0.0/16.</span></span>

<span data-ttu-id="12ac5-150">Choisissez une plage d’adresses qui ne chevauche pas votre réseau local, au cas où vous devriez configurer ultérieurement une passerelle entre le réseau virtuel et votre réseau local.</span><span class="sxs-lookup"><span data-stu-id="12ac5-150">Choose an address range that does not overlap with your on-premises network, in case you need to set up a gateway between the VNet and your on-premise network later.</span></span> <span data-ttu-id="12ac5-151">Une fois le réseau virtuel créé, vous ne pouvez plus modifier la plage d’adresses.</span><span class="sxs-lookup"><span data-stu-id="12ac5-151">Once you create the VNet, you can't change the address range.</span></span>

<span data-ttu-id="12ac5-152">Concevez les sous-réseaux en tenant compte des exigences en matière de sécurité et de fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="12ac5-152">Design subnets with functionality and security requirements in mind.</span></span> <span data-ttu-id="12ac5-153">Toutes les machines virtuelles du même niveau ou rôle doivent être placées sur le même sous-réseau, qui peut constituer une limite de sécurité.</span><span class="sxs-lookup"><span data-stu-id="12ac5-153">All VMs within the same tier or role should go into the same subnet, which can be a security boundary.</span></span> <span data-ttu-id="12ac5-154">Pour plus d’informations sur la conception des réseaux virtuels et des sous-réseaux, consultez [Planifier et concevoir des réseaux virtuels Azure][plan-network].</span><span class="sxs-lookup"><span data-stu-id="12ac5-154">For more information about designing VNets and subnets, see [Plan and design Azure Virtual Networks][plan-network].</span></span>

<span data-ttu-id="12ac5-155">Pour chaque sous-réseau, spécifiez l’espace d’adressage du sous-réseau d’après la notation CIDR.</span><span class="sxs-lookup"><span data-stu-id="12ac5-155">For each subnet, specify the address space for the subnet in CIDR notation.</span></span> <span data-ttu-id="12ac5-156">Par exemple, « 10.0.0.0/24 » crée une plage de 256 adresses IP.</span><span class="sxs-lookup"><span data-stu-id="12ac5-156">For example, '10.0.0.0/24' creates a range of 256 IP addresses.</span></span> <span data-ttu-id="12ac5-157">Les machines virtuelles peuvent en utiliser 251, tandis que cinq sont réservées.</span><span class="sxs-lookup"><span data-stu-id="12ac5-157">VMs can use 251 of these; five are reserved.</span></span> <span data-ttu-id="12ac5-158">Vérifiez que les plages d’adresses ne chevauchent pas plusieurs sous-réseaux.</span><span class="sxs-lookup"><span data-stu-id="12ac5-158">Make sure the address ranges don't overlap across subnets.</span></span> <span data-ttu-id="12ac5-159">Voir le [FAQ sur les réseaux virtuels][vnet faq].</span><span class="sxs-lookup"><span data-stu-id="12ac5-159">See the [Virtual Network FAQ][vnet faq].</span></span>

### <a name="network-security-groups"></a><span data-ttu-id="12ac5-160">Groupes de sécurité réseau</span><span class="sxs-lookup"><span data-stu-id="12ac5-160">Network security groups</span></span>

<span data-ttu-id="12ac5-161">Utilisez des règles de groupe de sécurité réseau pour limiter le trafic entre les niveaux.</span><span class="sxs-lookup"><span data-stu-id="12ac5-161">Use NSG rules to restrict traffic between tiers.</span></span> <span data-ttu-id="12ac5-162">Par exemple, dans l’architecture à 3 niveaux ci-dessus, le niveau Web ne communique pas directement avec le niveau Base de données.</span><span class="sxs-lookup"><span data-stu-id="12ac5-162">For example, in the 3-tier architecture shown above, the web tier does not communicate directly with the database tier.</span></span> <span data-ttu-id="12ac5-163">Pour appliquer cette recommandation, le niveau Base de données doit bloquer le trafic entrant provenant du sous-réseau du niveau Web.</span><span class="sxs-lookup"><span data-stu-id="12ac5-163">To enforce this, the database tier should block incoming traffic from the web tier subnet.</span></span>  

1. <span data-ttu-id="12ac5-164">Créez un groupe de sécurité réseau et associez-le au sous-réseau du niveau Base de données.</span><span class="sxs-lookup"><span data-stu-id="12ac5-164">Create an NSG and associate it to the database tier subnet.</span></span>
2. <span data-ttu-id="12ac5-165">Ajoutez une règle qui interdit tout le trafic entrant provenant du réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="12ac5-165">Add a rule that denies all inbound traffic from the VNet.</span></span> <span data-ttu-id="12ac5-166">(Utilisez la balise `VIRTUAL_NETWORK` dans la règle.)</span><span class="sxs-lookup"><span data-stu-id="12ac5-166">(Use the `VIRTUAL_NETWORK` tag in the rule.)</span></span> 
3. <span data-ttu-id="12ac5-167">Ajoutez une règle avec une priorité plus élevée qui autorise le trafic entrant provenant du sous-réseau du niveau Business.</span><span class="sxs-lookup"><span data-stu-id="12ac5-167">Add a rule with a higher priority that allows inbound traffic from the business tier subnet.</span></span> <span data-ttu-id="12ac5-168">Cette règle remplace la règle précédente, et permet au niveau Business de communiquer avec le niveau Base de données.</span><span class="sxs-lookup"><span data-stu-id="12ac5-168">This rule overrides the previous rule, and allows the business tier to talk to the database tier.</span></span>
4. <span data-ttu-id="12ac5-169">Ajoutez une règle qui autorise le trafic entrant provenant du sous-réseau du niveau Base de données.</span><span class="sxs-lookup"><span data-stu-id="12ac5-169">Add a rule that allows inbound traffic from within the database tier subnet itself.</span></span> <span data-ttu-id="12ac5-170">Cette règle autorise la communication entre les machines virtuelles du niveau Base de données, qui est nécessaire pour la réplication de base de données et le basculement.</span><span class="sxs-lookup"><span data-stu-id="12ac5-170">This rule allows communication between VMs in the database tier, which is needed for database replication and failover.</span></span>
5. <span data-ttu-id="12ac5-171">Ajoutez une règle qui autorise le trafic RDP à partir du sous-réseau du serveur de rebond.</span><span class="sxs-lookup"><span data-stu-id="12ac5-171">Add a rule that allows RDP traffic from the jumpbox subnet.</span></span> <span data-ttu-id="12ac5-172">Cette règle permet aux administrateurs de se connecter au niveau Base de données à partir du serveur de rebond.</span><span class="sxs-lookup"><span data-stu-id="12ac5-172">This rule lets administrators connect to the database tier from the jumpbox.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="12ac5-173">Un groupe de sécurité réseau a des règles par défaut qui autorisent tout le trafic entrant provenant du réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="12ac5-173">An NSG has default rules that allow any inbound traffic from within the VNet.</span></span> <span data-ttu-id="12ac5-174">Vous ne pouvez pas supprimer ces règles, mais vous pouvez les remplacer en créant des règles de priorité plus élevée.</span><span class="sxs-lookup"><span data-stu-id="12ac5-174">These rules can't be deleted, but you can override them by creating higher priority rules.</span></span>
   > 
   > 

### <a name="load-balancers"></a><span data-ttu-id="12ac5-175">Équilibreurs de charge</span><span class="sxs-lookup"><span data-stu-id="12ac5-175">Load balancers</span></span>

<span data-ttu-id="12ac5-176">L’équilibreur de charge externe distribue le trafic Internet vers le niveau Web.</span><span class="sxs-lookup"><span data-stu-id="12ac5-176">The external load balancer distributes Internet traffic to the web tier.</span></span> <span data-ttu-id="12ac5-177">Créez une adresse IP publique pour cet équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="12ac5-177">Create a public IP address for this load balancer.</span></span> <span data-ttu-id="12ac5-178">Voir [Création d’un équilibreur de charge accessible sur Internet][lb-external-create].</span><span class="sxs-lookup"><span data-stu-id="12ac5-178">See [Creating an Internet-facing load balancer][lb-external-create].</span></span>

<span data-ttu-id="12ac5-179">L’équilibreur de charge interne distribue le trafic réseau du niveau Web vers le niveau Business.</span><span class="sxs-lookup"><span data-stu-id="12ac5-179">The internal load balancer distributes network traffic from the web tier to the business tier.</span></span> <span data-ttu-id="12ac5-180">Pour attribuer une adresse IP privée à cet équilibreur de charge, créez une configuration IP frontend et associez-la au sous-réseau du niveau Business.</span><span class="sxs-lookup"><span data-stu-id="12ac5-180">To give this load balancer a private IP address, create a frontend IP configuration and associate it with the subnet for the business tier.</span></span> <span data-ttu-id="12ac5-181">Voir [Bien démarrer avec la création d’un équilibreur de charge interne][lb-internal-create].</span><span class="sxs-lookup"><span data-stu-id="12ac5-181">See [Get started creating an Internal load balancer][lb-internal-create].</span></span>

### <a name="sql-server-always-on-availability-groups"></a><span data-ttu-id="12ac5-182">Configurer les groupes de disponibilité SQL Server AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="12ac5-182">SQL Server Always On Availability Groups</span></span>

<span data-ttu-id="12ac5-183">Nous vous recommandons d’utiliser des [groupes de disponibilité AlwaysOn][sql-alwayson] pour la haute disponibilité de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="12ac5-183">We recommend [Always On Availability Groups][sql-alwayson] for SQL Server high availability.</span></span> <span data-ttu-id="12ac5-184">Avec les versions antérieures à Windows Server 2016, les groupes de disponibilité AlwaysOn nécessitent un contrôleur de domaine et tous les nœuds du groupe de disponibilité doivent être dans le même domaine Active Directory.</span><span class="sxs-lookup"><span data-stu-id="12ac5-184">Prior to Windows Server 2016, Always On Availability Groups require a domain controller, and all nodes in the availability group must be in the same AD domain.</span></span>

<span data-ttu-id="12ac5-185">Les autres niveaux se connectent à la base de données par le biais d’un [écouteur de groupe de disponibilité][sql-alwayson-listeners].</span><span class="sxs-lookup"><span data-stu-id="12ac5-185">Other tiers connect to the database through an [availability group listener][sql-alwayson-listeners].</span></span> <span data-ttu-id="12ac5-186">L’écouteur permet à un client SQL de se connecter sans connaître le nom de l’instance physique de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="12ac5-186">The listener enables a SQL client to connect without knowing the name of the physical instance of SQL Server.</span></span> <span data-ttu-id="12ac5-187">Les machines virtuelles qui accèdent à la base de données doivent être jointes au domaine.</span><span class="sxs-lookup"><span data-stu-id="12ac5-187">VMs that access the database must be joined to the domain.</span></span> <span data-ttu-id="12ac5-188">Le client (dans ce cas, un autre niveau) utilise le système DNS pour résoudre le nom du réseau virtuel de l’écouteur en adresses IP.</span><span class="sxs-lookup"><span data-stu-id="12ac5-188">The client (in this case, another tier) uses DNS to resolve the listener's virtual network name into IP addresses.</span></span>

<span data-ttu-id="12ac5-189">Configurez le groupe de disponibilité SQL Server AlwaysOn comme suit :</span><span class="sxs-lookup"><span data-stu-id="12ac5-189">Configure the SQL Server Always On Availability Group as follows:</span></span>

1. <span data-ttu-id="12ac5-190">Créez un cluster WSFC (clustering de basculement Windows Server), un groupe de disponibilité SQL Server AlwaysOn et un réplica principal.</span><span class="sxs-lookup"><span data-stu-id="12ac5-190">Create a Windows Server Failover Clustering (WSFC) cluster, a SQL Server Always On Availability Group, and a primary replica.</span></span> <span data-ttu-id="12ac5-191">Pour plus d’informations, consultez [Bien démarrer avec les groupes de disponibilité AlwaysOn][sql-alwayson-getting-started].</span><span class="sxs-lookup"><span data-stu-id="12ac5-191">For more information, see [Getting Started with Always On Availability Groups][sql-alwayson-getting-started].</span></span> 
2. <span data-ttu-id="12ac5-192">Créez un équilibreur de charge interne avec une adresse IP privée statique.</span><span class="sxs-lookup"><span data-stu-id="12ac5-192">Create an internal load balancer with a static private IP address.</span></span>
3. <span data-ttu-id="12ac5-193">Créez un écouteur de groupe de disponibilité et mappez le nom DNS de l’écouteur à l’adresse IP d’un équilibreur de charge interne.</span><span class="sxs-lookup"><span data-stu-id="12ac5-193">Create an availability group listener, and map the listener's DNS name to the IP address of an internal load balancer.</span></span> 
4. <span data-ttu-id="12ac5-194">Créez une règle d’équilibreur de charge pour le port d’écoute SQL Server (port TCP 1433 par défaut).</span><span class="sxs-lookup"><span data-stu-id="12ac5-194">Create a load balancer rule for the SQL Server listening port (TCP port 1433 by default).</span></span> <span data-ttu-id="12ac5-195">La règle d’équilibreur de charge doit activer *l’adresse IP flottante*, également appelé Retour direct du serveur.</span><span class="sxs-lookup"><span data-stu-id="12ac5-195">The load balancer rule must enable *floating IP*, also called Direct Server Return.</span></span> <span data-ttu-id="12ac5-196">Cela force la machine virtuelle à répondre directement au client, ce qui permet de bénéficier d’une connexion directe au réplica principal.</span><span class="sxs-lookup"><span data-stu-id="12ac5-196">This causes the VM to reply directly to the client, which enables a direct connection to the primary replica.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="12ac5-197">Quand l’adresse IP flottante est activée, le numéro de port frontend doit être identique au numéro de port backend dans la règle d’équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="12ac5-197">When floating IP is enabled, the front-end port number must be the same as the back-end port number in the load balancer rule.</span></span>
  > 
  > 

<span data-ttu-id="12ac5-198">Quand un client SQL tente de se connecter, l’équilibreur de charge achemine la demande de connexion au réplica principal.</span><span class="sxs-lookup"><span data-stu-id="12ac5-198">When a SQL client tries to connect, the load balancer routes the connection request to the primary replica.</span></span> <span data-ttu-id="12ac5-199">En cas de basculement vers un autre réplica, l’équilibreur de charge achemine automatiquement les demandes suivantes à un nouveau réplica principal.</span><span class="sxs-lookup"><span data-stu-id="12ac5-199">If there is a failover to another replica, the load balancer automatically routes subsequent requests to a new primary replica.</span></span> <span data-ttu-id="12ac5-200">Pour plus d’informations, consultez [Configurer un écouteur à équilibrage de charge interne pour des groupes de disponibilité SQL Server AlwaysOn][sql-alwayson-ilb].</span><span class="sxs-lookup"><span data-stu-id="12ac5-200">For more information, see [Configure an ILB listener for SQL Server Always On Availability Groups][sql-alwayson-ilb].</span></span>

<span data-ttu-id="12ac5-201">Lors d’un basculement, les connexions clientes existantes sont fermées.</span><span class="sxs-lookup"><span data-stu-id="12ac5-201">During a failover, existing client connections are closed.</span></span> <span data-ttu-id="12ac5-202">Une fois le basculement terminé, les nouvelles connexions sont acheminées vers le nouveau réplica principal.</span><span class="sxs-lookup"><span data-stu-id="12ac5-202">After the failover completes, new connections will be routed to the new primary replica.</span></span>

<span data-ttu-id="12ac5-203">Si votre application effectue beaucoup plus de lectures que d’écritures, vous pouvez décharger certaines des requêtes en lecture seule vers un réplica secondaire.</span><span class="sxs-lookup"><span data-stu-id="12ac5-203">If your application makes significantly more reads than writes, you can offload some of the read-only queries to a secondary replica.</span></span> <span data-ttu-id="12ac5-204">Voir [Utilisation d’un écouteur pour se connecter à un réplica secondaire en lecture seule (routage en lecture seule)][sql-alwayson-read-only-routing].</span><span class="sxs-lookup"><span data-stu-id="12ac5-204">See [Using a Listener to Connect to a Read-Only Secondary Replica (Read-Only Routing)][sql-alwayson-read-only-routing].</span></span>

<span data-ttu-id="12ac5-205">Testez votre déploiement en [forçant un basculement manuel][sql-alwayson-force-failover] du groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="12ac5-205">Test your deployment by [forcing a manual failover][sql-alwayson-force-failover] of the availability group.</span></span>

### <a name="jumpbox"></a><span data-ttu-id="12ac5-206">Serveur de rebond</span><span class="sxs-lookup"><span data-stu-id="12ac5-206">Jumpbox</span></span>

<span data-ttu-id="12ac5-207">Le serveur de rebond ayant des exigences de performances minimales, sélectionnez une petite taille de machine virtuelle telle que A1 Standard.</span><span class="sxs-lookup"><span data-stu-id="12ac5-207">The jumpbox will have minimal performance requirements, so select a small VM size for the jumpbox such as Standard A1.</span></span> 

<span data-ttu-id="12ac5-208">Créez-lui une [adresse IP publique].</span><span class="sxs-lookup"><span data-stu-id="12ac5-208">Create a [public IP address] for the jumpbox.</span></span> <span data-ttu-id="12ac5-209">Placez-le sur le même réseau virtuel que les autres machines virtuelles, mais sur un sous-réseau de gestion distinct.</span><span class="sxs-lookup"><span data-stu-id="12ac5-209">Place the jumpbox in the same VNet as the other VMs, but in a separate management subnet.</span></span>

<span data-ttu-id="12ac5-210">N’autorisez pas l’accès RDP à partir de l’Internet public aux machines virtuelles qui exécutent la charge de travail d’application.</span><span class="sxs-lookup"><span data-stu-id="12ac5-210">Do not allow RDP access from the public Internet to the VMs that run the application workload.</span></span> <span data-ttu-id="12ac5-211">Au lieu de cela, tout l’accès RDP à ces machines virtuelles doit transiter par le serveur de rebond.</span><span class="sxs-lookup"><span data-stu-id="12ac5-211">Instead, all RDP access to these VMs must come through the jumpbox.</span></span> <span data-ttu-id="12ac5-212">Un administrateur se connecte au serveur de rebond, puis se connecte à l’autre machine virtuelle à partir du serveur de rebond.</span><span class="sxs-lookup"><span data-stu-id="12ac5-212">An administrator logs into the jumpbox, and then logs into the other VM from the jumpbox.</span></span> <span data-ttu-id="12ac5-213">Le serveur de rebond autorise le trafic SSH à partir d’Internet, mais uniquement à partir d’adresses IP connues et sûres.</span><span class="sxs-lookup"><span data-stu-id="12ac5-213">The jumpbox allows RDP traffic from the Internet, but only from known, safe IP addresses.</span></span>

<span data-ttu-id="12ac5-214">Pour sécuriser le serveur de rebond, créez un groupe de sécurité réseau et appliquez-le au sous-réseau du serveur de rebond.</span><span class="sxs-lookup"><span data-stu-id="12ac5-214">To secure the jumpbox, create an NSG and apply it to the jumpbox subnet.</span></span> <span data-ttu-id="12ac5-215">Ajoutez une règle de groupe de sécurité réseau qui autorise les connexions RDP provenant uniquement d’un ensemble sûr d’adresses IP publiques.</span><span class="sxs-lookup"><span data-stu-id="12ac5-215">Add an NSG rule that allows RDP connections only from a safe set of public IP addresses.</span></span> <span data-ttu-id="12ac5-216">Le groupe de sécurité réseau peut être attaché au sous-réseau ou à la carte réseau du serveur de rebond.</span><span class="sxs-lookup"><span data-stu-id="12ac5-216">The NSG can be attached either to the subnet or to the jumpbox NIC.</span></span> <span data-ttu-id="12ac5-217">Dans le cas présent, nous vous recommandons de l’attacher à la carte réseau pour que le trafic RDP soit autorisé uniquement sur le serveur de rebond, même si vous ajoutez d’autres machines virtuelles au même sous-réseau.</span><span class="sxs-lookup"><span data-stu-id="12ac5-217">In this case, we recommend attaching it to the NIC, so RDP traffic is permitted only to the jumpbox, even if you add other VMs to the same subnet.</span></span>

<span data-ttu-id="12ac5-218">Configurez les groupes de sécurité réseau pour les autres sous-réseaux de façon à autoriser le trafic RDP provenant du sous-réseau de gestion.</span><span class="sxs-lookup"><span data-stu-id="12ac5-218">Configure the NSGs for the other subnets to allow RDP traffic from the management subnet.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="12ac5-219">Considérations relatives à la disponibilité</span><span class="sxs-lookup"><span data-stu-id="12ac5-219">Availability considerations</span></span>

<span data-ttu-id="12ac5-220">Au niveau Base de données, le fait d’avoir plusieurs machines virtuelles ne se traduit pas automatiquement par une base de données hautement disponible.</span><span class="sxs-lookup"><span data-stu-id="12ac5-220">At the database tier, having multiple VMs does not automatically translate into a highly available database.</span></span> <span data-ttu-id="12ac5-221">Pour une base de données relationnelle, vous devez généralement utiliser la réplication et le basculement pour obtenir une haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="12ac5-221">For a relational database, you will typically need to use replication and failover to achieve high availability.</span></span> <span data-ttu-id="12ac5-222">Pour SQL Server, nous vous recommandons d’utiliser des [groupes de disponibilité AlwaysOn][sql-alwayson].</span><span class="sxs-lookup"><span data-stu-id="12ac5-222">For SQL Server, we recommend using [Always On Availability Groups][sql-alwayson].</span></span> 

<span data-ttu-id="12ac5-223">Si vous avez besoin d’une disponibilité plus élevée que celle fournie par le [contrat SLA Azure pour les machines virtuelles][vm-sla], répliquez l’application entre deux régions et utilisez Azure Traffic Manager pour le basculement.</span><span class="sxs-lookup"><span data-stu-id="12ac5-223">If you need higher availability than the [Azure SLA for VMs][vm-sla] provides, replicate the application across two regions and use Azure Traffic Manager for failover.</span></span> <span data-ttu-id="12ac5-224">Pour plus d’informations, consultez [Exécuter des machines virtuelles Windows dans plusieurs régions à des fins de haute disponibilité][multi-dc].</span><span class="sxs-lookup"><span data-stu-id="12ac5-224">For more information, see [Run Windows VMs in multiple regions for high availability][multi-dc].</span></span>   

## <a name="security-considerations"></a><span data-ttu-id="12ac5-225">Considérations relatives à la sécurité</span><span class="sxs-lookup"><span data-stu-id="12ac5-225">Security considerations</span></span>

<span data-ttu-id="12ac5-226">Chiffrez les données sensibles au repos et utilisez [Azure Key Vault][azure-key-vault] pour gérer les clés de chiffrement de base de données.</span><span class="sxs-lookup"><span data-stu-id="12ac5-226">Encrypt sensitive data at rest and use [Azure Key Vault][azure-key-vault] to manage the database encryption keys.</span></span> <span data-ttu-id="12ac5-227">Key Vault peut stocker des clés de chiffrement dans des modules de sécurité matériel (HSM).</span><span class="sxs-lookup"><span data-stu-id="12ac5-227">Key Vault can store encryption keys in hardware security modules (HSMs).</span></span> <span data-ttu-id="12ac5-228">Pour plus d’informations, consultez [Configurer l’intégration d’Azure Key Vault pour SQL Server sur les machines virtuelles Azure][sql-keyvault]. Nous vous recommandons également de stocker les secrets de l’application, tels que les chaînes de connexion de base de données, dans Key Vault.</span><span class="sxs-lookup"><span data-stu-id="12ac5-228">For more information, see [Configure Azure Key Vault Integration for SQL Server on Azure VMs][sql-keyvault] It's also recommended to store application secrets, such as database connection strings, in Key Vault.</span></span>

<span data-ttu-id="12ac5-229">Ajoutez une appliance virtuelle réseau (NVA) pour créer un réseau de périmètre (DMZ) entre Internet et le réseau virtuel Azure.</span><span class="sxs-lookup"><span data-stu-id="12ac5-229">Consider adding a network virtual appliance (NVA) to create a DMZ between the Internet and the Azure virtual network.</span></span> <span data-ttu-id="12ac5-230">NVA est un terme générique décrivant une appliance virtuelle qui peut effectuer des tâches liées au réseau, telles que pare-feu, inspection des paquets, audit et routage personnalisé.</span><span class="sxs-lookup"><span data-stu-id="12ac5-230">NVA is a generic term for a virtual appliance that can perform network-related tasks, such as firewall, packet inspection, auditing, and custom routing.</span></span> <span data-ttu-id="12ac5-231">Pour plus d’informations, consultez [Implémentation d’une zone DMZ entre Azure et Internet][dmz].</span><span class="sxs-lookup"><span data-stu-id="12ac5-231">For more information, see [Implementing a DMZ between Azure and the Internet][dmz].</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="12ac5-232">Considérations relatives à l’extensibilité</span><span class="sxs-lookup"><span data-stu-id="12ac5-232">Scalability considerations</span></span>

<span data-ttu-id="12ac5-233">Les équilibreurs de charge distribuent le trafic réseau vers les niveaux Web et Business.</span><span class="sxs-lookup"><span data-stu-id="12ac5-233">The load balancers distribute network traffic to the web and business tiers.</span></span> <span data-ttu-id="12ac5-234">Mettez à l’échelle votre solution horizontalement en ajoutant de nouvelles instances de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="12ac5-234">Scale horizontally by adding new VM instances.</span></span> <span data-ttu-id="12ac5-235">Notez que vous pouvez mettre à l’échelle les niveaux Web et Business indépendamment, en fonction de la charge.</span><span class="sxs-lookup"><span data-stu-id="12ac5-235">Note that you can scale the web and business tiers independently, based on load.</span></span> <span data-ttu-id="12ac5-236">Pour réduire les complications possibles dues à la nécessité de conserver l’affinité du client, les machines virtuelles du niveau Web doivent être sans état.</span><span class="sxs-lookup"><span data-stu-id="12ac5-236">To reduce possible complications caused by the need to maintain client affinity, the VMs in the web tier should be stateless.</span></span> <span data-ttu-id="12ac5-237">Les machines virtuelles qui hébergent la logique métier doivent également être sans état.</span><span class="sxs-lookup"><span data-stu-id="12ac5-237">The VMs hosting the business logic should also be stateless.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="12ac5-238">Considérations relatives à la facilité de gestion</span><span class="sxs-lookup"><span data-stu-id="12ac5-238">Manageability considerations</span></span>

<span data-ttu-id="12ac5-239">Simplifiez la gestion de l’ensemble du système en utilisant des outils d’administration centralisée tels que [Azure Automation][azure-administration], [Microsoft Operations Management Suite][operations-management-suite], [Chef][chef] ou [Puppet][puppet].</span><span class="sxs-lookup"><span data-stu-id="12ac5-239">Simplify management of the entire system by using centralized administration tools such as [Azure Automation][azure-administration], [Microsoft Operations Management Suite][operations-management-suite], [Chef][chef], or [Puppet][puppet].</span></span> <span data-ttu-id="12ac5-240">Ces outils peuvent consolider des informations de diagnostic et de contrôle d’intégrité capturées à partir de plusieurs machines virtuelles, afin de fournir une vue d’ensemble du système.</span><span class="sxs-lookup"><span data-stu-id="12ac5-240">These tools can consolidate diagnostic and health information captured from multiple VMs to provide an overall view of the system.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="12ac5-241">Déployer la solution</span><span class="sxs-lookup"><span data-stu-id="12ac5-241">Deploy the solution</span></span>

<span data-ttu-id="12ac5-242">Un déploiement pour cette architecture de référence est disponible sur [GitHub][github-folder].</span><span class="sxs-lookup"><span data-stu-id="12ac5-242">A deployment for this reference architecture is available on [GitHub][github-folder].</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="12ac5-243">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="12ac5-243">Prerequisites</span></span>

<span data-ttu-id="12ac5-244">Avant de pouvoir déployer l’architecture de référence sur votre propre abonnement, vous devez effectuer les étapes suivantes.</span><span class="sxs-lookup"><span data-stu-id="12ac5-244">Before you can deploy the reference architecture to your own subscription, you must perform the following steps.</span></span>

1. <span data-ttu-id="12ac5-245">Clonez, dupliquez ou téléchargez le fichier zip pour le dépôt GitHub des [architectures de référence AzureCAT][ref-arch-repo].</span><span class="sxs-lookup"><span data-stu-id="12ac5-245">Clone, fork, or download the zip file for the [AzureCAT reference architectures][ref-arch-repo] GitHub repository.</span></span>

2. <span data-ttu-id="12ac5-246">Vérifiez qu’Azure CLI 2.0 est installé sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="12ac5-246">Make sure you have the Azure CLI 2.0 installed on your computer.</span></span> <span data-ttu-id="12ac5-247">Pour installer l’interface CLI, suivez les instructions fournies dans [Installer Azure CLI 2.0][azure-cli-2].</span><span class="sxs-lookup"><span data-stu-id="12ac5-247">To install the CLI, follow the instructions in [Install Azure CLI 2.0][azure-cli-2].</span></span>

3. <span data-ttu-id="12ac5-248">Installez le package npm des [modules Azure][azbb].</span><span class="sxs-lookup"><span data-stu-id="12ac5-248">Install the [Azure building blocks][azbb] npm package.</span></span>

  ```bash
  npm install -g @mspnp/azure-building-blocks
  ```

4. <span data-ttu-id="12ac5-249">À partir d’une invite de commandes, d’une invite bash ou de l’invite de commandes PowerShell, connectez-vous à votre compte Azure à l’aide de l’une des commandes ci-dessous et suivez les invites.</span><span class="sxs-lookup"><span data-stu-id="12ac5-249">From a command prompt, bash prompt, or PowerShell prompt, login to your Azure account by using one of the commands below, and follow the prompts.</span></span>

  ```bash
  az login
  ```

### <a name="deploy-the-solution-using-azbb"></a><span data-ttu-id="12ac5-250">Déployer la solution à l’aide d’azbb</span><span class="sxs-lookup"><span data-stu-id="12ac5-250">Deploy the solution using azbb</span></span>

<span data-ttu-id="12ac5-251">Pour déployer les machines virtuelles Windows pour une architecture de référence d’application multiniveau, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="12ac5-251">To deploy the Windows VMs for an N-tier application reference architecture, follow these steps:</span></span>

1. <span data-ttu-id="12ac5-252">Accédez au dossier `virtual-machines\n-tier-windows` pour rechercher le référentiel que vous avez cloné à l’étape 1 des conditions préalables ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="12ac5-252">Navigate to the `virtual-machines\n-tier-windows` folder for the repository you cloned in step 1 of the pre-requisites above.</span></span>

2. <span data-ttu-id="12ac5-253">Le fichier de paramètres spécifie un nom d’utilisateur et un mot de passe administrateur par défaut pour chaque machine virtuelle dans le déploiement.</span><span class="sxs-lookup"><span data-stu-id="12ac5-253">The parameter file specifies a default adminstrator user name and password for each VM in the deployment.</span></span> <span data-ttu-id="12ac5-254">Vous devez les modifier avant de déployer l’architecture de référence.</span><span class="sxs-lookup"><span data-stu-id="12ac5-254">You must change these before you deploy the reference architecture.</span></span> <span data-ttu-id="12ac5-255">Ouvrez le fichier `n-tier-windows.json` et remplacez chaque champ **adminUsername** et **adminPassword** par vos nouveaux paramètres.</span><span class="sxs-lookup"><span data-stu-id="12ac5-255">Open the `n-tier-windows.json` file and replace each **adminUsername** and **adminPassword** field with your new settings.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="12ac5-256">Plusieurs scripts s’exécutent pendant ce déploiement, à la fois dans les objets **VirtualMachineExtension** et dans les paramètres **extensions** pour certains des objets **VirtualMachine**.</span><span class="sxs-lookup"><span data-stu-id="12ac5-256">There are multiple scripts that run during this deployment both in the  **VirtualMachineExtension** objects and in the **extensions** settings for some of the **VirtualMachine** objects.</span></span> <span data-ttu-id="12ac5-257">Certains de ces scripts nécessitent le nom d’utilisateur et le mot de passe administrateur que vous venez de modifier.</span><span class="sxs-lookup"><span data-stu-id="12ac5-257">Some of these scripts require the administrator user name and password that you have just changed.</span></span> <span data-ttu-id="12ac5-258">Il est recommandé que vous passiez en revue ces scripts pour vous assurer que vous avez spécifié les bonnes informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="12ac5-258">It's recommended that you review these scripts to ensure that you specified the correct credentials.</span></span> <span data-ttu-id="12ac5-259">Le déploiement risque d’échouer si vous n’avez pas spécifié les bonnes informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="12ac5-259">The deployment may fail if you have not specified the correct credentials.</span></span>
  > 
  > 

<span data-ttu-id="12ac5-260">Enregistrez le fichier .</span><span class="sxs-lookup"><span data-stu-id="12ac5-260">Save the file.</span></span>

3. <span data-ttu-id="12ac5-261">Déployez l’architecture de référence à l’aide de l’outil de ligne de commande **azbb**, comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="12ac5-261">Deploy the reference architecture using the **azbb** command line tool as shown below.</span></span>

  ```bash
  azbb -s <your subscription_id> -g <your resource_group_name> -l <azure region> -p n-tier-windows.json --deploy
  ```

<span data-ttu-id="12ac5-262">Pour plus d’informations sur le déploiement de cet exemple d’architecture de référence à l’aide des blocs de construction Azure, visitez notre [référentiel GitHub][git].</span><span class="sxs-lookup"><span data-stu-id="12ac5-262">For more information on deploying this sample reference architecture using Azure Building Blocks, visit the [GitHub repository][git].</span></span>


<!-- links -->
[dmz]: ../dmz/secure-vnet-dmz.md
[multi-dc]: multi-region-application.md
[multi-vm]: multi-vm.md
[n-tier]: n-tier.md
[azbb]: https://github.com/mspnp/template-building-blocks/wiki/Install-Azure-Building-Blocks
[azure-administration]: /azure/automation/automation-intro
[azure-availability-sets]: /azure/virtual-machines/virtual-machines-windows-manage-availability#configure-each-application-tier-into-separate-availability-sets
[azure-cli]: /azure/virtual-machines-command-line-tools
[azure-cli-2]: https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest
[azure-dns]: /azure/dns/dns-overview
[azure-key-vault]: https://azure.microsoft.com/services/key-vault
[hôte bastion]: https://en.wikipedia.org/wiki/Bastion_host
[cidr]: https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing
[chef]: https://www.chef.io/solutions/azure/
[git]: https://github.com/mspnp/template-building-blocks
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/virtual-machines/n-tier-windows
[lb-external-create]: /azure/load-balancer/load-balancer-get-started-internet-portal
[lb-internal-create]: /azure/load-balancer/load-balancer-get-started-ilb-arm-portal
[load-balancer-external]: /azure/load-balancer/load-balancer-internet-overview
[load-balancer-internal]: /azure/load-balancer/load-balancer-internal-overview
[nsg]: /azure/virtual-network/virtual-networks-nsg
[operations-management-suite]: https://www.microsoft.com/server-cloud/operations-management-suite/overview.aspx
[plan-network]: /azure/virtual-network/virtual-network-vnet-plan-design-arm
[private-ip-space]: https://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces
[adresse IP publique]: /azure/virtual-network/virtual-network-ip-addresses-overview-arm
[puppet]: https://puppetlabs.com/blog/managing-azure-virtual-machines-puppet
[ref-arch-repo]: https://github.com/mspnp/reference-architectures
[sql-alwayson]: https://msdn.microsoft.com/library/hh510230.aspx
[sql-alwayson-force-failover]: https://msdn.microsoft.com/library/ff877957.aspx
[sql-alwayson-getting-started]: https://msdn.microsoft.com/library/gg509118.aspx
[sql-alwayson-ilb]: /azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-alwayson-int-listener
[sql-alwayson-listeners]: https://msdn.microsoft.com/library/hh213417.aspx
[sql-alwayson-read-only-routing]: https://technet.microsoft.com/library/hh213417.aspx#ConnectToSecondary
[sql-keyvault]: /azure/virtual-machines/virtual-machines-windows-ps-sql-keyvault
[vm-sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines
[vnet faq]: /azure/virtual-network/virtual-networks-faq
[wsfc-whats-new]: https://technet.microsoft.com/windows-server-docs/failover-clustering/whats-new-in-failover-clustering
[Nagios]: https://www.nagios.org/
[Zabbix]: http://www.zabbix.com/
[Icinga]: http://www.icinga.org/
[visio-download]: https://archcenter.azureedge.net/cdn/vm-reference-architectures.vsdx
[0]: ./images/n-tier-diagram.png "Architecture multiniveau à l’aide de Microsoft Azure"