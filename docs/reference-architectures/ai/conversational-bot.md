---
title: Générer un bot de conversation de classe entreprise
description: Guide pratique pour créer un bot de conversation (chatbot) de classe entreprise avec Azure Bot Framework.
author: roalexan
ms.date: 01/24/2019
ms.topic: reference-architecture
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: azcat-ai
ms.openlocfilehash: 0f5de0eca6fbd35cca1a0e8443f363df09ffc6aa
ms.sourcegitcommit: 287344b6c220bdbd8076aed7a281eb02253e15be
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/04/2019
ms.locfileid: "55712148"
---
# <a name="enterprise-grade-conversational-bot"></a><span data-ttu-id="6091c-103">Bot de conversation de classe Entreprise</span><span class="sxs-lookup"><span data-stu-id="6091c-103">Enterprise-grade conversational bot</span></span>

<span data-ttu-id="6091c-104">Cette architecture de référence décrit comment générer un bot de conversation (chatbot) de classe entreprise à l’aide d’[Azure Bot Framework][bot-framework].</span><span class="sxs-lookup"><span data-stu-id="6091c-104">This reference architecture describes how to build an enterprise-grade conversational bot (chatbot) using the [Azure Bot Framework][bot-framework].</span></span> <span data-ttu-id="6091c-105">Chaque bot est différent, mais ils ont en commun des modèles, des workflows et des technologies à connaître.</span><span class="sxs-lookup"><span data-stu-id="6091c-105">Each bot is different, but there are some common patterns, workflows, and technologies to be aware of.</span></span> <span data-ttu-id="6091c-106">Pour ce qui est des bots au service de charges de travail d’entreprise, il existe de nombreuses considérations liées à leur conception au-delà de leur simple fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="6091c-106">Especially for a bot to serve enterprise workloads, there are many design considerations beyond just the core functionality.</span></span> <span data-ttu-id="6091c-107">Cet article couvre les aspects les plus importants de cette conception et présente les outils nécessaires pour générer un bot robuste, sécurisé et actif dans son apprentissage.</span><span class="sxs-lookup"><span data-stu-id="6091c-107">This article covers the most essential design aspects, and introduces the tools needed to build a robust, secure, and actively learning bot.</span></span>

<span data-ttu-id="6091c-108">[![Diagramme de l’architecture][0]][0]</span><span class="sxs-lookup"><span data-stu-id="6091c-108">[![Diagram of the architecture][0]][0]</span></span>

<span data-ttu-id="6091c-109">Les exemples d’utilitaires de bonnes pratiques utilisés dans cette architecture sont entièrement open source et sont disponibles sur [GitHub][git-repo-base].</span><span class="sxs-lookup"><span data-stu-id="6091c-109">The best practice utility samples used in this architecture are fully open-sourced and available on [GitHub][git-repo-base].</span></span> 

## <a name="architecture"></a><span data-ttu-id="6091c-110">Architecture</span><span class="sxs-lookup"><span data-stu-id="6091c-110">Architecture</span></span>

<span data-ttu-id="6091c-111">L’architecture présentée ici utilise les services Azure suivants.</span><span class="sxs-lookup"><span data-stu-id="6091c-111">The architecture shown here uses the following Azure services.</span></span> <span data-ttu-id="6091c-112">Votre bot personnel n’utilise peut-être pas tous ces services, ou peut-être en incorpore-t-il d’autres.</span><span class="sxs-lookup"><span data-stu-id="6091c-112">Your own bot may not use all of these services, or may incorporate additional services.</span></span>

### <a name="bot-logic-and-user-experience"></a><span data-ttu-id="6091c-113">Logique de bot et expérience utilisateur</span><span class="sxs-lookup"><span data-stu-id="6091c-113">Bot logic and user experience</span></span>

- <span data-ttu-id="6091c-114">**[Bot Framework Service][bot-framework-service]** (BFS).</span><span class="sxs-lookup"><span data-stu-id="6091c-114">**[Bot Framework Service][bot-framework-service]** (BFS).</span></span> <span data-ttu-id="6091c-115">Ce service connecte votre bot à une application de communication comme Cortana, Facebook Messenger ou Slack.</span><span class="sxs-lookup"><span data-stu-id="6091c-115">This service connects your bot to a communication app such as Cortana, Facebook Messenger, or Slack.</span></span> <span data-ttu-id="6091c-116">Il facilite la communication entre votre bot et l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6091c-116">It facilitates communication between your bot and the user.</span></span>
- <span data-ttu-id="6091c-117">**[Azure App Service][app-service]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-117">**[Azure App Service][app-service]**.</span></span> <span data-ttu-id="6091c-118">La logique d’application du bot est hébergée dans Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="6091c-118">The bot application logic is hosted in Azure App Service.</span></span>

### <a name="bot-cognition-and-intelligence"></a><span data-ttu-id="6091c-119">Cognition et intelligence du bot</span><span class="sxs-lookup"><span data-stu-id="6091c-119">Bot cognition and intelligence</span></span>

- <span data-ttu-id="6091c-120">**[Language Understanding][luis]** (LUIS).</span><span class="sxs-lookup"><span data-stu-id="6091c-120">**[Language Understanding][luis]** (LUIS).</span></span> <span data-ttu-id="6091c-121">Dans le cadre d’[Azure Cognitive Services][cognitive-services], LUIS permet à votre bot de comprendre le langage naturel en identifiant les intentions et les entités de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6091c-121">Part of [Azure Cognitive Services][cognitive-services], LUIS enables your bot to understand natural language by identifying user intents and entities.</span></span>
- <span data-ttu-id="6091c-122">**[Recherche Azure][search]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-122">**[Azure Search][search]**.</span></span> <span data-ttu-id="6091c-123">Recherche est un service géré qui fournit un index de documents dans lequel vous pouvez effectuer des recherches rapides.</span><span class="sxs-lookup"><span data-stu-id="6091c-123">Search is a managed service that provides a quick searchable document index.</span></span>
- <span data-ttu-id="6091c-124">**[QnA Maker][qna-maker]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-124">**[QnA Maker][qna-maker]**.</span></span> <span data-ttu-id="6091c-125">QnA Maker est un service d’API cloud qui crée une couche de questions-réponses conversationnelle sur vos données.</span><span class="sxs-lookup"><span data-stu-id="6091c-125">QnA Maker is a cloud-based API service that creates a conversational, question-and-answer layer over your data.</span></span> <span data-ttu-id="6091c-126">En règle générale, il se charge avec du contenu semi-structuré comme des questions fréquentes (FAQ).</span><span class="sxs-lookup"><span data-stu-id="6091c-126">Typically, it's loaded with semi-structured content such as FAQs.</span></span> <span data-ttu-id="6091c-127">Utilisez-le pour créer une base de connaissances afin de répondre à des questions en langage naturel.</span><span class="sxs-lookup"><span data-stu-id="6091c-127">Use it to create a knowledge base for answering natural-language questions.</span></span>
- <span data-ttu-id="6091c-128">**[Application web][webapp]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-128">**[Web app][webapp]**.</span></span> <span data-ttu-id="6091c-129">Si votre bot a besoin de solutions d’intelligence artificielle (IA) non fournies par un service existant, vous pouvez implémenter votre propre IA personnalisée et l’héberger comme application web.</span><span class="sxs-lookup"><span data-stu-id="6091c-129">If your bot needs AI solutions not provided by an existing service, you can implement your own custom AI and host it as a web app.</span></span> <span data-ttu-id="6091c-130">Cette dernière fournit un point de terminaison web que votre bot peut appeler.</span><span class="sxs-lookup"><span data-stu-id="6091c-130">This provides a web endpoint for your bot to call.</span></span>

### <a name="data-ingestion"></a><span data-ttu-id="6091c-131">Ingestion de données</span><span class="sxs-lookup"><span data-stu-id="6091c-131">Data ingestion</span></span>

<span data-ttu-id="6091c-132">Le bot compte sur les données brutes que vous devez ingérer et préparer.</span><span class="sxs-lookup"><span data-stu-id="6091c-132">The bot will rely on raw data that must be ingested and prepared.</span></span> <span data-ttu-id="6091c-133">Envisagez l’une des options suivantes pour orchestrer ce processus :</span><span class="sxs-lookup"><span data-stu-id="6091c-133">Consider any of the following options to orchestrate this process:</span></span>

- <span data-ttu-id="6091c-134">**[Azure Data Factory][data-factory]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-134">**[Azure Data Factory][data-factory]**.</span></span> <span data-ttu-id="6091c-135">Data Factory orchestre et automatise le déplacement et la transformation des données.</span><span class="sxs-lookup"><span data-stu-id="6091c-135">Data Factory orchestrates and automates data movement and data transformation.</span></span>
- <span data-ttu-id="6091c-136">**[Logic Apps][logic-apps]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-136">**[Logic Apps][logic-apps]**.</span></span> <span data-ttu-id="6091c-137">Logic Apps est une plateforme serverless pour la création de workflows qui intègrent des applications, des données et des services.</span><span class="sxs-lookup"><span data-stu-id="6091c-137">Logic Apps is a serverless platform for building workflows that integrate applications, data, and services.</span></span> <span data-ttu-id="6091c-138">Logic Apps fournit des connecteurs de données pour de nombreuses applications, notamment Office 365.</span><span class="sxs-lookup"><span data-stu-id="6091c-138">Logic Apps provides data connectors for many applications, including Office 365.</span></span>
- <span data-ttu-id="6091c-139">**[Azure Functions][functions]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-139">**[Azure Functions][functions]**.</span></span> <span data-ttu-id="6091c-140">Vous pouvez utiliser Azure Functions pour écrire du code serverless personnalisé, appelé par un [déclencheur][functions-triggers] &mdash;, par exemple, chaque fois qu’un document est ajouté au stockage blob ou à Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="6091c-140">You can use Azure Functions to write custom serverless code that is invoked by a [trigger][functions-triggers] &mdash; for example, whenever a document is added to blob storage or Cosmos DB.</span></span>

### <a name="logging-and-monitoring"></a><span data-ttu-id="6091c-141">Enregistrement et surveillance</span><span class="sxs-lookup"><span data-stu-id="6091c-141">Logging and monitoring</span></span>

- <span data-ttu-id="6091c-142">**[Application Insights][app-insights]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-142">**[Application Insights][app-insights]**.</span></span> <span data-ttu-id="6091c-143">Utilisez Application Insights pour journaliser les métriques d’application du bot à des fins de supervision, de diagnostic et d’analyse.</span><span class="sxs-lookup"><span data-stu-id="6091c-143">Use Application Insights to log the bot's application metrics for monitoring, diagnostic, and analytical purposes.</span></span>
- <span data-ttu-id="6091c-144">**[Stockage Blob Azure][blob]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-144">**[Azure Blob Storage][blob]**.</span></span> <span data-ttu-id="6091c-145">Le stockage Blob est optimisé pour stocker de grandes quantités de données non structurées.</span><span class="sxs-lookup"><span data-stu-id="6091c-145">Blob storage is optimized for storing massive amounts of unstructured data.</span></span>
- <span data-ttu-id="6091c-146">**[Cosmos DB][cosmosdb]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-146">**[Cosmos DB][cosmosdb]**.</span></span> <span data-ttu-id="6091c-147">Cosmos DB convient parfaitement au stockage de données de journal semi-structurées comme les conversations.</span><span class="sxs-lookup"><span data-stu-id="6091c-147">Cosmos DB is well-suited for storing semi-structured log data such as conversations.</span></span>
- <span data-ttu-id="6091c-148">**[Power BI][power-bi]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-148">**[Power BI][power-bi]**.</span></span> <span data-ttu-id="6091c-149">Utilisez Power BI pour créer des tableaux de bord de supervision pour votre bot.</span><span class="sxs-lookup"><span data-stu-id="6091c-149">Use Power BI to create monitoring dashboards for your bot.</span></span>

### <a name="security-and-governance"></a><span data-ttu-id="6091c-150">Sécurité et gouvernance</span><span class="sxs-lookup"><span data-stu-id="6091c-150">Security and governance</span></span>

- <span data-ttu-id="6091c-151">**[Azure Active Directory][aad]** (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="6091c-151">**[Azure Active Directory][aad]** (Azure AD).</span></span> <span data-ttu-id="6091c-152">Les utilisateurs s’authentifient par le biais d’un fournisseur d’identité comme Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6091c-152">Users will authenticate through an identity provider such as Azure AD.</span></span> <span data-ttu-id="6091c-153">Bot Service gère le flux d’authentification et la gestion des jetons OAuth.</span><span class="sxs-lookup"><span data-stu-id="6091c-153">The Bot Service handles the authentication flow and OAuth token management.</span></span> <span data-ttu-id="6091c-154">Consultez [Ajouter l’authentification à votre bot par le biais d’Azure Bot Service][bot-authentication].</span><span class="sxs-lookup"><span data-stu-id="6091c-154">See [Add authentication to your bot via Azure Bot Service][bot-authentication].</span></span>
- <span data-ttu-id="6091c-155">**[Azure Key Vault][key-vault]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-155">**[Azure Key Vault][key-vault]**.</span></span> <span data-ttu-id="6091c-156">Stockez les informations d’identification et d’autres secrets à l’aide de Key Vault.</span><span class="sxs-lookup"><span data-stu-id="6091c-156">Store credentials and other secrets using Key Vault.</span></span>

### <a name="quality-assurance-and-enhancements"></a><span data-ttu-id="6091c-157">Assurance qualité et améliorations</span><span class="sxs-lookup"><span data-stu-id="6091c-157">Quality assurance and enhancements</span></span>

- <span data-ttu-id="6091c-158">**[Azure DevOps][devops]**.</span><span class="sxs-lookup"><span data-stu-id="6091c-158">**[Azure DevOps][devops]**.</span></span> <span data-ttu-id="6091c-159">Fournit de nombreux services de gestion des applications, notamment le contrôle de code source, la génération, le test, le déploiement et le suivi de projet.</span><span class="sxs-lookup"><span data-stu-id="6091c-159">Provides many services for app management, including source control, building, testing, deployment, and project tracking.</span></span>
- <span data-ttu-id="6091c-160">**[VS Code][vscode]** Éditeur de code léger pour le développement d’applications.</span><span class="sxs-lookup"><span data-stu-id="6091c-160">**[VS Code][vscode]** A lightweight code editor for app development.</span></span> <span data-ttu-id="6091c-161">Vous pouvez utiliser n’importe quel autre environnement de développement intégré (IDE) doté de fonctionnalités similaires.</span><span class="sxs-lookup"><span data-stu-id="6091c-161">You can use any other IDE with similar features.</span></span>

## <a name="design-considerations"></a><span data-ttu-id="6091c-162">Remarques relatives à la conception</span><span class="sxs-lookup"><span data-stu-id="6091c-162">Design considerations</span></span>

<span data-ttu-id="6091c-163">Globalement, un bot de conversation comporte, d’un côté, la fonctionnalité du bot (le « cerveau ») et de l’autre, un ensemble de critères environnants (le « corps »).</span><span class="sxs-lookup"><span data-stu-id="6091c-163">At a high level, a conversational bot can be divided into the bot functionality (the "brain") and a set of surrounding requirements (the "body").</span></span> <span data-ttu-id="6091c-164">Le cerveau comprend les composants qui tiennent compte du domaine, notamment la logique de bot et les fonctionnalités ML (Machine Learning).</span><span class="sxs-lookup"><span data-stu-id="6091c-164">The brain includes the domain-aware components, including the bot logic and ML capabilities.</span></span> <span data-ttu-id="6091c-165">Les autres composants ne dépendent pas du domaine et s’occupent des exigences non fonctionnelles comme les CI/CD, l’assurance qualité et la sécurité.</span><span class="sxs-lookup"><span data-stu-id="6091c-165">Other components are domain agnostic and address non-functional requirements such as CI/CD, quality assurance, and security.</span></span>

![Diagramme logique de la fonctionnalité du bot](./_images/conversational-bot-logical.png)

<span data-ttu-id="6091c-167">Avant d’aborder les spécificités de cette architecture, commençons par nous intéresser au flux de données qui traverse chaque sous-composant de la conception.</span><span class="sxs-lookup"><span data-stu-id="6091c-167">Before getting into the specifics of this architecture, let's start with the data flow through each subcomponent of the design.</span></span> <span data-ttu-id="6091c-168">Le flux de données inclut ceux lancés par l’utilisateur et par le système.</span><span class="sxs-lookup"><span data-stu-id="6091c-168">The data flow includes user-initiated and system-initiated data flows.</span></span>

### <a name="user-message-flow"></a><span data-ttu-id="6091c-169">Flux de messages utilisateur</span><span class="sxs-lookup"><span data-stu-id="6091c-169">User message flow</span></span>

<span data-ttu-id="6091c-170">**Authentification**.</span><span class="sxs-lookup"><span data-stu-id="6091c-170">**Authentication**.</span></span> <span data-ttu-id="6091c-171">Les utilisateurs commencent par s’authentifier à l’aide du mécanisme fourni par leur canal de communication auprès du bot.</span><span class="sxs-lookup"><span data-stu-id="6091c-171">Users start by authenticating themselves using whatever mechanism is provided by their channel of communication with the bot.</span></span> <span data-ttu-id="6091c-172">Le framework du bot prend en charge plusieurs canaux de communication, notamment Cortana, Microsoft Teams, Facebook Messenger, Kik et Slack.</span><span class="sxs-lookup"><span data-stu-id="6091c-172">The bot framework supports many communication channels, including Cortana, Microsoft Teams, Facebook Messenger, Kik, and Slack.</span></span> <span data-ttu-id="6091c-173">Pour obtenir la liste des canaux, consultez [Connecter un bot à des canaux](/azure/bot-service/bot-service-manage-channels).</span><span class="sxs-lookup"><span data-stu-id="6091c-173">For a list of channels, see [Connect a bot to channels](/azure/bot-service/bot-service-manage-channels).</span></span> <span data-ttu-id="6091c-174">Quand vous créez un bot avec Azure Bot Service, le canal [Web Chat][webchat] est automatiquement configuré.</span><span class="sxs-lookup"><span data-stu-id="6091c-174">When you create a bot with Azure Bot Service, the [Web Chat][webchat] channel is automatically configured.</span></span> <span data-ttu-id="6091c-175">Ce canal permet aux utilisateurs d’interagir avec votre bot directement dans une page web.</span><span class="sxs-lookup"><span data-stu-id="6091c-175">This channel allows users to interact with your bot directly in a web page.</span></span> <span data-ttu-id="6091c-176">Vous pouvez également connecter le bot à une application personnalisée à l’aide du canal [Direct Line](/azure/bot-service/bot-service-channel-connect-directline).</span><span class="sxs-lookup"><span data-stu-id="6091c-176">You can also connect the bot to a custom app by using the [Direct Line](/azure/bot-service/bot-service-channel-connect-directline) channel.</span></span> <span data-ttu-id="6091c-177">L’identité de l’utilisateur est utilisée pour fournir un contrôle d’accès en fonction du rôle, ainsi que pour servir du contenu personnalisé.</span><span class="sxs-lookup"><span data-stu-id="6091c-177">The user's identity is used to provide role-based access control, as well as to serve personalized content.</span></span>

<span data-ttu-id="6091c-178">**Message utilisateur**.</span><span class="sxs-lookup"><span data-stu-id="6091c-178">**User message**.</span></span> <span data-ttu-id="6091c-179">Une fois authentifié, l’utilisateur envoie un message au bot.</span><span class="sxs-lookup"><span data-stu-id="6091c-179">Once authenticated, the user sends a message to the bot.</span></span> <span data-ttu-id="6091c-180">Le bot lit le message et le route vers un service de compréhension du langage naturel comme [LUIS](/azure/cognitive-services/luis/).</span><span class="sxs-lookup"><span data-stu-id="6091c-180">The bot reads the message and routes it to a natural language understanding service such as [LUIS](/azure/cognitive-services/luis/).</span></span> <span data-ttu-id="6091c-181">Cette étape permet d’obtenir les **intentions** (ce que l’utilisateur veut faire) et les **entités** (ce à quoi l’utilisateur s’intéresse).</span><span class="sxs-lookup"><span data-stu-id="6091c-181">This step gets the **intents** (what the user wants to do) and **entities** (what things the user is interested in).</span></span> <span data-ttu-id="6091c-182">Le bot génère ensuite une requête qu’il transmet à un service qui sert des informations, comme [Recherche Azure][search] pour récupérer des documents, [QnA Maker](https://www.qnamaker.ai/) pour des questions fréquentes (FAQ) ou une base de connaissances personnalisée.</span><span class="sxs-lookup"><span data-stu-id="6091c-182">The bot then builds a query that it passes to a service that serves information, such as [Azure Search][search] for document retrieval, [QnA Maker](https://www.qnamaker.ai/) for FAQs, or a custom knowledge base.</span></span> <span data-ttu-id="6091c-183">Le bot utilise ces résultats pour construire une réponse.</span><span class="sxs-lookup"><span data-stu-id="6091c-183">The bot uses these results to construct a response.</span></span> <span data-ttu-id="6091c-184">Pour obtenir les meilleurs résultats d’une requête donnée, le bot peut effectuer plusieurs appels bidirectionnels à ces services à distance.</span><span class="sxs-lookup"><span data-stu-id="6091c-184">To give the best result for a  given query, the bot might make several back-and-forth calls to these remote services.</span></span>

<span data-ttu-id="6091c-185">**Réponse**.</span><span class="sxs-lookup"><span data-stu-id="6091c-185">**Response**.</span></span> <span data-ttu-id="6091c-186">À ce stade, le bot a déterminé la meilleure réponse et l’envoie à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6091c-186">At this point, the bot has determined the best response and sends it to the user.</span></span> <span data-ttu-id="6091c-187">Si le score de confiance de la meilleure réponse est faible, la réponse peut être une question visant à lever les ambiguïtés ou une reconnaissance de l’incapacité du bot à répondre de manière adéquate.</span><span class="sxs-lookup"><span data-stu-id="6091c-187">If the confidence score of the best-matched answer is low, the response might be a disambiguation question or an acknowledgement that the bot could not reply adequately.</span></span>

<span data-ttu-id="6091c-188">**Journalisation**.</span><span class="sxs-lookup"><span data-stu-id="6091c-188">**Logging**.</span></span> <span data-ttu-id="6091c-189">Lors de la réception d’une demande de l’utilisateur ou de l’envoi d’une réponse, toutes les actions de conversation doivent être journalisées dans un magasin de journalisation, ainsi que les mesures de performances et les erreurs générales des services externes.</span><span class="sxs-lookup"><span data-stu-id="6091c-189">When a user request is received or a response is sent, all conversation actions should be logged to a logging store, along with performance metrics and general errors from external services.</span></span> <span data-ttu-id="6091c-190">Ces journaux se montreront utiles ultérieurement pour diagnostiquer les problèmes et améliorer le système.</span><span class="sxs-lookup"><span data-stu-id="6091c-190">These logs will be useful later when diagnosing issues and improving the system.</span></span>

<span data-ttu-id="6091c-191">**Commentaires**.</span><span class="sxs-lookup"><span data-stu-id="6091c-191">**Feedback**.</span></span> <span data-ttu-id="6091c-192">Une autre bonne pratique consiste à collecter les commentaires des utilisateurs et les niveaux de satisfaction.</span><span class="sxs-lookup"><span data-stu-id="6091c-192">Another good practice is to collect user feedback and satisfaction scores.</span></span> <span data-ttu-id="6091c-193">Dans le cadre d’un suivi consécutif à la réponse finale du bot, ce dernier doit demander à l’utilisateur d’évaluer s’il est satisfait de la réponse.</span><span class="sxs-lookup"><span data-stu-id="6091c-193">As a follow up to the bot's final response, the bot should ask the user to rate their satisfaction with the reply.</span></span> <span data-ttu-id="6091c-194">Les commentaires peuvent vous aider à résoudre le problème lié à la compréhension du langage naturel lors du démarrage à froid, afin d’améliorer constamment la précision des réponses.</span><span class="sxs-lookup"><span data-stu-id="6091c-194">Feedback can help you to solve the cold start problem of natural language understanding, and continually improve the accuracy of responses.</span></span>

### <a name="system-data-flow"></a><span data-ttu-id="6091c-195">Flux de données système</span><span class="sxs-lookup"><span data-stu-id="6091c-195">System Data Flow</span></span>

<span data-ttu-id="6091c-196">**ETL**.</span><span class="sxs-lookup"><span data-stu-id="6091c-196">**ETL**.</span></span> <span data-ttu-id="6091c-197">Le bot s’appuie sur les informations et les connaissances extraites des données brutes par un processus ETL dans le back-end.</span><span class="sxs-lookup"><span data-stu-id="6091c-197">The bot relies on information and knowledge extracted from the raw data by an ETL process in the backend.</span></span> <span data-ttu-id="6091c-198">Ces données peuvent être structurées (base de données SQL), semi-structurées (système CRM, questions fréquentes (FAQ)) ou non structurées (documents Word, PDF, journaux web).</span><span class="sxs-lookup"><span data-stu-id="6091c-198">This data might be structured (SQL database), semi-structured (CRM system, FAQs), or unstructured (Word documents, PDFs, web logs).</span></span> <span data-ttu-id="6091c-199">Un sous-système ETL extrait les données selon une planification fixe.</span><span class="sxs-lookup"><span data-stu-id="6091c-199">An ETL subsystem extracts the data on a fixed schedule.</span></span> <span data-ttu-id="6091c-200">Le contenu est transformé et enrichi, puis chargé dans un magasin de données intermédiaire, comme Cosmos DB ou Stockage Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="6091c-200">The content is transformed and enriched, then loaded into an intermediary data store, such as Cosmos DB or Azure Blob Storage.</span></span>

<span data-ttu-id="6091c-201">Les données contenues dans le magasin intermédiaire sont ensuite indexées dans Recherche Azure à des fins de récupération de documents, chargées dans QnA Maker pour créer des paires question/réponse ou chargées dans une application web personnalisée à des fins de traitement de texte non structuré.</span><span class="sxs-lookup"><span data-stu-id="6091c-201">Data in the intermediary store is then indexed into Azure Search for document retrieval, loaded into QnA Maker to create question and answer pairs, or loaded into a custom web app for unstructured text processing.</span></span> <span data-ttu-id="6091c-202">Les données sont également utilisées pour entraîner un modèle LUIS à l’extraction des intentions et entités.</span><span class="sxs-lookup"><span data-stu-id="6091c-202">The data is also used to train a LUIS model for intent and entity extraction.</span></span>

<span data-ttu-id="6091c-203">**Assurance qualité**.</span><span class="sxs-lookup"><span data-stu-id="6091c-203">**Quality assurance**.</span></span> <span data-ttu-id="6091c-204">Les journaux de conversation sont utilisés pour diagnostiquer et corriger des bogues, fournir un aperçu de la façon dont le bot est utilisé et effectuer le suivi des performances globales.</span><span class="sxs-lookup"><span data-stu-id="6091c-204">The conversation logs are used to diagnose and fix bugs, provide insight into how the bot is being used, and track overall performance.</span></span> <span data-ttu-id="6091c-205">Les données de commentaires s’avèrent utiles pour réentraîner les modèles d’intelligence artificielle afin d’améliorer les performances du bot.</span><span class="sxs-lookup"><span data-stu-id="6091c-205">Feedback data is useful for retraining the AI models to improve bot performance.</span></span>

## <a name="building-a-bot"></a><span data-ttu-id="6091c-206">Création d’un bot</span><span class="sxs-lookup"><span data-stu-id="6091c-206">Building a bot</span></span>

<span data-ttu-id="6091c-207">Avant même d’écrire la moindre ligne de code, il est important d’écrire une spécification fonctionnelle pour donner à l’équipe de développeurs une idée précise de ce que le bot est censé faire.</span><span class="sxs-lookup"><span data-stu-id="6091c-207">Before you even write a single line of code, it's important to write a functional specification so the development team has a clear idea of what the bot is expected to do.</span></span> <span data-ttu-id="6091c-208">Cette spécification doit inclure la liste relativement complète des entrées utilisateur et les réponses attendues du bot dans différents domaines de connaissances.</span><span class="sxs-lookup"><span data-stu-id="6091c-208">The specification should include a reasonably comprehensive list of user inputs and expected bot responses in various knowledge domains.</span></span> <span data-ttu-id="6091c-209">Ce document vital constitue un guide précieux pour développer et tester votre bot.</span><span class="sxs-lookup"><span data-stu-id="6091c-209">This living document will be an invaluable guide for developing and testing your bot.</span></span>

### <a name="ingest-data"></a><span data-ttu-id="6091c-210">Réception de données</span><span class="sxs-lookup"><span data-stu-id="6091c-210">Ingest data</span></span>

<span data-ttu-id="6091c-211">Ensuite, identifiez les sources de données qui vont permettre au bot d’interagir de façon intelligente avec les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="6091c-211">Next, identify the data sources that will enable the bot to interact intelligently with users.</span></span> <span data-ttu-id="6091c-212">Comme mentionné précédemment, ces sources de données peuvent contenir des jeux de données structurées, semi-structurées ou non structurées.</span><span class="sxs-lookup"><span data-stu-id="6091c-212">As mentioned earlier, these data sources could contain structured, semi-structured, or unstructured data sets.</span></span> <span data-ttu-id="6091c-213">Dans un premier temps, une bonne approche consiste à effectuer une copie unique des données dans un magasin central, comme Cosmos DB ou Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="6091c-213">When you're getting started, a good approach is to make a one-off copy of the data to a central store, such as Cosmos DB or Azure Storage.</span></span> <span data-ttu-id="6091c-214">Par la suite, il est préférable de créer un pipeline d’ingestion de données automatisée pour tenir ces données à jour.</span><span class="sxs-lookup"><span data-stu-id="6091c-214">As you progress, you should create an automated data ingestion pipeline to keep this data current.</span></span> <span data-ttu-id="6091c-215">Les options utilisables pour un pipeline d’ingestion automatisée incluent Data Factory, Functions et Logic Apps.</span><span class="sxs-lookup"><span data-stu-id="6091c-215">Options for an automated ingestion pipeline include Data Factory, Functions, and Logic Apps.</span></span> <span data-ttu-id="6091c-216">Selon les magasins de données et les schémas, vous pouvez peut-être utiliser une combinaison de ces approches.</span><span class="sxs-lookup"><span data-stu-id="6091c-216">Depending on the data stores and the schemas, you might use a combination of these approaches.</span></span>

<span data-ttu-id="6091c-217">À vos débuts, il est judicieux d’utiliser le portail Azure pour créer manuellement des ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="6091c-217">As you get started, it's reasonable to use the Azure portal to manually create Azure resources.</span></span> <span data-ttu-id="6091c-218">Par la suite, pensez plutôt à automatiser le déploiement de ces ressources.</span><span class="sxs-lookup"><span data-stu-id="6091c-218">Later on, you should put more thought into automating the deployment of these resources.</span></span>

### <a name="core-bot-logic-and-ux"></a><span data-ttu-id="6091c-219">Logique de bot principale et expérience utilisateur</span><span class="sxs-lookup"><span data-stu-id="6091c-219">Core bot logic and UX</span></span>

<span data-ttu-id="6091c-220">Une fois que vous avez une spécification et quelques données, il est temps de commencer à confronter votre bot à la réalité.</span><span class="sxs-lookup"><span data-stu-id="6091c-220">Once you have a specification and some data, it's time to start making your bot into reality.</span></span> <span data-ttu-id="6091c-221">Concentrons-nous sur la logique de bot principale.</span><span class="sxs-lookup"><span data-stu-id="6091c-221">Let's focus on the core bot logic.</span></span> <span data-ttu-id="6091c-222">Il s’agit du code qui gère la conversation avec l’utilisateur, notamment la logique de routage, la logique de levée d’ambiguïté et la journalisation.</span><span class="sxs-lookup"><span data-stu-id="6091c-222">This is the code that handles the conversation with the user, including the routing logic, disambiguation logic, and logging.</span></span> <span data-ttu-id="6091c-223">Commencez par vous familiariser avec [Bot Framework][bot-framework], notamment les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="6091c-223">Start by familiarizing yourself with the [Bot Framework][bot-framework], including:</span></span>

- <span data-ttu-id="6091c-224">Concepts et terminologie de base utilisés dans le framework, en particulier les [conversations], les [tours] et les [activités].</span><span class="sxs-lookup"><span data-stu-id="6091c-224">Basic concepts and terminology used in the framework, especially [conversations], [turns], and [activities].</span></span>
- <span data-ttu-id="6091c-225">[service Bot Connector](/azure/bot-service/rest-api/bot-framework-rest-connector-quickstart), qui gère les réseaux entre le bot et vos canaux.</span><span class="sxs-lookup"><span data-stu-id="6091c-225">The [Bot Connector service](/azure/bot-service/rest-api/bot-framework-rest-connector-quickstart), which handles the networking between the bot and your channels.</span></span>
- <span data-ttu-id="6091c-226">Gestion de l’[état](/azure/bot-service/bot-builder-concept-state) de la conversation, soit dans la mémoire, soit, encore mieux, dans un magasin comme Stockage Blob Azure ou Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="6091c-226">How conversation [state](/azure/bot-service/bot-builder-concept-state) is maintained, either in memory or better yet in a store such as Azure Blob Storage or Azure Cosmos DB.</span></span>
- <span data-ttu-id="6091c-227">[Middleware (intergiciel)](/azure/bot-service/bot-builder-basics#middleware) et la façon dont il peut servir à raccorder votre bot avec des services externes, comme Cognitive Services.</span><span class="sxs-lookup"><span data-stu-id="6091c-227">[Middleware](/azure/bot-service/bot-builder-basics#middleware), and how it can be used to hook up your bot with external services, such as Cognitive Services.</span></span>

<span data-ttu-id="6091c-228">Pour enrichir [l’expérience utilisateur](/azure/bot-service/bot-service-design-user-experience), il existe de nombreuses options.</span><span class="sxs-lookup"><span data-stu-id="6091c-228">For a rich [user experience](/azure/bot-service/bot-service-design-user-experience), there are many options.</span></span>

- <span data-ttu-id="6091c-229">Vous pouvez utiliser des [cartes](/azure/bot-service/bot-service-design-user-experience#cards) pour inclure des boutons, des images, des carrousels et des menus.</span><span class="sxs-lookup"><span data-stu-id="6091c-229">You can use [cards](/azure/bot-service/bot-service-design-user-experience#cards) to include buttons, images, carousels, and menus.</span></span>
- <span data-ttu-id="6091c-230">Un bot peut prendre en charge des fonctions vocales.</span><span class="sxs-lookup"><span data-stu-id="6091c-230">A bot can support speech.</span></span>
- <span data-ttu-id="6091c-231">Vous pouvez même incorporer votre bot dans une application ou un site web pour utiliser les fonctionnalités de l’application qui l’héberge.</span><span class="sxs-lookup"><span data-stu-id="6091c-231">You can even embed your bot in an app or website and use the capabilities of the app hosting it.</span></span>

<span data-ttu-id="6091c-232">Pour commencer, vous pouvez générer votre bot en ligne à l’aide d’[Azure Bot Service](/azure/bot-service/bot-service-quickstart), en sélectionnant parmi les modèles C# et Node.js disponibles.</span><span class="sxs-lookup"><span data-stu-id="6091c-232">To get started, you can build your bot online using the [Azure Bot Service](/azure/bot-service/bot-service-quickstart), selecting from the available C# and Node.js templates.</span></span> <span data-ttu-id="6091c-233">À mesure que votre bot devient plus sophistiqué, en revanche, vous avez besoin de le créer localement, puis de le déployer sur le web.</span><span class="sxs-lookup"><span data-stu-id="6091c-233">As your bot gets more sophisticated, however, you will need to create your bot locally then deploy it to the web.</span></span> <span data-ttu-id="6091c-234">Choisissez un environnement de développement intégré (IDE), comme Visual Studio ou Visual Studio Code, ainsi qu’un langage de programmation.</span><span class="sxs-lookup"><span data-stu-id="6091c-234">Choose an IDE, such as Visual Studio or Visual Studio Code, and a programming language.</span></span> <span data-ttu-id="6091c-235">Des SDK sont disponibles pour les langages suivants :</span><span class="sxs-lookup"><span data-stu-id="6091c-235">SDKs are available for the following languages:</span></span>

- [<span data-ttu-id="6091c-236">C#</span><span class="sxs-lookup"><span data-stu-id="6091c-236">C#</span></span>](https://github.com/microsoft/botbuilder-dotnet)
- [<span data-ttu-id="6091c-237">JavaScript</span><span class="sxs-lookup"><span data-stu-id="6091c-237">JavaScript</span></span>](https://github.com/microsoft/botbuilder-js)
- <span data-ttu-id="6091c-238">[Java](https://github.com/microsoft/botbuilder-java) (préversion)</span><span class="sxs-lookup"><span data-stu-id="6091c-238">[Java](https://github.com/microsoft/botbuilder-java) (preview)</span></span>
- <span data-ttu-id="6091c-239">[Python](https://github.com/microsoft/botbuilder-python) (préversion)</span><span class="sxs-lookup"><span data-stu-id="6091c-239">[Python](https://github.com/microsoft/botbuilder-python) (preview)</span></span>

<span data-ttu-id="6091c-240">Pour démarrer, vous pouvez télécharger le code source du bot que vous avez créé à l’aide d’Azure Bot Service.</span><span class="sxs-lookup"><span data-stu-id="6091c-240">As a starting point, you can download the source code for the bot you created using the Azure Bot Service.</span></span> <span data-ttu-id="6091c-241">Vous pouvez également rechercher un [exemple de code](https://github.com/Microsoft/BotBuilder-Samples/blob/master/README.md), qu’il s’agisse de simples bots d’écho ou de bots plus sophistiqués qui s’intègrent à divers services d’intelligence artificielle.</span><span class="sxs-lookup"><span data-stu-id="6091c-241">You can also find [sample code](https://github.com/Microsoft/BotBuilder-Samples/blob/master/README.md), from simple echo bots to more sophisticated bots that integrate with various AI services.</span></span>

### <a name="add-smarts-to-your-bot"></a><span data-ttu-id="6091c-242">Donner de la jugeote à votre bot</span><span class="sxs-lookup"><span data-stu-id="6091c-242">Add smarts to your bot</span></span>

<span data-ttu-id="6091c-243">Pour un bot simple doté d’une liste de commandes bien définie, vous pouvez peut-être utiliser une approche qui s’appuie sur des règles pour analyser l’entrée utilisateur par le biais de l’expression régulière.</span><span class="sxs-lookup"><span data-stu-id="6091c-243">For a simple bot with a well-defined list of commands, you might be able to use a rules-based approach to parse the user input via regex.</span></span> <span data-ttu-id="6091c-244">Cela présente l’avantage d’être déterministe et compréhensible.</span><span class="sxs-lookup"><span data-stu-id="6091c-244">This has the advantage of being deterministic and understandable.</span></span> <span data-ttu-id="6091c-245">Toutefois, quand votre bot a besoin de comprendre les intentions et les entités d’un message en langage plus naturel, des services d’intelligence artificielle peuvent aider.</span><span class="sxs-lookup"><span data-stu-id="6091c-245">However, when your bot needs to understand the intents and entities of a more natural-language message, there are AI services that can help.</span></span>

- <span data-ttu-id="6091c-246">LUIS est particulièrement conçu pour comprendre les intentions et les entités de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6091c-246">LUIS is specifically designed to understand user intents and entities.</span></span> <span data-ttu-id="6091c-247">Vous l’entraînez avec une collection ni trop grande ni trop petite d’[entrées utilisateur](/azure/cognitive-services/luis/luis-concept-utterance) pertinentes et de réponses souhaitées, et il retourne les intentions et les entités du message donné d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6091c-247">You train it with a moderately sized collection of relevant [user input](/azure/cognitive-services/luis/luis-concept-utterance) and desired responses, and it returns the intents and entities for a user's given message.</span></span>

- <span data-ttu-id="6091c-248">Le service Recherche Azure peut fonctionner de concert avec LUIS.</span><span class="sxs-lookup"><span data-stu-id="6091c-248">Azure Search can work alongside LUIS.</span></span> <span data-ttu-id="6091c-249">Avec Recherche, vous créez des index de recherche sur toutes les données pertinentes.</span><span class="sxs-lookup"><span data-stu-id="6091c-249">Using Search, you create searchable indexes over all relevant data.</span></span> <span data-ttu-id="6091c-250">Le bot interroge ces index pour obtenir les entités extraites par LUIS.</span><span class="sxs-lookup"><span data-stu-id="6091c-250">The bot queries these indexes for the entities extracted by LUIS.</span></span> <span data-ttu-id="6091c-251">Recherche Azure prend également en charge les [synonymes][synonyms], ce qui permet d’élargir le champ des correspondances de mots corrects.</span><span class="sxs-lookup"><span data-stu-id="6091c-251">Azure Search also supports [synonyms][synonyms], which can widen the net of correct word mappings.</span></span>

- <span data-ttu-id="6091c-252">QnA Maker est un autre service conçu pour retourner des réponses à des questions données.</span><span class="sxs-lookup"><span data-stu-id="6091c-252">QnA Maker is another service that is designed to return answers for given questions.</span></span> <span data-ttu-id="6091c-253">En règle générale, il est entraîné sur des données semi-structurées comme les questions fréquentes (FAQ).</span><span class="sxs-lookup"><span data-stu-id="6091c-253">It's typically trained over semi-structured data such as FAQs.</span></span>

<span data-ttu-id="6091c-254">Votre bot peut utiliser d’autres services d’intelligence artificielle pour enrichir davantage l’expérience utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6091c-254">Your bot can use other AI services to further enrich the user experience.</span></span> <span data-ttu-id="6091c-255">La [suite Cognitive Services des services d’intelligence artificielle prédéfinis](https://azure.microsoft.com/en-us/services/cognitive-services/?v=18.44a) (qui inclut LUIS et QnA Maker) propose des services de vision, voix, langue, recherche et localisation.</span><span class="sxs-lookup"><span data-stu-id="6091c-255">The [Cognitive Services suite of pre-built AI](https://azure.microsoft.com/en-us/services/cognitive-services/?v=18.44a) services (which includes LUIS and QnA Maker) has services for vision, speech, language, search, and location.</span></span> <span data-ttu-id="6091c-256">Vous pouvez ajouter rapidement des fonctionnalités comme la traduction linguistique, la vérification orthographique, l’analyse des sentiments, la reconnaissance optique de caractères, la localisation et la modération du contenu.</span><span class="sxs-lookup"><span data-stu-id="6091c-256">You can quickly add functionality such as language translation, spell checking, sentiment analysis, OCR, location awareness, and content moderation.</span></span> <span data-ttu-id="6091c-257">Ces services peuvent être connectés sous forme de modules de middleware dans votre bot pour interagir de manière plus naturelle et intelligente avec l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6091c-257">These services can be wired up as middleware modules in your bot to interact more naturally and intelligently with the user.</span></span>

<span data-ttu-id="6091c-258">Une autre option consiste à intégrer votre propre service d’intelligence artificielle personnalisé.</span><span class="sxs-lookup"><span data-stu-id="6091c-258">Another option is to integrate your own custom AI service.</span></span> <span data-ttu-id="6091c-259">Cette approche est plus complexe, mais elle vous donne une entière flexibilité dans l’algorithme de machine learning, l’entraînement et le modèle.</span><span class="sxs-lookup"><span data-stu-id="6091c-259">This approach is more complex, but gives you complete flexibility in terms of the machine learning algorithm, training, and model.</span></span> <span data-ttu-id="6091c-260">Par exemple, vous pouvez implémenter votre propre modélisation et utiliser un algorithme comme [LDA][lda] pour rechercher des documents similaires ou pertinents.</span><span class="sxs-lookup"><span data-stu-id="6091c-260">For example, you could implement your own topic modeling and use algorithm such as [LDA][lda] to find similar or relevant documents.</span></span> <span data-ttu-id="6091c-261">Une bonne approche consiste à exposer votre solution d’intelligence artificielle personnalisée en tant que point de terminaison de service web, puis à appeler le point de terminaison à partir de la logique de bot principale.</span><span class="sxs-lookup"><span data-stu-id="6091c-261">A good approach is to expose your custom AI solution as a web service endpoint, and call the endpoint from the core bot logic.</span></span> <span data-ttu-id="6091c-262">Le service web peut être hébergé dans App Service ou dans un cluster de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="6091c-262">The web service could be hosted in App Service or in a cluster of VMs.</span></span> <span data-ttu-id="6091c-263">[Azure Machine Learning][aml] propose plusieurs services et bibliothèques pour vous aider à [entraîner](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/training) et à [déployer](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/deployment) vos modèles.</span><span class="sxs-lookup"><span data-stu-id="6091c-263">[Azure Machine Learning][aml] provides a number of services and libraries to assist you in [training](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/training) and [deploying](https://github.com/Azure/MachineLearningNotebooks/tree/master/how-to-use-azureml/deployment) your models.</span></span>

## <a name="quality-assurance-and-enhancement"></a><span data-ttu-id="6091c-264">Assurance qualité et amélioration</span><span class="sxs-lookup"><span data-stu-id="6091c-264">Quality assurance and enhancement</span></span>

<span data-ttu-id="6091c-265">**Journalisation**.</span><span class="sxs-lookup"><span data-stu-id="6091c-265">**Logging**.</span></span> <span data-ttu-id="6091c-266">Journalisez les conversations de l’utilisateur avec le bot, notamment les mesures de performances sous-jacentes et les erreurs éventuelles.</span><span class="sxs-lookup"><span data-stu-id="6091c-266">Log user conversations with the bot, including the underlying performance metrics and any errors.</span></span> <span data-ttu-id="6091c-267">Ces journaux s’avèrent très précieux pour déboguer les problèmes, comprendre les interactions de l’utilisateur et améliorer le système.</span><span class="sxs-lookup"><span data-stu-id="6091c-267">These logs will prove invaluable for debugging issues, understanding user interactions, and improving the system.</span></span> <span data-ttu-id="6091c-268">Différents magasins de données peuvent convenir à différents types de journaux.</span><span class="sxs-lookup"><span data-stu-id="6091c-268">Different data stores might be appropriate for different types of logs.</span></span> <span data-ttu-id="6091c-269">Par exemple, envisagez d’utiliser Application Insights pour les journaux web, Cosmos DB pour les conversations et Stockage Azure pour les grosses charges utiles.</span><span class="sxs-lookup"><span data-stu-id="6091c-269">For example, consider Application Insights for web logs, Cosmos DB for conversations, and Azure Storage for large payloads.</span></span> <span data-ttu-id="6091c-270">Consultez [Écrire directement dans Stockage Azure][transcript-storage].</span><span class="sxs-lookup"><span data-stu-id="6091c-270">See [Write directly to Azure Storage][transcript-storage].</span></span>

<span data-ttu-id="6091c-271">**Commentaires**.</span><span class="sxs-lookup"><span data-stu-id="6091c-271">**Feedback**.</span></span> <span data-ttu-id="6091c-272">Il est également important de comprendre le niveau de satisfaction des utilisateurs vis-à-vis de leurs interactions avec le bot.</span><span class="sxs-lookup"><span data-stu-id="6091c-272">It's also important to understand how satisfied users are with their bot interactions.</span></span> <span data-ttu-id="6091c-273">Si vous avez recueilli les commentaires des utilisateurs, vous pouvez utiliser ces données pour concentrer vos efforts sur l’amélioration de certaines interactions et sur le réentraînement des modèles d’intelligence artificielle à des fins d’amélioration des performances.</span><span class="sxs-lookup"><span data-stu-id="6091c-273">If you have a record of user feedback, you can use this data to focus your efforts on improving certain interactions and retraining the AI models for improved performance.</span></span> <span data-ttu-id="6091c-274">Utilisez les commentaires pour réentraîner les modèles, comme LUIS, dans votre système.</span><span class="sxs-lookup"><span data-stu-id="6091c-274">Use the feedback to retrain the models, such as LUIS, in your system.</span></span>

<span data-ttu-id="6091c-275">**Test**.</span><span class="sxs-lookup"><span data-stu-id="6091c-275">**Testing**.</span></span> <span data-ttu-id="6091c-276">Tester un bot implique des tests unitaires, des tests d’intégration, des tests de régression et des tests fonctionnels.</span><span class="sxs-lookup"><span data-stu-id="6091c-276">Testing a bot involves unit tests, integration tests, regression tests, and functional tests.</span></span> <span data-ttu-id="6091c-277">À des fins de test, nous recommandons d’enregistrer des réponses HTTP réelles des services externes, comme Recherche Azure ou QnA Maker, pour qu’elles puissent être lues pendant le test unitaire sans avoir à effectuer des appels réseau réels aux services externes.</span><span class="sxs-lookup"><span data-stu-id="6091c-277">For testing, we recommend recording real HTTP responses from external services, such as Azure Search or QnA Maker, so they can be played back during unit testing without needing to make real network calls to external services.</span></span>

>[!NOTE]
> <span data-ttu-id="6091c-278">Pour lancer votre développement dans ces domaines, consultez [Utilitaires de génération de bots pour JavaScript][git-repo-base].</span><span class="sxs-lookup"><span data-stu-id="6091c-278">To jump-start your development in these areas, look at the [Botbuilder Utils for JavaScript][git-repo-base].</span></span> <span data-ttu-id="6091c-279">Ce dépôt contient des exemples de code d’utilitaire pour les bots générés avec [Microsoft Bot Framework v4][bot-framework] et exécutant Node.js.</span><span class="sxs-lookup"><span data-stu-id="6091c-279">This repo contains sample utility code for bots built with [Microsoft Bot Framework v4][bot-framework] and running Node.js.</span></span> <span data-ttu-id="6091c-280">Il inclut les packages suivants :</span><span class="sxs-lookup"><span data-stu-id="6091c-280">It includes the following packages:</span></span>
>
> - <span data-ttu-id="6091c-281">[Magasin de journalisation de Cosmos DB][cosmosdb-logger].</span><span class="sxs-lookup"><span data-stu-id="6091c-281">[Cosmos DB Logging Store][cosmosdb-logger].</span></span> <span data-ttu-id="6091c-282">Montre comment stocker et interroger des journaux de bot dans Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="6091c-282">Shows how to store and query bot logs in Cosmos DB.</span></span>
> - <span data-ttu-id="6091c-283">[Magasin de journalisation d’Application Insights][appinsights-logger].</span><span class="sxs-lookup"><span data-stu-id="6091c-283">[Application Insights Logging Store][appinsights-logger].</span></span> <span data-ttu-id="6091c-284">Montre comment stocker et interroger des journaux de bot dans Application Insights.</span><span class="sxs-lookup"><span data-stu-id="6091c-284">Shows how to store and query bot logs in Application Insights.</span></span>
> - <span data-ttu-id="6091c-285">[Middleware de collecte de commentaires][feedback-util].</span><span class="sxs-lookup"><span data-stu-id="6091c-285">[Feedback Collection Middleware][feedback-util].</span></span> <span data-ttu-id="6091c-286">Exemple de middleware (intergiciel) fournissant un mécanisme de demande de commentaires d’utilisateur de bot.</span><span class="sxs-lookup"><span data-stu-id="6091c-286">Sample middleware that provides a bot user feedback-request mechanism.</span></span>
> - <span data-ttu-id="6091c-287">[Enregistreur de test HTTP][testing util].</span><span class="sxs-lookup"><span data-stu-id="6091c-287">[Http Test Recorder][testing util].</span></span> <span data-ttu-id="6091c-288">Enregistre le trafic HTTP de services externes vers le bot.</span><span class="sxs-lookup"><span data-stu-id="6091c-288">Records HTTP traffic from services external to the bot.</span></span> <span data-ttu-id="6091c-289">Ce package est préintégré avec la prise en charge de LUIS, Recherche Azure et QnAMaker, mais des extensions sont disponibles pour prendre en charge n’importe quel service.</span><span class="sxs-lookup"><span data-stu-id="6091c-289">It comes pre-built with support for LUIS, Azure Search, and QnAMaker, but extensions are available to support any service.</span></span> <span data-ttu-id="6091c-290">Ceci vous permet d’automatiser les tests de bot.</span><span class="sxs-lookup"><span data-stu-id="6091c-290">This helps you automate bot testing.</span></span>
>
> <span data-ttu-id="6091c-291">Ces packages sont fournis sous forme d’exemple de code d’utilitaire, sans aucune garantie de prise en charge ni mise à jour.</span><span class="sxs-lookup"><span data-stu-id="6091c-291">These packages are provided as utility sample code, and come with no guarantee of support or updates.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="6091c-292">Considérations relatives à la disponibilité</span><span class="sxs-lookup"><span data-stu-id="6091c-292">Availability considerations</span></span>

<span data-ttu-id="6091c-293">Quand vous lancez de nouvelles fonctionnalités ou de nouveaux correctifs de bugs dans votre bot, préférez utiliser plusieurs environnements de déploiement, tels que des environnements de préproduction et de production.</span><span class="sxs-lookup"><span data-stu-id="6091c-293">As you roll out new features or bug fixes to your bot, it's best to use multiple deployment environments, such as staging and production.</span></span> <span data-ttu-id="6091c-294">L’utilisation des [emplacements][slots] de déploiement [Azure DevOps][devops] vous permet de le faire sans temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="6091c-294">Using deployment [slots][slots] from [Azure DevOps][devops] allows you to do this with zero downtime.</span></span> <span data-ttu-id="6091c-295">Vous pouvez tester vos dernières mises à niveau dans l’environnement de préproduction avant de les passer à l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="6091c-295">You can test your latest upgrades in the staging environment before swapping them to the production environment.</span></span> <span data-ttu-id="6091c-296">En termes de gestion de la charge, App Service est conçu pour effectuer un scale-up ou un scale-out manuellement ou automatiquement.</span><span class="sxs-lookup"><span data-stu-id="6091c-296">In terms of handling load, App Service is designed to scale up or out manually or automatically.</span></span> <span data-ttu-id="6091c-297">Étant donné que votre bot est hébergé dans l’infrastructure mondiale des centres de données de Microsoft, vous bénéficiez de garanties sur la haute disponibilité du SLA App Service.</span><span class="sxs-lookup"><span data-stu-id="6091c-297">Because your bot is hosted in Microsoft's global datacenter infrastructure, the App Service SLA promises high availability.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="6091c-298">Considérations relatives à la sécurité</span><span class="sxs-lookup"><span data-stu-id="6091c-298">Security considerations</span></span>

<span data-ttu-id="6091c-299">Comme avec toute autre application, le bot peut être conçu pour gérer des données sensibles.</span><span class="sxs-lookup"><span data-stu-id="6091c-299">As with any other application, the bot can be designed to handle sensitive data.</span></span> <span data-ttu-id="6091c-300">Ainsi, veillez à limiter les personnes qui peuvent se connecter au bot et l’utiliser.</span><span class="sxs-lookup"><span data-stu-id="6091c-300">Therefore, restrict who can sign in and use the bot.</span></span> <span data-ttu-id="6091c-301">Limitez également les données accessibles, en fonction de l’identité ou du rôle de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6091c-301">Also limit which data can be accessed, based on the user's identity or role.</span></span> <span data-ttu-id="6091c-302">Utilisez Azure AD pour l’identité et le contrôle d’accès et Key Vault pour gérer les clés et les secrets.</span><span class="sxs-lookup"><span data-stu-id="6091c-302">Use Azure AD for identity and access control and Key Vault to manage keys and secrets.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="6091c-303">Considérations relatives à la facilité de gestion</span><span class="sxs-lookup"><span data-stu-id="6091c-303">Manageability considerations</span></span>

### <a name="monitoring-and-reporting"></a><span data-ttu-id="6091c-304">Surveillance et création de rapports</span><span class="sxs-lookup"><span data-stu-id="6091c-304">Monitoring and reporting</span></span>

<span data-ttu-id="6091c-305">Une fois que votre bot s’exécute en production, vous avez besoin d’une équipe DevOps pour que cela continue.</span><span class="sxs-lookup"><span data-stu-id="6091c-305">Once your bot is running in production, you will need a DevOps team to keep it that way.</span></span> <span data-ttu-id="6091c-306">Supervisez en permanence le système pour maintenir le fonctionnement du bot à son niveau optimal.</span><span class="sxs-lookup"><span data-stu-id="6091c-306">Continually monitor the system to ensure the bot operates at peak performance.</span></span> <span data-ttu-id="6091c-307">Utilisez les journaux envoyés à Application Insights ou Cosmos DB pour créer des tableaux de bord de supervision, en utilisant Application Insights lui-même, Power BI ou un tableau de bord d’application web personnalisé.</span><span class="sxs-lookup"><span data-stu-id="6091c-307">Use the logs sent to Application Insights or Cosmos DB to create monitoring dashboards, either using Application Insights itself, Power BI, or a custom web app dashboard.</span></span> <span data-ttu-id="6091c-308">Envoyez des alertes à l’équipe DevOps si des erreurs critiques se produisent ou si les performances chutent en dessous d’un seuil acceptable.</span><span class="sxs-lookup"><span data-stu-id="6091c-308">Send alerts to the DevOps team if critical errors occur or performance falls below an acceptable threshold.</span></span>

### <a name="automated-resource-deployment"></a><span data-ttu-id="6091c-309">Déploiement automatisé des ressources</span><span class="sxs-lookup"><span data-stu-id="6091c-309">Automated resource deployment</span></span>

<span data-ttu-id="6091c-310">Le bot lui-même n’est qu’une partie d’un système plus large qui lui fournit les données les plus récentes et garantit son bon fonctionnement.</span><span class="sxs-lookup"><span data-stu-id="6091c-310">The bot itself is only part of a larger system that provides it with the latest data and ensures its proper operation.</span></span> <span data-ttu-id="6091c-311">Toutes ces autres ressources Azure &mdash; services d’orchestration des données comme Data Factory, services de stockage comme Cosmos DB, etc. &mdash; doivent être déployées.</span><span class="sxs-lookup"><span data-stu-id="6091c-311">All of these other Azure resources &mdash; data orchestration services such as Data Factory, storage services such as Cosmos DB, and so forth &mdash; must be deployed.</span></span> <span data-ttu-id="6091c-312">Azure Resource Manager fournit une couche de gestion cohérente à laquelle vous pouvez accéder par le biais du portail Azure, de PowerShell ou d’Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="6091c-312">Azure Resource Manager provides a consistent management layer that you can access through the Azure portal, PowerShell, or the Azure CLI.</span></span> <span data-ttu-id="6091c-313">À des fins de rapidité et de cohérence, il est préférable d’automatiser votre déploiement en utilisant l’une de ces approches.</span><span class="sxs-lookup"><span data-stu-id="6091c-313">For speed and consistency, it's best to automate your deployment using one of these approaches.</span></span>

### <a name="continuous-bot-deployment"></a><span data-ttu-id="6091c-314">Déploiement en continu du bot</span><span class="sxs-lookup"><span data-stu-id="6091c-314">Continuous bot deployment</span></span>

<span data-ttu-id="6091c-315">Vous pouvez déployer la logique de bot directement à partir de votre environnement de développement intégré (IDE) ou à partir d’une ligne de commande, comme Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="6091c-315">You can deploy the bot logic directly from your IDE or from a command line, such as the Azure CLI.</span></span> <span data-ttu-id="6091c-316">Toutefois, quand votre bot est plus abouti, il est préférable d’utiliser un processus de déploiement continu à l’aide d’une solution CI/CD comme Azure DevOps, comme décrit dans l’article [Configurer le déploiement continu](/azure/bot-service/bot-service-build-continuous-deployment).</span><span class="sxs-lookup"><span data-stu-id="6091c-316">As your bot matures, however, it's best to use a continual deployment process using a CI/CD solution such as Azure DevOps, as described in the article [Set up continuous deployment](/azure/bot-service/bot-service-build-continuous-deployment).</span></span> <span data-ttu-id="6091c-317">Ainsi, vous réduisez les frictions liées au test des nouvelles fonctionnalités et nouveaux correctifs dans votre bot dans un environnement proche de celui de production.</span><span class="sxs-lookup"><span data-stu-id="6091c-317">This is a good way to ease the friction in testing new features and fixes in your bot in a near-production environment.</span></span> <span data-ttu-id="6091c-318">Il est également judicieux d’avoir plusieurs environnements de déploiement, en général au moins un environnement de préproduction et un environnement de production.</span><span class="sxs-lookup"><span data-stu-id="6091c-318">It's also a good idea to have multiple deployment environments, typically at least staging and production.</span></span> <span data-ttu-id="6091c-319">Azure DevOps prend en charge cette approche.</span><span class="sxs-lookup"><span data-stu-id="6091c-319">Azure DevOps supports this approach.</span></span>

<!-- links -->

[0]: ./_images/conversational-bot.png
[aad]: /azure/active-directory/
[activités]: /azure/bot-service/rest-api/bot-framework-rest-connector-activities
[activities]: /azure/bot-service/rest-api/bot-framework-rest-connector-activities
[aml]: /azure/machine-learning/service/
[app-insights]: /azure/azure-monitor/app/app-insights-overview
[app-service]: /azure/app-service/
[blob]: /azure/storage/blobs/storage-blobs-introduction
[bot-authentication]: /azure/bot-service/bot-builder-authentication
[bot-framework]: https://dev.botframework.com/
[bot-framework-service]: /azure/bot-service/bot-builder-basics
[cognitive-services]: /azure/cognitive-services/welcome
[conversations]: /azure/bot-service/bot-service-design-conversation-flow
[cosmosdb]: /azure/cosmos-db/
[data-factory]: /azure/data-factory/
[data-factory-ref-arch]: ../data/enterprise-bi-adf.md
[devops]: https://azure.microsoft.com/solutions/devops/
[functions]: /azure/azure-functions/
[functions-triggers]: /azure/azure-functions/functions-triggers-bindings
[git-repo-appinsights-logger]: https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-transcript-app-insights
[git-repo-base]: https://github.com/Microsoft/botbuilder-utils-js
[git-repo-cosmosdb-logger]: https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-transcript-cosmosdb
[git-repo-feedback-util]: https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-feedback
[git-repo-testing-util]: https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-http-test-recorder
[testing-util]: https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-http-test-recorder
[key-vault]: /azure/key-vault/
[lda]: https://wikipedia.org/wiki/Latent_Dirichlet_allocation/
[logic-apps]: /azure/logic-apps/logic-apps-overview
[luis]: /azure/cognitive-services/luis/
[power-bi]: /power-bi/
[qna-maker]: /azure/cognitive-services/QnAMaker/
[search]: /azure/search/
[slots]: /azure/app-service/deploy-staging-slots/
[synonyms]: /azure/search/search-synonyms
[transcript-storage]: /azure/bot-service/bot-builder-howto-v4-storage
[tours]: /azure/bot-service/bot-builder-basics#defining-a-turn
[turns]: /azure/bot-service/bot-builder-basics#defining-a-turn
[vscode]: https://azure.microsoft.com/products/visual-studio-code/
[webapp]: /azure/app-service/overview
[webchat]: /azure/bot-service/bot-service-channel-connect-webchat?view=azure-bot-service-4.0/

[cosmosdb-logger]: https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-transcript-cosmosdb
[appinsights-logger]: https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-transcript-app-insights
[feedback-util]: https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-feedback
[testing util]: https://github.com/Microsoft/botbuilder-utils-js/tree/master/packages/botbuilder-http-test-recorder

