---
title: Supervision des applications web sur Azure
description: Surveillez une application web hébergée dans Azure App Service.
author: adamboeglin
ms.date: 12/12/2018
ms.topic: reference-architecture
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: azcat
ms.openlocfilehash: 5219d08fce5cf09b075b6d7adfb73970e007ded4
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/23/2019
ms.locfileid: "54487931"
---
# <a name="web-application-monitoring-on-azure"></a><span data-ttu-id="81d79-103">Supervision des applications web sur Azure</span><span class="sxs-lookup"><span data-stu-id="81d79-103">Web application monitoring on Azure</span></span>

<span data-ttu-id="81d79-104">Les offres de plateforme Azure en tant que service (PaaS) gèrent pour vous les ressources de calcul et impactent la manière dont vous surveillez les déploiements.</span><span class="sxs-lookup"><span data-stu-id="81d79-104">Azure platform as a service (PaaS) offerings manage compute resources for you and affect how you monitor deployments.</span></span> <span data-ttu-id="81d79-105">Azure inclut plusieurs services de supervision, qui ont chacun un rôle spécifique.</span><span class="sxs-lookup"><span data-stu-id="81d79-105">Azure includes multiple monitoring services, each of which performs a specific role.</span></span> <span data-ttu-id="81d79-106">Ensemble, ces services fournissent une solution complète pour la collecte, l’analyse et l’action sur les données de télémétrie de vos applications et des ressources Azure qu’elles consomment.</span><span class="sxs-lookup"><span data-stu-id="81d79-106">Together, these services deliver a comprehensive solution for collecting, analyzing, and acting on telemetry from your applications and the Azure resources they consume.</span></span>

<span data-ttu-id="81d79-107">Ce scénario traite des services de supervision que vous pouvez utiliser et décrit un modèle de flux de données à utiliser avec plusieurs sources de données.</span><span class="sxs-lookup"><span data-stu-id="81d79-107">This scenario addresses the monitoring services you can use and describes a dataflow model for use with multiple data sources.</span></span> <span data-ttu-id="81d79-108">En ce qui concerne la supervision, des nombreux outils et services peuvent être utilisés avec les déploiements Azure.</span><span class="sxs-lookup"><span data-stu-id="81d79-108">When it comes to monitoring, many tools and services work with Azure deployments.</span></span> <span data-ttu-id="81d79-109">Dans ce scénario, nous choisissons des services justement disponibles parce qu’ils sont faciles à utiliser.</span><span class="sxs-lookup"><span data-stu-id="81d79-109">In this scenario, we choose readily available services precisely because they are easy to consume.</span></span> <span data-ttu-id="81d79-110">D’autres options de supervision sont abordées plus loin dans cet article.</span><span class="sxs-lookup"><span data-stu-id="81d79-110">Other monitoring options are discussed later in this article.</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="81d79-111">Cas d’usage appropriés</span><span class="sxs-lookup"><span data-stu-id="81d79-111">Relevant use cases</span></span>

<span data-ttu-id="81d79-112">Les autres cas d’usage appropriés sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="81d79-112">Other relevant use cases include:</span></span>

- <span data-ttu-id="81d79-113">Instrumentation d’une application web pour la supervision des données de télémétrie.</span><span class="sxs-lookup"><span data-stu-id="81d79-113">Instrumenting a web application for monitoring telemetry.</span></span>
- <span data-ttu-id="81d79-114">Collecte de données de télémétrie frontales et principales pour une application déployée sur Azure.</span><span class="sxs-lookup"><span data-stu-id="81d79-114">Collecting front-end and back-end telemetry for an application deployed on Azure.</span></span>
- <span data-ttu-id="81d79-115">Supervision de métriques et quotas associés aux services sur Azure.</span><span class="sxs-lookup"><span data-stu-id="81d79-115">Monitoring metrics and quotas associated with services on Azure.</span></span>

## <a name="architecture"></a><span data-ttu-id="81d79-116">Architecture</span><span class="sxs-lookup"><span data-stu-id="81d79-116">Architecture</span></span>

![« Diagramme d’architecture »](./images/architecture-diagram-app-monitoring.svg)

<span data-ttu-id="81d79-118">Ce scénario utilise un environnement Azure managé pour héberger une application et une couche Données.</span><span class="sxs-lookup"><span data-stu-id="81d79-118">This scenario uses a managed Azure environment to host an application and data tier.</span></span> <span data-ttu-id="81d79-119">Les données circulent dans le scénario comme suit :</span><span class="sxs-lookup"><span data-stu-id="81d79-119">The data flows through the scenario as follows:</span></span>

1. <span data-ttu-id="81d79-120">Un utilisateur interagit avec l’application.</span><span class="sxs-lookup"><span data-stu-id="81d79-120">A user interacts with the application.</span></span>
2. <span data-ttu-id="81d79-121">Le navigateur et le service d’application génèrent des données de télémétrie.</span><span class="sxs-lookup"><span data-stu-id="81d79-121">The browser and app service emit telemetry.</span></span>
3. <span data-ttu-id="81d79-122">Application Insights collecte et analyse les données relatives à l’intégrité, aux performances et à l’utilisation de l’application.</span><span class="sxs-lookup"><span data-stu-id="81d79-122">Application Insights collects and analyzes application health, performance, and usage data.</span></span>
4. <span data-ttu-id="81d79-123">Les développeurs et administrateurs peuvent passer en revue les informations relatives à l’intégrité, aux performances et à l’utilisation.</span><span class="sxs-lookup"><span data-stu-id="81d79-123">Developers and administrators can review health, performance, and usage information.</span></span>
5. <span data-ttu-id="81d79-124">Azure SQL Database génère des données de télémétrie.</span><span class="sxs-lookup"><span data-stu-id="81d79-124">Azure SQL Database emits telemetry.</span></span>
6. <span data-ttu-id="81d79-125">Azure Monitor collecte et analyse des métriques et quotas et d’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="81d79-125">Azure Monitor collects and analyzes infrastructure metrics and quotas.</span></span>
7. <span data-ttu-id="81d79-126">Log Analytics collecte et analyse des journaux et métriques.</span><span class="sxs-lookup"><span data-stu-id="81d79-126">Log Analytics collects and analyzes logs and metrics.</span></span>
8. <span data-ttu-id="81d79-127">Les développeurs et administrateurs peuvent passer en revue les informations relatives à l’intégrité, aux performances et à l’utilisation.</span><span class="sxs-lookup"><span data-stu-id="81d79-127">Developers and administrators can review health, performance, and usage information.</span></span>

### <a name="components"></a><span data-ttu-id="81d79-128">Composants</span><span class="sxs-lookup"><span data-stu-id="81d79-128">Components</span></span>

- <span data-ttu-id="81d79-129">[Azure App Service](/azure/app-service/) est un service PaaS de création et d’hébergement d’applications dans des machines virtuelles managées.</span><span class="sxs-lookup"><span data-stu-id="81d79-129">[Azure App Service](/azure/app-service/) is a PaaS service for building and hosting apps in managed virtual machines.</span></span> <span data-ttu-id="81d79-130">L’infrastructure de calcul sous-jacente sur laquelle vos applications sont exécutées est gérée pour vous.</span><span class="sxs-lookup"><span data-stu-id="81d79-130">The underlying compute infrastructures on which your apps run is managed for you.</span></span> <span data-ttu-id="81d79-131">App Service permet de surveiller les quotas d’utilisation des ressources et les métriques d’application, les informations de journalisation des diagnostics et les alertes basées sur les métriques.</span><span class="sxs-lookup"><span data-stu-id="81d79-131">App Service provides monitoring of resource usage quotas and app metrics, logging of diagnostic information, and alerts based on metrics.</span></span> <span data-ttu-id="81d79-132">Mieux encore, vous pouvez utiliser Application Insights pour créer des [tests de disponibilité][availability-tests] afin de tester votre application à partir de différentes régions.</span><span class="sxs-lookup"><span data-stu-id="81d79-132">Even better, you can use Application Insights to create [availability tests][availability-tests] for testing your application from different regions.</span></span>
- <span data-ttu-id="81d79-133">[Application Insights][application-insights] est un service extensible de gestion des performances des applications (APM) destiné aux développeurs et prend en charge plusieurs plateformes.</span><span class="sxs-lookup"><span data-stu-id="81d79-133">[Application Insights][application-insights] is an extensible Application Performance Management (APM) service for developers and supports multiple platforms.</span></span> <span data-ttu-id="81d79-134">Il surveille l’application, détecte les anomalies de l’application comme les faibles performances et les échecs, et envoie les données de télémétrie au portail Azure.</span><span class="sxs-lookup"><span data-stu-id="81d79-134">It monitors the application, detects application anomalies such as poor performance and failures, and sends telemetry to the Azure portal.</span></span> <span data-ttu-id="81d79-135">Application Insights peut également être utilisé pour journalisation, le suivi distribué et les métriques d’application personnalisées.</span><span class="sxs-lookup"><span data-stu-id="81d79-135">Application Insights can also be used for logging, distributed tracing, and custom application metrics.</span></span>
- <span data-ttu-id="81d79-136">[Azure Monitor][azure-monitor] fournit des [métriques et des journaux][metrics] de niveau de base d’infrastructure pour la plupart des services Azure.</span><span class="sxs-lookup"><span data-stu-id="81d79-136">[Azure Monitor][azure-monitor] provides base-level infrastructure [metrics and logs][metrics] for most services in Azure.</span></span> <span data-ttu-id="81d79-137">Vous pouvez interagir de différentes manières avec les métriques, y compris en créant des graphiques dans le portail Azure, en y accédant via l’API REST ou en envoyant des requêtes avec PowerShell ou l’interface CLI.</span><span class="sxs-lookup"><span data-stu-id="81d79-137">You can interact with the metrics in several ways, including charting them in Azure portal, accessing them through the REST API, or querying them using PowerShell or CLI.</span></span> <span data-ttu-id="81d79-138">Azure Monitor fournit également ses données directement dans [Log Analytics et autres services], où vous pouvez les interroger et les associer à des données provenant d’autres sources locales ou dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="81d79-138">Azure Monitor also offers its data directly into [Log Analytics and other services], where you can query and combine it with data from other sources on premises or in the cloud.</span></span>
- <span data-ttu-id="81d79-139">[Log Analytics][log-analytics] permet de mettre en corrélation les données de performances et d’utilisation collectées par Application Insights avec les données de performances et de configuration des ressources Azure qui prennent en charge l’application.</span><span class="sxs-lookup"><span data-stu-id="81d79-139">[Log Analytics][log-analytics] helps correlate the usage and performance data collected by Application Insights with configuration and performance data across the Azure resources that support the app.</span></span> <span data-ttu-id="81d79-140">Ce scénario utilise l’[agent Azure Log Analytics][Azure Log Analytics agent] pour envoyer des journaux d’audit SQL Server à Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="81d79-140">This scenario uses the [Azure Log Analytics agent][Azure Log Analytics agent] to push SQL Server audit logs into Log Analytics.</span></span> <span data-ttu-id="81d79-141">Vous pouvez écrire des requêtes et afficher les données dans le panneau Log Analytics du portail Azure.</span><span class="sxs-lookup"><span data-stu-id="81d79-141">You can write queries and view data in the Log Analytics blade of the Azure portal.</span></span>

## <a name="considerations"></a><span data-ttu-id="81d79-142">Considérations</span><span class="sxs-lookup"><span data-stu-id="81d79-142">Considerations</span></span>

<span data-ttu-id="81d79-143">Une pratique recommandée consiste à ajouter Application Insights à votre code au cours du développement à l’aide des [Kits de développement logiciel (SDK) Application Insights][Application Insights SDKs] et à personnaliser par application.</span><span class="sxs-lookup"><span data-stu-id="81d79-143">A recommended practice is adding Application Insights to your code during development using the [Application Insights SDKs][Application Insights SDKs], and customizing per application.</span></span> <span data-ttu-id="81d79-144">Ces Kits de développement logiciel (SDK) open source sont disponibles pour la plupart des infrastructures d’application.</span><span class="sxs-lookup"><span data-stu-id="81d79-144">These open-source SDKs are available for most application frameworks.</span></span> <span data-ttu-id="81d79-145">Pour enrichir et contrôler les données que vous collectez, intégrez l’utilisation des Kits de développement logiciel (SDK) des déploiements de test et de production dans votre processus de développement.</span><span class="sxs-lookup"><span data-stu-id="81d79-145">To enrich and control the data you collect, incorporate the use of the SDKs both for testing and production deployments into your development process.</span></span> <span data-ttu-id="81d79-146">La principale exigence implique que l’application doit disposer d’une visibilité directe ou indirecte sur le point de terminaison d’ingestion Applications Insights hébergé avec une adresse Internet.</span><span class="sxs-lookup"><span data-stu-id="81d79-146">The main requirement is for the app to have a direct or indirect line of sight to the Applications Insights ingestion endpoint hosted with an Internet-facing address.</span></span> <span data-ttu-id="81d79-147">Vous pouvez ensuite ajouter des données de télémétrie ou enrichir une collection de données de télémétrie existante.</span><span class="sxs-lookup"><span data-stu-id="81d79-147">You can then add telemetry or enrich an existing telemetry collection.</span></span>

<span data-ttu-id="81d79-148">La supervision du runtime est une autre méthode de prise en main simple.</span><span class="sxs-lookup"><span data-stu-id="81d79-148">Runtime monitoring is another easy way to get started.</span></span> <span data-ttu-id="81d79-149">Les données de télémétrie collectées doivent être contrôlées par le biais de fichiers de configuration.</span><span class="sxs-lookup"><span data-stu-id="81d79-149">The telemetry that is collected must be controlled through configuration files.</span></span> <span data-ttu-id="81d79-150">Par exemple, vous pouvez inclure des méthodes de runtime qui permettent à des outils tels qu’[Application Insights Status Monitor][Application Insights Status Monitor] de déployer les Kits de développement logiciel (SDK) dans le dossier approprié et d’ajouter les configurations qui conviennent pour commencer la supervision.</span><span class="sxs-lookup"><span data-stu-id="81d79-150">For example, you can include runtime methods that enable tools such as [Application Insights Status Monitor][Application Insights Status Monitor] to deploy the SDKs into the correct folder and add the right configurations to begin monitoring.</span></span>

<span data-ttu-id="81d79-151">Comme Application Insights, Log Analytics fournit des outils d’[analyse des données entre des sources][analyzing data across sources], de création de requêtes complexes, et d’[envoi d’alertes proactives][sending proactive alerts] dans des conditions spécifiées.</span><span class="sxs-lookup"><span data-stu-id="81d79-151">Like Application Insights, Log Analytics provides tools for [analyzing data across sources][analyzing data across sources], creating complex queries, and [sending proactive alerts][sending proactive alerts] on specified conditions.</span></span> <span data-ttu-id="81d79-152">Vous pouvez également afficher les données de télémétrie dans le [portail Azure][the Azure portal].</span><span class="sxs-lookup"><span data-stu-id="81d79-152">You can also view telemetry in [the Azure portal][the Azure portal].</span></span> <span data-ttu-id="81d79-153">Log Analytics enrichit les services de supervision existants tels qu’[Azure Monitor][azure-monitor] et peut également superviser les environnements locaux.</span><span class="sxs-lookup"><span data-stu-id="81d79-153">Log Analytics adds value to existing monitoring services such as [Azure Monitor][azure-monitor] and can also monitor on-premises environments.</span></span>

<span data-ttu-id="81d79-154">Application Insights et Log Analytics utilisent le [langage de requête Azure Log Analytics][Azure Log Analytics Query Language].</span><span class="sxs-lookup"><span data-stu-id="81d79-154">Both Application Insights and Log Analytics use [Azure Log Analytics Query Language][Azure Log Analytics Query Language].</span></span> <span data-ttu-id="81d79-155">Vous pouvez également utiliser des [requêtes entre ressources](https://azure.microsoft.com/blog/query-across-resources) pour analyser les données de télémétrie collectées par Application Insights et Log Analytics dans une requête unique.</span><span class="sxs-lookup"><span data-stu-id="81d79-155">You can also use [cross-resource queries](https://azure.microsoft.com/blog/query-across-resources) to analyze the telemetry gathered by Application Insights and Log Analytics in a single query.</span></span>

<span data-ttu-id="81d79-156">Azure Monitor, Application Insights et Log Analytics envoient tous les trois des [alertes](/azure/monitoring-and-diagnostics/monitoring-overview-alerts).</span><span class="sxs-lookup"><span data-stu-id="81d79-156">Azure Monitor, Application Insights, and Log Analytics all send [alerts](/azure/monitoring-and-diagnostics/monitoring-overview-alerts).</span></span> <span data-ttu-id="81d79-157">Par exemple, Azure Monitor alerte sur des métriques au niveau de la plateforme, telles que l’utilisation du processeur, alors qu’Application Insights alerte sur des métriques au niveau de l’application, telles que le temps de réponse du serveur.</span><span class="sxs-lookup"><span data-stu-id="81d79-157">For example, Azure Monitor alerts on platform-level metrics such as CPU utilization, while Application Insights alerts on application-level metrics such as server response time.</span></span> <span data-ttu-id="81d79-158">Azure Monitor signale les nouveaux événements dans le journal d’activité Azure, alors que Log Analytics peut générer des alertes sur les données de métriques ou d’événements pour les services configurés pour les utiliser.</span><span class="sxs-lookup"><span data-stu-id="81d79-158">Azure Monitor alerts on new events in the Azure Activity Log, while Log Analytics can issue alerts about metrics or event data for the services configured to use it.</span></span> <span data-ttu-id="81d79-159">Les [alertes unifiées dans Azure Monitor](/azure/monitoring-and-diagnostics/monitoring-overview-unified-alerts) constituent une nouvelle expérience d’alertes unifiée dans Azure qui utilise une autre taxonomie.</span><span class="sxs-lookup"><span data-stu-id="81d79-159">[Unified alerts in Azure Monitor](/azure/monitoring-and-diagnostics/monitoring-overview-unified-alerts) is a new, unified alerting experience in Azure that uses a different taxonomy.</span></span>

### <a name="alternatives"></a><span data-ttu-id="81d79-160">Autres solutions</span><span class="sxs-lookup"><span data-stu-id="81d79-160">Alternatives</span></span>

<span data-ttu-id="81d79-161">Cet article décrit les options de supervision facilement disponibles avec les fonctionnalités populaires, mais de nombreuses options s’offrent à vous, notamment la possibilité de créer vos propres mécanismes de journalisation.</span><span class="sxs-lookup"><span data-stu-id="81d79-161">This article describes conveniently available monitoring options with popular features, but you have many choices, including the option to create your own logging mechanisms.</span></span> <span data-ttu-id="81d79-162">Une pratique recommandée consiste à ajouter des services de supervision lorsque vous générez des niveaux dans une solution.</span><span class="sxs-lookup"><span data-stu-id="81d79-162">A recommended practice is to add monitoring services as you build out tiers in a solution.</span></span> <span data-ttu-id="81d79-163">Voici certaines extensions et alternatives possibles :</span><span class="sxs-lookup"><span data-stu-id="81d79-163">Here are some possible extensions and alternatives:</span></span>

- <span data-ttu-id="81d79-164">Consolidez les métriques Azure Monitor et Application Insights dans Grafana à l’aide d’[Azure Monitor Data Source For Grafana][Azure Monitor Data Source For Grafana].</span><span class="sxs-lookup"><span data-stu-id="81d79-164">Consolidate Azure Monitor and Application Insights metrics in Grafana using the [Azure Monitor Data Source For Grafana][Azure Monitor Data Source For Grafana].</span></span>
- <span data-ttu-id="81d79-165">[Data Dog][data-dog] comprend un connecteur pour Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="81d79-165">[Data Dog][data-dog] features a connector for Azure Monitor</span></span>
- <span data-ttu-id="81d79-166">Automatisez les fonctions de supervision à l’aide d’[Azure Automation][Azure Automation].</span><span class="sxs-lookup"><span data-stu-id="81d79-166">Automate monitoring functions using [Azure Automation][Azure Automation].</span></span>
- <span data-ttu-id="81d79-167">Ajoutez une communication avec les [solutions ITSM][ITSM solutions].</span><span class="sxs-lookup"><span data-stu-id="81d79-167">Add communication with [ITSM solutions][ITSM solutions].</span></span>
- <span data-ttu-id="81d79-168">Étendez Log Analytics avec une [solution de gestion][management solution].</span><span class="sxs-lookup"><span data-stu-id="81d79-168">Extend Log Analytics with a [management solution][management solution].</span></span>

### <a name="scalability-and-availability"></a><span data-ttu-id="81d79-169">Extensibilité et disponibilité</span><span class="sxs-lookup"><span data-stu-id="81d79-169">Scalability and availability</span></span>

<span data-ttu-id="81d79-170">Ce scénario se concentre sur des solutions PaaS pour la supervision, principalement du fait qu’elles gèrent pour vous de manière pratique la disponibilité et l’extensibilité et qu’elles s’appuient sur des contrats de niveau de service (SLA).</span><span class="sxs-lookup"><span data-stu-id="81d79-170">This scenario focuses on PaaS solutions for monitoring in large part because they conveniently handle availability and scalability for you and are backed by service-level agreements (SLAs).</span></span> <span data-ttu-id="81d79-171">Par exemple, App Services fournit un [SLA][SLA] garanti pour sa disponibilité.</span><span class="sxs-lookup"><span data-stu-id="81d79-171">For example, App Services provides a guaranteed [SLA][SLA] for its availability.</span></span>

<span data-ttu-id="81d79-172">Application Insights [limite][app-insights-limits] le nombre de requêtes pouvant être traitées par seconde.</span><span class="sxs-lookup"><span data-stu-id="81d79-172">Application Insights has [limits][app-insights-limits] on how many requests can be processed per second.</span></span> <span data-ttu-id="81d79-173">Si vous dépassez la limite de requêtes, vous pouvez rencontrer une limitation des messages.</span><span class="sxs-lookup"><span data-stu-id="81d79-173">If you exceed the request limit, you may experience message throttling.</span></span> <span data-ttu-id="81d79-174">Pour éviter cette limitation, implémentez un [filtrage][message-filtering] ou un [échantillonnage][message-sampling] afin de réduire le débit de données</span><span class="sxs-lookup"><span data-stu-id="81d79-174">To prevent throttling, implement [filtering][message-filtering] or [sampling][message-sampling] to reduce the data rate</span></span>

<span data-ttu-id="81d79-175">Toutefois, les considérations relatives à la haute disponibilité de l’application que vous exécutez sont de la responsabilité du développeur.</span><span class="sxs-lookup"><span data-stu-id="81d79-175">High availability considerations for the app you run, however, are the developer's responsibility.</span></span> <span data-ttu-id="81d79-176">Pour plus d’informations sur la mise à l’échelle, par exemple, consultez la section des [considérations relatives à l’extensibilité](#scalability-considerations) dans l’architecture de référence d’application web de base.</span><span class="sxs-lookup"><span data-stu-id="81d79-176">For information about scale, for example, see the [Scalability considerations](#scalability-considerations) section in the basic web application reference architecture.</span></span> <span data-ttu-id="81d79-177">Lorsqu’une application est déployée, vous pouvez configurer des tests pour [surveiller sa disponibilité][monitor its availability] à l’aide d’Application Insights.</span><span class="sxs-lookup"><span data-stu-id="81d79-177">After an app is deployed, you can set up tests to [monitor its availability][monitor its availability] using Application Insights.</span></span>

### <a name="security"></a><span data-ttu-id="81d79-178">Sécurité</span><span class="sxs-lookup"><span data-stu-id="81d79-178">Security</span></span>

<span data-ttu-id="81d79-179">Les exigences relatives aux informations personnelles et à la conformité affectent la collecte, la rétention et le stockage des données.</span><span class="sxs-lookup"><span data-stu-id="81d79-179">Sensitive information and compliance requirements affect data collection, retention, and storage.</span></span> <span data-ttu-id="81d79-180">En savoir plus sur la façon dont [Application Insights][application-insights] et [Log Analytics][log-analytics] gèrent les données de télémétrie.</span><span class="sxs-lookup"><span data-stu-id="81d79-180">Learn more about how [Application Insights][application-insights] and [Log Analytics][log-analytics] handle telemetry.</span></span>

<span data-ttu-id="81d79-181">Les considérations suivantes relatives à la sécurité peuvent également s’appliquer :</span><span class="sxs-lookup"><span data-stu-id="81d79-181">The following security considerations may also apply:</span></span>

- <span data-ttu-id="81d79-182">Développez un plan pour gérer les informations personnelles si les développeurs sont autorisés à collecter leurs propres données ou à enrichir les données de télémétrie existantes.</span><span class="sxs-lookup"><span data-stu-id="81d79-182">Develop a plan to handle personal information if developers are allowed to collect their own data or enrich existing telemetry.</span></span>
- <span data-ttu-id="81d79-183">Envisagez la rétention des données.</span><span class="sxs-lookup"><span data-stu-id="81d79-183">Consider data retention.</span></span> <span data-ttu-id="81d79-184">Par exemple, Application Insights conserve les données de télémétrie pendant 90 jours.</span><span class="sxs-lookup"><span data-stu-id="81d79-184">For example, Application Insights retains telemetry data for 90 days.</span></span> <span data-ttu-id="81d79-185">Archivez les données auxquelles vous souhaitez accéder pendant une période plus longue à l’aide de Microsoft Power BI, l’exportation continue ou l’API REST.</span><span class="sxs-lookup"><span data-stu-id="81d79-185">Archive data you want access to for longer periods using Microsoft Power BI, Continuous Export, or the REST API.</span></span> <span data-ttu-id="81d79-186">Des tarifs de stockage s’appliquent.</span><span class="sxs-lookup"><span data-stu-id="81d79-186">Storage rates apply.</span></span>
- <span data-ttu-id="81d79-187">Limitez l’accès aux ressources Azure afin de contrôler l’accès aux données et qui peut afficher des données de télémétrie à partir d’une application spécifique.</span><span class="sxs-lookup"><span data-stu-id="81d79-187">Limit access to Azure resources to control access to data and who can view telemetry from a specific application.</span></span> <span data-ttu-id="81d79-188">Pour mieux limiter l’accès aux données de télémétrie de supervision, consultez [Contrôle d’accès, rôles et ressources dans Application Insights][Resources, roles, and access control in Application Insights].</span><span class="sxs-lookup"><span data-stu-id="81d79-188">To help lock down access to monitoring telemetry, see [Resources, roles, and access control in Application Insights][Resources, roles, and access control in Application Insights].</span></span>
- <span data-ttu-id="81d79-189">Pensez à contrôler l’accès en lecture/écriture au code d’application pour empêcher les utilisateurs d’ajouter des marqueurs de version ou de balise qui limitent l’ingestion de données à partir de l’application.</span><span class="sxs-lookup"><span data-stu-id="81d79-189">Consider whether to control read/write access in application code to prevent users from adding version or tag markers that limit data ingestion from the application.</span></span> <span data-ttu-id="81d79-190">Avec Application Insights, il n’existe aucun contrôle des éléments de données une fois qu’ils sont envoyés à une ressource. Ainsi, si un utilisateur a accès à toutes les données, il a également accès à toutes les données d’une ressource.</span><span class="sxs-lookup"><span data-stu-id="81d79-190">With Application Insights, there is no control over individual data items once they are sent to a resource, so if a user has access to any data, they have access to all data in an individual resource.</span></span>
- <span data-ttu-id="81d79-191">Si nécessaire, ajoutez des mécanismes de [gouvernance](/azure/security/governance-in-azure) pour appliquer des contrôles de stratégie ou de coût sur des ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="81d79-191">Add [governance](/azure/security/governance-in-azure) mechanisms to enforce policy or cost controls over Azure resources if needed.</span></span> <span data-ttu-id="81d79-192">Par exemple, utilisez Log Analytics pour la supervision liée à la sécurité comme les stratégies et le contrôle d’accès en fonction du rôle, ou utilisez [Azure Policy](/azure/azure-policy/azure-policy-introduction) pour créer, affecter et gérer des définitions de stratégie.</span><span class="sxs-lookup"><span data-stu-id="81d79-192">For example, use Log Analytics for security-related monitoring such as policies and role-based access control, or use [Azure Policy](/azure/azure-policy/azure-policy-introduction) to create, assign and, manage policy definitions.</span></span>
- <span data-ttu-id="81d79-193">Pour surveiller les éventuels problèmes de sécurité et obtenir une vue centralisée de l’état de sécurité de vos ressources Azure, envisagez d’utiliser [Azure Security Center](/azure/security-center/security-center-intro).</span><span class="sxs-lookup"><span data-stu-id="81d79-193">To monitor potential security issues and get a central view of the security state of your Azure resources, consider using [Azure Security Center](/azure/security-center/security-center-intro).</span></span>

## <a name="pricing"></a><span data-ttu-id="81d79-194">Tarifs</span><span class="sxs-lookup"><span data-stu-id="81d79-194">Pricing</span></span>

<span data-ttu-id="81d79-195">Les frais de supervision peuvent augmenter rapidement. Envisagez donc la tarification en amont, de comprendre ce que vous surveillez et de vérifier les frais associés de chaque service.</span><span class="sxs-lookup"><span data-stu-id="81d79-195">Monitoring charges can add up quickly, so consider pricing up front, understand what you are monitoring, and check the associated fees for each service.</span></span> <span data-ttu-id="81d79-196">Azure Monitor fournit sans frais des [métriques de base][basic metrics], alors que les coûts de supervision d’[Application Insights][application-insights-pricing] et de [Log Analytics][log-analytics] sont basés sur la quantité de données ingérées et le nombre de tests que vous exécutez.</span><span class="sxs-lookup"><span data-stu-id="81d79-196">Azure Monitor provides [basic metrics][basic metrics] at no cost, while monitoring costs for [Application Insights][application-insights-pricing] and [Log Analytics][log-analytics] are based on the amount of data ingested and the number of tests you run.</span></span>

<span data-ttu-id="81d79-197">Pour vous aider à commencer, utilisez la [calculatrice de prix][pricing] pour estimer les coûts.</span><span class="sxs-lookup"><span data-stu-id="81d79-197">To help you get started, use the [pricing calculator][pricing] to estimate costs.</span></span> <span data-ttu-id="81d79-198">Pour pouvoir observer l’évolution de la tarification pour votre cas d’usage particulier, modifiez les diverses options en fonction du déploiement que vous escomptez.</span><span class="sxs-lookup"><span data-stu-id="81d79-198">To see how the pricing would change for your particular use case, change the various options to match your expected deployment.</span></span>

<span data-ttu-id="81d79-199">Les données d’Application Insights sont envoyées au portail Azure pendant le débogage et une fois que vous avez publié votre application.</span><span class="sxs-lookup"><span data-stu-id="81d79-199">Telemetry from Application Insights is sent to the Azure portal during debugging and after you have published your app.</span></span> <span data-ttu-id="81d79-200">À des fins de test et pour éviter des frais, un volume limité de données de télémétrie est instrumenté.</span><span class="sxs-lookup"><span data-stu-id="81d79-200">For testing purposes and to avoid charges, a limited volume of telemetry is instrumented.</span></span> <span data-ttu-id="81d79-201">Pour ajouter d’autres indicateurs, vous pouvez augmenter la limite de données de télémétrie.</span><span class="sxs-lookup"><span data-stu-id="81d79-201">To add more indicators, you can raise the telemetry limit.</span></span> <span data-ttu-id="81d79-202">Pour un contrôle plus précis, consultez l’article [Échantillonnage dans Application Insights][Sampling in Application Insights].</span><span class="sxs-lookup"><span data-stu-id="81d79-202">For more granular control, see [Sampling in Application Insights][Sampling in Application Insights].</span></span>

<span data-ttu-id="81d79-203">Après le déploiement, vous pouvez observer un [Flux de métriques temps réel][Live Metrics Stream] des indicateurs de performance.</span><span class="sxs-lookup"><span data-stu-id="81d79-203">After deployment, you can watch a [Live Metrics Stream][Live Metrics Stream] of performance indicators.</span></span> <span data-ttu-id="81d79-204">Ces données ne sont pas stockées &mdash; vous affichez des métriques en temps réel &mdash;, mais les données de télémétrie peuvent être collectées et analysées ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="81d79-204">This data is not stored &mdash; you are viewing real-time metrics &mdash; but the telemetry can be collected and analyzed later.</span></span> <span data-ttu-id="81d79-205">Aucuns frais ne sont liés aux données Flux de métriques temps réel.</span><span class="sxs-lookup"><span data-stu-id="81d79-205">There is no charge for Live Stream data.</span></span>

<span data-ttu-id="81d79-206">Log Analytics est facturé par Go de données ingéré dans le service.</span><span class="sxs-lookup"><span data-stu-id="81d79-206">Log Analytics is billed per gigabyte (GB) of data ingested into the service.</span></span> <span data-ttu-id="81d79-207">Les 5 premiers Go de données ingérés dans le service Azure Log Analytics chaque mois sont gratuits, et les données sont conservées sans frais pendant les 31 premiers jours dans votre espace de travail Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="81d79-207">The first 5 GB of data ingested to the Azure Log Analytics service every month is offered free, and the data is retained at no charge for first 31 days in your Log Analytics workspace.</span></span>

## <a name="next-steps"></a><span data-ttu-id="81d79-208">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="81d79-208">Next steps</span></span>

<span data-ttu-id="81d79-209">Découvrez ces ressources conçues pour vous aider à bien démarrer avec votre propre solution de supervision :</span><span class="sxs-lookup"><span data-stu-id="81d79-209">Check out these resources designed to help you get started with your own monitoring solution:</span></span>

<span data-ttu-id="81d79-210">[Architecture de référence d’application web de base][Basic web application reference architecture]</span><span class="sxs-lookup"><span data-stu-id="81d79-210">[Basic web application reference architecture][Basic web application reference architecture]</span></span>

<span data-ttu-id="81d79-211">[Démarrer la supervision de votre application web ASP.NET][Start monitoring your ASP.NET Web Application]</span><span class="sxs-lookup"><span data-stu-id="81d79-211">[Start monitoring your ASP.NET Web Application][Start monitoring your ASP.NET Web Application]</span></span>

<span data-ttu-id="81d79-212">[Collecter des données sur les machines virtuelles Azure][Collect data about Azure Virtual Machines]</span><span class="sxs-lookup"><span data-stu-id="81d79-212">[Collect data about Azure Virtual Machines][Collect data about Azure Virtual Machines]</span></span>

## <a name="related-resources"></a><span data-ttu-id="81d79-213">Ressources associées</span><span class="sxs-lookup"><span data-stu-id="81d79-213">Related resources</span></span>

<span data-ttu-id="81d79-214">[Supervision des applications et des ressources Azure][Monitoring Azure applications and resources]</span><span class="sxs-lookup"><span data-stu-id="81d79-214">[Monitoring Azure applications and resources][Monitoring Azure applications and resources]</span></span>

<span data-ttu-id="81d79-215">[Rechercher et diagnostiquer des exceptions runtime avec Azure Application Insights][Find and diagnose run-time exceptions with Azure Application Insights]</span><span class="sxs-lookup"><span data-stu-id="81d79-215">[Find and diagnose run-time exceptions with Azure Application Insights][Find and diagnose run-time exceptions with Azure Application Insights]</span></span>

<!-- links -->
[architecture]: ./images/architecture-diagram-app-monitoring.svg
[availability-tests]: /azure/application-insights/app-insights-monitor-web-app-availability
[application-insights]: /azure/application-insights/app-insights-overview
[azure-monitor]: /azure/monitoring-and-diagnostics/monitoring-overview-azure-monitor
[metrics]: /azure/monitoring-and-diagnostics/monitoring-supported-metrics
[Log Analytics et autres services]: /azure/log-analytics/log-analytics-azure-storage
[Log Analytics and other services]: /azure/log-analytics/log-analytics-azure-storage
[log-analytics]: /azure/log-analytics/log-analytics-overview
[Azure Log Analytics agent]: https://blogs.msdn.microsoft.com/sqlsecurity/2017/12/28/azure-log-analytics-oms-agent-now-collects-sql-server-audit-logs/
[application-insights-pricing]: https://azure.microsoft.com/pricing/details/application-insights/
[Application Insights SDKs]: /azure/application-insights/app-insights-asp-net
[Application Insights Status Monitor]: https://azure.microsoft.com/updates/application-insights-status-monitor-and-sdk-updated/
[analyzing data across sources]: /azure/log-analytics/log-analytics-dashboards
[sending proactive alerts]: /azure/log-analytics/log-analytics-alerts
[the Azure portal]: /azure/log-analytics/log-analytics-tutorial-dashboards
[Azure Log Analytics Query Language]: https://docs.loganalytics.io/docs/Learn
[cross-resource queries]: https://azure.microsoft.com/blog/query-across-resources/
[alerts]: /azure/monitoring-and-diagnostics/monitoring-overview-alerts
[Alerts (Preview)]: /azure/monitoring-and-diagnostics/monitoring-overview-unified-alerts
[Azure Monitor Data Source For Grafana]: https://grafana.com/plugins/grafana-azure-monitor-datasource
[Azure Automation]: /azure/automation/automation-intro
[ITSM solutions]: https://azure.microsoft.com/blog/itsm-connector-for-azure-is-now-generally-available/
[management solution]: /azure/monitoring/monitoring-solutions
[SLA]: https://azure.microsoft.com/support/legal/sla/app-service/v1_4/
[monitor its availability]: /azure/application-insights/app-insights-monitor-web-app-availability
[Resources, roles, and access control in Application Insights]: /azure/application-insights/app-insights-resources-roles-access-control
[basic metrics]: /azure/monitoring-and-diagnostics/monitoring-supported-metrics
[pricing]: https://azure.microsoft.com/pricing/calculator/#log-analyticsc126d8c1-ec9c-4e5b-9b51-4db95d06a9b1
[Sampling in Application Insights]: /azure/application-insights/app-insights-sampling
[Live Metrics Stream]: /azure/application-insights/app-insights-live-stream
[Basic web application reference architecture]: /azure/architecture/reference-architectures/app-service-web-app/basic-web-app#scalability-considerations
[Start monitoring your ASP.NET Web Application]: /azure/application-insights/quick-monitor-portal
[Collect data about Azure Virtual Machines]: /azure/log-analytics/log-analytics-quick-collect-azurevm
[Monitoring Azure applications and resources]: /azure/monitoring-and-diagnostics/monitoring-overview
[Find and diagnose run-time exceptions with Azure Application Insights]: /azure/application-insights/app-insights-tutorial-runtime-exceptions
[data-dog]: https://www.datadoghq.com/blog/azure-monitoring-enhancements/
[app-insights-limits]: /azure/azure-subscription-service-limits#application-insights-limits
[message-filtering]: /azure/application-insights/app-insights-api-filtering-sampling
[message-sampling]: /azure/application-insights/app-insights-sampling
