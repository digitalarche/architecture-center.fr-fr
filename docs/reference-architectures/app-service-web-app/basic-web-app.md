---
title: Application web de base
description: "Architecture recommandée pour une application web basique exécutée dans Microsoft Azure."
author: MikeWasson
ms.date: 12/12/2017
cardTitle: Basic web application
ms.openlocfilehash: 598eb547f0e96ae334af391183a792637caa8631
ms.sourcegitcommit: 1c0465cea4ceb9ba9bb5e8f1a8a04d3ba2fa5acd
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/02/2018
---
# <a name="basic-web-application"></a><span data-ttu-id="be0d2-103">Application web de base</span><span class="sxs-lookup"><span data-stu-id="be0d2-103">Basic web application</span></span>
[!INCLUDE [header](../../_includes/header.md)]

<span data-ttu-id="be0d2-104">Cette architecture de référence présente un ensemble de pratiques éprouvées pour une application web utilisant [Azure App Service][app-service] et [Azure SQL Database][sql-db].</span><span class="sxs-lookup"><span data-stu-id="be0d2-104">This reference architecture shows a set of proven practices for a web application that uses [Azure App Service][app-service] and [Azure SQL Database][sql-db].</span></span> [<span data-ttu-id="be0d2-105">**Déployez cette solution.**</span><span class="sxs-lookup"><span data-stu-id="be0d2-105">**Deploy this solution.**</span></span>](#deploy-the-solution)

<span data-ttu-id="be0d2-106">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="be0d2-106">![[0]][0]</span></span>

<span data-ttu-id="be0d2-107">*Téléchargez un [fichier Visio][visio-download] de cette architecture.*</span><span class="sxs-lookup"><span data-stu-id="be0d2-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="be0d2-108">Architecture</span><span class="sxs-lookup"><span data-stu-id="be0d2-108">Architecture</span></span> 

> [!NOTE]
> <span data-ttu-id="be0d2-109">Cette architecture n’est pas centrée sur le développement d’applications et n’assume pas d’infrastructure d’application particulière.</span><span class="sxs-lookup"><span data-stu-id="be0d2-109">This architecture does not focus on application development, and does not assume any particular application framework.</span></span> <span data-ttu-id="be0d2-110">L’objectif est de comprendre comment différents services Azure se complètent.</span><span class="sxs-lookup"><span data-stu-id="be0d2-110">The goal is to understand how various Azure services fit together.</span></span>
>
>

<span data-ttu-id="be0d2-111">Elle comporte les composants suivants :</span><span class="sxs-lookup"><span data-stu-id="be0d2-111">The architecture has the following components:</span></span>

* <span data-ttu-id="be0d2-112">**Groupe de ressources**.</span><span class="sxs-lookup"><span data-stu-id="be0d2-112">**Resource group**.</span></span> <span data-ttu-id="be0d2-113">Un [groupe de ressources](/azure/azure-resource-manager/resource-group-overview) est un conteneur logique pour les ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="be0d2-113">A [resource group](/azure/azure-resource-manager/resource-group-overview) is a logical container for Azure resources.</span></span>

* <span data-ttu-id="be0d2-114">**Application App Service**.</span><span class="sxs-lookup"><span data-stu-id="be0d2-114">**App Service app**.</span></span> <span data-ttu-id="be0d2-115">[Azure App Service][app-service] est une plateforme entièrement gérée pour créer et déployer des applications cloud.</span><span class="sxs-lookup"><span data-stu-id="be0d2-115">[Azure App Service][app-service] is a fully managed platform for creating and deploying cloud applications.</span></span>     

* <span data-ttu-id="be0d2-116">**Plan App Service**.</span><span class="sxs-lookup"><span data-stu-id="be0d2-116">**App Service plan**.</span></span> <span data-ttu-id="be0d2-117">Un [plan App Service][app-service-plans] fournit les machines virtuelles gérées qui hébergent votre application.</span><span class="sxs-lookup"><span data-stu-id="be0d2-117">An [App Service plan][app-service-plans] provides the managed virtual machines (VMs) that host your app.</span></span> <span data-ttu-id="be0d2-118">Toutes les applications associées à un plan s’exécutent dans les mêmes instances de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="be0d2-118">All apps associated with a plan run on the same VM instances.</span></span>

* <span data-ttu-id="be0d2-119">**Emplacements de déploiement**.</span><span class="sxs-lookup"><span data-stu-id="be0d2-119">**Deployment slots**.</span></span>  <span data-ttu-id="be0d2-120">Un [emplacement de déploiement][deployment-slots] vous permet de planifier un déploiement et de l’échanger ensuite avec le déploiement de production.</span><span class="sxs-lookup"><span data-stu-id="be0d2-120">A [deployment slot][deployment-slots] lets you stage a deployment and then swap it with the production deployment.</span></span> <span data-ttu-id="be0d2-121">De cette façon, vous évitez le déploiement directement dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="be0d2-121">That way, you avoid deploying directly into production.</span></span> <span data-ttu-id="be0d2-122">Consultez la section [Facilité de gestion](#manageability-considerations) pour obtenir des recommandations spécifiques.</span><span class="sxs-lookup"><span data-stu-id="be0d2-122">See the [Manageability](#manageability-considerations) section for specific recommendations.</span></span>

* <span data-ttu-id="be0d2-123">**Adresse IP**.</span><span class="sxs-lookup"><span data-stu-id="be0d2-123">**IP address**.</span></span> <span data-ttu-id="be0d2-124">L’application App Service a une adresse IP publique et un nom de domaine.</span><span class="sxs-lookup"><span data-stu-id="be0d2-124">The App Service app has a public IP address and a domain name.</span></span> <span data-ttu-id="be0d2-125">Le nom de domaine est un sous-domaine de `azurewebsites.net`, tel que `contoso.azurewebsites.net`.</span><span class="sxs-lookup"><span data-stu-id="be0d2-125">The domain name is a subdomain of `azurewebsites.net`, such as `contoso.azurewebsites.net`.</span></span>  

* <span data-ttu-id="be0d2-126">**Azure DNS**.</span><span class="sxs-lookup"><span data-stu-id="be0d2-126">**Azure DNS**.</span></span> <span data-ttu-id="be0d2-127">[Azure DNS][azure-dns] est un service d’hébergement pour les domaines DNS qui offre une résolution de noms à l’aide de l’infrastructure Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="be0d2-127">[Azure DNS][azure-dns] is a hosting service for DNS domains, providing name resolution using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="be0d2-128">En hébergeant vos domaines dans Azure, vous pouvez gérer vos enregistrements DNS avec les mêmes informations d’identification, les mêmes API, les mêmes outils et la même facturation que vos autres services Azure.</span><span class="sxs-lookup"><span data-stu-id="be0d2-128">By hosting your domains in Azure, you can manage your DNS records using the same credentials, APIs, tools, and billing as your other Azure services.</span></span> <span data-ttu-id="be0d2-129">Pour utiliser un nom de domaine personnalisé, tel que `contoso.com`, créez des enregistrements DNS qui mappent le nom de domaine personnalisé sur l’adresse IP.</span><span class="sxs-lookup"><span data-stu-id="be0d2-129">To use a custom domain name (such as `contoso.com`) create DNS records that map the custom domain name to the IP address.</span></span> <span data-ttu-id="be0d2-130">Pour plus d’informations, consultez [Configurer un nom de domaine personnalisé dans Azure App Service][custom-domain-name].</span><span class="sxs-lookup"><span data-stu-id="be0d2-130">For more information, see [Configure a custom domain name in Azure App Service][custom-domain-name].</span></span>  

* <span data-ttu-id="be0d2-131">**Base de données SQL Azure**.</span><span class="sxs-lookup"><span data-stu-id="be0d2-131">**Azure SQL Database**.</span></span> <span data-ttu-id="be0d2-132">[SQL Database][sql-db] est une base de données relationnelle sous forme de service dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="be0d2-132">[SQL Database][sql-db] is a relational database-as-a-service in the cloud.</span></span>

* <span data-ttu-id="be0d2-133">**Serveur logique**.</span><span class="sxs-lookup"><span data-stu-id="be0d2-133">**Logical server**.</span></span> <span data-ttu-id="be0d2-134">Dans Azure SQL Database, un serveur logique héberge vos bases de données.</span><span class="sxs-lookup"><span data-stu-id="be0d2-134">In Azure SQL Database, a logical server hosts your databases.</span></span> <span data-ttu-id="be0d2-135">Vous pouvez créer plusieurs bases de données dans un serveur logique.</span><span class="sxs-lookup"><span data-stu-id="be0d2-135">You can create multiple databases per logical server.</span></span>

* <span data-ttu-id="be0d2-136">**Stockage Azure**.</span><span class="sxs-lookup"><span data-stu-id="be0d2-136">**Azure Storage**.</span></span> <span data-ttu-id="be0d2-137">Créez un compte de stockage Azure avec un conteneur d’objets blob pour stocker les journaux de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="be0d2-137">Create an Azure storage account with a blob container to store diagnostic logs.</span></span>

* <span data-ttu-id="be0d2-138">**Azure Active Directory** (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="be0d2-138">**Azure Active Directory** (Azure AD).</span></span> <span data-ttu-id="be0d2-139">Utilisez Azure AD ou un autre fournisseur d’identité pour l’authentification.</span><span class="sxs-lookup"><span data-stu-id="be0d2-139">Use Azure AD or another identity provider for authentication.</span></span>

## <a name="recommendations"></a><span data-ttu-id="be0d2-140">Recommandations</span><span class="sxs-lookup"><span data-stu-id="be0d2-140">Recommendations</span></span>

<span data-ttu-id="be0d2-141">Vos exigences peuvent différer de celles de l’architecture décrite ici.</span><span class="sxs-lookup"><span data-stu-id="be0d2-141">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="be0d2-142">Utilisez les recommandations de cette section comme point de départ.</span><span class="sxs-lookup"><span data-stu-id="be0d2-142">Use the recommendations in this section as a starting point.</span></span>

### <a name="app-service-plan"></a><span data-ttu-id="be0d2-143">Plan App Service</span><span class="sxs-lookup"><span data-stu-id="be0d2-143">App Service plan</span></span>
<span data-ttu-id="be0d2-144">Utilisez les niveaux Standard ou Premium, car ils prennent en charge l’augmentation de la taille des instances, la mise à l’échelle automatique et le protocole SSL.</span><span class="sxs-lookup"><span data-stu-id="be0d2-144">Use the Standard or Premium tiers, because they support scale out, autoscale, and secure sockets layer (SSL).</span></span> <span data-ttu-id="be0d2-145">Chaque niveau prend en charge plusieurs *tailles d’instance* qui diffèrent par leur nombre de cœurs et la quantité de mémoire.</span><span class="sxs-lookup"><span data-stu-id="be0d2-145">Each tier supports several *instance sizes* that differ by number of cores and memory.</span></span> <span data-ttu-id="be0d2-146">Après avoir créé un plan, vous pouvez modifier le niveau ou la taille de l’instance.</span><span class="sxs-lookup"><span data-stu-id="be0d2-146">You can change the tier or instance size after you create a plan.</span></span> <span data-ttu-id="be0d2-147">Pour plus d’informations sur les plans App Service, consultez [Tarification de App Service][app-service-plans-tiers].</span><span class="sxs-lookup"><span data-stu-id="be0d2-147">For more information about App Service plans, see [App Service Pricing][app-service-plans-tiers].</span></span>

<span data-ttu-id="be0d2-148">Vous êtes facturé pour les instances dans le plan App Service, même si l’application est arrêtée.</span><span class="sxs-lookup"><span data-stu-id="be0d2-148">You are charged for the instances in the App Service plan, even if the app is stopped.</span></span> <span data-ttu-id="be0d2-149">Veillez à supprimer les plans que vous n’utilisez pas (par exemple, les déploiements de test).</span><span class="sxs-lookup"><span data-stu-id="be0d2-149">Make sure to delete plans that you aren't using (for example, test deployments).</span></span>

### <a name="sql-database"></a><span data-ttu-id="be0d2-150">Base de données SQL</span><span class="sxs-lookup"><span data-stu-id="be0d2-150">SQL Database</span></span>
<span data-ttu-id="be0d2-151">Utilisez la [version V12] [ sql-db-v12] de SQL Database.</span><span class="sxs-lookup"><span data-stu-id="be0d2-151">Use the [V12 version][sql-db-v12] of SQL Database.</span></span> <span data-ttu-id="be0d2-152">SQL Database prend en charge les [niveaux de service][sql-db-service-tiers] Basic, Standard et Premium, avec plusieurs niveaux de performances au sein de chaque niveau, mesurés en [unités de transaction de base de données (DTU)][sql-dtu].</span><span class="sxs-lookup"><span data-stu-id="be0d2-152">SQL Database supports Basic, Standard, and Premium [service tiers][sql-db-service-tiers], with multiple performance levels within each tier measured in [Database Transaction Units (DTUs)][sql-dtu].</span></span> <span data-ttu-id="be0d2-153">Planifiez la capacité et choisissez des niveaux de service et de performances correspondant à vos besoins.</span><span class="sxs-lookup"><span data-stu-id="be0d2-153">Perform capacity planning and choose a tier and performance level that meets your requirements.</span></span>

### <a name="region"></a><span data-ttu-id="be0d2-154">Région</span><span class="sxs-lookup"><span data-stu-id="be0d2-154">Region</span></span>
<span data-ttu-id="be0d2-155">Configurez le plan App Service et SQL Database dans la même région pour réduire la latence du réseau.</span><span class="sxs-lookup"><span data-stu-id="be0d2-155">Provision the App Service plan and the SQL Database in the same region to minimize network latency.</span></span> <span data-ttu-id="be0d2-156">Généralement, sélectionnez la région la plus proche de vos utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="be0d2-156">Generally, choose the region closest to your users.</span></span>

<span data-ttu-id="be0d2-157">Le groupe de ressources est également doté d’une région, indiquant où les métadonnées de déploiement sont stockées.</span><span class="sxs-lookup"><span data-stu-id="be0d2-157">The resource group also has a region, which specifies where deployment metadata is stored.</span></span> <span data-ttu-id="be0d2-158">Placez le groupe de ressources et ses ressources dans la même région.</span><span class="sxs-lookup"><span data-stu-id="be0d2-158">Put the resource group and its resources in the same region.</span></span> <span data-ttu-id="be0d2-159">Cela peut améliorer la disponibilité lors du déploiement.</span><span class="sxs-lookup"><span data-stu-id="be0d2-159">This can improve availability during deployment.</span></span> 

## <a name="scalability-considerations"></a><span data-ttu-id="be0d2-160">Considérations relatives à l’extensibilité</span><span class="sxs-lookup"><span data-stu-id="be0d2-160">Scalability considerations</span></span>

<span data-ttu-id="be0d2-161">Le principal avantage de Azure App Service est la possibilité de mettre à l’échelle votre application en fonction de la charge.</span><span class="sxs-lookup"><span data-stu-id="be0d2-161">A major benefit of Azure App Service is the ability to scale your application based on load.</span></span> <span data-ttu-id="be0d2-162">Voici quelques considérations à prendre en compte pendant la planification de la mise à l’échelle de votre application.</span><span class="sxs-lookup"><span data-stu-id="be0d2-162">Here are some considerations to keep in mind when planning to scale your application.</span></span>

### <a name="scaling-the-app-service-app"></a><span data-ttu-id="be0d2-163">Mise à l’échelle de l’application App Service</span><span class="sxs-lookup"><span data-stu-id="be0d2-163">Scaling the App Service app</span></span>

<span data-ttu-id="be0d2-164">Il existe deux façons de mettre à l’échelle une application App Service :</span><span class="sxs-lookup"><span data-stu-id="be0d2-164">There are two ways to scale an App Service app:</span></span>

* <span data-ttu-id="be0d2-165">*Monter en puissance*, signifiant la modification de la taille de l’instance.</span><span class="sxs-lookup"><span data-stu-id="be0d2-165">*Scale up*, which means changing the instance size.</span></span> <span data-ttu-id="be0d2-166">La taille de l’instance détermine la quantité de mémoire et de stockage et le nombre de cœurs pour chaque instance de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="be0d2-166">The instance size determines the memory, number of cores, and storage on each VM instance.</span></span> <span data-ttu-id="be0d2-167">Vous pouvez monter en puissance manuellement en modifiant la taille d’instance ou le niveau du plan.</span><span class="sxs-lookup"><span data-stu-id="be0d2-167">You can scale up manually by changing the instance size or the plan tier.</span></span>  

* <span data-ttu-id="be0d2-168">*Monter en charge*, signifiant l’ajout d’instances pour traiter une augmentation de charge.</span><span class="sxs-lookup"><span data-stu-id="be0d2-168">*Scale out*, which means adding instances to handle increased load.</span></span> <span data-ttu-id="be0d2-169">Chaque niveau de tarification possède un nombre d’instances maximal.</span><span class="sxs-lookup"><span data-stu-id="be0d2-169">Each pricing tier has a maximum number of instances.</span></span> 

  <span data-ttu-id="be0d2-170">Vous pouvez monter en charge manuellement en modifiant le nombre d’instances, ou en utilisant la [mise à l’échelle automatique ][web-app-autoscale] pour que Azure ajoute ou supprime automatiquement des instances en fonctions des mesures de performances et/ou de planification.</span><span class="sxs-lookup"><span data-stu-id="be0d2-170">You can scale out manually by changing the instance count, or use [autoscaling][web-app-autoscale] to have Azure automatically add or remove instances based on a schedule and/or performance metrics.</span></span> <span data-ttu-id="be0d2-171">Chaque opération de mise à l’échelle se produit rapidement&mdash;généralement en quelques secondes.</span><span class="sxs-lookup"><span data-stu-id="be0d2-171">Each scale operation happens quickly&mdash;typically within seconds.</span></span> 

  <span data-ttu-id="be0d2-172">Pour activer la mise à l’échelle automatique, créez un *profil* de mise à l’échelle qui définit le nombre minimal et maximal d’instances.</span><span class="sxs-lookup"><span data-stu-id="be0d2-172">To enable autoscaling, create an autoscale *profile* that defines the minimum and maximum number of instances.</span></span> <span data-ttu-id="be0d2-173">Les profils peuvent être planifiés.</span><span class="sxs-lookup"><span data-stu-id="be0d2-173">Profiles can be scheduled.</span></span> <span data-ttu-id="be0d2-174">Par exemple, vous pouvez créer des profils différents pour les jours de la semaine et le week-end.</span><span class="sxs-lookup"><span data-stu-id="be0d2-174">For example, you might create separate profiles for weekdays and weekends.</span></span> <span data-ttu-id="be0d2-175">Un profil peut contenir des règles pour l’ajout ou la suppression des instances.</span><span class="sxs-lookup"><span data-stu-id="be0d2-175">Optionally, a profile contains rules for when to add or remove instances.</span></span> <span data-ttu-id="be0d2-176">(Exemple : ajouter deux instances si l’utilisation du processeur est supérieure à 70 % pendant 5 minutes.)</span><span class="sxs-lookup"><span data-stu-id="be0d2-176">(Example: Add two instances if CPU usage is above 70% for 5 minutes.)</span></span>
  
<span data-ttu-id="be0d2-177">Recommandations pour la mise à l’échelle d’une application web :</span><span class="sxs-lookup"><span data-stu-id="be0d2-177">Recommendations for scaling a web app:</span></span>

* <span data-ttu-id="be0d2-178">Évitez la mise à l’échelle autant que possible car elle peut déclencher le redémarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="be0d2-178">As much as possible, avoid scaling up and down, because it may trigger an application restart.</span></span> <span data-ttu-id="be0d2-179">À la place, sélectionnez un niveau et une taille répondant à vos besoins de performances sous une charge normale, puis augmentez la taille des instances pour gérer les changements dans le volume de trafic.</span><span class="sxs-lookup"><span data-stu-id="be0d2-179">Instead, select a tier and size that meet your performance requirements under typical load and then scale out the instances to handle changes in traffic volume.</span></span>    
* <span data-ttu-id="be0d2-180">Activez la mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="be0d2-180">Enable autoscaling.</span></span> <span data-ttu-id="be0d2-181">Si votre application a une charge de travail régulière et prévisible, créez des profils pour planifier à l’avance le nombre d’instances.</span><span class="sxs-lookup"><span data-stu-id="be0d2-181">If your application has a predictable, regular workload, create profiles to schedule the instance counts ahead of time.</span></span> <span data-ttu-id="be0d2-182">Si la charge de travail n’est pas prévisible, faites une mise à l’échelle basée sur des règles pour réagir aux variations de charge.</span><span class="sxs-lookup"><span data-stu-id="be0d2-182">If the workload is not predictable, use rule-based autoscaling to react to changes in load as they occur.</span></span> <span data-ttu-id="be0d2-183">Vous pouvez combiner ces deux approches.</span><span class="sxs-lookup"><span data-stu-id="be0d2-183">You can combine both approaches.</span></span>
* <span data-ttu-id="be0d2-184">L’utilisation de l’UC est généralement une bonne métrique pour les règles de mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="be0d2-184">CPU usage is generally a good metric for autoscale rules.</span></span> <span data-ttu-id="be0d2-185">Toutefois, vous devriez tester la charge de votre application, identifier les goulots d’étranglement potentiels et baser vos règles de mise à l’échelle sur ces données.</span><span class="sxs-lookup"><span data-stu-id="be0d2-185">However, you should load test your application, identify potential bottlenecks, and base your autoscale rules on that data.</span></span>  
* <span data-ttu-id="be0d2-186">Les règles de mise à l’échelle incluent une période de *refroidissement*, correspondant à l’intervalle entre la fin d’une action de mise à l’échelle et le démarrage d’une nouvelle.</span><span class="sxs-lookup"><span data-stu-id="be0d2-186">Autoscale rules include a *cool-down* period, which is the interval to wait after a scale action has completed before starting a new scale action.</span></span> <span data-ttu-id="be0d2-187">La période de refroidissement permet de stabiliser le système avant une nouvelle mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="be0d2-187">The cool-down period lets the system stabilize before scaling again.</span></span> <span data-ttu-id="be0d2-188">Définissez une période de refroidissement plus courte pour l’ajout d’instances et une période de refroidissement plus longue pour la suppression d’instances.</span><span class="sxs-lookup"><span data-stu-id="be0d2-188">Set a shorter cool-down period for adding instances, and a longer cool-down period for removing instances.</span></span> <span data-ttu-id="be0d2-189">Par exemple, choisissez une période de 5 minutes pour ajouter une instance, mais une période de 60 minutes pour supprimer une instance.</span><span class="sxs-lookup"><span data-stu-id="be0d2-189">For example, set 5 minutes to add an instance, but 60 minutes to remove an instance.</span></span> <span data-ttu-id="be0d2-190">Il est préférable d’ajouter de nouvelles instances rapidement en cas de charge importante afin de pouvoir gérer le trafic supplémentaire, puis de réduire progressivement le nombre d’instances.</span><span class="sxs-lookup"><span data-stu-id="be0d2-190">It's better to add new instances quickly under heavy load to handle the additional traffic, and then gradually scale back.</span></span>

### <a name="scaling-sql-database"></a><span data-ttu-id="be0d2-191">Mise à l’échelle de SQL Database</span><span class="sxs-lookup"><span data-stu-id="be0d2-191">Scaling SQL Database</span></span>
<span data-ttu-id="be0d2-192">Si vous avez besoin d’un niveau de service ou de performances supérieur pour SQL Database, vous pouvez monter en puissance les bases de données individuelles sans interruption de l’application.</span><span class="sxs-lookup"><span data-stu-id="be0d2-192">If you need a higher service tier or performance level for SQL Database, you can scale up individual databases with no application downtime.</span></span> <span data-ttu-id="be0d2-193">Pour plus d’informations, consultez [Options et performances de SQL Database : comprendre ce qui est disponible dans chaque niveau de service][sql-db-scale].</span><span class="sxs-lookup"><span data-stu-id="be0d2-193">For more information, see [SQL Database options and performance: Understand what's available in each service tier][sql-db-scale].</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="be0d2-194">Considérations relatives à la disponibilité</span><span class="sxs-lookup"><span data-stu-id="be0d2-194">Availability considerations</span></span>
<span data-ttu-id="be0d2-195">Au moment de l’écriture, le contrat de niveau de service (SLA) pour App Service est de 99,95 % et le contrat SLA pour SQL Database est de 99,99 % pour les niveaux Basic, Standard et Premium.</span><span class="sxs-lookup"><span data-stu-id="be0d2-195">At the time of writing, the service level agreement (SLA) for App Service is 99.95% and the SLA for SQL Database is 99.99% for Basic, Standard, and Premium tiers.</span></span> 

> [!NOTE]
> <span data-ttu-id="be0d2-196">Le contrat SLA App Service s’applique aux instances uniques et multiples.</span><span class="sxs-lookup"><span data-stu-id="be0d2-196">The App Service SLA applies to both single and multiple instances.</span></span>  
>
>

### <a name="backups"></a><span data-ttu-id="be0d2-197">Sauvegardes</span><span class="sxs-lookup"><span data-stu-id="be0d2-197">Backups</span></span>
<span data-ttu-id="be0d2-198">En cas de perte de données, SQL Database fournit la restauration dans le temps et la restauration géographique.</span><span class="sxs-lookup"><span data-stu-id="be0d2-198">In the event of data loss, SQL Database provides point-in-time restore and geo-restore.</span></span> <span data-ttu-id="be0d2-199">Ces fonctionnalités sont disponibles dans tous les niveaux et sont automatiquement activées.</span><span class="sxs-lookup"><span data-stu-id="be0d2-199">These features are available in all tiers and are automatically enabled.</span></span> <span data-ttu-id="be0d2-200">Vous n’avez pas besoin de planifier ou de gérer les sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="be0d2-200">You don't need to schedule or manage the backups.</span></span> 

- <span data-ttu-id="be0d2-201">Utilisez la restauration dans le temps pour [récupérer d’une erreur humaine][sql-human-error] en restaurant la base de données à une date/heure antérieure.</span><span class="sxs-lookup"><span data-stu-id="be0d2-201">Use point-in-time restore to [recover from human error][sql-human-error] by returning the database to an earlier point in time.</span></span> 
- <span data-ttu-id="be0d2-202">Utilisez la restauration géographique pour [récupérer d’une interruption de service][sql-outage-recovery] en restaurant une base de données à partir d’une sauvegarde géo-redondante.</span><span class="sxs-lookup"><span data-stu-id="be0d2-202">Use geo-restore to [recover from a service outage][sql-outage-recovery] by restoring a database from a geo-redundant backup.</span></span> 

<span data-ttu-id="be0d2-203">Pour en savoir plus, consultez l’article [Continuité des activités cloud et récupération d’urgence d’une base de données avec SQL Database][sql-backup].</span><span class="sxs-lookup"><span data-stu-id="be0d2-203">For more information, see [Cloud business continuity and database disaster recovery with SQL Database][sql-backup].</span></span>

<span data-ttu-id="be0d2-204">App Service possède une fonctionnalité [Sauvegarde et restauration][web-app-backup] pour les fichiers de votre application.</span><span class="sxs-lookup"><span data-stu-id="be0d2-204">App Service provides a [backup and restore][web-app-backup] feature for your application files.</span></span> <span data-ttu-id="be0d2-205">Toutefois, sachez que les fichiers sauvegardés incluent les paramètres de l’application en texte brut et qu’ils peuvent contenir des secrets, comme les chaînes de connexion.</span><span class="sxs-lookup"><span data-stu-id="be0d2-205">However, be aware that the backed-up files include app settings in plain text and these may include secrets, such as connection strings.</span></span> <span data-ttu-id="be0d2-206">Évitez d’utiliser la fonctionnalité de sauvegarde de App Service pour sauvegarder vos bases de données SQL, car elle exporte la base de données dans un fichier .bacpac SQL, en consommant des [DTU][sql-dtu].</span><span class="sxs-lookup"><span data-stu-id="be0d2-206">Avoid using the App Service backup feature to back up your SQL databases because it exports the database to a SQL .bacpac file, consuming [DTUs][sql-dtu].</span></span> <span data-ttu-id="be0d2-207">Utilisez plutôt la restauration dans le temps de SQL Database, décrite ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="be0d2-207">Instead, use SQL Database point-in-time restore described above.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="be0d2-208">Considérations relatives à la facilité de gestion</span><span class="sxs-lookup"><span data-stu-id="be0d2-208">Manageability considerations</span></span>
<span data-ttu-id="be0d2-209">Créez des groupes de ressources distincts pour les environnements de production, de développement et de test.</span><span class="sxs-lookup"><span data-stu-id="be0d2-209">Create separate resource groups for production, development, and test environments.</span></span> <span data-ttu-id="be0d2-210">Cela simplifie la gestion des déploiements, la suppression des déploiements de test et l’attribution des droits d’accès.</span><span class="sxs-lookup"><span data-stu-id="be0d2-210">This makes it easier to manage deployments, delete test deployments, and assign access rights.</span></span>

<span data-ttu-id="be0d2-211">Lorsque vous attribuez des ressources aux groupes de ressources, considérez les points suivants :</span><span class="sxs-lookup"><span data-stu-id="be0d2-211">When assigning resources to resource groups, consider the following:</span></span>

* <span data-ttu-id="be0d2-212">Cycle de vie.</span><span class="sxs-lookup"><span data-stu-id="be0d2-212">Lifecycle.</span></span> <span data-ttu-id="be0d2-213">D’une façon générale, placez les ressources avec le même cycle de vie dans un même groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="be0d2-213">In general, put resources with the same lifecycle into the same resource group.</span></span>
* <span data-ttu-id="be0d2-214">Accès.</span><span class="sxs-lookup"><span data-stu-id="be0d2-214">Access.</span></span> <span data-ttu-id="be0d2-215">Vous pouvez utiliser le [contrôle d’accès en fonction du rôle][rbac] (RBAC) pour appliquer des stratégies d’accès aux ressources dans un groupe.</span><span class="sxs-lookup"><span data-stu-id="be0d2-215">You can use [role-based access control][rbac] (RBAC) to apply access policies to the resources in a group.</span></span>
* <span data-ttu-id="be0d2-216">Facturation.</span><span class="sxs-lookup"><span data-stu-id="be0d2-216">Billing.</span></span> <span data-ttu-id="be0d2-217">Vous pouvez afficher les coûts cumulés pour le groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="be0d2-217">You can view the rolled-up costs for the resource group.</span></span>  

<span data-ttu-id="be0d2-218">Pour plus d’informations, consultez [Présentation d’Azure Resource Manager](/azure/azure-resource-manager/resource-group-overview).</span><span class="sxs-lookup"><span data-stu-id="be0d2-218">For more information, see [Azure Resource Manager overview](/azure/azure-resource-manager/resource-group-overview).</span></span>

### <a name="deployment"></a><span data-ttu-id="be0d2-219">Déploiement</span><span class="sxs-lookup"><span data-stu-id="be0d2-219">Deployment</span></span>
<span data-ttu-id="be0d2-220">Le déploiement implique deux étapes :</span><span class="sxs-lookup"><span data-stu-id="be0d2-220">Deployment involves two steps:</span></span>

1. <span data-ttu-id="be0d2-221">Attribution des ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="be0d2-221">Provisioning the Azure resources.</span></span> <span data-ttu-id="be0d2-222">Nous vous recommandons d’utiliser les [modèles de Azure Resource Manager][arm-template] pour cette étape.</span><span class="sxs-lookup"><span data-stu-id="be0d2-222">We recommend that you use [Azure Resoure Manager templates][arm-template] for this step.</span></span> <span data-ttu-id="be0d2-223">Les modèles facilitent l’automatisation des déploiements via PowerShell ou l’interface de ligne de commande (CLI) de Azure.</span><span class="sxs-lookup"><span data-stu-id="be0d2-223">Templates make it easier to automate deployments via PowerShell or the Azure command line interface (CLI).</span></span>
2. <span data-ttu-id="be0d2-224">Déploiement de l’application (code, binaires et fichiers de contenu).</span><span class="sxs-lookup"><span data-stu-id="be0d2-224">Deploying the application (code, binaries, and content files).</span></span> <span data-ttu-id="be0d2-225">Vous disposez de plusieurs options, notamment le déploiement depuis un référentiel Git local, à l’aide de Visual Studio ou bien un déploiement continu à partir du contrôle de code source dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="be0d2-225">You have several options, including deploying from a local Git repository, using Visual Studio, or continuous deployment from cloud-based source control.</span></span> <span data-ttu-id="be0d2-226">Voir [Déploiement de votre application dans Azure App Service][deploy].</span><span class="sxs-lookup"><span data-stu-id="be0d2-226">See [Deploy your app to Azure App Service][deploy].</span></span>  

<span data-ttu-id="be0d2-227">Une application App Service dispose toujours d’un emplacement de déploiement nommé `production`, représentant le site de production en direct.</span><span class="sxs-lookup"><span data-stu-id="be0d2-227">An App Service app always has one deployment slot named `production`, which represents the live production site.</span></span> <span data-ttu-id="be0d2-228">Nous vous recommandons de créer un emplacement de préproduction pour le déploiement des mises à jour.</span><span class="sxs-lookup"><span data-stu-id="be0d2-228">We recommend creating a staging slot for deploying updates.</span></span> <span data-ttu-id="be0d2-229">Voici plusieurs avantages de l’utilisation d’un emplacement de préproduction :</span><span class="sxs-lookup"><span data-stu-id="be0d2-229">The benefits of using a staging slot include:</span></span>

* <span data-ttu-id="be0d2-230">Vous pouvez vérifier la réussite du déploiement, avant de le permuter en production.</span><span class="sxs-lookup"><span data-stu-id="be0d2-230">You can verify the deployment succeeded, before swapping it into production.</span></span>
* <span data-ttu-id="be0d2-231">Le déploiement vers un emplacement de préproduction garantit la préparation de toutes les instances avant de le permuter en production.</span><span class="sxs-lookup"><span data-stu-id="be0d2-231">Deploying to a staging slot ensures that all instances are warmed up before being swapped into production.</span></span> <span data-ttu-id="be0d2-232">Un grand nombre d’application possèdent un temps de préparation et de démarrage à froid important.</span><span class="sxs-lookup"><span data-stu-id="be0d2-232">Many applications have a significant warmup and cold-start time.</span></span>

<span data-ttu-id="be0d2-233">Nous vous recommandons également la création d’un troisième emplacement pour stocker le dernier déploiement correct.</span><span class="sxs-lookup"><span data-stu-id="be0d2-233">We also recommend creating a third slot to hold the last-known-good deployment.</span></span> <span data-ttu-id="be0d2-234">Après avoir échangé les emplacements de préproduction et de production, déplacez le déploiement de production précédent (maintenant à l’emplacement de préproduction) vers l’emplacement du dernier déploiement correct.</span><span class="sxs-lookup"><span data-stu-id="be0d2-234">After you swap staging and production, move the previous production deployment (which is now in staging) into the last-known-good slot.</span></span> <span data-ttu-id="be0d2-235">Ainsi, vous pouvez rapidement revenir à la dernière version correcte si vous détectez un problème plus tard.</span><span class="sxs-lookup"><span data-stu-id="be0d2-235">That way, if you discover a problem later, you can quickly revert to the last-known-good version.</span></span>

<span data-ttu-id="be0d2-236">![[1]][1]</span><span class="sxs-lookup"><span data-stu-id="be0d2-236">![[1]][1]</span></span>

<span data-ttu-id="be0d2-237">Si vous restaurez une version précédente, assurez-vous que toutes les modifications de schéma de la base de données sont rétrocompatibles.</span><span class="sxs-lookup"><span data-stu-id="be0d2-237">If you revert to a previous version, make sure any database schema changes are backward compatible.</span></span>

<span data-ttu-id="be0d2-238">N’utilisez pas d’emplacements de votre déploiement de production pour des tests, car toutes les applications appartenant au même plan App Service partagent les mêmes instances de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="be0d2-238">Don't use slots on your production deployment for testing because all apps within the same App Service plan share the same VM instances.</span></span> <span data-ttu-id="be0d2-239">Par exemple, des tests de charge peuvent dégrader le site de production réelle.</span><span class="sxs-lookup"><span data-stu-id="be0d2-239">For example, load tests might degrade the live production site.</span></span> <span data-ttu-id="be0d2-240">Utilisez plutôt des plans App Service distincts pour la production et le test.</span><span class="sxs-lookup"><span data-stu-id="be0d2-240">Instead, create separate App Service plans for production and test.</span></span> <span data-ttu-id="be0d2-241">En plaçant les déploiements de test dans un plan séparé, vous les isolez de la version de production.</span><span class="sxs-lookup"><span data-stu-id="be0d2-241">By putting test deployments into a separate plan, you isolate them from the production version.</span></span>

### <a name="configuration"></a><span data-ttu-id="be0d2-242">Configuration</span><span class="sxs-lookup"><span data-stu-id="be0d2-242">Configuration</span></span>
<span data-ttu-id="be0d2-243">Stockez les paramètres de configuration en tant que [paramètres de l’application][app-settings].</span><span class="sxs-lookup"><span data-stu-id="be0d2-243">Store configuration settings as [app settings][app-settings].</span></span> <span data-ttu-id="be0d2-244">Définissez les paramètres d’application dans vos modèles Resource Manager ou à l’aide de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="be0d2-244">Define the app settings in your Resource Manager templates, or using PowerShell.</span></span> <span data-ttu-id="be0d2-245">Lors du runtime, les paramètres d’application sont disponibles pour l’application en tant que variables d’environnement.</span><span class="sxs-lookup"><span data-stu-id="be0d2-245">At runtime, app settings are available to the application as environment variables.</span></span>

<span data-ttu-id="be0d2-246">Ne recherchez jamais des mots de passe, clés d’accès ou chaînes de connexion dans un contrôle de code source.</span><span class="sxs-lookup"><span data-stu-id="be0d2-246">Never check passwords, access keys, or connection strings into source control.</span></span> <span data-ttu-id="be0d2-247">Au lieu de cela, passez-les en tant que paramètres dans un script de déploiement qui stocke ces valeurs comme paramètres de l’application.</span><span class="sxs-lookup"><span data-stu-id="be0d2-247">Instead, pass these as parameters to a deployment script that stores these values as app settings.</span></span>

<span data-ttu-id="be0d2-248">Lorsque vous échangez un emplacement de déploiement, les paramètres d’application sont échangés par défaut.</span><span class="sxs-lookup"><span data-stu-id="be0d2-248">When you swap a deployment slot, the app settings are swapped by default.</span></span> <span data-ttu-id="be0d2-249">Si vous avez besoin de paramètres différents pour la production et la préproduction, vous pouvez créer des paramètres d’application spécifiques à un emplacement et qui ne seront pas transférés.</span><span class="sxs-lookup"><span data-stu-id="be0d2-249">If you need different settings for production and staging, you can create app settings that stick to a slot and don't get swapped.</span></span>

### <a name="diagnostics-and-monitoring"></a><span data-ttu-id="be0d2-250">Diagnostics et surveillance</span><span class="sxs-lookup"><span data-stu-id="be0d2-250">Diagnostics and monitoring</span></span>
<span data-ttu-id="be0d2-251">Activez la [journalisation des diagnostics][diagnostic-logs], y compris le journal des applications et le journal du serveur web.</span><span class="sxs-lookup"><span data-stu-id="be0d2-251">Enable [diagnostics logging][diagnostic-logs], including application logging and web server logging.</span></span> <span data-ttu-id="be0d2-252">Configurez la journalisation pour utiliser le stockage d’objets Blob.</span><span class="sxs-lookup"><span data-stu-id="be0d2-252">Configure logging to use Blob storage.</span></span> <span data-ttu-id="be0d2-253">Pour des raisons de performances, créez un compte de stockage distinct pour les journaux de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="be0d2-253">For performance reasons, create a separate storage account for diagnostic logs.</span></span> <span data-ttu-id="be0d2-254">N’utilisez pas le même compte de stockage pour les journaux et les données d’application.</span><span class="sxs-lookup"><span data-stu-id="be0d2-254">Don't use the same storage account for logs and application data.</span></span> <span data-ttu-id="be0d2-255">Pour plus d’informations sur la journalisation, consultez le [Guide de surveillance et de diagnostic][monitoring-guidance].</span><span class="sxs-lookup"><span data-stu-id="be0d2-255">For more detailed guidance on logging, see [Monitoring and diagnostics guidance][monitoring-guidance].</span></span>

<span data-ttu-id="be0d2-256">Utiliser un service tel que [New Relic][new-relic] ou [Application Insights][app-insights] pour surveiller les performances et le comportement de l’application sous charge.</span><span class="sxs-lookup"><span data-stu-id="be0d2-256">Use a service such as [New Relic][new-relic] or [Application Insights][app-insights] to monitor application performance and behavior under load.</span></span> <span data-ttu-id="be0d2-257">Soyez conscient des [limites du débit de données][app-insights-data-rate] de Application Insights.</span><span class="sxs-lookup"><span data-stu-id="be0d2-257">Be aware of the [data rate limits][app-insights-data-rate] for Application Insights.</span></span>

<span data-ttu-id="be0d2-258">Effectuez un test de charge, à l’aide d’un outil tel que [Visual Studio Team Services][vsts].</span><span class="sxs-lookup"><span data-stu-id="be0d2-258">Perform load testing, using a tool such as [Visual Studio Team Services][vsts].</span></span> <span data-ttu-id="be0d2-259">Pour obtenir une vue d’ensemble de l’analyse des performances dans les applications cloud, consultez le [Manuel d’analyse de performances][perf-analysis].</span><span class="sxs-lookup"><span data-stu-id="be0d2-259">For a general overview of performance analysis in cloud applications, see [Performance Analysis Primer][perf-analysis].</span></span>

<span data-ttu-id="be0d2-260">Conseils de dépannage de votre application :</span><span class="sxs-lookup"><span data-stu-id="be0d2-260">Tips for troubleshooting your application:</span></span>

* <span data-ttu-id="be0d2-261">Utilisez le [panneau de dépannage][troubleshoot-blade] dans le portail Azure pour trouver des solutions aux problèmes courants.</span><span class="sxs-lookup"><span data-stu-id="be0d2-261">Use the [troubleshoot blade][troubleshoot-blade] in the Azure portal to find solutions to common problems.</span></span>
* <span data-ttu-id="be0d2-262">Activez la [diffusion de journaux][web-app-log-stream] pour consulter les informations de journalisation en temps quasi-réel.</span><span class="sxs-lookup"><span data-stu-id="be0d2-262">Enable [log streaming][web-app-log-stream] to see logging information in near-real time.</span></span>
* <span data-ttu-id="be0d2-263">Le [tableau de bord Kudu][kudu] dispose de plusieurs outils pour surveiller et déboguer votre application.</span><span class="sxs-lookup"><span data-stu-id="be0d2-263">The [Kudu dashboard][kudu] has several tools for monitoring and debugging your application.</span></span> <span data-ttu-id="be0d2-264">Pour plus d'informations, consultez [Outils en ligne de Sites Web Azure que vous devez connaître][kudu] (billet de blog).</span><span class="sxs-lookup"><span data-stu-id="be0d2-264">For more information, see [Azure Websites online tools you should know about][kudu] (blog post).</span></span> <span data-ttu-id="be0d2-265">Vous pouvez atteindre le tableau de bord Kudu à partir du portail Azure.</span><span class="sxs-lookup"><span data-stu-id="be0d2-265">You can reach the Kudu dashboard from the Azure portal.</span></span> <span data-ttu-id="be0d2-266">Ouvrez le panneau pour votre application et cliquez sur **Outils**, puis cliquez sur **Kudu**.</span><span class="sxs-lookup"><span data-stu-id="be0d2-266">Open the blade for your app and click **Tools**, then click **Kudu**.</span></span>
* <span data-ttu-id="be0d2-267">Si vous utilisez Visual Studio, consultez l’article [Dépanner une application web dans Azure App Service à l’aide de Visual Studio][troubleshoot-web-app] pour obtenir des conseils de débogage et de dépannage.</span><span class="sxs-lookup"><span data-stu-id="be0d2-267">If you use Visual Studio, see the article [Troubleshoot a web app in Azure App Service using Visual Studio][troubleshoot-web-app] for debugging and troubleshooting tips.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="be0d2-268">Considérations relatives à la sécurité</span><span class="sxs-lookup"><span data-stu-id="be0d2-268">Security considerations</span></span>
<span data-ttu-id="be0d2-269">Cette section répertorie les considérations relatives à la sécurité qui sont spécifiques aux services Azure décrits dans cet article.</span><span class="sxs-lookup"><span data-stu-id="be0d2-269">This section lists security considerations that are specific to the Azure services described in this article.</span></span> <span data-ttu-id="be0d2-270">Il ne s’agit pas d’une liste complète de bonnes pratiques relatives à la sécurité.</span><span class="sxs-lookup"><span data-stu-id="be0d2-270">It's not a complete list of security best practices.</span></span> <span data-ttu-id="be0d2-271">Pour certaines considérations supplémentaires relatives à la sécurité, consultez [Sécuriser une application dans Azure App Service][app-service-security].</span><span class="sxs-lookup"><span data-stu-id="be0d2-271">For some additional security considerations, see [Secure an app in Azure App Service][app-service-security].</span></span>

### <a name="sql-database-auditing"></a><span data-ttu-id="be0d2-272">Audit de base de données SQL</span><span class="sxs-lookup"><span data-stu-id="be0d2-272">SQL Database auditing</span></span>
<span data-ttu-id="be0d2-273">L’audit peut vous aider à respecter une conformité réglementaire et à découvrir des discordances et irrégularités susceptibles d’indiquer des problèmes pour l’entreprise ou des violations de la sécurité.</span><span class="sxs-lookup"><span data-stu-id="be0d2-273">Auditing can help you maintain regulatory compliance and get insight into discrepancies and irregularities that could indicate business concerns or suspected security violations.</span></span> <span data-ttu-id="be0d2-274">Voir [Prise en main de l’audit de base de données SQL][sql-audit].</span><span class="sxs-lookup"><span data-stu-id="be0d2-274">See [Get started with SQL database auditing][sql-audit].</span></span>

### <a name="deployment-slots"></a><span data-ttu-id="be0d2-275">Emplacements de déploiement</span><span class="sxs-lookup"><span data-stu-id="be0d2-275">Deployment slots</span></span>
<span data-ttu-id="be0d2-276">Chaque emplacement de déploiement possède une adresse IP publique.</span><span class="sxs-lookup"><span data-stu-id="be0d2-276">Each deployment slot has a public IP address.</span></span> <span data-ttu-id="be0d2-277">Sécuriser les emplacements de production à l’aide de la [connexion de Azure Active Directory][aad-auth] afin que seuls les membres de vos équipes de DevOps et de développement puissent atteindre ces points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="be0d2-277">Secure the nonproduction slots using [Azure Active Directory login][aad-auth] so that only members of your development and DevOps teams can reach those endpoints.</span></span>

### <a name="logging"></a><span data-ttu-id="be0d2-278">Journalisation</span><span class="sxs-lookup"><span data-stu-id="be0d2-278">Logging</span></span>
<span data-ttu-id="be0d2-279">Les journaux ne devrez jamais enregistrer les mots de passe des utilisateurs ou d’autres informations qui peuvent être utilisées pour valider l’usurpation d’identité.</span><span class="sxs-lookup"><span data-stu-id="be0d2-279">Logs should never record users' passwords or other information that might be used to commit identity fraud.</span></span> <span data-ttu-id="be0d2-280">Retirez ces détails des données avant de les stocker.</span><span class="sxs-lookup"><span data-stu-id="be0d2-280">Scrub those details from the data before storing it.</span></span>   

### <a name="ssl"></a><span data-ttu-id="be0d2-281">SSL</span><span class="sxs-lookup"><span data-stu-id="be0d2-281">SSL</span></span>
<span data-ttu-id="be0d2-282">Une application App Service comprend un point de terminaison SSL sur un sous-domaine de `azurewebsites.net` sans coût supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="be0d2-282">An App Service app includes an SSL endpoint on a subdomain of `azurewebsites.net` at no additional cost.</span></span> <span data-ttu-id="be0d2-283">Le point de terminaison SSL comprend un certificat générique pour le domaine `*.azurewebsites.net`.</span><span class="sxs-lookup"><span data-stu-id="be0d2-283">The SSL endpoint includes a wildcard certificate for the `*.azurewebsites.net` domain.</span></span> <span data-ttu-id="be0d2-284">Si vous utilisez un nom de domaine personnalisé, vous devez fournir un certificat correspondant au domaine personnalisé.</span><span class="sxs-lookup"><span data-stu-id="be0d2-284">If you use a custom domain name, you must provide a certificate that matches the custom domain.</span></span> <span data-ttu-id="be0d2-285">L’approche la plus simple est d’acheter un certificat directement via le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="be0d2-285">The simplest approach is to buy a certificate directly through the Azure portal.</span></span> <span data-ttu-id="be0d2-286">Vous pouvez également importer des certificats à partir d’autres autorités de certification.</span><span class="sxs-lookup"><span data-stu-id="be0d2-286">You can also import certificates from other certificate authorities.</span></span> <span data-ttu-id="be0d2-287">Pour plus d’informations, consultez [Acheter et configurer un certificat SSL pour votre service Azure App Service][ssl-cert].</span><span class="sxs-lookup"><span data-stu-id="be0d2-287">For more information, see [Buy and Configure an SSL Certificate for your Azure App Service][ssl-cert].</span></span>

<span data-ttu-id="be0d2-288">Comme meilleure pratique de sécurité, votre application doit appliquer le protocole HTTPS en redirigeant les requêtes HTTP.</span><span class="sxs-lookup"><span data-stu-id="be0d2-288">As a security best practice, your app should enforce HTTPS by redirecting HTTP requests.</span></span> <span data-ttu-id="be0d2-289">Vous pouvez implémenter cela à l’intérieur de votre application ou utiliser une règle de réécriture d’URL, comme décrit dans [Activer le protocole HTTPS pour une application dans Azure App Service][ssl-redirect].</span><span class="sxs-lookup"><span data-stu-id="be0d2-289">You can implement this inside your application or use a URL rewrite rule as described in [Enable HTTPS for an app in Azure App Service][ssl-redirect].</span></span>

### <a name="authentication"></a><span data-ttu-id="be0d2-290">Authentification</span><span class="sxs-lookup"><span data-stu-id="be0d2-290">Authentication</span></span>
<span data-ttu-id="be0d2-291">Nous vous recommandons l’authentification via un fournisseur d’identité (IDP), tels que Azure AD, Facebook, Google, ou Twitter.</span><span class="sxs-lookup"><span data-stu-id="be0d2-291">We recommend authenticating through an identity provider (IDP), such as Azure AD, Facebook, Google, or Twitter.</span></span> <span data-ttu-id="be0d2-292">Utilisez OAuth 2 ou OpenID Connect (OIDC) pour le flux d’authentification.</span><span class="sxs-lookup"><span data-stu-id="be0d2-292">Use OAuth 2 or OpenID Connect (OIDC) for the authentication flow.</span></span> <span data-ttu-id="be0d2-293">Azure AD fournit des fonctionnalités permettant de gérer les utilisateurs et les groupes, créer des rôles d’application, intégrer vos identités locales et consommer des services principaux tels que Office 365 et Skype pour entreprises.</span><span class="sxs-lookup"><span data-stu-id="be0d2-293">Azure AD provides functionality to manage users and groups, create application roles, integrate your on-premises identities, and consume backend services such as Office 365 and Skype for Business.</span></span>

<span data-ttu-id="be0d2-294">Évitez que l’application gère directement les informations d’identification et des connexions, car cela crée une surface d’attaque potentielle.</span><span class="sxs-lookup"><span data-stu-id="be0d2-294">Avoid having the application manage user logins and credentials directly, as it creates a potential attack surface.</span></span>  <span data-ttu-id="be0d2-295">Au minimum, vous avez besoin d’une confirmation par e-mail, de la récupération de mot de passe et de l’authentification multifacteur ; la validation de la force du mot de passe ; et le stockage en toute sécurité des hachages de mot de passe.</span><span class="sxs-lookup"><span data-stu-id="be0d2-295">At a minimum, you would need to have email confirmation, password recovery, and multi-factor authentication; validate password strength; and store password hashes securely.</span></span> <span data-ttu-id="be0d2-296">Les grands fournisseurs d’identité gèrent tous ces éléments pour vous, et ils surveillent et améliorent constamment leurs pratiques de sécurité.</span><span class="sxs-lookup"><span data-stu-id="be0d2-296">The large identity providers handle all of those things for you, and are constantly monitoring and improving their security practices.</span></span>

<span data-ttu-id="be0d2-297">Envisagez l’utilisation de [l’authentification App Service][app-service-auth] pour implémenter le flux d’authentification OAuth/OIDC.</span><span class="sxs-lookup"><span data-stu-id="be0d2-297">Consider using [App Service authentication][app-service-auth] to implement the OAuth/OIDC authentication flow.</span></span> <span data-ttu-id="be0d2-298">Avantages de l’authentification App Service :</span><span class="sxs-lookup"><span data-stu-id="be0d2-298">The benefits of App Service authentication include:</span></span>

* <span data-ttu-id="be0d2-299">Simple à configurer.</span><span class="sxs-lookup"><span data-stu-id="be0d2-299">Easy to configure.</span></span>
* <span data-ttu-id="be0d2-300">Aucun code n’est requis pour les scénarios d’authentification simples.</span><span class="sxs-lookup"><span data-stu-id="be0d2-300">No code is required for simple authentication scenarios.</span></span>
* <span data-ttu-id="be0d2-301">Prend en charge la délégation d’autorisation à l’aide des jetons d’accès OAuth afin de consommer des ressources pour le compte de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="be0d2-301">Supports delegated authorization using OAuth access tokens to consume resources on behalf of the user.</span></span>
* <span data-ttu-id="be0d2-302">Fournit un cache de jeton intégré.</span><span class="sxs-lookup"><span data-stu-id="be0d2-302">Provides a built-in token cache.</span></span>

<span data-ttu-id="be0d2-303">Certaines limitations de l’authentification App Service :</span><span class="sxs-lookup"><span data-stu-id="be0d2-303">Some limitations of App Service authentication:</span></span>  

* <span data-ttu-id="be0d2-304">Options de personnalisation limitées.</span><span class="sxs-lookup"><span data-stu-id="be0d2-304">Limited customization options.</span></span>
* <span data-ttu-id="be0d2-305">L’autorisation déléguée est limitée à une ressource principale par ouverture de session.</span><span class="sxs-lookup"><span data-stu-id="be0d2-305">Delegated authorization is restricted to one backend resource per login session.</span></span>
* <span data-ttu-id="be0d2-306">Si vous utilisez plusieurs fournisseurs d’identité, il n’existe aucun mécanisme intégré pour la découverte du domaine d’accueil.</span><span class="sxs-lookup"><span data-stu-id="be0d2-306">If you use more than one IDP, there is no built-in mechanism for home realm discovery.</span></span>
* <span data-ttu-id="be0d2-307">Pour les scénarios d’architecture mutualisée, l’application doit implémenter la logique pour valider l’émetteur du jeton.</span><span class="sxs-lookup"><span data-stu-id="be0d2-307">For multi-tenant scenarios, the application must implement the logic to validate the token issuer.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="be0d2-308">Déployer la solution</span><span class="sxs-lookup"><span data-stu-id="be0d2-308">Deploy the solution</span></span>
<span data-ttu-id="be0d2-309">Un exemple de modèle Resource Manager pour cette architecture est [disponible sur GitHub][paas-basic-arm-template].</span><span class="sxs-lookup"><span data-stu-id="be0d2-309">An example Resoure Manager template for this architecture is [available on GitHub][paas-basic-arm-template].</span></span>

<span data-ttu-id="be0d2-310">Pour déployer le modèle à l’aide de PowerShell, exécutez les commandes suivantes :</span><span class="sxs-lookup"><span data-stu-id="be0d2-310">To deploy the template using PowerShell, run the following commands:</span></span>

```
New-AzureRmResourceGroup -Name <resource-group-name> -Location "West US"

$parameters = @{"appName"="<app-name>";"environment"="dev";"locationShort"="uw";"databaseName"="app-db";"administratorLogin"="<admin>";"administratorLoginPassword"="<password>"}

New-AzureRmResourceGroupDeployment -Name <deployment-name> -ResourceGroupName <resource-group-name> -TemplateFile .\PaaS-Basic.json -TemplateParameterObject  $parameters
```

<span data-ttu-id="be0d2-311">Pour plus d’informations, consultez [Déployer des ressources à l’aide de modèles Azure Resource Manager][deploy-arm-template].</span><span class="sxs-lookup"><span data-stu-id="be0d2-311">For more information, see [Deploy resources with Azure Resource Manager templates][deploy-arm-template].</span></span>

<!-- links -->

[aad-auth]: /azure/app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication
[app-insights]: /azure/application-insights/app-insights-overview
[app-insights-data-rate]: /azure/application-insights/app-insights-pricing
[app-service]: https://azure.microsoft.com/documentation/services/app-service/
[app-service-auth]: /azure/app-service-api/app-service-api-authentication
[app-service-plans]: /azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview
[app-service-plans-tiers]: https://azure.microsoft.com/pricing/details/app-service/
[app-service-security]: /azure/app-service-web/web-sites-security
[app-settings]: /azure/app-service-web/web-sites-configure
[arm-template]: /azure/azure-resource-manager/resource-group-overview#resource-groups
[azure-dns]: /azure/dns/dns-overview
[custom-domain-name]: /azure/app-service-web/web-sites-custom-domain-name
[deploy]: /azure/app-service-web/web-sites-deploy
[deploy-arm-template]: /azure/resource-group-template-deploy
[deployment-slots]: /azure/app-service-web/web-sites-staged-publishing
[diagnostic-logs]: /azure/app-service-web/web-sites-enable-diagnostic-log
[kudu]: https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/
[monitoring-guidance]: ../../best-practices/monitoring.md
[new-relic]: http://newrelic.com/
[paas-basic-arm-template]: https://github.com/mspnp/reference-architectures/tree/master/managed-web-app/basic-web-app/Paas-Basic/Templates
[perf-analysis]: https://github.com/mspnp/performance-optimization/blob/master/Performance-Analysis-Primer.md
[rbac]: /azure/active-directory/role-based-access-control-what-is
[resource-group]: /azure/azure-resource-manager/resource-group-overview
[sla]: https://azure.microsoft.com/support/legal/sla/
[sql-audit]: /azure/sql-database/sql-database-auditing-get-started
[sql-backup]: /azure/sql-database/sql-database-business-continuity
[sql-db]: https://azure.microsoft.com/documentation/services/sql-database/
[sql-db-overview]: /azure/sql-database/sql-database-technical-overview
[sql-db-scale]: /azure/sql-database/sql-database-service-tiers#scaling-up-or-scaling-down-a-single-database
[sql-db-service-tiers]: /azure/sql-database/sql-database-service-tiers
[sql-db-v12]: /azure/sql-database/sql-database-features
[sql-dtu]: /azure/sql-database/sql-database-service-tiers
[sql-human-error]: /azure/sql-database/sql-database-business-continuity#recover-a-database-after-a-user-or-application-error
[sql-outage-recovery]: /azure/sql-database/sql-database-business-continuity#recover-a-database-to-another-region-from-an-azure-regional-data-center-outage
[ssl-redirect]: /azure/app-service-web/web-sites-configure-ssl-certificate#bkmk_enforce
[sql-resource-limits]: /azure/sql-database/sql-database-resource-limits
[ssl-cert]: /azure/app-service-web/web-sites-purchase-ssl-web-site
[troubleshoot-blade]: https://azure.microsoft.com/updates/self-service-troubleshooting-for-app-service-web-apps-customers/
[troubleshoot-web-app]: /azure/app-service-web/web-sites-dotnet-troubleshoot-visual-studio
[visio-download]: https://archcenter.azureedge.net/cdn/app-service-reference-architectures.vsdx
[vsts]: https://www.visualstudio.com/features/vso-cloud-load-testing-vs.aspx
[web-app-autoscale]: /azure/app-service-web/web-sites-scale
[web-app-backup]: /azure/app-service-web/web-sites-backup
[web-app-log-stream]: /azure/app-service-web/web-sites-enable-diagnostic-log#streamlogs
[0]: ./images/basic-web-app.png "Architecture d’une application web Azure de base"
[1]: ./images/paas-basic-web-app-staging-slots.png "Permutation des emplacements de déploiements de production et de préproduction"
