---
title: "Exécuter une machine virtuelle Linux dans Azure"
description: "Comment exécuter une machine virtuelle Linux sur Azure, en privilégiant l’évolutivité, la résilience, la gestion et la sécurité."
author: telmosampaio
ms.date: 12/12/2017
pnp.series.title: Linux VM workloads
pnp.series.next: multi-vm
pnp.series.prev: ./index
ms.openlocfilehash: a51e0d7ed4e35c5331241cf78d1715e63f9b4d86
ms.sourcegitcommit: 1c0465cea4ceb9ba9bb5e8f1a8a04d3ba2fa5acd
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/02/2018
---
# <a name="run-a-linux-vm-on-azure"></a><span data-ttu-id="149a0-103">Exécuter une machine virtuelle Linux dans Azure</span><span class="sxs-lookup"><span data-stu-id="149a0-103">Run a Linux VM on Azure</span></span>

<span data-ttu-id="149a0-104">Cette architecture de référence présente un ensemble de pratiques éprouvées pour l’exécution d’une machine virtuelle Linux dans Azure.</span><span class="sxs-lookup"><span data-stu-id="149a0-104">This reference architecture shows a set of proven practices for running a Linux virtual machine (VM) on Azure.</span></span> <span data-ttu-id="149a0-105">Elle contient des recommandations pour le provisionnement de la machine virtuelle et des composants réseau et de stockage.</span><span class="sxs-lookup"><span data-stu-id="149a0-105">It includes recommendations for provisioning the VM along with networking and storage components.</span></span> <span data-ttu-id="149a0-106">Cette architecture peut être utilisée pour exécuter une instance unique de machine virtuelle et sert de base aux architectures plus complexes telles que les applications multiniveaux.</span><span class="sxs-lookup"><span data-stu-id="149a0-106">This architecture can be used to run a single VM instance, and is the basis for more complex architectures such as N-tier applications.</span></span> [<span data-ttu-id="149a0-107">**Déployez cette solution.**</span><span class="sxs-lookup"><span data-stu-id="149a0-107">**Deploy this solution.**</span></span>](#deploy-the-solution)

<span data-ttu-id="149a0-108">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="149a0-108">![[0]][0]</span></span>

<span data-ttu-id="149a0-109">*Téléchargez un [fichier Visio][visio-download] contenant ce diagramme d’architecture.*</span><span class="sxs-lookup"><span data-stu-id="149a0-109">*Download a [Visio file][visio-download] that contains this architecture diagram.*</span></span>

## <a name="architecture"></a><span data-ttu-id="149a0-110">Architecture</span><span class="sxs-lookup"><span data-stu-id="149a0-110">Architecture</span></span>

<span data-ttu-id="149a0-111">L’approvisionnement d’une machine virtuelle Azure requiert des composants supplémentaires, tels que les ressources de calcul, de mise en réseau et de stockage.</span><span class="sxs-lookup"><span data-stu-id="149a0-111">Provisioning an Azure VM requires additional components, such as compute, networking, and storage resources.</span></span>

* <span data-ttu-id="149a0-112">**Groupe de ressources.**</span><span class="sxs-lookup"><span data-stu-id="149a0-112">**Resource group.**</span></span> <span data-ttu-id="149a0-113">Un [groupe de ressources][resource-manager-overview] est un conteneur qui héberge des ressources associées.</span><span class="sxs-lookup"><span data-stu-id="149a0-113">A [resource group][resource-manager-overview] is a container that holds related resources.</span></span> <span data-ttu-id="149a0-114">En général, vous devez regrouper les ressources d’une solution en fonction de leur durée de vie et de la personne qui doit gérer les ressources.</span><span class="sxs-lookup"><span data-stu-id="149a0-114">In general, you should group resources in a solution based on their lifetime and who will manage the resources.</span></span> <span data-ttu-id="149a0-115">Pour une charge de travail de machine virtuelle unique, vous souhaiterez peut-être créer un seul groupe de ressources pour toutes les ressources.</span><span class="sxs-lookup"><span data-stu-id="149a0-115">For a single VM workload, you may want to create a single resource group for all resources.</span></span>
* <span data-ttu-id="149a0-116">**Machine virtuelle**.</span><span class="sxs-lookup"><span data-stu-id="149a0-116">**VM**.</span></span> <span data-ttu-id="149a0-117">Vous pouvez approvisionner une machine virtuelle issue d’une liste d’images publiées, d’une image managée personnalisée ou d’un fichier de disque dur virtuel (VHD) chargé(e) dans Stockage Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="149a0-117">You can provision a VM from a list of published images, or from a custom managed image or virtual hard disk (VHD) file uploaded to Azure Blob storage.</span></span> <span data-ttu-id="149a0-118">Azure prend en charge l’exécution de plusieurs distributions Linux populaires, y compris CentOS, Debian, Red Hat Enterprise, Ubuntu et FreeBSD.</span><span class="sxs-lookup"><span data-stu-id="149a0-118">Azure supports running various popular Linux distributions, including CentOS, Debian, Red Hat Enterprise, Ubuntu, and FreeBSD.</span></span> <span data-ttu-id="149a0-119">Pour en savoir plus, voir [Azure et Linux][azure-linux].</span><span class="sxs-lookup"><span data-stu-id="149a0-119">For more information, see [Azure and Linux][azure-linux].</span></span>
* <span data-ttu-id="149a0-120">**Disque du système d’exploitation.**</span><span class="sxs-lookup"><span data-stu-id="149a0-120">**OS disk.**</span></span> <span data-ttu-id="149a0-121">Le disque du système d’exploitation est un disque dur virtuel stocké dans [Stockage Azure][azure-storage], donc il persiste même lorsque l’ordinateur hôte est arrêté.</span><span class="sxs-lookup"><span data-stu-id="149a0-121">The OS disk is a VHD stored in [Azure Storage][azure-storage], so it persists even when the host machine is down.</span></span> <span data-ttu-id="149a0-122">Pour les machines virtuelles Linux, le disque du système d’exploitation est `/dev/sda1`.</span><span class="sxs-lookup"><span data-stu-id="149a0-122">For Linux VMs, the OS disk is `/dev/sda1`.</span></span>
* <span data-ttu-id="149a0-123">**Disque temporaire**</span><span class="sxs-lookup"><span data-stu-id="149a0-123">**Temporary disk.**</span></span> <span data-ttu-id="149a0-124">La machine virtuelle est créée avec un disque temporaire.</span><span class="sxs-lookup"><span data-stu-id="149a0-124">The VM is created with a temporary disk.</span></span> <span data-ttu-id="149a0-125">Ce disque est stocké sur un lecteur physique de l’ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="149a0-125">This disk is stored on a physical drive on the host machine.</span></span> <span data-ttu-id="149a0-126">Il n’est **pas** enregistré dans Stockage Azure et peut être supprimé lors des redémarrages ou d’autres événements de cycle de vie de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="149a0-126">It is **not** saved in Azure Storage and may be deleted during reboots and other VM lifecycle events.</span></span> <span data-ttu-id="149a0-127">N’utilisez ce disque que pour des données temporaires, telles que des fichiers de pagination ou d’échange.</span><span class="sxs-lookup"><span data-stu-id="149a0-127">Use this disk only for temporary data, such as page or swap files.</span></span> <span data-ttu-id="149a0-128">Pour les machines virtuelles Linux, le disque temporaire est `/dev/sdb1`. Il est monté sur `/mnt/resource` ou `/mnt`.</span><span class="sxs-lookup"><span data-stu-id="149a0-128">For Linux VMs, the temporary disk is `/dev/sdb1` and is mounted at `/mnt/resource` or `/mnt`.</span></span>
* <span data-ttu-id="149a0-129">**Disques de données.**</span><span class="sxs-lookup"><span data-stu-id="149a0-129">**Data disks.**</span></span> <span data-ttu-id="149a0-130">Un [disque de données][data-disk] est un disque dur virtuel persistant utilisé pour les données d’application.</span><span class="sxs-lookup"><span data-stu-id="149a0-130">A [data disk][data-disk] is a persistent VHD used for application data.</span></span> <span data-ttu-id="149a0-131">Les disques de données sont stockés dans Stockage Azure, comme le disque du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="149a0-131">Data disks are stored in Azure Storage, like the OS disk.</span></span>
* <span data-ttu-id="149a0-132">**Réseau virtuel (VNet) et sous-réseau.**</span><span class="sxs-lookup"><span data-stu-id="149a0-132">**Virtual network (VNet) and subnet.**</span></span> <span data-ttu-id="149a0-133">Chaque machine virtuelle Azure est déployée dans un réseau virtuel qui peut être segmenté en plusieurs sous-réseaux.</span><span class="sxs-lookup"><span data-stu-id="149a0-133">Every Azure VM is deployed into a VNet that can be segmented into multiple subnets.</span></span>
* <span data-ttu-id="149a0-134">**Adresse IP publique.**</span><span class="sxs-lookup"><span data-stu-id="149a0-134">**Public IP address.**</span></span> <span data-ttu-id="149a0-135">Une adresse IP publique est nécessaire pour communiquer avec la machine virtuelle, par exemple par le biais du protocole SSH.</span><span class="sxs-lookup"><span data-stu-id="149a0-135">A public IP address is needed to communicate with the VM &mdash; for example, via SSH.</span></span>
* <span data-ttu-id="149a0-136">**Azure DNS**.</span><span class="sxs-lookup"><span data-stu-id="149a0-136">**Azure DNS**.</span></span> <span data-ttu-id="149a0-137">[Azure DNS][azure-dns] est un service d’hébergement pour les domaines DNS qui offre une résolution de noms à l’aide de l’infrastructure Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="149a0-137">[Azure DNS][azure-dns] is a hosting service for DNS domains, providing name resolution using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="149a0-138">En hébergeant vos domaines dans Azure, vous pouvez gérer vos enregistrements DNS avec les mêmes informations d’identification, les mêmes API, les mêmes outils et la même facturation que vos autres services Azure.</span><span class="sxs-lookup"><span data-stu-id="149a0-138">By hosting your domains in Azure, you can manage your DNS records using the same credentials, APIs, tools, and billing as your other Azure services.</span></span>  
* <span data-ttu-id="149a0-139">**Interfaces réseau (NIC)**.</span><span class="sxs-lookup"><span data-stu-id="149a0-139">**Network interface (NIC)**.</span></span> <span data-ttu-id="149a0-140">La carte d’interface réseau assignée permet à la machine virtuelle de communiquer avec le réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="149a0-140">An assigned NIC enables the VM to communicate with the virtual network.</span></span>
* <span data-ttu-id="149a0-141">**Groupe de sécurité réseau**.</span><span class="sxs-lookup"><span data-stu-id="149a0-141">**Network security group (NSG)**.</span></span> <span data-ttu-id="149a0-142">Les [groupes de sécurité réseau][nsg] sont utilisés pour autoriser ou refuser le trafic réseau vers une ressource réseau.</span><span class="sxs-lookup"><span data-stu-id="149a0-142">[Network security groups][nsg] are used to allow or deny network traffic to a network resource.</span></span> <span data-ttu-id="149a0-143">Vous pouvez associer un NSG à une carte réseau individuelle ou à un sous-réseau.</span><span class="sxs-lookup"><span data-stu-id="149a0-143">You can associate an NSG with an individual NIC or with a subnet.</span></span> <span data-ttu-id="149a0-144">Si vous l’associez à un sous-réseau, les règles du NSG s’appliquent à toutes les machines virtuelles de ce sous-réseau.</span><span class="sxs-lookup"><span data-stu-id="149a0-144">If you associate it with a subnet, the NSG rules apply to all VMs in that subnet.</span></span>
* <span data-ttu-id="149a0-145">**Diagnostics.**</span><span class="sxs-lookup"><span data-stu-id="149a0-145">**Diagnostics.**</span></span> <span data-ttu-id="149a0-146">La journalisation des diagnostics est essentielle à la gestion et au dépannage de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="149a0-146">Diagnostic logging is crucial for managing and troubleshooting the VM.</span></span>

## <a name="recommendations"></a><span data-ttu-id="149a0-147">Recommandations</span><span class="sxs-lookup"><span data-stu-id="149a0-147">Recommendations</span></span>

<span data-ttu-id="149a0-148">Cette architecture présente les recommandations de base pour l’exécution d’une machine virtuelle Linux dans Azure.</span><span class="sxs-lookup"><span data-stu-id="149a0-148">This architecture shows the baseline recommendations for running a Linux VM in Azure.</span></span> <span data-ttu-id="149a0-149">Nous vous déconseillons toutefois d’utiliser une seule et même machine virtuelle pour les charges de travail critiques, car ce faisant, un point de défaillance unique est créé.</span><span class="sxs-lookup"><span data-stu-id="149a0-149">However, we don't recommend using a single VM for mission critical workloads because it creates a single point of failure.</span></span> <span data-ttu-id="149a0-150">Pour bénéficier d’une disponibilité plus élevée, vous devez déployer plusieurs machines virtuelles dans un [groupe à haute disponibilité][availability-set].</span><span class="sxs-lookup"><span data-stu-id="149a0-150">For higher availability, deploy multiple VMs in an [availability set][availability-set].</span></span> <span data-ttu-id="149a0-151">Pour plus d’informations, voir [Running multiple VMs on Azure (Exécution de plusieurs machines virtuelles sur Azure)][multi-vm].</span><span class="sxs-lookup"><span data-stu-id="149a0-151">For more information, see [Running multiple VMs on Azure][multi-vm].</span></span> 

### <a name="vm-recommendations"></a><span data-ttu-id="149a0-152">Recommandations pour les machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="149a0-152">VM recommendations</span></span>

<span data-ttu-id="149a0-153">Azure propose de nombreuses tailles de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="149a0-153">Azure offers many different virtual machine sizes.</span></span> <span data-ttu-id="149a0-154">Le [Stockage Premium][premium-storage] est recommandé en raison de ses hautes performances et d’une faible latence, et il est [pris en charge par des tailles de machine virtuelle spécifiques][premium-storage-supported].</span><span class="sxs-lookup"><span data-stu-id="149a0-154">[Premium Storage][premium-storage] is recommended due to its high performance and low latency, and is [supported by specific VM sizes][premium-storage-supported].</span></span> <span data-ttu-id="149a0-155">Choisissez l’une de ces tailles, sauf si vous disposez d’une charge de travail spécialisée telle qu’un système de calcul hautes performances.</span><span class="sxs-lookup"><span data-stu-id="149a0-155">Select one of these sizes unless you have a specialized workload such as high-performance computing.</span></span> <span data-ttu-id="149a0-156">Pour plus d’informations, consultez [Tailles de machines virtuelles][virtual-machine-sizes].</span><span class="sxs-lookup"><span data-stu-id="149a0-156">For more information, see [virtual machine sizes][virtual-machine-sizes].</span></span>

<span data-ttu-id="149a0-157">Si vous déplacez une charge de travail vers Azure, commencez par choisir la taille de machine virtuelle qui correspond le mieux à vos serveurs locaux.</span><span class="sxs-lookup"><span data-stu-id="149a0-157">If you are moving an existing workload to Azure, start with the VM size that's the closest match to your on-premises servers.</span></span> <span data-ttu-id="149a0-158">Mesurez ensuite les performances de votre charge de travail réelle en termes de processeur, de mémoire et d’opérations d’entrée/sortie par seconde du disque, puis ajustez la taille selon vos besoins.</span><span class="sxs-lookup"><span data-stu-id="149a0-158">Then measure the performance of your actual workload with respect to CPU, memory, and disk input/output operations per second (IOPS), and adjust the size as needed.</span></span> <span data-ttu-id="149a0-159">Si vous avez besoin de plusieurs cartes réseau (NIC) pour votre machine virtuelle, notez que le nombre maximal de cartes NIC est défini pour chaque [taille de machine virtuelle][vm-size-tables].</span><span class="sxs-lookup"><span data-stu-id="149a0-159">If you require multiple NICs for your VM, be aware that a maximum number of NICs is defined for each [VM size][vm-size-tables].</span></span>

<span data-ttu-id="149a0-160">Lorsque vous approvisionnez des ressources Azure, vous devez spécifier une région.</span><span class="sxs-lookup"><span data-stu-id="149a0-160">When you provision Azure resources, you must specify a region.</span></span> <span data-ttu-id="149a0-161">En général, choisissez une région la plus proche possible de vos utilisateurs internes ou de vos clients.</span><span class="sxs-lookup"><span data-stu-id="149a0-161">Generally, choose a region closest to your internal users or customers.</span></span> <span data-ttu-id="149a0-162">Sachez toutefois que certaines tailles de machine virtuelle ne sont pas disponibles dans toutes les régions.</span><span class="sxs-lookup"><span data-stu-id="149a0-162">However, not all VM sizes are available in all regions.</span></span> <span data-ttu-id="149a0-163">Pour en savoir plus, consultez [Services par région][services-by-region].</span><span class="sxs-lookup"><span data-stu-id="149a0-163">For more information, see [Services by region][services-by-region].</span></span> <span data-ttu-id="149a0-164">Pour obtenir la liste des tailles de machine virtuelle disponibles dans une région spécifique, exécutez la commande suivante dans l’interface de ligne de commande (CLI) Azure :</span><span class="sxs-lookup"><span data-stu-id="149a0-164">For a list of the VM sizes available in a specific region, run the following command from the Azure command-line interface (CLI):</span></span>

```
az vm list-sizes --location <location>
```

<span data-ttu-id="149a0-165">Pour en savoir plus sur le choix d’une image de machine virtuelle publiée, voir [Comment rechercher des images de machine virtuelle Linux][select-vm-image].</span><span class="sxs-lookup"><span data-stu-id="149a0-165">For information about choosing a published VM image, see [Find Linux VM images][select-vm-image].</span></span>

<span data-ttu-id="149a0-166">Permet la surveillance et le diagnostic, avec notamment des indicateurs d’intégrité de base, des journaux d’infrastructure de diagnostic et des [diagnostics de démarrage][boot-diagnostics].</span><span class="sxs-lookup"><span data-stu-id="149a0-166">Enable monitoring and diagnostics, including basic health metrics, diagnostics infrastructure logs, and [boot diagnostics][boot-diagnostics].</span></span> <span data-ttu-id="149a0-167">Les diagnostics de démarrage peuvent vous aider à identifier le problème de démarrage si votre machine virtuelle refuse de démarrer.</span><span class="sxs-lookup"><span data-stu-id="149a0-167">Boot diagnostics can help you diagnose boot failure if your VM gets into a non-bootable state.</span></span> <span data-ttu-id="149a0-168">Pour en savoir plus, voir [Activation de la surveillance et des diagnostics][enable-monitoring].</span><span class="sxs-lookup"><span data-stu-id="149a0-168">For more information, see [Enable monitoring and diagnostics][enable-monitoring].</span></span>  

### <a name="disk-and-storage-recommendations"></a><span data-ttu-id="149a0-169">Recommandations pour le disque et le stockage</span><span class="sxs-lookup"><span data-stu-id="149a0-169">Disk and storage recommendations</span></span>

<span data-ttu-id="149a0-170">Pour optimiser les performances d’E/S du disque, nous vous recommandons le [Stockage Premium][premium-storage], qui stocke les données sur des disques SSD.</span><span class="sxs-lookup"><span data-stu-id="149a0-170">For best disk I/O performance, we recommend [Premium Storage][premium-storage], which stores data on solid-state drives (SSDs).</span></span> <span data-ttu-id="149a0-171">Le coût est basé sur la capacité du disque approvisionné.</span><span class="sxs-lookup"><span data-stu-id="149a0-171">Cost is based on the capacity of the provisioned disk.</span></span> <span data-ttu-id="149a0-172">Le nombre d’E/S par seconde et le débit (c’est-à-dire le taux de transfert des données) dépendent également de la taille du disque. Lorsque vous approvisionnez un disque, vous devez donc tenir compte des trois facteurs : capacité, E/S par seconde et débit.</span><span class="sxs-lookup"><span data-stu-id="149a0-172">IOPS and throughput (that is, data transfer rate) also depend on disk size, so when you provision a disk, consider all three factors (capacity, IOPS, and throughput).</span></span> 

<span data-ttu-id="149a0-173">Nous vous recommandons également d’utiliser des [disques managés](/azure/storage/storage-managed-disks-overview).</span><span class="sxs-lookup"><span data-stu-id="149a0-173">We also recommend the use of [managed disks](/azure/storage/storage-managed-disks-overview).</span></span> <span data-ttu-id="149a0-174">Les disques managés ne nécessitent pas de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="149a0-174">Managed disks do not require a storage account.</span></span> <span data-ttu-id="149a0-175">Il vous suffit de spécifier leur taille et leur type, puis de les déployer en tant que ressource hautement disponible.</span><span class="sxs-lookup"><span data-stu-id="149a0-175">You simply specify the size and type of disk and it is deployed as a highly available resource.</span></span>

<span data-ttu-id="149a0-176">Si vous utilisez des disques non gérés, créez des comptes de stockage Azure distincts pour chaque machine virtuelle pour stocker les disques durs virtuels (VHD), afin d’éviter d’atteindre les [limites d’E/S par seconde][vm-disk-limits] des comptes de stockage.</span><span class="sxs-lookup"><span data-stu-id="149a0-176">If you are using unmanaged disks, create separate Azure storage accounts for each VM to hold the virtual hard disks (VHDs), in order to avoid hitting the [(IOPS) limits][vm-disk-limits] for storage accounts.</span></span>

<span data-ttu-id="149a0-177">Ajoutez un ou plusieurs disques de données.</span><span class="sxs-lookup"><span data-stu-id="149a0-177">Add one or more data disks.</span></span> <span data-ttu-id="149a0-178">Lorsque vous créez un disque dur virtuel, il n’est pas formaté.</span><span class="sxs-lookup"><span data-stu-id="149a0-178">When you create a VHD, it is unformatted.</span></span> <span data-ttu-id="149a0-179">Connectez-vous à la machine virtuelle pour formater le disque.</span><span class="sxs-lookup"><span data-stu-id="149a0-179">Log into the VM to format the disk.</span></span> <span data-ttu-id="149a0-180">Si vous n’utilisez pas de disques managés et que vous avez un grand nombre de disques de données, n’oubliez pas les limites d’E/S du compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="149a0-180">If you are not using managed disks and have a large number of data disks, be aware of the total I/O limits of the storage account.</span></span> <span data-ttu-id="149a0-181">Pour en savoir plus, voir les [limites du nombre de disques de machine virtuelle][vm-disk-limits].</span><span class="sxs-lookup"><span data-stu-id="149a0-181">For more information, see [virtual machine disk limits][vm-disk-limits].</span></span>

<span data-ttu-id="149a0-182">Dans l’interpréteur de commandes Linux, les disques de données sont affichés en tant que `/dev/sdc`, `/dev/sdd`, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="149a0-182">In the Linux shell, data disks are displayed as `/dev/sdc`, `/dev/sdd`, and so on.</span></span> <span data-ttu-id="149a0-183">Vous pouvez exécuter `lsblk` pour répertorier les périphériques de bloc, y compris les disques.</span><span class="sxs-lookup"><span data-stu-id="149a0-183">You can run `lsblk` to list the block devices, including the disks.</span></span> <span data-ttu-id="149a0-184">Pour utiliser un disque de données, créez une partition et un système de fichiers, puis montez le disque.</span><span class="sxs-lookup"><span data-stu-id="149a0-184">To use a data disk, create a partition and file system, and mount the disk.</span></span> <span data-ttu-id="149a0-185">Par exemple : </span><span class="sxs-lookup"><span data-stu-id="149a0-185">For example:</span></span>

```bat
# Create a partition.
sudo fdisk /dev/sdc     # Enter 'n' to partition, 'w' to write the change.

# Create a file system.
sudo mkfs -t ext3 /dev/sdc1

# Mount the drive.
sudo mkdir /data1
sudo mount /dev/sdc1 /data1
```

<span data-ttu-id="149a0-186">Lorsque vous ajoutez un disque de données, un numéro d’unité logique (LUN) lui est attribué.</span><span class="sxs-lookup"><span data-stu-id="149a0-186">When you add a data disk, a logical unit number (LUN) ID is assigned to the disk.</span></span> <span data-ttu-id="149a0-187">Vous pouvez également spécifier l’ID LUN, par exemple si vous remplacez un disque et souhaitez conserver le même ID LUN, ou si votre application nécessite un ID LUN spécifique.</span><span class="sxs-lookup"><span data-stu-id="149a0-187">Optionally, you can specify the LUN ID &mdash; for example, if you're replacing a disk and want to retain the same LUN ID, or you have an application that looks for a specific LUN ID.</span></span> <span data-ttu-id="149a0-188">Toutefois, n’oubliez pas que les ID LUN doivent être uniques pour chaque disque.</span><span class="sxs-lookup"><span data-stu-id="149a0-188">However, remember that LUN IDs must be unique for each disk.</span></span>

<span data-ttu-id="149a0-189">Vous pouvez modifier le planificateur d’E/S afin d’optimiser les performances des disques SSD, les disques des machines virtuelles associées à des comptes de Stockage Premium étant de type SSD.</span><span class="sxs-lookup"><span data-stu-id="149a0-189">You may want to change the I/O scheduler to optimize for performance on SSDs because the disks for VMs with premium storage accounts are SSDs.</span></span> <span data-ttu-id="149a0-190">Il est généralement recommandé d’utiliser le planificateur NOOP pour les disques SSD, mais vous devez utiliser un outil tel que [iostat] pour surveiller les performances d’E/S du disque pour votre charge de travail.</span><span class="sxs-lookup"><span data-stu-id="149a0-190">A common recommendation is to use the NOOP scheduler for SSDs, but you should use a tool such as [iostat] to monitor disk I/O performance for your workload.</span></span>

<span data-ttu-id="149a0-191">Pour maximiser les performances, créez un compte de stockage distinct destiné à héberger les journaux de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="149a0-191">To maximize performance, create a separate storage account to hold diagnostic logs.</span></span> <span data-ttu-id="149a0-192">Un compte de stockage localement redondant (LRS) standard suffit pour les journaux de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="149a0-192">A standard locally redundant storage (LRS) account is sufficient for diagnostic logs.</span></span>

### <a name="network-recommendations"></a><span data-ttu-id="149a0-193">Recommandations pour le réseau</span><span class="sxs-lookup"><span data-stu-id="149a0-193">Network recommendations</span></span>

<span data-ttu-id="149a0-194">Cette adresse IP publique peut être dynamique ou statique.</span><span class="sxs-lookup"><span data-stu-id="149a0-194">The public IP address can be dynamic or static.</span></span> <span data-ttu-id="149a0-195">Par défaut, elle est dynamique.</span><span class="sxs-lookup"><span data-stu-id="149a0-195">The default is dynamic.</span></span>

* <span data-ttu-id="149a0-196">Utilisez une [adresse IP statique][static-ip] si vous avez besoin d’une adresse IP non modifiable, par exemple pour créer un enregistrement A dans le DNS ou ajouter l’adresse IP dans une liste sécurisée.</span><span class="sxs-lookup"><span data-stu-id="149a0-196">Reserve a [static IP address][static-ip] if you need a fixed IP address that won't change &mdash; for example, if you need to create an A record in DNS, or need the IP address to be added to a safe list.</span></span>
* <span data-ttu-id="149a0-197">Vous pouvez également créer un nom de domaine complet (FQDN) pour l’adresse IP.</span><span class="sxs-lookup"><span data-stu-id="149a0-197">You can also create a fully qualified domain name (FQDN) for the IP address.</span></span> <span data-ttu-id="149a0-198">Vous pouvez inscrire un [enregistrement CNAME][cname-record] dans le DNS qui pointe vers le nom de domaine complet (FQDN).</span><span class="sxs-lookup"><span data-stu-id="149a0-198">You can then register a [CNAME record][cname-record] in DNS that points to the FQDN.</span></span> <span data-ttu-id="149a0-199">Pour en savoir plus, voir [Créer un nom de domaine complet dans le Portail Azure][fqdn].</span><span class="sxs-lookup"><span data-stu-id="149a0-199">For more information, see [Create a fully qualified domain name in the Azure portal][fqdn].</span></span> <span data-ttu-id="149a0-200">Vous pouvez utiliser [Azure DNS][azure-dns] ou un autre service DNS.</span><span class="sxs-lookup"><span data-stu-id="149a0-200">You can use [Azure DNS][azure-dns] or another DNS service.</span></span>

<span data-ttu-id="149a0-201">Tous les groupes de sécurité réseau contiennent un ensemble de [règles par défaut][nsg-default-rules], notamment une règle qui bloque tout le trafic Internet entrant.</span><span class="sxs-lookup"><span data-stu-id="149a0-201">All NSGs contain a set of [default rules][nsg-default-rules], including a rule that blocks all inbound Internet traffic.</span></span> <span data-ttu-id="149a0-202">Les règles par défaut ne peuvent pas être supprimées, mais d’autres règles peuvent les remplacer.</span><span class="sxs-lookup"><span data-stu-id="149a0-202">The default rules cannot be deleted, but other rules can override them.</span></span> <span data-ttu-id="149a0-203">Pour autoriser le trafic Internet, créez des règles qui autorisent le trafic entrant vers des ports spécifiques, par exemple, le port 80 pour HTTP.</span><span class="sxs-lookup"><span data-stu-id="149a0-203">To enable Internet traffic, create rules that allow inbound traffic to specific ports &mdash; for example, port 80 for HTTP.</span></span>

<span data-ttu-id="149a0-204">Pour activer le protocole SSH, ajoutez une règle de groupe de sécurité réseau qui autorise le trafic entrant sur le port TCP 22.</span><span class="sxs-lookup"><span data-stu-id="149a0-204">To enable SSH, add an NSG rule that allows inbound traffic to TCP port 22.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="149a0-205">Considérations relatives à l’extensibilité</span><span class="sxs-lookup"><span data-stu-id="149a0-205">Scalability considerations</span></span>

<span data-ttu-id="149a0-206">Vous pouvez réduire ou augmenter la puissance d’une machine virtuelle en en [modifiant la taille][vm-resize].</span><span class="sxs-lookup"><span data-stu-id="149a0-206">You can scale a VM up or down by [changing the VM size][vm-resize].</span></span> <span data-ttu-id="149a0-207">Pour une mise à l’échelle horizontale, placez plusieurs machines virtuelles derrière un équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="149a0-207">To scale out horizontally, put two or more VMs behind a load balancer.</span></span> <span data-ttu-id="149a0-208">Pour plus d’informations, voir [Exécution de plusieurs machines virtuelles sur Azure pour l’extensibilité et la disponibilité][multi-vm].</span><span class="sxs-lookup"><span data-stu-id="149a0-208">For more information, see [Running multiple VMs on Azure for scalability and availability][multi-vm].</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="149a0-209">Considérations relatives à la disponibilité</span><span class="sxs-lookup"><span data-stu-id="149a0-209">Availability considerations</span></span>

<span data-ttu-id="149a0-210">Pour bénéficier d’une disponibilité plus élevée, déployez plusieurs machines virtuelles dans un groupe à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="149a0-210">For higher availability, deploy multiple VMs in an availability set.</span></span> <span data-ttu-id="149a0-211">Cette approche offre également un [contrat de niveau de service (SLA)][vm-sla] supérieur.</span><span class="sxs-lookup"><span data-stu-id="149a0-211">This also provides a higher [service level agreement (SLA)][vm-sla].</span></span>

<span data-ttu-id="149a0-212">Votre machine virtuelle peut être affectée par la [maintenance planifiée][planned-maintenance] ou la [maintenance non planifiée][manage-vm-availability].</span><span class="sxs-lookup"><span data-stu-id="149a0-212">Your VM may be affected by [planned maintenance][planned-maintenance] or [unplanned maintenance][manage-vm-availability].</span></span> <span data-ttu-id="149a0-213">Vous pouvez utiliser les [journaux de redémarrage de machine virtuelle][reboot-logs] pour déterminer si un redémarrage de la machine virtuelle a été provoqué par une maintenance planifiée.</span><span class="sxs-lookup"><span data-stu-id="149a0-213">You can use [VM reboot logs][reboot-logs] to determine whether a VM reboot was caused by planned maintenance.</span></span>

<span data-ttu-id="149a0-214">Les disques durs virtuels sont stockés dans [Stockage Azure][azure-storage].</span><span class="sxs-lookup"><span data-stu-id="149a0-214">VHDs are stored in [Azure storage][azure-storage].</span></span> <span data-ttu-id="149a0-215">Stockage Azure est répliqué à des fins de durabilité et de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="149a0-215">Azure storage is replicated for durability and availability.</span></span>

<span data-ttu-id="149a0-216">Pour vous protéger contre la perte accidentelle de données pendant les opérations normales (par exemple, en cas d’erreur d’un utilisateur), vous devez également implémenter des sauvegardes ponctuelles, à l’aide de [captures instantanées d’objets blob][blob-snapshot] ou d’un autre outil.</span><span class="sxs-lookup"><span data-stu-id="149a0-216">To protect against accidental data loss during normal operations (for example, because of user error), you should also implement point-in-time backups, using [blob snapshots][blob-snapshot] or another tool.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="149a0-217">Considérations relatives à la facilité de gestion</span><span class="sxs-lookup"><span data-stu-id="149a0-217">Manageability considerations</span></span>

<span data-ttu-id="149a0-218">**Groupes de ressources.**</span><span class="sxs-lookup"><span data-stu-id="149a0-218">**Resource groups.**</span></span> <span data-ttu-id="149a0-219">Placez les ressources étroitement associées qui partagent le même cycle de vie dans un même [groupe de ressources][resource-manager-overview].</span><span class="sxs-lookup"><span data-stu-id="149a0-219">Put closely associated resources that share the same lifecycle into the same [resource group][resource-manager-overview].</span></span> <span data-ttu-id="149a0-220">Les groupes de ressources vous permettent de déployer et de surveiller les ressources en tant que groupe et de suivre les coûts de facturation par groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="149a0-220">Resource groups allow you to deploy and monitor resources as a group and track billing costs by resource group.</span></span> <span data-ttu-id="149a0-221">Vous pouvez également supprimer des ressources dans un ensemble, ce qui est très utile pour les déploiements de test.</span><span class="sxs-lookup"><span data-stu-id="149a0-221">You can also delete resources as a set, which is very useful for test deployments.</span></span> <span data-ttu-id="149a0-222">Affectez des noms de ressource explicites pour simplifier la recherche d’une ressource spécifique et comprendre son rôle.</span><span class="sxs-lookup"><span data-stu-id="149a0-222">Assign meaningful resource names to simplify locating a specific resource and understanding its role.</span></span> <span data-ttu-id="149a0-223">Pour plus d’informations, consultez [Conventions d’affectation de noms recommandées pour les ressources Azure][naming-conventions].</span><span class="sxs-lookup"><span data-stu-id="149a0-223">For more information, see [Recommended naming conventions for Azure resources][naming-conventions].</span></span>

<span data-ttu-id="149a0-224">**SSH**.</span><span class="sxs-lookup"><span data-stu-id="149a0-224">**SSH**.</span></span> <span data-ttu-id="149a0-225">Avant de créer une machine virtuelle Linux, générez une paire de clés publique-privée RSA 2048 bits.</span><span class="sxs-lookup"><span data-stu-id="149a0-225">Before you create a Linux VM, generate a 2048-bit RSA public-private key pair.</span></span> <span data-ttu-id="149a0-226">Utilisez le fichier de clé publique lorsque vous créez la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="149a0-226">Use the public key file when you create the VM.</span></span> <span data-ttu-id="149a0-227">Pour en savoir plus, voir [Utilisation de SSH avec Linux et Mac sur Azure][ssh-linux].</span><span class="sxs-lookup"><span data-stu-id="149a0-227">For more information, see [How to Use SSH with Linux and Mac on Azure][ssh-linux].</span></span>

<span data-ttu-id="149a0-228">**Arrêt d’une machine virtuelle.**</span><span class="sxs-lookup"><span data-stu-id="149a0-228">**Stopping a VM.**</span></span> <span data-ttu-id="149a0-229">Azure établit une distinction entre les états « arrêté » et « désalloué ».</span><span class="sxs-lookup"><span data-stu-id="149a0-229">Azure makes a distinction between "stopped" and "deallocated" states.</span></span> <span data-ttu-id="149a0-230">Vous payez lorsque l’état de la machine virtuelle est « arrêté », mais pas lorsque la machine virtuelle est désallouée.</span><span class="sxs-lookup"><span data-stu-id="149a0-230">You are charged when the VM status is stopped, but not when the VM is deallocated.</span></span>

<span data-ttu-id="149a0-231">Le bouton **Arrêter** du portail Azure désalloue la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="149a0-231">In the Azure portal, the **Stop** button deallocates the VM.</span></span> <span data-ttu-id="149a0-232">Si vous arrêtez la machine virtuelle par le biais du système d’exploitation pendant que vous êtes connecté, la machine virtuelle est arrêtée mais **non** désallouée. Vous serez donc toujours facturé.</span><span class="sxs-lookup"><span data-stu-id="149a0-232">If you shut down through the OS while logged in, the VM is stopped but **not** deallocated, so you will still be charged.</span></span>

<span data-ttu-id="149a0-233">**Suppression d’une machine virtuelle.**</span><span class="sxs-lookup"><span data-stu-id="149a0-233">**Deleting a VM.**</span></span> <span data-ttu-id="149a0-234">La suppression d’une machine virtuelle n’entraîne pas celle des disques durs virtuels.</span><span class="sxs-lookup"><span data-stu-id="149a0-234">If you delete a VM, the VHDs are not deleted.</span></span> <span data-ttu-id="149a0-235">Vous pouvez donc supprimer la machine virtuelle, sans risque de perdre des données.</span><span class="sxs-lookup"><span data-stu-id="149a0-235">That means you can safely delete the VM without losing data.</span></span> <span data-ttu-id="149a0-236">Toutefois, vous serez toujours facturé pour le stockage.</span><span class="sxs-lookup"><span data-stu-id="149a0-236">However, you will still be charged for storage.</span></span> <span data-ttu-id="149a0-237">Pour supprimer le disque dur virtuel, supprimez le fichier de [Stockage Blob][blob-storage].</span><span class="sxs-lookup"><span data-stu-id="149a0-237">To delete the VHD, delete the file from [Blob storage][blob-storage].</span></span>

<span data-ttu-id="149a0-238">Pour éviter toute suppression accidentelle, utilisez un [verrou de ressource][resource-lock] pour verrouiller tout le groupe de ressources ou des ressources individuelles, par exemple une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="149a0-238">To prevent accidental deletion, use a [resource lock][resource-lock] to lock the entire resource group or lock individual resources, such as a VM.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="149a0-239">Considérations relatives à la sécurité</span><span class="sxs-lookup"><span data-stu-id="149a0-239">Security considerations</span></span>

<span data-ttu-id="149a0-240">[Azure Security Center][security-center] vous offre un aperçu global de l’état de toutes vos ressources Azure en termes de sécurité.</span><span class="sxs-lookup"><span data-stu-id="149a0-240">Use [Azure Security Center][security-center] to get a central view of the security state of your Azure resources.</span></span> <span data-ttu-id="149a0-241">Il surveille les problèmes potentiels de sécurité et fournit une image complète de la sécurité de votre déploiement.</span><span class="sxs-lookup"><span data-stu-id="149a0-241">Security Center monitors potential security issues and provides a comprehensive picture of the security health of your deployment.</span></span> <span data-ttu-id="149a0-242">Le Centre de sécurité est configuré pour chaque abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="149a0-242">Security Center is configured per Azure subscription.</span></span> <span data-ttu-id="149a0-243">Activez la collecte de données de sécurité comme décrit dans le [Guide de démarrage rapide d’Azure Security Center][security-center-get-started].</span><span class="sxs-lookup"><span data-stu-id="149a0-243">Enable security data collection as described in the [Azure Security Center quick start guide][security-center-get-started].</span></span> <span data-ttu-id="149a0-244">Une fois la collecte de données activée, le Centre de sécurité analyse automatiquement les machines virtuelles créées dans le cadre de cet abonnement.</span><span class="sxs-lookup"><span data-stu-id="149a0-244">When data collection is enabled, Security Center automatically scans any VMs created under that subscription.</span></span>

<span data-ttu-id="149a0-245">**Gestion des correctifs.**</span><span class="sxs-lookup"><span data-stu-id="149a0-245">**Patch management.**</span></span> <span data-ttu-id="149a0-246">Si cette option est activée, Security Center vérifie si des mises à jour critiques et de sécurité sont manquantes.</span><span class="sxs-lookup"><span data-stu-id="149a0-246">If enabled, Security Center checks whether any security and critical updates are missing.</span></span> 

<span data-ttu-id="149a0-247">**Logiciel anti-programme malveillant.**</span><span class="sxs-lookup"><span data-stu-id="149a0-247">**Antimalware.**</span></span> <span data-ttu-id="149a0-248">Si cette option est activée, le Centre de sécurité vérifie si un logiciel anti-programme malveillant est installé.</span><span class="sxs-lookup"><span data-stu-id="149a0-248">If enabled, Security Center checks whether antimalware software is installed.</span></span> <span data-ttu-id="149a0-249">Vous pouvez également utiliser le Centre de sécurité pour installer des logiciels anti-programme malveillant dans le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="149a0-249">You can also use Security Center to install antimalware software from inside the Azure portal.</span></span>

<span data-ttu-id="149a0-250">**Opérations.**</span><span class="sxs-lookup"><span data-stu-id="149a0-250">**Operations.**</span></span> <span data-ttu-id="149a0-251">Utilisez le [contrôle d’accès en fonction du rôle][rbac] (RBAC) pour contrôler l’accès aux ressources Azure que vous déployez.</span><span class="sxs-lookup"><span data-stu-id="149a0-251">Use [role-based access control (RBAC)][rbac] to control access to the Azure resources that you deploy.</span></span> <span data-ttu-id="149a0-252">Le contrôle RBAC vous permet d’affecter des rôles d’autorisation aux membres de votre équipe DevOps.</span><span class="sxs-lookup"><span data-stu-id="149a0-252">RBAC lets you assign authorization roles to members of your DevOps team.</span></span> <span data-ttu-id="149a0-253">Par exemple, le rôle Lecteur permet d’afficher des ressources Azure mais pas de les créer, gérer ou supprimer.</span><span class="sxs-lookup"><span data-stu-id="149a0-253">For example, the Reader role can view Azure resources but not create, manage, or delete them.</span></span> <span data-ttu-id="149a0-254">Certains rôles sont spécifiques à des types de ressources Azure particuliers.</span><span class="sxs-lookup"><span data-stu-id="149a0-254">Some roles are specific to particular Azure resource types.</span></span> <span data-ttu-id="149a0-255">Par exemple, le rôle Contributeur de machine virtuelle peut redémarrer ou désallouer une machine virtuelle, réinitialiser le mot de passe administrateur, créer une machine virtuelle, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="149a0-255">For example, the Virtual Machine Contributor role can restart or deallocate a VM, reset the administrator password, create a new VM, and so on.</span></span> <span data-ttu-id="149a0-256">D’autres [rôles RBAC intégrés][rbac-roles] peuvent être utiles dans cette architecture, notamment [Utilisateur DevTest Lab][rbac-devtest] et [Collaborateur de réseau][rbac-network].</span><span class="sxs-lookup"><span data-stu-id="149a0-256">Other [built-in RBAC roles][rbac-roles] that may be useful for this architecture include [DevTest Labs User][rbac-devtest] and [Network Contributor][rbac-network].</span></span> <span data-ttu-id="149a0-257">Un utilisateur peut être affecté à plusieurs rôles, et vous pouvez créer des rôles personnalisés pour d’autres autorisations plus affinées.</span><span class="sxs-lookup"><span data-stu-id="149a0-257">A user can be assigned to multiple roles, and you can create custom roles for even more fine-grained permissions.</span></span>

> [!NOTE]
> <span data-ttu-id="149a0-258">Le contrôle RBAC ne limite pas les actions qu’un utilisateur connecté peut effectuer sur une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="149a0-258">RBAC does not limit the actions that a user logged into a VM can perform.</span></span> <span data-ttu-id="149a0-259">Ces autorisations dépendent du type de compte installé sur le système d’exploitation invité.</span><span class="sxs-lookup"><span data-stu-id="149a0-259">Those permissions are determined by the account type on the guest OS.</span></span>   

<span data-ttu-id="149a0-260">Utilisez les [journaux d’audit][audit-logs] pour voir les actions d’approvisionnement et d’autres événements concernant la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="149a0-260">Use [audit logs][audit-logs] to see provisioning actions and other VM events.</span></span>

<span data-ttu-id="149a0-261">**Chiffrement des données.**</span><span class="sxs-lookup"><span data-stu-id="149a0-261">**Data encryption.**</span></span> <span data-ttu-id="149a0-262">Utilisez [Azure Disk Encryption][disk-encryption] si vous devez chiffrer les disques du système d’exploitation et de données.</span><span class="sxs-lookup"><span data-stu-id="149a0-262">Consider [Azure Disk Encryption][disk-encryption] if you need to encrypt the OS and data disks.</span></span> 

## <a name="deploy-the-solution"></a><span data-ttu-id="149a0-263">Déployer la solution</span><span class="sxs-lookup"><span data-stu-id="149a0-263">Deploy the solution</span></span>

<span data-ttu-id="149a0-264">Un déploiement pour cette architecture est disponible sur [GitHub][github-folder].</span><span class="sxs-lookup"><span data-stu-id="149a0-264">A deployment for this architecture is available on [GitHub][github-folder].</span></span> <span data-ttu-id="149a0-265">Il déploie les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="149a0-265">It deploys the following:</span></span>

  * <span data-ttu-id="149a0-266">Un réseau virtuel avec un seul sous-réseau nommé **web** qui sert à héberger la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="149a0-266">A virtual network with a single subnet named **web** used to host the VM.</span></span>
  * <span data-ttu-id="149a0-267">Un groupe de sécurité réseau avec deux règles de trafic entrant pour autoriser le trafic SSH et HTTP vers la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="149a0-267">An NSG with two incoming rules to allow SSH and HTTP traffic to the VM.</span></span>
  * <span data-ttu-id="149a0-268">Une machine virtuelle exécutant la version la plus récente d’Ubuntu 16.04.3 LTS.</span><span class="sxs-lookup"><span data-stu-id="149a0-268">A VM running the latest version of Ubuntu 16.04.3 LTS.</span></span>
  * <span data-ttu-id="149a0-269">Un exemple d’extension de script personnalisé qui formate les deux disques de données et déploie Apache HTTP Server sur la machine virtuelle Ubuntu.</span><span class="sxs-lookup"><span data-stu-id="149a0-269">A sample custom script extension that formats the two data disks and deploys Apache HTTP Server to the Ubuntu VM.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="149a0-270">configuration requise</span><span class="sxs-lookup"><span data-stu-id="149a0-270">Prerequisites</span></span>

<span data-ttu-id="149a0-271">Avant de pouvoir déployer l’architecture de référence sur votre propre abonnement, vous devez effectuer les étapes suivantes.</span><span class="sxs-lookup"><span data-stu-id="149a0-271">Before you can deploy the reference architecture to your own subscription, you must perform the following steps.</span></span>

1. <span data-ttu-id="149a0-272">Clonez, dupliquez ou téléchargez le fichier zip pour le dépôt GitHub des [architectures de référence AzureCAT][ref-arch-repo].</span><span class="sxs-lookup"><span data-stu-id="149a0-272">Clone, fork, or download the zip file for the [AzureCAT reference architectures][ref-arch-repo] GitHub repository.</span></span>

2. <span data-ttu-id="149a0-273">Vérifiez qu’Azure CLI 2.0 est installé sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="149a0-273">Make sure you have the Azure CLI 2.0 installed on your computer.</span></span> <span data-ttu-id="149a0-274">Pour des instructions d’installation de l’interface de ligne de commande, consultez [Installer Azure CLI 2.0][azure-cli-2].</span><span class="sxs-lookup"><span data-stu-id="149a0-274">For CLI installation instructions, see [Install Azure CLI 2.0][azure-cli-2].</span></span>

3. <span data-ttu-id="149a0-275">Installez le package npm des [modules Azure][azbb].</span><span class="sxs-lookup"><span data-stu-id="149a0-275">Install the [Azure building blocks][azbb] npm package.</span></span>

4. <span data-ttu-id="149a0-276">À partir d’une invite de commandes, d’une invite bash ou de l’invite de commandes PowerShell, connectez-vous à votre compte Azure à l’aide de l’une des commandes ci-dessous et suivez les invites.</span><span class="sxs-lookup"><span data-stu-id="149a0-276">From a command prompt, bash prompt, or PowerShell prompt, login to your Azure account by using one of the commands below, and follow the prompts.</span></span>

  ```bash
  az login
  ```

### <a name="deploy-the-solution-using-azbb"></a><span data-ttu-id="149a0-277">Déployer la solution à l’aide d’azbb</span><span class="sxs-lookup"><span data-stu-id="149a0-277">Deploy the solution using azbb</span></span>

<span data-ttu-id="149a0-278">Pour déployer l’exemple de charge de travail de machine virtuelle unique, effectuez les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="149a0-278">To deploy the sample single VM workload, follow these steps:</span></span>

1. <span data-ttu-id="149a0-279">Accédez au dossier `virtual-machines\single-vm\parameters\linux` pour le dépôt que vous avez téléchargé à l’étape des prérequis ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="149a0-279">Navigate to the `virtual-machines\single-vm\parameters\linux` folder for the repository you downloaded in the prerequisites step above.</span></span>

2. <span data-ttu-id="149a0-280">Ouvrez le fichier `single-vm-v2.json` et entrez un nom d’utilisateur et une clé publique SSH entre les guillemets, comme illustré ci-dessous, puis enregistrez le fichier.</span><span class="sxs-lookup"><span data-stu-id="149a0-280">Open the `single-vm-v2.json` file and enter a username and SSH public key between the quotes, as shown below, then save the file.</span></span>

  ```bash
  "adminUsername": "",
  "sshPublicKey": "",
  ```

3. <span data-ttu-id="149a0-281">Exécutez `azbb` pour déployer l’exemple de machine virtuelle, comme illustré ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="149a0-281">Run `azbb` to deploy the sample VM as shown below.</span></span>

  ```bash
  azbb -s <subscription_id> -g <resource_group_name> -l <location> -p single-vm-v2.json --deploy
  ```

<span data-ttu-id="149a0-282">Pour plus d’informations sur le déploiement de cet exemple d’architecture de référence, visitez notre [dépôt GitHub][git].</span><span class="sxs-lookup"><span data-stu-id="149a0-282">For more information on deploying this sample reference architecture, visit our [GitHub repository][git].</span></span>

## <a name="next-steps"></a><span data-ttu-id="149a0-283">étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="149a0-283">Next steps</span></span>

- <span data-ttu-id="149a0-284">En savoir plus sur nos [modules Azure][azbbv2].</span><span class="sxs-lookup"><span data-stu-id="149a0-284">Learn about our [Azure building Blocks][azbbv2].</span></span>
- <span data-ttu-id="149a0-285">Déployer [plusieurs machines virtuelles][multi-vm] dans Azure.</span><span class="sxs-lookup"><span data-stu-id="149a0-285">Deploy [multiple VMs][multi-vm] in Azure.</span></span>

<!-- links -->
[audit-logs]: https://azure.microsoft.com/blog/analyze-azure-audit-logs-in-powerbi-more/
[availability-set]: /azure/virtual-machines/virtual-machines-linux-manage-availability
[azbb]: https://github.com/mspnp/template-building-blocks/wiki/Install-Azure-Building-Blocks
[azbbv2]: https://github.com/mspnp/template-building-blocks
[azure-cli-2]: /cli/azure/install-azure-cli?view=azure-cli-latest
[azure-linux]: /azure/virtual-machines/virtual-machines-linux-azure-overview
[azure-storage]: /azure/storage/storage-introduction
[blob-snapshot]: /azure/storage/storage-blob-snapshots
[blob-storage]: /azure/storage/storage-introduction
[boot-diagnostics]: https://azure.microsoft.com/blog/boot-diagnostics-for-virtual-machines-v2/
[cname-record]: https://en.wikipedia.org/wiki/CNAME_record
[data-disk]: /azure/virtual-machines/virtual-machines-linux-about-disks-vhds
[disk-encryption]: /azure/security/azure-security-disk-encryption
[enable-monitoring]: /azure/monitoring-and-diagnostics/insights-how-to-use-diagnostics
[azure-dns]: /azure/dns/dns-overview
[fqdn]: /azure/virtual-machines/virtual-machines-linux-portal-create-fqdn
[git]: https://github.com/mspnp/reference-architectures/tree/master/virtual-machines/single-vm
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/virtual-machines/single-vm
[iostat]: https://en.wikipedia.org/wiki/Iostat
[manage-vm-availability]: /azure/virtual-machines/virtual-machines-linux-manage-availability
[multi-vm]: multi-vm.md
[naming-conventions]: /azure/architecture/best-practices/naming-conventions.md
[nsg]: /azure/virtual-network/virtual-networks-nsg
[nsg-default-rules]: /azure/virtual-network/virtual-networks-nsg#default-rules
[planned-maintenance]: /azure/virtual-machines/virtual-machines-linux-planned-maintenance
[premium-storage]: /azure/virtual-machines/linux/premium-storage
[premium-storage-supported]: /azure/virtual-machines/linux/premium-storage#supported-vms
[rbac]: /azure/active-directory/role-based-access-control-what-is
[rbac-roles]: /azure/active-directory/role-based-access-built-in-roles
[rbac-devtest]: /azure/active-directory/role-based-access-built-in-roles#devtest-labs-user
[rbac-network]: /azure/active-directory/role-based-access-built-in-roles#network-contributor
[reboot-logs]: https://azure.microsoft.com/blog/viewing-vm-reboot-logs/
[ref-arch-repo]: https://github.com/mspnp/reference-architectures
[resource-lock]: /azure/resource-group-lock-resources
[resource-manager-overview]: /azure/azure-resource-manager/resource-group-overview
[security-center]: /azure/security-center/security-center-intro
[security-center-get-started]: /azure/security-center/security-center-get-started
[select-vm-image]: /azure/virtual-machines/virtual-machines-linux-cli-ps-findimage
[services-by-region]: https://azure.microsoft.com/regions/#services
[ssh-linux]: /azure/virtual-machines/virtual-machines-linux-mac-create-ssh-keys
[static-ip]: /azure/virtual-network/virtual-networks-reserved-public-ip
[virtual-machine-sizes]: /azure/virtual-machines/virtual-machines-linux-sizes
[visio-download]: https://archcenter.azureedge.net/cdn/vm-reference-architectures.vsdx
[vm-disk-limits]: /azure/azure-subscription-service-limits#virtual-machine-disk-limits
[vm-resize]: /azure/virtual-machines/virtual-machines-linux-change-vm-size
[vm-size-tables]: /azure/virtual-machines/virtual-machines-linux-sizes
[vm-sla]: https://azure.microsoft.com/support/legal/sla/virtual-machines
[0]: ./images/single-vm-diagram.png "Architecture de machine virtuelle Linux unique dans Azure"
