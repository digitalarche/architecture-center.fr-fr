---
title: Sécuriser une application web Windows pour les secteurs industriels réglementés
description: Scénario éprouvé pour la conception d’une application web sécurisée, à plusieurs niveaux avec Windows Server sur Azure qui utilise des groupes identiques, Application Gateway et des équilibreurs de charge.
author: iainfoulds
ms.date: 07/11/2018
ms.openlocfilehash: aba714fc1955341645d0faa400768bc09fb8e50b
ms.sourcegitcommit: 71cbef121c40ef36e2d6e3a088cb85c4260599b9
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/14/2018
ms.locfileid: "39060990"
---
# <a name="secure-windows-web-application-for-regulated-industries"></a><span data-ttu-id="3c8a6-103">Sécuriser une application web Windows pour les secteurs industriels réglementés</span><span class="sxs-lookup"><span data-stu-id="3c8a6-103">Secure Windows web application for regulated industries</span></span>

<span data-ttu-id="3c8a6-104">Cet exemple de scénario s’applique aux secteurs industriels réglementés qui ont besoin de sécuriser les applications à plusieurs niveaux.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-104">This sample scenario is applicable to regulated industries that have a need to secure multi-tier applications.</span></span> <span data-ttu-id="3c8a6-105">Dans ce scénario, une application ASP.NET frontale se connecte en toute sécurité à un cluster principal protégé de Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-105">In this scenario, a front-end ASP.NET application securely connects to a protected back-end Microsoft SQL Server cluster.</span></span>

<span data-ttu-id="3c8a6-106">Les exemples de scénarios d’application incluent l’exécution d’applications de salle d’opération, la conservation des rendez-vous et des dossiers des patients ou bien le remplissage ou la commande des prescriptions.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-106">Example application scenarios include running operating room applications, patient appointments and records keeping, or prescription refills and ordering.</span></span> <span data-ttu-id="3c8a6-107">En règle générale, les organisations devaient maintenir les applications et les services hérités en local pour ces scénarios.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-107">Traditionally, organizations had to maintain legacy on-premises applications and services for these scenarios.</span></span> <span data-ttu-id="3c8a6-108">Avec un moyen sécurisé et une méthode évolutive pour déployer ces applications de Windows Server dans Azure, les organisations peuvent moderniser leurs déploiements et réduire leurs coûts d’exploitation locaux et leurs surcharges de gestion.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-108">With a secure way and scalable way to deploy these Windows Server applications in Azure, organizations can modernize their deployments are reduce their on-premises operating costs and management overhead.</span></span>

## <a name="related-use-cases"></a><span data-ttu-id="3c8a6-109">Cas d’usage connexes</span><span class="sxs-lookup"><span data-stu-id="3c8a6-109">Related use cases</span></span>

<span data-ttu-id="3c8a6-110">Pensez à ce scénario pour les cas d’usage suivants :</span><span class="sxs-lookup"><span data-stu-id="3c8a6-110">Consider this scenario for the following use cases:</span></span>

* <span data-ttu-id="3c8a6-111">Modernisation des déploiements d’application dans un environnement cloud sécurisé.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-111">Modernizing application deployments in a secure cloud environment.</span></span>
* <span data-ttu-id="3c8a6-112">Réduction de la gestion des applications et services hérités en local.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-112">Reducing legacy on-premises application and service management.</span></span>
* <span data-ttu-id="3c8a6-113">Amélioration des soins et de l’expérience du patient avec de nouvelles plateformes d’application.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-113">Improving patient healthcare and experience with new application platforms.</span></span>

## <a name="architecture"></a><span data-ttu-id="3c8a6-114">Architecture</span><span class="sxs-lookup"><span data-stu-id="3c8a6-114">Architecture</span></span>

![Présentation de l’architecture des composants Azure impliqués dans les applications de Windows Server à plusieurs niveaux pour les secteurs industriels réglementés][architecture]

<span data-ttu-id="3c8a6-116">Ce scénario couvre une application à plusieurs niveaux pour les secteurs industriels réglementés utilisant ASP.NET et Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-116">This scenario covers a multi-tier regulated industries application that uses ASP.NET and Microsoft SQL Server.</span></span> <span data-ttu-id="3c8a6-117">Les données circulent dans le scénario comme suit :</span><span class="sxs-lookup"><span data-stu-id="3c8a6-117">The data flows through the scenario as follows:</span></span>

1. <span data-ttu-id="3c8a6-118">Les utilisateurs accèdent à l’application frontale ASP.NET pour les secteurs industriels réglementés via une passerelle d’application Azure.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-118">Users access the front-end ASP.NET regulated industries application through an Azure Application Gateway.</span></span>
2. <span data-ttu-id="3c8a6-119">La passerelle d’application distribue le trafic vers les instances de machine virtuelle dans un groupe de machines virtuelles identiques Azure.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-119">The Application Gateway distributes traffic to VM instances within an Azure virtual machine scale set.</span></span>
3. <span data-ttu-id="3c8a6-120">L’application ASP.NET se connecte au cluster de Microsoft SQL Server dans une couche back-end via un équilibreur de charge Azure.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-120">The ASP.NET application connects to Microsoft SQL Server cluster in a back-end tier via an Azure load balancer.</span></span> <span data-ttu-id="3c8a6-121">Ces instances de SQL Server principales sont dans un réseau virtuel Azure distinct, sécurisé par des règles de groupe de sécurité réseau qui limitent le flux de trafic.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-121">These backend SQL Server instances are in a separate Azure virtual network, secured by network security group rules that limit traffic flow.</span></span>
4. <span data-ttu-id="3c8a6-122">L’équilibreur de charge répartit le trafic de SQL Server vers les instances de machine virtuelle dans un autre groupe de machines virtuelles identiques.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-122">The load balancer distributes SQL Server traffic to VM instances in another virtual machine scale set.</span></span>
5. <span data-ttu-id="3c8a6-123">Stockage Blob Azure agit comme un témoin Cloud pour le cluster SQL Server au niveau backend.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-123">Azure Blob Storage acts as a Cloud Witness for the SQL Server cluster in the backend tier.</span></span>  <span data-ttu-id="3c8a6-124">La connexion à partir du réseau virtuel est activée avec un point de terminaison de service de réseau virtuel pour le stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-124">The connection from within the VNet is enabled with a VNet Service Endpoint for Azure Storage.</span></span>

### <a name="components"></a><span data-ttu-id="3c8a6-125">Composants</span><span class="sxs-lookup"><span data-stu-id="3c8a6-125">Components</span></span>

* <span data-ttu-id="3c8a6-126">[Azure Application Gateway][appgateway-docs] est un équilibreur de charge du trafic web de couche 7, prenant en charge les applications et pouvant distribuer le trafic en fonction de règles de routage spécifiques.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-126">[Azure Application Gateway][appgateway-docs] is a layer 7 web traffic load balancer that is application-aware and can distribute traffic based on specific routing rules.</span></span> <span data-ttu-id="3c8a6-127">App Gateway peut également gérer le déchargement SSL afin d’améliorer les performances du serveur web.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-127">App Gateway can also handle SSL offloading for improved web server performance.</span></span>
* <span data-ttu-id="3c8a6-128">[Le réseau virtuel Azure][vnet-docs] permet à de nombreuses ressources, telles que les machines virtuelles de communiquer en toute sécurité entre elles, avec Internet et avec les réseaux locaux.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-128">[Azure Virtual Network][vnet-docs] allows resources such as VMs to securely communicate with each other, the Internet, and on-premises networks.</span></span> <span data-ttu-id="3c8a6-129">Les réseaux virtuels fournissent un isolement et une segmentation, ils filtrent et acheminent le trafic et ils autorisent une connexion entre des emplacements.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-129">Virtual networks provide isolation and segmentation, filter and route traffic, and allow connection between locations.</span></span> <span data-ttu-id="3c8a6-130">Deux réseaux virtuels combinés avec les groupes de sécurité réseau appropriés sont utilisés dans ce scénario pour fournir une [zone démilitarisée][dmz] (DMZ) et une isolation de composants de l’application.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-130">Two virtual networks combined with the appropriate NSGs are used in this scenario to provide a [demilitarized zone][dmz] (DMZ) and isolation of the application components.</span></span> <span data-ttu-id="3c8a6-131">L’appairage de réseau virtuel connecte les deux réseaux ensemble.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-131">Virtual network peering connects the two networks together.</span></span>
* <span data-ttu-id="3c8a6-132">Les [groupes identiques de machines virtuelles Azure][scaleset-docs] vous permettent de créer et de gérer un groupe de machines virtuelles identiques et disposant d’une charge équilibrée.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-132">[Azure virtual machine scale set][scaleset-docs] let you create and manager a group of identical, load balanced, VMs.</span></span> <span data-ttu-id="3c8a6-133">Le nombre d’instances de machine virtuelle peut augmenter ou diminuer automatiquement en fonction d’une demande ou d’un calendrier défini.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-133">The number of VM instances can automatically increase or decrease in response to demand or a defined schedule.</span></span> <span data-ttu-id="3c8a6-134">Deux groupes distincts de machines virtuelles identiques sont utilisés dans ce scénario, un pour les instances d’applications ASP.NET frontend et un autre pour les instances de machine virtuelle du cluster SQL Server backend.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-134">Two separate virtual machine scale sets are used in this scenario - one for the frontend ASP.NET application instances, and one for the backend SQL Server cluster VM instances.</span></span> <span data-ttu-id="3c8a6-135">La configuration de l’état souhaité (DSC) de PowerShell ou l’extension de script personnalisé Azure peut servir à configurer les instances de machine virtuelle avec les logiciels requis et les paramètres de configuration.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-135">PowerShell desired state configuration (DSC) or the Azure custom script extension can be used to provision the VM instances with the required software and configuration settings.</span></span>
* <span data-ttu-id="3c8a6-136">Un [groupe de sécurité réseau Azure][nsg-docs] contient une liste de règles de sécurité qui autorisent ou refusent le trafic réseau entrant ou sortant en fonction de l’adresse IP source ou de destination, du port et du protocole.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-136">[Azure network security groups][nsg-docs] contains a list of security rules that allow or deny inbound or outbound network traffic based on source or destination IP address, port, and protocol.</span></span> <span data-ttu-id="3c8a6-137">Les réseaux virtuels dans ce scénario sont sécurisés avec des règles de groupe de sécurité réseau qui limitent le flux du trafic entre les composants d’application.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-137">The virtual networks in this scenario are secured with network security group rules that restrict the flow of traffic between the application components.</span></span>
* <span data-ttu-id="3c8a6-138">[Azure Load Balancer][loadbalancer-docs] distribue le trafic entrant en fonction des règles et des sondes d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-138">[Azure load balancer][loadbalancer-docs] distributes inbound traffic according to rules and health probes.</span></span> <span data-ttu-id="3c8a6-139">Un équilibreur de charge offre une latence faible et un débit élevé, et peut augmenter l’échelle jusqu’à des millions de flux pour toutes les applications TCP et UDP.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-139">A load balancer provides low latency and high throughput, and scales up to millions of flows for all TCP and UDP applications.</span></span> <span data-ttu-id="3c8a6-140">Dans ce scénario, un équilibreur de charge interne permet de distribuer le trafic à partir de la couche d’application de serveur frontend vers le cluster de SQL Server back-end.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-140">An internal load balancer is used in this scenario to distribute traffic from the frontend application tier to the backend SQL Server cluster.</span></span>
* <span data-ttu-id="3c8a6-141">[Stockage Blob Azure][cloudwitness-docs] agit comme un emplacement de témoin Cloud pour le cluster SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-141">[Azure Blob Storage][cloudwitness-docs] acts a Cloud Witness location for the SQL Server cluster.</span></span> <span data-ttu-id="3c8a6-142">Ce témoin est utilisé pour les opérations de cluster et les décisions nécessitant un vote supplémentaire pour décider du quorum.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-142">This witness is used for cluster operations and decisions that require an additional vote to decide quorum.</span></span> <span data-ttu-id="3c8a6-143">L’utilisation d’un témoin Cloud supprime la nécessité d’une machine virtuelle supplémentaire d’agir comme un témoin de partage de fichiers traditionnel.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-143">Using Cloud Witness removes the need for an additional VM to act as a traditional File Share Witness.</span></span>

### <a name="alternatives"></a><span data-ttu-id="3c8a6-144">Autres solutions</span><span class="sxs-lookup"><span data-stu-id="3c8a6-144">Alternatives</span></span>

* <span data-ttu-id="3c8a6-145">\* nix, Windows peut facilement être remplacé par de nombreux autres systèmes d’exploitation car rien dans l’infrastructure ne dépend du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-145">\*nix, windows can easily be replaced by a variety of other OS's as nothing in the infrastructure depends on the OS.</span></span>

* <span data-ttu-id="3c8a6-146">[SQL Server pour Linux][sql-linux] peut remplacer le magasin de données back-end.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-146">[SQL Server for Linux][sql-linux] can replace the back-end data store.</span></span>

* <span data-ttu-id="3c8a6-147">[Cosmos DB][cosmos] est une autre solution de magasin de données.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-147">[Cosmos DB][cosmos] is another another alternative for the data store.</span></span>

## <a name="considerations"></a><span data-ttu-id="3c8a6-148">Considérations</span><span class="sxs-lookup"><span data-stu-id="3c8a6-148">Considerations</span></span>

### <a name="availability"></a><span data-ttu-id="3c8a6-149">Disponibilité</span><span class="sxs-lookup"><span data-stu-id="3c8a6-149">Availability</span></span>

<span data-ttu-id="3c8a6-150">Dans ce scénario, les instances de machine virtuelle sont déployées sur des zones de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-150">The VM instances in this scenario are deployed across Availability Zones.</span></span> <span data-ttu-id="3c8a6-151">Chaque zone de disponibilité est composée d’un ou de plusieurs centres de données équipés d’une alimentation, d’un système de refroidissement et d’un réseau indépendants.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-151">Each zone is made up of one or more datacenters equipped with independent power, cooling, and networking.</span></span> <span data-ttu-id="3c8a6-152">Au moins trois zones sont disponibles dans toutes les régions activées.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-152">A minimum of three zones are available in all enabled regions.</span></span> <span data-ttu-id="3c8a6-153">Cette distribution d’instances de machine virtuelle entre des zones offre une haute disponibilité pour les couches Application.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-153">This distribution of VM instances across zones provides high availability to the application tiers.</span></span> <span data-ttu-id="3c8a6-154">Pour plus d'informations, consultez [Que sont les zones de disponibilité dans Azure ?][azureaz-docs]</span><span class="sxs-lookup"><span data-stu-id="3c8a6-154">For more information, see [what are Availability Zones in Azure?][azureaz-docs]</span></span>

<span data-ttu-id="3c8a6-155">La couche Données peut être configurée pour utiliser des groupes de disponibilité Always On.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-155">The database tier can be configured to use Always On availability groups.</span></span> <span data-ttu-id="3c8a6-156">Avec cette configuration de SQL Server, une base de données primaire au sein d’un cluster est configurée avec un maximum de huit bases de données secondaires.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-156">With this SQL Server configuration, one primary database within a cluster is configured with up to eight secondary databases.</span></span> <span data-ttu-id="3c8a6-157">En cas de problème avec la base de données primaire, le cluster bascule sur l’une des bases de données secondaires, ce qui permet à l’application de rester disponible.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-157">If an issue occurs with the primary database, the cluster fails over to one of the secondary databases, which allows the application to continue to be available.</span></span> <span data-ttu-id="3c8a6-158">Pour plus d’informations, consultez [Vue d’ensemble des groupes de disponibilité AlwaysOn pour SQL Server][sqlalwayson-docs].</span><span class="sxs-lookup"><span data-stu-id="3c8a6-158">For more information, see [Overview of Always On availability groups for SQL Server][sqlalwayson-docs].</span></span>

<span data-ttu-id="3c8a6-159">Pour consulter d’autres rubriques relatives à la disponibilité, consultez la [liste de contrôle de la disponibilité][availability] dans le Centre des architectures Azure.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-159">For other availability topics, see the [availability checklist][availability] in the Azure Architecure Center.</span></span>

### <a name="scalability"></a><span data-ttu-id="3c8a6-160">Extensibilité</span><span class="sxs-lookup"><span data-stu-id="3c8a6-160">Scalability</span></span>

<span data-ttu-id="3c8a6-161">Ce scénario utilise des groupes de machines virtuelles identiques pour les composants frontend et principaux.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-161">This scenario uses virtual machine scale sets for the frontend and backend components.</span></span> <span data-ttu-id="3c8a6-162">Avec des groupes identiques, le nombre d’instances de machine virtuelle qui s’exécutent la couche Application frontend peut être mis automatiquement à l’échelle selon la demande du client ou une planification définie.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-162">With scale sets, the number of VM instances that run the frontend application tier can automatically scale in response to customer demand, or based on a defined schedule.</span></span> <span data-ttu-id="3c8a6-163">Pour plus d’informations, voir [Vue d’ensemble de la mise à l’échelle automatique avec des groupes de machines virtuelles identiques][vmssautoscale-docs].</span><span class="sxs-lookup"><span data-stu-id="3c8a6-163">For more information, see [Overview of autoscale with virtual machine scale sets][vmssautoscale-docs].</span></span>

<span data-ttu-id="3c8a6-164">Pour consulter d’autres rubriques relatives à l’extensibilité, consultez la [liste de contrôle de l’extensibilité][scalability] dans le Centre des architectures Azure.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-164">For other scalability topics, see the [scalability checklist][scalability] in the Azure Architecure Center.</span></span>

### <a name="security"></a><span data-ttu-id="3c8a6-165">Sécurité</span><span class="sxs-lookup"><span data-stu-id="3c8a6-165">Security</span></span>

<span data-ttu-id="3c8a6-166">Tout le réseau virtuel passe dans la couche Application frontend et est protégé par les groupes de sécurité réseau.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-166">All the virtual network traffic into the frontend application tier and protected by network security groups.</span></span> <span data-ttu-id="3c8a6-167">Les règles limitent le flux du trafic afin que seules les instances de machine virtuelle au niveau de la couche Application frontend puissent accéder à la couche Données back-end.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-167">Rules limit the flow of traffic so that only the frontend application tier VM instances can access the backend database tier.</span></span> <span data-ttu-id="3c8a6-168">Aucun trafic Internet sortant n’est autorisé à partir de la couche Données.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-168">No outbound Internet traffic is allowed from the database tier.</span></span> <span data-ttu-id="3c8a6-169">Pour réduire l’encombrement de l’attaque, aucun port de gestion à distance directe n’est ouvert.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-169">To reduce the attack footprint, no direct remote management ports are open.</span></span> <span data-ttu-id="3c8a6-170">Pour plus d'informations, consultez [Groupes de sécurité réseau Azure][nsg-docs].</span><span class="sxs-lookup"><span data-stu-id="3c8a6-170">For more information, see [Azure network security groups][nsg-docs].</span></span>

<span data-ttu-id="3c8a6-171">Pour afficher des conseils sur le déploiement d’une [infrastructure conforme][pci-dss] à la norme de sécurité de l’industrie des cartes de paiement (PCI DSS 3.2).</span><span class="sxs-lookup"><span data-stu-id="3c8a6-171">To view guidance on deploying Payment Card Industry Data Security Standards (PCI DSS 3.2) [compliant infrastructure][pci-dss].</span></span> <span data-ttu-id="3c8a6-172">Pour obtenir des conseils d’ordre général sur la conception de scénarios sécurisés, consultez la [documentation sur la sécurité Azure][security].</span><span class="sxs-lookup"><span data-stu-id="3c8a6-172">For general guidance on designing secure scenarios, see the [Azure Security Documentation][security].</span></span>

### <a name="resiliency"></a><span data-ttu-id="3c8a6-173">Résilience</span><span class="sxs-lookup"><span data-stu-id="3c8a6-173">Resiliency</span></span>

<span data-ttu-id="3c8a6-174">En conjonction avec l’utilisation de zones de disponibilité et de groupe de machines virtuelles identiques, ce scénario utilise Azure Application Gateway et un équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-174">In combination with the use of Availability Zones and virtual machine scale sets, this scenario uses Azure Application Gateway and load balancer.</span></span> <span data-ttu-id="3c8a6-175">Ces deux composants de mise en réseau distribuent le trafic vers les instances de machine virtuelle connectées et incluent des sondes d’intégrité qui garantissent que le trafic est uniquement distribué vers des machines virtuelles saines.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-175">These two networking components distribute traffic to the connected VM instances, and include health probes that ensure traffic is only distributed to healthy VMs.</span></span> <span data-ttu-id="3c8a6-176">Deux instances Application Gateway sont configurées dans une configuration actif/passif, et un équilibreur de charge redondant dans une zone est utilisé.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-176">Two Application Gateway instances are configured in an active-passive configuration, and a zone-redundant load balancer is used.</span></span> <span data-ttu-id="3c8a6-177">Cette configuration rend les ressources de mise en réseau et l’application résilientes aux problèmes qui perturberaient autrement le trafic et affecteraient l’accès de l’utilisateur final.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-177">This configuration makes the networking resources and application resilient to issues that would otherwise disrupt traffic and impact end-user access.</span></span>

<span data-ttu-id="3c8a6-178">Pour obtenir des conseils d’ordre général sur la conception de scénarios résilients, consultez l’article [Conception d’applications résilientes pour Azure][resiliency].</span><span class="sxs-lookup"><span data-stu-id="3c8a6-178">For general guidance on designing resilient scenarios, see [Designing resilient applications for Azure][resiliency].</span></span>

## <a name="deploy-the-scenario"></a><span data-ttu-id="3c8a6-179">Déployez le scénario</span><span class="sxs-lookup"><span data-stu-id="3c8a6-179">Deploy the scenario</span></span>

<span data-ttu-id="3c8a6-180">**Prérequis.**</span><span class="sxs-lookup"><span data-stu-id="3c8a6-180">**Prerequisites.**</span></span>

* <span data-ttu-id="3c8a6-181">Vous devez disposer d’un compte Azure existant.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-181">You must have an existing Azure account.</span></span> <span data-ttu-id="3c8a6-182">Si vous n’avez pas d’abonnement Azure, créez un [compte gratuit](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) avant de commencer.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-182">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) before you begin.</span></span>
* <span data-ttu-id="3c8a6-183">Pour déployer un cluster de SQL Server dans le groupe identique backend, vous avez besoin d’un domaine Active Directory Services.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-183">To deploy a SQL Server cluster into the backend scale set, you would need an Active Directory Directory Services domain.</span></span>

<span data-ttu-id="3c8a6-184">Pour déployer l’infrastructure principale pour ce scénario avec un modèle Azure Resource Manager, procédez comme suit.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-184">To deploy the core infrastructure for this scenario with an Azure Resource Manager template, perform the following steps.</span></span>

1. <span data-ttu-id="3c8a6-185">Sélectionnez le bouton **Déployer sur Azure** :</span><span class="sxs-lookup"><span data-stu-id="3c8a6-185">Select the **Deploy to Azure** button:</span></span><br><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fmspnp%2Fsolution-architectures%2Fmaster%2Finfrastructure%2Fregulated-multitier-app%2Fazuredeploy.json" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>
2. <span data-ttu-id="3c8a6-186">Attendez l’ouverture de la solution Template deployment dans le portail Azure, puis procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="3c8a6-186">Wait for the template deployment to open in the Azure portal, then complete the following steps:</span></span>
   * <span data-ttu-id="3c8a6-187">Sélectionnez **Créer un nouveau** groupe de ressources, puis indiquez un nom, par exemple *myWindowsscenario* dans la zone de texte.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-187">Choose to **Create new** resource group, then provide a name such as *myWindowsscenario* in the text box.</span></span>
   * <span data-ttu-id="3c8a6-188">Dans la zone de liste déroulante **Emplacement**, sélectionnez une région.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-188">Select a region from the **Location** drop-down box.</span></span>
   * <span data-ttu-id="3c8a6-189">Indiquez un nom d’utilisateur et un mot de passe sécurisé pour les instances de groupe de machines virtuelles identiques.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-189">Provide a username and secure password for the virtual machine scale set instances.</span></span>
   * <span data-ttu-id="3c8a6-190">Passez en revue les termes et conditions, puis cochez la case **J’accepte les termes et conditions mentionnés ci-dessus**.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-190">Review the terms and conditions, then check **I agree to the terms and conditions stated above**.</span></span>
   * <span data-ttu-id="3c8a6-191">Sélectionnez le bouton **Acheter**.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-191">Select the **Purchase** button.</span></span>

<span data-ttu-id="3c8a6-192">Le déploiement prend 15 à 20 minutes.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-192">It can take 15-20 minutes for the deployment to complete.</span></span>

## <a name="pricing"></a><span data-ttu-id="3c8a6-193">Tarifs</span><span class="sxs-lookup"><span data-stu-id="3c8a6-193">Pricing</span></span>

<span data-ttu-id="3c8a6-194">Pour explorer le coût d’exécution de ce scénario, tous les services sont préconfigurés dans le calculateur de coûts.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-194">To explore the cost of running this scenario, all of the services are pre-configured in the cost calculator.</span></span>  <span data-ttu-id="3c8a6-195">Pour pouvoir observer l’évolution de la tarification pour votre cas d’usage particulier, modifiez les variables appropriées en fonction du trafic que vous escomptez.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-195">To see how the pricing would change for your particular use case, change the appropriate variables to match your expected traffic.</span></span>

<span data-ttu-id="3c8a6-196">Nous proposons trois exemples de profils de coût basés sur le nombre d’instances de groupe identique de machines virtuelles exécutant vos applications.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-196">We have provided three sample cost profiles based on the number of scale set VM instances that run your applications.</span></span>

* <span data-ttu-id="3c8a6-197">[Petit][small-pricing] : cela correspond à deux instances de machine virtuelle frontend et deux instances backend.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-197">[Small][small-pricing]: this correlates to two frontend and two backend VM instances.</span></span>
* <span data-ttu-id="3c8a6-198">[Moyen][medium-pricing] : cela correspond à 20 instances de machine virtuelle frontend et 5 instances backend.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-198">[Medium][medium-pricing]: this correlates to 20 frontend and 5 backend VM instances.</span></span>
* <span data-ttu-id="3c8a6-199">[Grnad][large-pricing] : cela correspond à 100 instances de machine virtuelle frontend et 10 instances backend.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-199">[Large][large-pricing]: this correlates to 100 frontend and 10 backend VM instances.</span></span>

## <a name="related-resources"></a><span data-ttu-id="3c8a6-200">Ressources associées</span><span class="sxs-lookup"><span data-stu-id="3c8a6-200">Related Resources</span></span>

<span data-ttu-id="3c8a6-201">Ce scénario a utilisé un groupe de machines virtuelles identiques backend qui exécutent un cluster Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-201">This scenario used a backend virtual machine scale set that runs a Microsoft SQL Server cluster.</span></span> <span data-ttu-id="3c8a6-202">Azure Cosmos DB peut également servir comme une couche Données évolutive et sécurisée pour les données d’application.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-202">Azure Cosmos DB could also be used as a scalable and secure database tier for the application data.</span></span> <span data-ttu-id="3c8a6-203">Un [point de terminaison de service du réseau virtuel Azure][vnetendpoint-docs] permet de sécuriser vos ressources critiques du service Azure pour vos réseaux virtuels uniquement.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-203">An [Azure virtual network service endpoint][vnetendpoint-docs] allow you to secure your critical Azure service resources to only your virtual networks.</span></span> <span data-ttu-id="3c8a6-204">Dans ce scénario, les points de terminaison de réseau virtuel permettent de sécuriser le trafic entre la couche Application frontend et Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="3c8a6-204">In this scenario, VNet endpoints allow you to secure traffic between the frontend application tier and Cosmos DB.</span></span> <span data-ttu-id="3c8a6-205">Pour plus d’informations sur Cosmos DB, voir [Vue d’ensemble de Azure Cosmos DB][azurecosmosdb-docs].</span><span class="sxs-lookup"><span data-stu-id="3c8a6-205">For more information on Cosmos DB, see [Azure Cosmos DB overview][azurecosmosdb-docs].</span></span>

<span data-ttu-id="3c8a6-206">Vous voyez également une [architecture de référence approfondie pour une application multiniveau générique avec SQL Server][ntiersql-ra].</span><span class="sxs-lookup"><span data-stu-id="3c8a6-206">You also view a thorough [reference architecture for a generic N-tier application with SQL Server][ntiersql-ra].</span></span>

<!-- links -->
[appgateway-docs]: /azure/application-gateway/overview
[architecture]: ./media/regulated-multitier-app/architecture-regulated-multitier-app.png
[autoscaling]: /azure/architecture/best-practices/auto-scaling
[availability]: /architecture/checklist/availability
[azureaz-docs]: /azure/availability-zones/az-overview
[azurecosmosdb-docs]: /azure/cosmos-db/introduction
[cloudwitness-docs]: /windows-server/failover-clustering/deploy-cloud-witness
[loadbalancer-docs]: /azure/load-balancer/load-balancer-overview
[nsg-docs]: /azure/virtual-network/security-overview
[ntiersql-ra]: /azure/architecture/reference-architectures/n-tier/n-tier-sql-server
[resiliency]: /azure/architecture/resiliency/ 
[security]: /azure/security/
[scalability]: /azure/architecture/checklist/scalability 
[scaleset-docs]: /azure/virtual-machine-scale-sets/overview
[sqlalwayson-docs]: /sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server
[vmssautoscale-docs]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview
[vnet-docs]: /azure/virtual-network/virtual-networks-overview
[vnetendpoint-docs]: /azure/virtual-network/virtual-network-service-endpoints-overview
[pci-dss]: /azure/security/blueprints/pcidss-iaaswa-overview
[dmz]: /azure/virtual-network/virtual-networks-dmz-nsg
[cosmos]: /azure/cosmos-db/
[sql-linux]: /sql/linux/sql-server-linux-overview?view=sql-server-linux-2017

[small-pricing]: https://azure.com/e/711bbfcbbc884ef8aa91cdf0f2caff72
[medium-pricing]: https://azure.com/e/b622d82d79b34b8398c4bce35477856f
[large-pricing]: https://azure.com/e/1d99d8b92f90496787abecffa1473a93