---
title: Modèle side-car
description: Déployez les composants d’une application sur un processus ou conteneur distinct pour fournir l’isolation et l’encapsulation.
author: dragon119
ms.date: 06/23/2017
ms.openlocfilehash: ec168009aa99f412c3f1222a1c404ea4ea5cb669
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/14/2017
---
# <a name="sidecar-pattern"></a><span data-ttu-id="0de7e-103">Modèle side-car</span><span class="sxs-lookup"><span data-stu-id="0de7e-103">Sidecar pattern</span></span>

<span data-ttu-id="0de7e-104">Déployez les composants d’une application sur un processus ou conteneur distinct pour fournir l’isolation et l’encapsulation.</span><span class="sxs-lookup"><span data-stu-id="0de7e-104">Deploy components of an application into a separate process or container to provide isolation and encapsulation.</span></span> <span data-ttu-id="0de7e-105">Ce modèle permet également aux applications d’être constituées de technologies et de composants hétérogènes.</span><span class="sxs-lookup"><span data-stu-id="0de7e-105">This pattern can also enable applications to be composed of heterogeneous components and technologies.</span></span>

<span data-ttu-id="0de7e-106">Ce modèle est nommé *side-car*, car il ressemble à un side-car attaché à une moto.</span><span class="sxs-lookup"><span data-stu-id="0de7e-106">This pattern is named *Sidecar* because it resembles a sidecar attached to a motorcycle.</span></span> <span data-ttu-id="0de7e-107">Dans ce modèle, le side-car est attaché à une application parente et fournit des fonctionnalités de prise en charge pour l’application.</span><span class="sxs-lookup"><span data-stu-id="0de7e-107">In the pattern, the sidecar is attached to a parent application and provides supporting features for the application.</span></span> <span data-ttu-id="0de7e-108">De plus, le side-car partage le même cycle de vie que l’application parente, étant créé et mis hors service en même temps que celle-ci.</span><span class="sxs-lookup"><span data-stu-id="0de7e-108">The sidecar also shares the same lifecycle as the parent application, being created and retired alongside the parent.</span></span> <span data-ttu-id="0de7e-109">Le modèle side-car est parfois appelé « modèle assistant » et est un modèle de décomposition.</span><span class="sxs-lookup"><span data-stu-id="0de7e-109">The sidecar pattern is sometimes referred to as the sidekick pattern and is a decomposition pattern.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="0de7e-110">Contexte et problème</span><span class="sxs-lookup"><span data-stu-id="0de7e-110">Context and Problem</span></span>

<span data-ttu-id="0de7e-111">Les applications et services nécessitent souvent des fonctionnalités connexes, telles que la surveillance, la journalisation, la configuration et les services réseau.</span><span class="sxs-lookup"><span data-stu-id="0de7e-111">Applications and services often require related functionality, such as monitoring, logging, configuration, and networking services.</span></span> <span data-ttu-id="0de7e-112">Ces tâches périphériques peuvent être implémentées en tant que composants ou services distincts.</span><span class="sxs-lookup"><span data-stu-id="0de7e-112">These peripheral tasks can be implemented as separate components or services.</span></span> 

<span data-ttu-id="0de7e-113">Si elles sont étroitement intégrées à l’application, elles peuvent s’exécuter dans le même processus que l’application, optimisant l’utilisation des ressources partagées.</span><span class="sxs-lookup"><span data-stu-id="0de7e-113">If they are tightly integrated into the application, they can run in the same process as the application, making efficient use of shared resources.</span></span> <span data-ttu-id="0de7e-114">Toutefois, cela signifie également qu’elles ne sont pas bien isolées ; une panne dans un de ces composants peut affecter les autres composants ou l’ensemble de l’application.</span><span class="sxs-lookup"><span data-stu-id="0de7e-114">However, this also means they are not well isolated, and an outage in one of these components can affect other components or the entire application.</span></span> <span data-ttu-id="0de7e-115">De plus, elles doivent généralement être implémentées à l’aide du même langage que l’application parente.</span><span class="sxs-lookup"><span data-stu-id="0de7e-115">Also, they usually need to be implemented using the same language as the parent application.</span></span> <span data-ttu-id="0de7e-116">Ainsi, le composant et l’application sont étroitement interdépendants.</span><span class="sxs-lookup"><span data-stu-id="0de7e-116">As a result, the component and the application have close interdependence on each other.</span></span>

<span data-ttu-id="0de7e-117">Si l’application est décomposée en services, chaque service peut être généré à l’aide de technologies et de langages différents.</span><span class="sxs-lookup"><span data-stu-id="0de7e-117">If the application is decomposed into services, then each service can be built using different languages and technologies.</span></span> <span data-ttu-id="0de7e-118">Bien que cela procure davantage de souplesse, chaque composant a ses propres dépendances et nécessite des bibliothèques spécifiques au langage pour accéder à la plateforme sous-jacente et à toutes les ressources partagées avec l’application parente.</span><span class="sxs-lookup"><span data-stu-id="0de7e-118">While this gives more flexibility, it means that each component has its own dependencies and requires language-specific libraries to access the underlying platform and any resources shared with the parent application.</span></span> <span data-ttu-id="0de7e-119">Par ailleurs, le déploiement de ces fonctionnalités en tant que services distincts peut ajouter de la latence à l’application.</span><span class="sxs-lookup"><span data-stu-id="0de7e-119">In addition, deploying these features as separate services can add latency to the application.</span></span> <span data-ttu-id="0de7e-120">La gestion du code et des dépendances pour ces interfaces spécifiques au langage peut également ajouter une part importante de complexité, en particulier pour l’hébergement, le déploiement et la gestion.</span><span class="sxs-lookup"><span data-stu-id="0de7e-120">Managing the code and dependencies for these language-specific interfaces can also add considerable complexity, especially for hosting, deployment, and management.</span></span>

## <a name="solution"></a><span data-ttu-id="0de7e-121">Solution</span><span class="sxs-lookup"><span data-stu-id="0de7e-121">Solution</span></span>

<span data-ttu-id="0de7e-122">Colocalisez un ensemble cohérent de tâches avec l’application principale, mais placez-les à l’intérieur de leur propre processus ou conteneur, en fournissant une interface homogène pour les services de plateforme entre les langages.</span><span class="sxs-lookup"><span data-stu-id="0de7e-122">Co-locate a cohesive set of tasks with the primary application, but place them inside their own process or container, providing a homogeneous interface for platform services across languages.</span></span> 

![](./_images/sidecar.png)

<span data-ttu-id="0de7e-123">Un service side-car ne fait pas nécessairement partie de l’application, mais il est connecté à celle-ci.</span><span class="sxs-lookup"><span data-stu-id="0de7e-123">A sidecar service is not necessarily part of the application, but is connected to it.</span></span> <span data-ttu-id="0de7e-124">Il est présent partout où l’application parente est présente.</span><span class="sxs-lookup"><span data-stu-id="0de7e-124">It goes wherever the parent application goes.</span></span> <span data-ttu-id="0de7e-125">Les side-cars sont des processus ou services de prise en charge qui sont déployés avec l’application principale.</span><span class="sxs-lookup"><span data-stu-id="0de7e-125">Sidecars are supporting processes or services that are deployed with the primary application.</span></span> <span data-ttu-id="0de7e-126">Dans le cas d’une motocyclette, le side-car est attaché à celle-ci, et chaque motocyclette peut avoir son propre side-car.</span><span class="sxs-lookup"><span data-stu-id="0de7e-126">On a motorcycle, the sidecar is attached to one motorcycle, and each motorcycle can have its own sidecar.</span></span> <span data-ttu-id="0de7e-127">De la même façon, un service side-car partage le devenir de son application parente.</span><span class="sxs-lookup"><span data-stu-id="0de7e-127">In the same way, a sidecar service shares the fate of its parent application.</span></span> <span data-ttu-id="0de7e-128">Pour chaque instance de l’application, une instance du side-car est déployée et hébergée à ses côtés.</span><span class="sxs-lookup"><span data-stu-id="0de7e-128">For each instance of the application, an instance of the sidecar is deployed and hosted alongside it.</span></span> 

<span data-ttu-id="0de7e-129">Avantages de l’utilisation d’un modèle side-car :</span><span class="sxs-lookup"><span data-stu-id="0de7e-129">Advantages of using a sidecar pattern include:</span></span>

- <span data-ttu-id="0de7e-130">Un side-car étant indépendant de son application principale en termes d’environnement d’exécution et de langage de programmation, vous n’avez pas besoin de développer un side-car par langage.</span><span class="sxs-lookup"><span data-stu-id="0de7e-130">A sidecar is independent from its primary application in terms of runtime environment and programming language, so you don't need to develop one sidecar per language.</span></span> 

- <span data-ttu-id="0de7e-131">Le side-car peut accéder aux mêmes ressources que l’application principale.</span><span class="sxs-lookup"><span data-stu-id="0de7e-131">The sidecar can access the same resources as the primary application.</span></span> <span data-ttu-id="0de7e-132">Par exemple, un side-car peut surveiller les ressources système utilisées par lui-même et l’application principale.</span><span class="sxs-lookup"><span data-stu-id="0de7e-132">For example, a sidecar can monitor system resources used by both the sidecar and the primary application.</span></span> 

- <span data-ttu-id="0de7e-133">En raison de sa proximité avec l’application principale, il n’existe aucune latence importante quand l’un et l’autre communiquent.</span><span class="sxs-lookup"><span data-stu-id="0de7e-133">Because of its proximity to the primary application, there’s no significant latency when communicating between them.</span></span>

- <span data-ttu-id="0de7e-134">Même pour les applications qui ne fournissent pas de mécanisme d’extensibilité, vous pouvez utiliser un side-car pour étendre les fonctionnalités en le joignant en tant que processus propre dans le même hôte ou sous-conteneur que l’application principale.</span><span class="sxs-lookup"><span data-stu-id="0de7e-134">Even for applications that don’t provide an extensibility mechanism, you can use a sidecar to extend functionality by attaching it as own process in the same host or sub-container as the primary application.</span></span>

<span data-ttu-id="0de7e-135">Le modèle side-car est souvent utilisé avec des conteneurs et est appelé « conteneur side-car » ou « conteneur assistant ».</span><span class="sxs-lookup"><span data-stu-id="0de7e-135">The sidecar pattern is often used with containers and referred to as a sidecar container or sidekick container.</span></span> 

## <a name="issues-and-considerations"></a><span data-ttu-id="0de7e-136">Problèmes et considérations</span><span class="sxs-lookup"><span data-stu-id="0de7e-136">Issues and Considerations</span></span>

- <span data-ttu-id="0de7e-137">Envisagez le format de déploiement et d’empaquetage à utiliser pour déployer des services, processus ou conteneurs.</span><span class="sxs-lookup"><span data-stu-id="0de7e-137">Consider the deployment and packaging format you will use to deploy services, processes, or containers.</span></span> <span data-ttu-id="0de7e-138">Les conteneurs sont particulièrement bien adaptés au modèle side-car.</span><span class="sxs-lookup"><span data-stu-id="0de7e-138">Containers are particularly well suited to the sidecar pattern.</span></span>
- <span data-ttu-id="0de7e-139">Quand vous concevez un service side-car, choisissez avec soin le mécanisme de communication entre processus.</span><span class="sxs-lookup"><span data-stu-id="0de7e-139">When designing a sidecar service, carefully decide on the interprocess communication mechanism.</span></span> <span data-ttu-id="0de7e-140">Essayez d’utiliser des technologies indépendantes du langage ou du framework, sauf si des exigences de niveau de performance rendent cela peu pratique.</span><span class="sxs-lookup"><span data-stu-id="0de7e-140">Try to use language- or framework-agnostic technologies unless performance requirements make that impractical.</span></span>
- <span data-ttu-id="0de7e-141">Avant de placer des fonctionnalités dans un side-car, déterminez si elles ne seraient pas plus efficaces sous la forme d’un service distinct ou d’un démon plus traditionnel.</span><span class="sxs-lookup"><span data-stu-id="0de7e-141">Before putting functionality into a sidecar, consider whether it would work better as a separate service or a more traditional daemon.</span></span>
- <span data-ttu-id="0de7e-142">Déterminez également si les fonctionnalités peuvent être implémentées en tant que bibliothèque ou à l’aide d’un mécanisme d’extension traditionnel.</span><span class="sxs-lookup"><span data-stu-id="0de7e-142">Also consider whether the functionality could be implemented as a library or using a traditional extension mechanism.</span></span> <span data-ttu-id="0de7e-143">Les bibliothèques spécifiques au langage peuvent offrir un niveau d’intégration plus profond et une surcharge réseau inférieure.</span><span class="sxs-lookup"><span data-stu-id="0de7e-143">Language-specific libraries may have a deeper level of integration and less network overhead.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="0de7e-144">Quand utiliser ce modèle</span><span class="sxs-lookup"><span data-stu-id="0de7e-144">When to Use this Pattern</span></span>

<span data-ttu-id="0de7e-145">Utilisez ce modèle dans les situations suivantes :</span><span class="sxs-lookup"><span data-stu-id="0de7e-145">Use this pattern when:</span></span>

- <span data-ttu-id="0de7e-146">Votre application principale utilise un ensemble hétérogène de langages et de frameworks.</span><span class="sxs-lookup"><span data-stu-id="0de7e-146">Your primary application uses a heterogenous set of languages and frameworks.</span></span> <span data-ttu-id="0de7e-147">Un composant situé dans un service side-car peut être utilisé par des applications écrites dans des langages différents à l’aide de différents frameworks.</span><span class="sxs-lookup"><span data-stu-id="0de7e-147">A component located in a sidecar service can be consumed by applications written in different languages using different frameworks.</span></span>
- <span data-ttu-id="0de7e-148">Un composant est détenu par une équipe à distance ou une autre organisation.</span><span class="sxs-lookup"><span data-stu-id="0de7e-148">A component is owned by a remote team or a different organization.</span></span>
- <span data-ttu-id="0de7e-149">Un composant ou fonctionnalité doit coexister sur le même hôte que l’application.</span><span class="sxs-lookup"><span data-stu-id="0de7e-149">A component or feature must be co-located on the same host as the application</span></span>
- <span data-ttu-id="0de7e-150">Vous avez besoin d’un service qui partage le cycle de vie global de votre application principale, mais qui peut être mis à jour indépendamment.</span><span class="sxs-lookup"><span data-stu-id="0de7e-150">You need a service that shares the overall lifecycle of your main application, but can be independently updated.</span></span>
- <span data-ttu-id="0de7e-151">Vous avez besoin d’un contrôle affiné des limites de ressources pour une ressource ou un composant particulier.</span><span class="sxs-lookup"><span data-stu-id="0de7e-151">You need fine-grained control over resource limits for a particular resource or component.</span></span> <span data-ttu-id="0de7e-152">Par exemple, vous souhaitez limiter la quantité de mémoire utilisée par un composant spécifique.</span><span class="sxs-lookup"><span data-stu-id="0de7e-152">For example, you may want to restrict the amount of memory a specific component uses.</span></span> <span data-ttu-id="0de7e-153">Vous pouvez déployer le composant en tant que side-car et gérer l’utilisation de la mémoire indépendamment de l’application principale.</span><span class="sxs-lookup"><span data-stu-id="0de7e-153">You can deploy the component as a sidecar and manage memory usage independently of the main application.</span></span>

<span data-ttu-id="0de7e-154">Ce modèle peut ne pas convenir :</span><span class="sxs-lookup"><span data-stu-id="0de7e-154">This pattern may not be suitable:</span></span>

- <span data-ttu-id="0de7e-155">Quand la communication entre processus doit être optimisée.</span><span class="sxs-lookup"><span data-stu-id="0de7e-155">When interprocess communication needs to be optimized.</span></span> <span data-ttu-id="0de7e-156">La communication entre une application parente et des services side-car engendre une surcharge, notamment de la latence dans les appels.</span><span class="sxs-lookup"><span data-stu-id="0de7e-156">Communication between a parent application and sidecar services includes some overhead, notably latency in the calls.</span></span> <span data-ttu-id="0de7e-157">Ce compromis peut ne pas convenir pour les interfaces gourmandes en communication.</span><span class="sxs-lookup"><span data-stu-id="0de7e-157">This may not be an acceptable trade-off for chatty interfaces.</span></span>
- <span data-ttu-id="0de7e-158">Pour les petites applications où l’avantage procuré par l’isolation ne contrebalance pas le coût en ressources lié au déploiement d’un service side-car pour chaque instance.</span><span class="sxs-lookup"><span data-stu-id="0de7e-158">For small applications where the resource cost of deploying a sidecar service for each instance is not worth the advantage of isolation.</span></span>
- <span data-ttu-id="0de7e-159">Quand le service doit se mettre à l’échelle différemment ou indépendamment des applications principales.</span><span class="sxs-lookup"><span data-stu-id="0de7e-159">When the service needs to scale differently than or independently from the main applications.</span></span> <span data-ttu-id="0de7e-160">Dans ce cas, il peut être préférable de déployer la fonctionnalité en tant que service distinct.</span><span class="sxs-lookup"><span data-stu-id="0de7e-160">If so, it may be better to deploy the feature as a separate service.</span></span>

## <a name="example"></a><span data-ttu-id="0de7e-161">Exemple</span><span class="sxs-lookup"><span data-stu-id="0de7e-161">Example</span></span>

<span data-ttu-id="0de7e-162">Ce modèle side-car s’applique à de nombreux scénarios.</span><span class="sxs-lookup"><span data-stu-id="0de7e-162">The sidecar pattern is applicable to many scenarios.</span></span> <span data-ttu-id="0de7e-163">Voici quelques exemples courants :</span><span class="sxs-lookup"><span data-stu-id="0de7e-163">Some common examples:</span></span>

- <span data-ttu-id="0de7e-164">API d’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="0de7e-164">Infrastructure API.</span></span> <span data-ttu-id="0de7e-165">L’équipe de développement de l’infrastructure crée un service qui est déployé en même temps que chaque application, au lieu d’une bibliothèque cliente spécifique au langage pour accéder à l’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="0de7e-165">The infrastructure development team creates a service that's deployed alongside each application, instead of a language-specific client library to access the infrastructure.</span></span> <span data-ttu-id="0de7e-166">Le service est chargé en tant que side-car et fournit une couche commune pour les services de l’infrastructure, notamment la journalisation, les données de l’environnement, le magasin de configuration, la découverte, les contrôles d’intégrité et les services de surveillance.</span><span class="sxs-lookup"><span data-stu-id="0de7e-166">The service is loaded as a sidecar and provides a common layer for infrastructure services, including logging, environment data, configuration store, discovery, health checks, and watchdog services.</span></span> <span data-ttu-id="0de7e-167">De plus, le side-car surveille le processus (ou conteneur) et l’environnement hôte de l’application parente et journalise les informations dans un service centralisé.</span><span class="sxs-lookup"><span data-stu-id="0de7e-167">The sidecar also monitors the parent application's host environment and process (or container) and logs the information to a centralized service.</span></span>
- <span data-ttu-id="0de7e-168">Gérer NGINX/HAProxy.</span><span class="sxs-lookup"><span data-stu-id="0de7e-168">Manage NGINX/HAProxy.</span></span> <span data-ttu-id="0de7e-169">Déployer NGINX avec un service side-car qui surveille l’état de l’environnement, puis met à jour le fichier de configuration NGINX et recycle le processus quand une modification d’état est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="0de7e-169">Deploy NGINX with a sidecar service that monitors environment state, then updates the NGINX configuration file and recycles the process when a change in state is needed.</span></span>
- <span data-ttu-id="0de7e-170">Side-car ambassadeur.</span><span class="sxs-lookup"><span data-stu-id="0de7e-170">Ambassador sidecar.</span></span> <span data-ttu-id="0de7e-171">Déployer un service [Ambassadeur][ambassador] en tant que side-car.</span><span class="sxs-lookup"><span data-stu-id="0de7e-171">Deploy an [ambassador][ambassador] service as a sidecar.</span></span> <span data-ttu-id="0de7e-172">L’application fait appel à l’ambassadeur, qui gère la journalisation des demandes, le routage, la rupture de circuit (circuit breaking) et autres fonctionnalités liées à la connectivité.</span><span class="sxs-lookup"><span data-stu-id="0de7e-172">The application calls through the ambassador, which handles request logging, routing, circuit breaking, and other connectivity related features.</span></span>
- <span data-ttu-id="0de7e-173">Proxy de déchargement.</span><span class="sxs-lookup"><span data-stu-id="0de7e-173">Offload proxy.</span></span> <span data-ttu-id="0de7e-174">Placer un proxy NGINX devant une instance de service node.js afin de gérer la fourniture de contenu de fichier statique pour le service.</span><span class="sxs-lookup"><span data-stu-id="0de7e-174">Place an NGINX proxy in front of a node.js service instance, to handle serving static file content for the service.</span></span>


## <a name="related-guidance"></a><span data-ttu-id="0de7e-175">Aide connexe</span><span class="sxs-lookup"><span data-stu-id="0de7e-175">Related guidance</span></span>

- <span data-ttu-id="0de7e-176">[Modèle ambassadeur][ambassador]</span><span class="sxs-lookup"><span data-stu-id="0de7e-176">[Ambassador pattern][ambassador]</span></span>


[ambassador]: ./ambassador.md

