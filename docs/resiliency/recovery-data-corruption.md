---
title: "Récupérer suite à une altération de données ou à une suppression accidentelle"
description: "Article dédié à la description de la récupération suite à une altération de données ou à une suppression accidentelle de données et à la conception d’applications résilientes, hautement disponibles et tolérantes aux pannes, ainsi qu’à la planification de la récupération d’urgence"
author: adamglick
ms.date: 08/18/2016
ms.openlocfilehash: b75c774f85c42f64472167897f08a7302ab50a3f
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/14/2017
---
[!INCLUDE [header](../_includes/header.md)]
# <a name="azure-resiliency-technical-guidance-recovery-from-data-corruption-or-accidental-deletion"></a><span data-ttu-id="7712f-103">Guide technique de la résilience Azure : récupération suite à une altération de données ou à une suppression accidentelle</span><span class="sxs-lookup"><span data-stu-id="7712f-103">Azure resiliency technical guidance: recovery from data corruption or accidental deletion</span></span>
<span data-ttu-id="7712f-104">Un plan solide de continuité d’activité englobe une portion dédiée à la récupération suite aux altérations ou aux suppressions de données.</span><span class="sxs-lookup"><span data-stu-id="7712f-104">Part of a robust business continuity plan is having a plan if your data gets corrupted or accidentally deleted.</span></span> <span data-ttu-id="7712f-105">Vous trouverez ci-après des informations sur la récupération suite à une altération ou à une suppression accidentelle de vos données en raison d’erreurs applicatives ou d’erreurs de l’opérateur.</span><span class="sxs-lookup"><span data-stu-id="7712f-105">The following is information about recovery after data has been corrupted or accidentally deleted, due to application errors or operator error.</span></span>

## <a name="virtual-machines"></a><span data-ttu-id="7712f-106">Machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="7712f-106">Virtual Machines</span></span>
<span data-ttu-id="7712f-107">Pour protéger votre système de machines virtuelles Azure, parfois appelé machines virtuelles IaaS (infrastructure-as-a-service), contre les erreurs applicatives ou les suppressions accidentelles, utilisez [Sauvegarde Azure](https://azure.microsoft.com/services/backup/).</span><span class="sxs-lookup"><span data-stu-id="7712f-107">To protect your Azure Virtual Machines (sometimes called infrastructure-as-a-service VMs) from application errors or accidental deletion, use [Azure Backup](https://azure.microsoft.com/services/backup/).</span></span> <span data-ttu-id="7712f-108">Le service Sauvegarde Azure prend en charge la création de sauvegardes cohérentes sur plusieurs disques de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="7712f-108">Azure Backup enables the creation of backups that are consistent across multiple VM disks.</span></span> <span data-ttu-id="7712f-109">En outre, l’archivage de sauvegarde peut être répliqué entre les régions, afin d’assurer la prise en charge de la récupération suite à une perte de région.</span><span class="sxs-lookup"><span data-stu-id="7712f-109">In addition, the Backup Vault can be replicated across regions to provide recovery from region loss.</span></span>

## <a name="storage"></a><span data-ttu-id="7712f-110">Stockage</span><span class="sxs-lookup"><span data-stu-id="7712f-110">Storage</span></span>
<span data-ttu-id="7712f-111">Notez que si Stockage Azure assure la résilience des données via des réplicas automatisés, cela n’empêche aucunement votre code d’application (ou les développeurs/utilisateurs) d’altérer des données lors d’une suppression accidentelle ou involontaire, une mise à jour, etc.</span><span class="sxs-lookup"><span data-stu-id="7712f-111">Note that while Azure Storage provides data resiliency through automated replicas, this does not prevent your application code (or developers/users) from corrupting data through accidental or unintended deletion, update, and so on.</span></span> <span data-ttu-id="7712f-112">La conservation de l’intégrité des données sous la menace d’erreurs des utilisateurs et des applications nécessite des techniques plus avancées, comme la copie des données vers un emplacement de stockage secondaire avec un journal d’audit.</span><span class="sxs-lookup"><span data-stu-id="7712f-112">Maintaining data fidelity in the face of application or user error requires more advanced techniques, such as copying the data to a secondary storage location with an audit log.</span></span> <span data-ttu-id="7712f-113">Les développeurs peuvent tirer parti de la [fonctionnalité d’instantané d’objet blob](https://msdn.microsoft.com/library/azure/ee691971.aspx), qui peut créer des instantanés en lecture seule d’objets blob.</span><span class="sxs-lookup"><span data-stu-id="7712f-113">Developers can take advantage of the blob [snapshot capability](https://msdn.microsoft.com/library/azure/ee691971.aspx), which can create read-only point-in-time snapshots of blob contents.</span></span> <span data-ttu-id="7712f-114">Elle peut être utilisée comme solution de base dédiée à l’intégrité des données des objets blob de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="7712f-114">This can be used as the basis of a data-fidelity solution for Azure Storage blobs.</span></span>

### <a name="blob-and-table-storage-backup"></a><span data-ttu-id="7712f-115">Sauvegarde de stockage d’objets blob et de tables</span><span class="sxs-lookup"><span data-stu-id="7712f-115">Blob and Table Storage Backup</span></span>
<span data-ttu-id="7712f-116">Les objets blob et les tables sont hautement durables, mais ils représentent toujours l’état actuel des données.</span><span class="sxs-lookup"><span data-stu-id="7712f-116">While blobs and tables are highly durable, they always represent the current state of the data.</span></span> <span data-ttu-id="7712f-117">La récupération de modifications ou de suppressions non souhaitées des données peut nécessiter leur restauration vers un état précédent.</span><span class="sxs-lookup"><span data-stu-id="7712f-117">Recovery from unwanted modification or deletion of data may require restoring data to a previous state.</span></span> <span data-ttu-id="7712f-118">Pour ce faire, vous pouvez profiter des fonctionnalités fournies par Azure pour stocker et conserver des copies ponctuelles.</span><span class="sxs-lookup"><span data-stu-id="7712f-118">This can be achieved by taking advantage of the capabilities provided by Azure to store and retain point-in-time copies.</span></span>

<span data-ttu-id="7712f-119">Pour les objets blob Azure, vous pouvez effectuer des sauvegardes ponctuelles à l’aide de la [fonctionnalité d’instantané blob](https://msdn.microsoft.com/library/ee691971.aspx).</span><span class="sxs-lookup"><span data-stu-id="7712f-119">For Azure Blobs, you can perform point-in-time backups using the [blob snapshot feature](https://msdn.microsoft.com/library/ee691971.aspx).</span></span> <span data-ttu-id="7712f-120">Pour chaque instantané, vous êtes facturé pour le stockage requis pour stocker les différences identifiées sur l’objet blob depuis le dernier état d’instantané.</span><span class="sxs-lookup"><span data-stu-id="7712f-120">For each snapshot, you are only charged for the storage required to store the differences within the blob since the last snapshot state.</span></span> <span data-ttu-id="7712f-121">Les instantanés dépendant de l’existence de l’objet blob d’origine sur lequel ils sont basés, nous vous recommandons de copier les données sur un autre objet blob voire sur un autre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="7712f-121">The snapshots are dependent on the existence of the original blob they are based on, so a copy operation to another blob or even another storage account is advisable.</span></span> <span data-ttu-id="7712f-122">Cela garantit la protection des données de sauvegarde contre tout risque de suppression accidentelle.</span><span class="sxs-lookup"><span data-stu-id="7712f-122">This ensures that backup data is properly protected against accidental deletion.</span></span> <span data-ttu-id="7712f-123">Pour les tables Azure, vous pouvez générer des copies ponctuelles vers une autre table ou vers des objets blob Azure.</span><span class="sxs-lookup"><span data-stu-id="7712f-123">For Azure Tables, you can make point-in-time copies to a different table or to Azure Blobs.</span></span> <span data-ttu-id="7712f-124">Pour consulter des recommandations détaillées et des exemples de sauvegardes de tables et d’objets blob au niveau de l’application, consultez la page :</span><span class="sxs-lookup"><span data-stu-id="7712f-124">More detailed guidance and examples of performing application-level backups of tables and blobs can be found here:</span></span>

* [<span data-ttu-id="7712f-125">Protecting Your Tables Against Application Errors</span><span class="sxs-lookup"><span data-stu-id="7712f-125">Protecting Your Tables Against Application Errors</span></span>](https://blogs.msdn.microsoft.com/windowsazurestorage/2010/05/03/protecting-your-tables-against-application-errors/)
* [<span data-ttu-id="7712f-126">Protecting Your Blobs Against Application Errors</span><span class="sxs-lookup"><span data-stu-id="7712f-126">Protecting Your Blobs Against Application Errors</span></span>](https://blogs.msdn.microsoft.com/windowsazurestorage/2010/04/29/protecting-your-blobs-against-application-errors/)

## <a name="database"></a><span data-ttu-id="7712f-127">Base de données</span><span class="sxs-lookup"><span data-stu-id="7712f-127">Database</span></span>
<span data-ttu-id="7712f-128">Plusieurs options de [continuité d’activité](/azure/sql-database/sql-database-business-continuity/) (sauvegarde, restauration) sont disponibles pour Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="7712f-128">There are several [business continuity](/azure/sql-database/sql-database-business-continuity/) (backup, restore) options available for Azure SQL Database.</span></span> <span data-ttu-id="7712f-129">Les bases de données peuvent être copiées avec la fonctionnalité de [copie de base de données](/azure/sql-database/sql-database-copy/) ou avec [l’exportation](/azure/sql-database/sql-database-export/) et [l’importation](https://msdn.microsoft.com/library/hh710052.aspx) d’un fichier .bacpac SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7712f-129">Databases can be copied by using the [Database Copy](/azure/sql-database/sql-database-copy/) functionality, or by  [exporting](/azure/sql-database/sql-database-export/) and [importing](https://msdn.microsoft.com/library/hh710052.aspx) a SQL Server bacpac file.</span></span> <span data-ttu-id="7712f-130">La fonctionnalité de copie de base de données offre des résultats cohérents d’un point de vue transactionnel, ce qui n’est pas le cas du fichier bacpac (par le biais du service d’importation/d’exportation).</span><span class="sxs-lookup"><span data-stu-id="7712f-130">Database Copy provides transactionally consistent results, while a bacpac (through the import/export service) does not.</span></span> <span data-ttu-id="7712f-131">Ces deux options sont exécutées en tant que services basés sur file d’attente au sein du centre de données. Aucun contrat de niveau de service de durée d’exécution n’est actuellement fourni.</span><span class="sxs-lookup"><span data-stu-id="7712f-131">Both of these options run as queue-based services within the data center, and they do not currently provide a time-to-completion SLA.</span></span>

> [!NOTE]
> <span data-ttu-id="7712f-132">Les options de copie de base de données et d’importation/exportation placent un niveau de charge considérable sur la base de données source.</span><span class="sxs-lookup"><span data-stu-id="7712f-132">The database copy and import/export options place a significant degree of load on the source database.</span></span> <span data-ttu-id="7712f-133">Elles peuvent déclencher la contention des ressources ou la limitation des événements.</span><span class="sxs-lookup"><span data-stu-id="7712f-133">They can trigger resource contention or throttling events.</span></span>
> 
> 

### <a name="sql-database-backup"></a><span data-ttu-id="7712f-134">Sauvegarde de base de données SQL</span><span class="sxs-lookup"><span data-stu-id="7712f-134">SQL Database Backup</span></span>
<span data-ttu-id="7712f-135">Les sauvegardes dans le temps pour Microsoft Azure SQL Database sont accomplies via la [copie de votre base de données Azure SQL](/azure/sql-database/sql-database-copy/).</span><span class="sxs-lookup"><span data-stu-id="7712f-135">Point-in-time backups for Microsoft Azure SQL Database are achieved by [copying your Azure SQL database](/azure/sql-database/sql-database-copy/).</span></span> <span data-ttu-id="7712f-136">Vous pouvez utiliser cette commande pour créer une copie cohérente sur le plan transactionnel d’une base de données sur le même serveur logique de base de données ou sur un serveur différent.</span><span class="sxs-lookup"><span data-stu-id="7712f-136">You can use this command to create a transactionally consistent copy of a database on the same logical database server or to a different server.</span></span> <span data-ttu-id="7712f-137">Dans les deux cas, la copie de base de données est pleinement fonctionnelle et entièrement indépendante de la base de données source.</span><span class="sxs-lookup"><span data-stu-id="7712f-137">In either case, the database copy is fully functional and completely independent of the source database.</span></span> <span data-ttu-id="7712f-138">Chaque copie créée représente une option de récupération dans le temps.</span><span class="sxs-lookup"><span data-stu-id="7712f-138">Each copy you create represents a point-in-time recovery option.</span></span> <span data-ttu-id="7712f-139">Pour récupérer intégralement l’état de base de données, attribuez à la nouvelle base de données le nom de la base de données source.</span><span class="sxs-lookup"><span data-stu-id="7712f-139">You can recover the database state completely by renaming the new database with the source database name.</span></span> <span data-ttu-id="7712f-140">Sinon, vous pouvez récupérer un sous-ensemble spécifique des données de la nouvelle base. Pour ce faire, exécutez des requêtes Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7712f-140">Alternatively, you can recover a specific subset of data from the new database by using Transact-SQL queries.</span></span> <span data-ttu-id="7712f-141">Pour plus d’informations sur SQL Database, consultez [Vue d’ensemble de la continuité de l’activité avec Azure SQL Database](/azure/sql-database/sql-database-business-continuity/).</span><span class="sxs-lookup"><span data-stu-id="7712f-141">For additional details about SQL Database, see [Overview of business continuity with Azure SQL Database](/azure/sql-database/sql-database-business-continuity/).</span></span>

### <a name="sql-server-on-virtual-machines-backup"></a><span data-ttu-id="7712f-142">Sauvegarde SQL Server sur les machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="7712f-142">SQL Server on Virtual Machines Backup</span></span>
<span data-ttu-id="7712f-143">Quand SQL Server est utilisé avec l’infrastructure Azure sous la forme de machines virtuelles de service (souvent appelées modèles IaaS ou machines virtuelles IaaS), vous disposez de deux options : les sauvegardes traditionnelles et la copie des journaux de transaction.</span><span class="sxs-lookup"><span data-stu-id="7712f-143">For SQL Server used with Azure infrastructure as a service virtual machines (often called IaaS or IaaS VMs), there are two options: traditional backups and log shipping.</span></span> <span data-ttu-id="7712f-144">Le recours aux sauvegardes traditionnelles vous permet de restaurer les données à un point spécifique dans le temps, mais le processus de récupération est lent.</span><span class="sxs-lookup"><span data-stu-id="7712f-144">Using traditional backups enables you to restore to a specific point in time, but the recovery process is slow.</span></span> <span data-ttu-id="7712f-145">Avec la restauration de sauvegardes traditionnelles, vous devez démarrer par une sauvegarde initiale complète, puis appliquer toutes les sauvegardes effectuées ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="7712f-145">Restoring traditional backups requires starting with an initial full backup, and then applying any backups taken after that.</span></span> <span data-ttu-id="7712f-146">La seconde option consiste en la configuration d’une session de copie des journaux de transaction pour reporter la restauration des sauvegardes des journaux (par exemple, de deux heures).</span><span class="sxs-lookup"><span data-stu-id="7712f-146">The second option is to configure a log shipping session to delay the restore of log backups (for example, by two hours).</span></span> <span data-ttu-id="7712f-147">Vous disposez ainsi d’une fenêtre permettant de récupérer des erreurs identifiées sur la sauvegarde primaire.</span><span class="sxs-lookup"><span data-stu-id="7712f-147">This provides a window to recover from errors made on the primary.</span></span>

## <a name="other-azure-platform-services"></a><span data-ttu-id="7712f-148">Autres services de plateforme Azure</span><span class="sxs-lookup"><span data-stu-id="7712f-148">Other Azure platform services</span></span>
<span data-ttu-id="7712f-149">Certains services de plateforme Azure stockent des informations dans un compte de stockage contrôlé par l’utilisateur ou Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="7712f-149">Some Azure platform services store information in a user-controlled storage account or Azure SQL Database.</span></span> <span data-ttu-id="7712f-150">Si le compte ou la ressource de stockage est supprimé ou corrompu, de graves erreurs peuvent être signalées sur le service.</span><span class="sxs-lookup"><span data-stu-id="7712f-150">If the account or storage resource is deleted or corrupted, this could cause serious errors with the service.</span></span> <span data-ttu-id="7712f-151">Dans ces cas, il est important de conserver des sauvegardes qui peuvent être utilisées pour recréer ces ressources en cas de suppression ou d’altération.</span><span class="sxs-lookup"><span data-stu-id="7712f-151">In these cases, it is important to maintain backups that would enable you to re-create these resources if they were deleted or corrupted.</span></span>

<span data-ttu-id="7712f-152">Pour les Sites Web Azure et Azure Mobile Services, vous devez sauvegarder et mettre à jour les bases de données associées.</span><span class="sxs-lookup"><span data-stu-id="7712f-152">For Azure Web Sites and Azure Mobile Services, you must backup and maintain the associated databases.</span></span> <span data-ttu-id="7712f-153">Pour Azure Media Service et Machines virtuelles, vous devez gérer le compte Stockage Azure associé et l’ensemble des ressources de ce compte.</span><span class="sxs-lookup"><span data-stu-id="7712f-153">For Azure Media Service and Virtual Machines, you must maintain the associated Azure Storage account and all resources in that account.</span></span> <span data-ttu-id="7712f-154">Par exemple, pour Machines virtuelles, vous devez sauvegarder et gérer les disques de machines virtuelles dans le stockage blob Azure.</span><span class="sxs-lookup"><span data-stu-id="7712f-154">For example, for Virtual Machines, you must back up and manage the VM disks in Azure blob storage.</span></span>

## <a name="checklists-for-data-corruption-or-accidental-deletion"></a><span data-ttu-id="7712f-155">Listes de contrôle pour l’altération ou la suppression accidentelle des données</span><span class="sxs-lookup"><span data-stu-id="7712f-155">Checklists for data corruption or accidental deletion</span></span>
## <a name="virtual-machines-checklist"></a><span data-ttu-id="7712f-156">Liste de contrôle de Machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="7712f-156">Virtual Machines checklist</span></span>
1. <span data-ttu-id="7712f-157">Consulter la section Machines virtuelles de ce document.</span><span class="sxs-lookup"><span data-stu-id="7712f-157">Review the Virtual Machines section of this document.</span></span>
2. <span data-ttu-id="7712f-158">Sauvegardez et gérer les disques de machines virtuelles avec Sauvegarde Azure (ou votre propre système de sauvegarde à l’aide du stockage Blob Azure et d’instantanés VHD).</span><span class="sxs-lookup"><span data-stu-id="7712f-158">Back up and maintain the VM disks with Azure Backup (or your own backup system by using Azure blob storage and VHD snapshots).</span></span>

## <a name="storage-checklist"></a><span data-ttu-id="7712f-159">Liste de contrôle du stockage</span><span class="sxs-lookup"><span data-stu-id="7712f-159">Storage checklist</span></span>
1. <span data-ttu-id="7712f-160">Consultez la section Stockage de ce document.</span><span class="sxs-lookup"><span data-stu-id="7712f-160">Review the Storage section of this document.</span></span>
2. <span data-ttu-id="7712f-161">Sauvegardez régulièrement les ressources de stockage critiques.</span><span class="sxs-lookup"><span data-stu-id="7712f-161">Regularly back up critical storage resources.</span></span>
3. <span data-ttu-id="7712f-162">Envisagez d’utiliser la fonctionnalité d’instantané pour les objets blob.</span><span class="sxs-lookup"><span data-stu-id="7712f-162">Consider using the snapshot feature for blobs.</span></span>

## <a name="database-checklist"></a><span data-ttu-id="7712f-163">Liste de contrôle de la base de données</span><span class="sxs-lookup"><span data-stu-id="7712f-163">Database checklist</span></span>
1. <span data-ttu-id="7712f-164">Consultez la section Base de données de ce document.</span><span class="sxs-lookup"><span data-stu-id="7712f-164">Review the Database section of this document.</span></span>
2. <span data-ttu-id="7712f-165">Créez des sauvegardes dans le temps à l’aide de la commande de copie de base de données.</span><span class="sxs-lookup"><span data-stu-id="7712f-165">Create point-in-time backups by using the Database Copy command.</span></span>

## <a name="sql-server-on-virtual-machines-backup-checklist"></a><span data-ttu-id="7712f-166">Liste de contrôle de la sauvegarde SQL Server sur les machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="7712f-166">SQL Server on Virtual Machines Backup checklist</span></span>
1. <span data-ttu-id="7712f-167">Consultez la section Sauvegarde SQL Server sur les machines virtuelles de ce document.</span><span class="sxs-lookup"><span data-stu-id="7712f-167">Review the SQL Server on Virtual Machines Backup section of this document.</span></span>
2. <span data-ttu-id="7712f-168">Utilisez des techniques traditionnelles de sauvegarde et de restauration.</span><span class="sxs-lookup"><span data-stu-id="7712f-168">Use traditional backup and restore techniques.</span></span>
3. <span data-ttu-id="7712f-169">Créez une session reportée de copie des journaux de transaction.</span><span class="sxs-lookup"><span data-stu-id="7712f-169">Create a delayed log shipping session.</span></span>

## <a name="web-apps-checklist"></a><span data-ttu-id="7712f-170">Liste de contrôle Web Apps</span><span class="sxs-lookup"><span data-stu-id="7712f-170">Web Apps checklist</span></span>
1. <span data-ttu-id="7712f-171">Sauvegardez et gérez la base de données associée, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="7712f-171">Back up and maintain the associated database, if any.</span></span>

## <a name="media-services-checklist"></a><span data-ttu-id="7712f-172">Liste de contrôle Media Services</span><span class="sxs-lookup"><span data-stu-id="7712f-172">Media Services checklist</span></span>
1. <span data-ttu-id="7712f-173">Sauvegardez et gérez les ressources de stockage associées.</span><span class="sxs-lookup"><span data-stu-id="7712f-173">Back up and maintain the associated storage resources.</span></span>

## <a name="more-information"></a><span data-ttu-id="7712f-174">Plus d’informations</span><span class="sxs-lookup"><span data-stu-id="7712f-174">More information</span></span>
<span data-ttu-id="7712f-175">Pour plus d’informations sur les fonctionnalités de sauvegarde et de restauration d’Azure, consultez la rubrique [Scénarios de stockage, sauvegarde et récupération](https://azure.microsoft.com/documentation/scenarios/storage-backup-recovery/).</span><span class="sxs-lookup"><span data-stu-id="7712f-175">For more information about backup and restore features in Azure, see [Storage, backup and recovery scenarios](https://azure.microsoft.com/documentation/scenarios/storage-backup-recovery/).</span></span>


