---
title: Analyse l’intégrité des applications pour la fiabilité dans Azure
description: Comment utiliser la surveillance pour améliorer la fiabilité des applications dans Azure
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: 46f9f3fb623a2facf4b9f9c6ec57376ae59e41dc
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646568"
---
# <a name="monitoring-application-health-for-reliability-in-azure"></a><span data-ttu-id="57c1c-103">Analyse l’intégrité des applications pour la fiabilité dans Azure</span><span class="sxs-lookup"><span data-stu-id="57c1c-103">Monitoring application health for reliability in Azure</span></span>

<span data-ttu-id="57c1c-104">La surveillance et les diagnostics sont cruciaux pour assurer la résilience.</span><span class="sxs-lookup"><span data-stu-id="57c1c-104">Monitoring and diagnostics are crucial for resiliency.</span></span> <span data-ttu-id="57c1c-105">En cas de problème, vous devez savoir *qui* a échoué, *lorsque* défaillante &mdash; et *pourquoi*.</span><span class="sxs-lookup"><span data-stu-id="57c1c-105">If something fails, you need to know *that* it failed, *when* it failed &mdash; and *why*.</span></span>

<span data-ttu-id="57c1c-106">*Surveillance* n’est pas le même que *détection des défaillances*.</span><span class="sxs-lookup"><span data-stu-id="57c1c-106">*Monitoring* is not the same as *failure detection*.</span></span> <span data-ttu-id="57c1c-107">Par exemple, votre application peut détecter un temporaire erreur et nouvelle tentative, éviter les temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="57c1c-107">For example, your application might detect a transient error and retry, avoiding downtime.</span></span> <span data-ttu-id="57c1c-108">Mais il doit également connecter l’opération de nouvelle tentative afin que vous puissiez surveiller le taux d’erreur pour obtenir une vue d’ensemble de l’intégrité des applications.</span><span class="sxs-lookup"><span data-stu-id="57c1c-108">But it should also log the retry operation so that you can monitor the error rate to get an overall picture of application health.</span></span>

<span data-ttu-id="57c1c-109">Considérez le processus de surveillance et de diagnostic comme un pipeline avec quatre phases distinctes : Instrumentation, collecte et stockage, analyse et diagnostic et de visualisation et alertes.</span><span class="sxs-lookup"><span data-stu-id="57c1c-109">Think of the monitoring and diagnostics process as a pipeline with four distinct stages: Instrumentation, collection and storage, analysis and diagnosis, and visualization and alerts.</span></span>

## <a name="instrumentation"></a><span data-ttu-id="57c1c-110">Instrumentation</span><span class="sxs-lookup"><span data-stu-id="57c1c-110">Instrumentation</span></span>

<span data-ttu-id="57c1c-111">Il n’est pas pratique surveiller votre application directement, instrumentation est donc primordial.</span><span class="sxs-lookup"><span data-stu-id="57c1c-111">It's not practical to monitor your application directly, so instrumentation is key.</span></span> <span data-ttu-id="57c1c-112">Un système distribué à grande échelle peut s’exécuter sur des dizaines de machines de virtuelles (VM), qui sont ajoutés et supprimés au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="57c1c-112">A large-scale distributed system might run on dozens of virtual machines (VMs), which are added and removed over time.</span></span> <span data-ttu-id="57c1c-113">De même, une application de cloud peut utiliser un nombre de magasins de données et une action utilisateur unique peut couvrir plusieurs sous-systèmes.</span><span class="sxs-lookup"><span data-stu-id="57c1c-113">Likewise, a cloud application might use a number of data stores and a single user action might span multiple subsystems.</span></span>

<span data-ttu-id="57c1c-114">Fournir l’instrumentation riche :</span><span class="sxs-lookup"><span data-stu-id="57c1c-114">Provide rich instrumentation:</span></span>

- <span data-ttu-id="57c1c-115">Pour les défaillances qui sont probablement pas encore fournir suffisamment de données pour déterminer la cause, d’atténuer le problème s’est produite et vous assurer que le système reste disponible.</span><span class="sxs-lookup"><span data-stu-id="57c1c-115">For failures that are likely but have not yet occurred, provide enough data to determine the cause, mitigate the situation, and ensure that the system remains available.</span></span>
- <span data-ttu-id="57c1c-116">Pour les défaillances qui ont déjà eu lieu, l’application doit renvoyer un message d’erreur à l’utilisateur, mais doit tenter de continuer à exécuter, avec une fonctionnalité réduite.</span><span class="sxs-lookup"><span data-stu-id="57c1c-116">For failures that have already occurred, the application should return an appropriate error message to the user but should attempt to continue running, albeit with reduced functionality.</span></span>

<span data-ttu-id="57c1c-117">Systèmes de surveillance doivent collecter des détails complets afin que les applications peuvent être restaurées de manière efficace et, si nécessaire, les concepteurs et développeurs peuvent modifier le système pour éviter la réapparition.</span><span class="sxs-lookup"><span data-stu-id="57c1c-117">Monitoring systems should capture comprehensive details so that applications can be restored efficiently and, if necessary, designers and developers can modify the system to prevent the situation from recurring.</span></span>

<span data-ttu-id="57c1c-118">Les données brutes de surveillance peuvent provenir de diverses sources, y compris :</span><span class="sxs-lookup"><span data-stu-id="57c1c-118">The raw data for monitoring can come from a variety of sources, including:</span></span>

- <span data-ttu-id="57c1c-119">Journaux des applications, tels que ceux générés par le [Azure Application Insights](/azure/azure-monitor/app/app-insights-overview) service.</span><span class="sxs-lookup"><span data-stu-id="57c1c-119">Application logs, such as those produced by the [Azure Application Insights](/azure/azure-monitor/app/app-insights-overview) service.</span></span>
- <span data-ttu-id="57c1c-120">Système d’exploitation les indicateurs de performances collectés par [Azure agents de surveillance](/azure/azure-monitor/platform/agents-overview).</span><span class="sxs-lookup"><span data-stu-id="57c1c-120">Operating system performance metrics collected by [Azure monitoring agents](/azure/azure-monitor/platform/agents-overview).</span></span>
- <span data-ttu-id="57c1c-121">[Ressources Azure](/azure/azure-monitor/platform/metrics-supported), y compris les mesures collectées par Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="57c1c-121">[Azure resources](/azure/azure-monitor/platform/metrics-supported), including metrics collected by Azure Monitor.</span></span>
- <span data-ttu-id="57c1c-122">[Azure Service Health](/azure/service-health/service-health-overview), qui offre un tableau de bord pour vous aider à suivre les événements actifs.</span><span class="sxs-lookup"><span data-stu-id="57c1c-122">[Azure Service Health](/azure/service-health/service-health-overview), which offers a dashboard to help you track active events.</span></span>
- <span data-ttu-id="57c1c-123">[Journaux Azure AD](/azure/active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics) intégrées à la plateforme Azure.</span><span class="sxs-lookup"><span data-stu-id="57c1c-123">[Azure AD logs](/azure/active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics) built into the Azure platform.</span></span>

<span data-ttu-id="57c1c-124">Plupart des services Azure ont des métriques et diagnostics que vous pouvez configurer pour analyser et de déterminer la cause des problèmes.</span><span class="sxs-lookup"><span data-stu-id="57c1c-124">Most Azure services have metrics and diagnostics that you can configure to analyze and determine the cause of problems.</span></span> <span data-ttu-id="57c1c-125">Pour plus d’informations, consultez [analyse les données collectées par Azure Monitor](/azure/azure-monitor/platform/data-collection).</span><span class="sxs-lookup"><span data-stu-id="57c1c-125">To learn more, see [Monitoring data collected by Azure Monitor](/azure/azure-monitor/platform/data-collection).</span></span>

## <a name="collection-and-storage"></a><span data-ttu-id="57c1c-126">Collecte et stockage</span><span class="sxs-lookup"><span data-stu-id="57c1c-126">Collection and storage</span></span>

<span data-ttu-id="57c1c-127">Données d’instrumentation brutes peuvent être conservées dans divers emplacements et les formats, notamment :</span><span class="sxs-lookup"><span data-stu-id="57c1c-127">Raw instrumentation data can be held in various locations and formats, including:</span></span>

- <span data-ttu-id="57c1c-128">Journaux de trace d’application</span><span class="sxs-lookup"><span data-stu-id="57c1c-128">Application trace logs</span></span>
- <span data-ttu-id="57c1c-129">Journaux d’activité IIS</span><span class="sxs-lookup"><span data-stu-id="57c1c-129">IIS logs</span></span>
- <span data-ttu-id="57c1c-130">Compteurs de performances</span><span class="sxs-lookup"><span data-stu-id="57c1c-130">Performance counters</span></span>

<span data-ttu-id="57c1c-131">Ces sources distinctes sont collectées, consolidées et placées dans des magasins de données fiables dans Azure, tels que Application Insights, les métriques Azure Monitor, l’intégrité du Service, comptes de stockage et Analytique de journal Azure.</span><span class="sxs-lookup"><span data-stu-id="57c1c-131">These disparate sources are collected, consolidated, and placed in reliable data stores in Azure, such as Application Insights, Azure Monitor metrics, Service Health, storage accounts, and Azure Log Analytics.</span></span>

## <a name="analysis-and-diagnosis"></a><span data-ttu-id="57c1c-132">Analyse et diagnostic</span><span class="sxs-lookup"><span data-stu-id="57c1c-132">Analysis and diagnosis</span></span>

<span data-ttu-id="57c1c-133">Analyser les données consolidées dans ces magasins de données pour résoudre les problèmes et obtenir une vue d’ensemble de l’intégrité des applications.</span><span class="sxs-lookup"><span data-stu-id="57c1c-133">Analyze data consolidated in these data stores to troubleshoot issues and gain an overall view of application health.</span></span> <span data-ttu-id="57c1c-134">En règle générale, vous pouvez [rechercher et analyser des](/azure/azure-monitor/log-query/log-query-overview) les données dans Application Insights et Analytique de journal à l’aide de requêtes de Kusto ou afficher préconfigurée des graphiques à l’aide de [solutions de gestion](/azure/azure-monitor/insights/solutions-inventory).</span><span class="sxs-lookup"><span data-stu-id="57c1c-134">Generally, you can [search for and analyze](/azure/azure-monitor/log-query/log-query-overview) the data in Application Insights and Log Analytics using Kusto queries or view preconfigured graphs using [management solutions](/azure/azure-monitor/insights/solutions-inventory).</span></span> <span data-ttu-id="57c1c-135">Ou utilisez le conseiller Azure pour afficher les recommandations en se concentrant sur [résilience](/azure/advisor/advisor-high-availability-recommendations) et [performances](/azure/advisor/advisor-performance-recommendations).</span><span class="sxs-lookup"><span data-stu-id="57c1c-135">Or use Azure Advisor to view recommendations with a focus on [resiliency](/azure/advisor/advisor-high-availability-recommendations) and [performance](/azure/advisor/advisor-performance-recommendations).</span></span>

## <a name="visualization-and-alerts"></a><span data-ttu-id="57c1c-136">Visualisation et alertes</span><span class="sxs-lookup"><span data-stu-id="57c1c-136">Visualization and alerts</span></span>

<span data-ttu-id="57c1c-137">Données de télémétrie présents dans un format qui facilite un opérateur à remarquer des problèmes ou tendances répétitives rapidement, telles que d’une alerte de tableau de bord ou un e-mail.</span><span class="sxs-lookup"><span data-stu-id="57c1c-137">Present telemetry data in a format that makes it easy for an operator to notice problems or trends quickly, such as a dashboard or email alert.</span></span>

<span data-ttu-id="57c1c-138">Obtenir une vue de la pile complète de l’état de l’application à l’aide de [tableaux de bord Azure](/azure/azure-portal/azure-portal-dashboards) pour créer une vue consolidée des graphiques à partir d’Application Insights, Analytique de journal, les métriques Azure Monitor et l’intégrité du Service de surveillance.</span><span class="sxs-lookup"><span data-stu-id="57c1c-138">Get a full-stack view of application state by using [Azure dashboards](/azure/azure-portal/azure-portal-dashboards) to create a consolidated view of monitoring graphs from Application Insights, Log Analytics, Azure Monitor metrics, and Service Health.</span></span> <span data-ttu-id="57c1c-139">Et utilisez [alertes Azure Monitor](/azure/azure-monitor/platform/alerts-overview) pour créer des notifications sur l’intégrité du Service, l’intégrité des ressources, les métriques Azure Monitor, journaux dans Log Analytique et Application Insights.</span><span class="sxs-lookup"><span data-stu-id="57c1c-139">And use [Azure Monitor alerts](/azure/azure-monitor/platform/alerts-overview) to create notifications on Service Health, resource health, Azure Monitor metrics, logs in Log Analytics, and Application Insights.</span></span>

<span data-ttu-id="57c1c-140">Pour plus d’informations sur la surveillance et diagnostics, consultez [surveillance et diagnostics](../best-practices/monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="57c1c-140">For more information about monitoring and diagnostics, see [Monitoring and diagnostics](../best-practices/monitoring.md).</span></span>

## <a name="health-probes-and-check-functions"></a><span data-ttu-id="57c1c-141">Sondes d’intégrité et les fonctions de vérification</span><span class="sxs-lookup"><span data-stu-id="57c1c-141">Health probes and check functions</span></span>

<span data-ttu-id="57c1c-142">L’intégrité et les performances d’une application peuvent se dégrader au fil du temps, et une dégradation peut ne pas être visible jusqu'à ce que l’application échoue.</span><span class="sxs-lookup"><span data-stu-id="57c1c-142">The health and performance of an application can degrade over time, and degradation might not be noticeable until the application fails.</span></span>

<span data-ttu-id="57c1c-143">Implémentez des sondes ou vérifier les fonctions et exécutez-les régulièrement à partir de l’extérieur de l’application.</span><span class="sxs-lookup"><span data-stu-id="57c1c-143">Implement probes or check functions, and run them regularly from outside the application.</span></span> <span data-ttu-id="57c1c-144">Ces vérifications peuvent être aussi simples que de mesurer le temps de réponse pour l’application dans son ensemble, les parties individuelles de l’application, des services spécifiques que l’application utilise ou composants distincts.</span><span class="sxs-lookup"><span data-stu-id="57c1c-144">These checks can be as simple as measuring response time for the application as a whole, for individual parts of the application, for specific services that the application uses, or for separate components.</span></span>

<span data-ttu-id="57c1c-145">Vérifiez que les fonctions peuvent exécuter des processus pour vous assurer qu’ils produisent des résultats valides, mesurent la latence et vérifier la disponibilité et extraient des informations à partir du système.</span><span class="sxs-lookup"><span data-stu-id="57c1c-145">Check functions can run processes to ensure that they produce valid results, measure latency and check availability, and extract information from the system.</span></span>

## <a name="long-running-workflow-failures"></a><span data-ttu-id="57c1c-146">Échecs de flux de travail de longue</span><span class="sxs-lookup"><span data-stu-id="57c1c-146">Long-running workflow failures</span></span>

<span data-ttu-id="57c1c-147">Flux de travail de longue durée inclure souvent plusieurs étapes, chacune d’elles doit être indépendant.</span><span class="sxs-lookup"><span data-stu-id="57c1c-147">Long-running workflows often include multiple steps, each of which should be independent.</span></span>

<span data-ttu-id="57c1c-148">Suivre la progression du processus à long terme pour réduire la probabilité que l’intégralité du workflow devront être restaurée ou que les transactions de compensation multiples doivent être exécutées.</span><span class="sxs-lookup"><span data-stu-id="57c1c-148">Track the progress of long-running processes to minimize the likelihood that the entire workflow will need to be rolled back or that multiple compensating transactions will need to be executed.</span></span>

>[!TIP]
> <span data-ttu-id="57c1c-149">Surveiller et gérer la progression des longs workflows en implémentant un modèle tel que [superviseur de l’Agent du planificateur](../patterns/scheduler-agent-supervisor.md).</span><span class="sxs-lookup"><span data-stu-id="57c1c-149">Monitor and manage the progress of long-running workflows by implementing a pattern such as [Scheduler Agent Supervisor](../patterns/scheduler-agent-supervisor.md).</span></span>

## <a name="application-logs"></a><span data-ttu-id="57c1c-150">Journaux d’activité d’application</span><span class="sxs-lookup"><span data-stu-id="57c1c-150">Application logs</span></span>

<span data-ttu-id="57c1c-151">Les journaux d’activité d’application sont une source importante de données de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="57c1c-151">Application logs are an important source of diagnostics data.</span></span> <span data-ttu-id="57c1c-152">Pour obtenir des informations lorsque vous en avez besoin la plupart, suivez les meilleures pratiques pour la journalisation de l’application.</span><span class="sxs-lookup"><span data-stu-id="57c1c-152">To gain insight when you need it most, follow best practices for application logging.</span></span>

### <a name="log-data-in-the-production-environment"></a><span data-ttu-id="57c1c-153">Données de journal dans l’environnement de production</span><span class="sxs-lookup"><span data-stu-id="57c1c-153">Log data in the production environment</span></span>

<span data-ttu-id="57c1c-154">Capturer des données de télémétrie fiables pendant que l’application est en cours d’exécution dans l’environnement de production, afin d’avoir suffisamment d’informations pour diagnostiquer la cause des problèmes de l’état de production.</span><span class="sxs-lookup"><span data-stu-id="57c1c-154">Capture robust telemetry data while the application is running in the production environment, so you have sufficient information to diagnose the cause of issues in the production state.</span></span>

### <a name="log-events-at-service-boundaries"></a><span data-ttu-id="57c1c-155">Journaux d’événements au niveau des limites de service</span><span class="sxs-lookup"><span data-stu-id="57c1c-155">Log events at service boundaries</span></span>

<span data-ttu-id="57c1c-156">Vous devez inclure un ID de corrélation qui franchit les limites de service.</span><span class="sxs-lookup"><span data-stu-id="57c1c-156">Include a correlation ID that flows across service boundaries.</span></span> <span data-ttu-id="57c1c-157">Si une transaction passe par plusieurs services et un d’eux échoue, la corrélation ID vous permet de suivre les demandes entre votre application et la mise en évidence la raison pour laquelle la transaction a échoué.</span><span class="sxs-lookup"><span data-stu-id="57c1c-157">If a transaction flows through multiple services and one of them fails, the correlation ID helps you track requests across your application and pinpoints why the transaction failed.</span></span>

### <a name="use-semantic-structured-logging"></a><span data-ttu-id="57c1c-158">Utilisez la journalisation sémantique (structurée)</span><span class="sxs-lookup"><span data-stu-id="57c1c-158">Use semantic (structured) logging</span></span>

<span data-ttu-id="57c1c-159">Avec les journaux structurées, il est plus facile automatiser la consommation et l’analyse des données du journal, ce qui est particulièrement importantes à l’échelle du cloud.</span><span class="sxs-lookup"><span data-stu-id="57c1c-159">With structured logs, it's easier to automate the consumption and analysis of the log data, which is especially important at cloud scale.</span></span> <span data-ttu-id="57c1c-160">En règle générale, nous vous recommandons de stocker des données de métriques et diagnostics de ressources Azure dans un espace de travail Analytique de journal plutôt que dans un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="57c1c-160">Generally, we recommend storing Azure resources metrics and diagnostics data in a Log Analytics workspace rather than in a storage account.</span></span> <span data-ttu-id="57c1c-161">De cette façon, vous pouvez utiliser des requêtes de Kusto pour obtenir les données que vous souhaitez rapidement et dans un format structuré.</span><span class="sxs-lookup"><span data-stu-id="57c1c-161">This way, you can use Kusto queries to obtain the data you want quickly and in a structured format.</span></span> <span data-ttu-id="57c1c-162">Vous pouvez également utiliser les API d’analyse Azure et Azure Log Analytique.</span><span class="sxs-lookup"><span data-stu-id="57c1c-162">You can also use Azure Monitor APIs and Azure Log Analytics APIs.</span></span>

### <a name="use-asynchronous-logging"></a><span data-ttu-id="57c1c-163">Utilisez la journalisation asynchrone</span><span class="sxs-lookup"><span data-stu-id="57c1c-163">Use asynchronous logging</span></span>

<span data-ttu-id="57c1c-164">Opérations de journalisation synchrone bloquent parfois votre code d’application, à l’origine des demandes de sauvegarder les journaux sont écrits.</span><span class="sxs-lookup"><span data-stu-id="57c1c-164">Synchronous logging operations sometimes block your application code, causing requests to back up as logs are written.</span></span> <span data-ttu-id="57c1c-165">Utilisez la journalisation asynchrone pour préserver la disponibilité au cours de la journalisation de l’application.</span><span class="sxs-lookup"><span data-stu-id="57c1c-165">Use asynchronous logging to preserve availability during application logging.</span></span>

### <a name="separate-application-logging-from-auditing"></a><span data-ttu-id="57c1c-166">Séparer la journalisation de l’application à partir de l’audit</span><span class="sxs-lookup"><span data-stu-id="57c1c-166">Separate application logging from auditing</span></span>

<span data-ttu-id="57c1c-167">Enregistrements d’audit sont couramment conservées de conformité ou les exigences réglementaires et doivent être terminées.</span><span class="sxs-lookup"><span data-stu-id="57c1c-167">Audit records are commonly maintained for compliance or regulatory requirements and must be complete.</span></span> <span data-ttu-id="57c1c-168">Pour éviter des transactions perdues, mettre à jour les journaux d’audit séparément à partir des journaux de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="57c1c-168">To avoid dropped transactions, maintain audit logs separately from diagnostic logs.</span></span>

## <a name="remote-call-statistics"></a><span data-ttu-id="57c1c-169">Statistiques d’appels distants</span><span class="sxs-lookup"><span data-stu-id="57c1c-169">Remote call statistics</span></span>

<span data-ttu-id="57c1c-170">Suivre et rapports à distance en temps réel, les statistiques d’appels et fournissent un moyen simple de consulter ces informations, par conséquent, l’équipe d’exploitation a une vue instantanée de l’intégrité de votre application.</span><span class="sxs-lookup"><span data-stu-id="57c1c-170">Track and report remote call statistics in real time and provide an easy way to review this information, so the operations team has an instantaneous view into the health of your application.</span></span> <span data-ttu-id="57c1c-171">Résumer les métriques d’appel distant, telles que la latence, débit et les erreurs dans les centiles 99 et 95.</span><span class="sxs-lookup"><span data-stu-id="57c1c-171">Summarize remote call metrics, such as latency, throughput, and errors in the 99 and 95 percentiles.</span></span>

## <a name="transient-exceptions-and-retries"></a><span data-ttu-id="57c1c-172">Nouvelles tentatives et les exceptions temporaires</span><span class="sxs-lookup"><span data-stu-id="57c1c-172">Transient exceptions and retries</span></span>

<span data-ttu-id="57c1c-173">Suivre le nombre d’exceptions temporaires et les nouvelles tentatives au fil du temps pour découvrir des problèmes ou des échecs dans la logique de nouvelle tentative de votre application.</span><span class="sxs-lookup"><span data-stu-id="57c1c-173">Track the number of transient exceptions and retries over time to uncover issues or failures in your application's retry logic.</span></span> <span data-ttu-id="57c1c-174">Une tendance à l’augmentation des exceptions au fil du temps peut indiquer que le service rencontre un problème et risque d’échouer.</span><span class="sxs-lookup"><span data-stu-id="57c1c-174">A trend of increasing exceptions over time may indicate that the service is having an issue and may fail.</span></span> <span data-ttu-id="57c1c-175">Pour plus d’informations, consultez [Guide spécifique relatif au service de nouvelle tentative](../best-practices/retry-service-specific.md).</span><span class="sxs-lookup"><span data-stu-id="57c1c-175">For more information, see [Retry service specific guidance](../best-practices/retry-service-specific.md).</span></span>

## <a name="early-warning-system"></a><span data-ttu-id="57c1c-176">Système d’avertissement anticipé</span><span class="sxs-lookup"><span data-stu-id="57c1c-176">Early warning system</span></span>

<span data-ttu-id="57c1c-177">Surveillez votre application pour trouver des signes précurseurs peut nécessiter une intervention proactive.</span><span class="sxs-lookup"><span data-stu-id="57c1c-177">Monitor your application for warning signs that might require proactive intervention.</span></span> <span data-ttu-id="57c1c-178">Outils qui évaluent l’intégrité globale de l’application et ses dépendances vous aident à reconnaître rapidement quand un système ou ses composants deviennent subitement inaccessibles.</span><span class="sxs-lookup"><span data-stu-id="57c1c-178">Tools that assess the overall health of the application and its dependencies help you to recognize quickly when a system or its components suddenly become unavailable.</span></span> <span data-ttu-id="57c1c-179">Utilisez-les pour implémenter un système d’avertissement anticipé.</span><span class="sxs-lookup"><span data-stu-id="57c1c-179">Use them to implement an early warning system.</span></span>

1. <span data-ttu-id="57c1c-180">Identifier les indicateurs de performance clés d’intégrité de votre application, telles que les exceptions temporaires et la latence de l’appel distant.</span><span class="sxs-lookup"><span data-stu-id="57c1c-180">Identify the key performance indicators of your application's health, such as transient exceptions and remote call latency.</span></span>
1. <span data-ttu-id="57c1c-181">Définir des seuils à niveaux qui identifient les problèmes avant qu’ils deviennent critiques et exigent une réponse de récupération.</span><span class="sxs-lookup"><span data-stu-id="57c1c-181">Set thresholds at levels that identify issues before they become critical and require a recovery response.</span></span>
1. <span data-ttu-id="57c1c-182">Envoyez une alerte à l’équipe chargée des opérations quand une valeur de seuil est atteinte.</span><span class="sxs-lookup"><span data-stu-id="57c1c-182">Send an alert to operations when the threshold value is reached.</span></span>

<span data-ttu-id="57c1c-183">Envisagez [Microsoft System Center 2016](https://www.microsoft.com/cloud-platform/system-center) ou des outils tiers pour fournir des fonctionnalités de surveillance.</span><span class="sxs-lookup"><span data-stu-id="57c1c-183">Consider [Microsoft System Center 2016](https://www.microsoft.com/cloud-platform/system-center) or third-party tools to provide monitoring capabilities.</span></span> <span data-ttu-id="57c1c-184">La plupart des solutions d’analyse suivent les principaux compteurs de performance et de disponibilité des services.</span><span class="sxs-lookup"><span data-stu-id="57c1c-184">Most monitoring solutions track key performance counters and service availability.</span></span> <span data-ttu-id="57c1c-185">[L’intégrité des ressources Azure](/azure/service-health/resource-health-checks-resource-types) fournit certains d’intégrité intégrés vérifications d’état, ce qui peuvent aider à diagnostiquer la limitation des services Azure.</span><span class="sxs-lookup"><span data-stu-id="57c1c-185">[Azure resource health](/azure/service-health/resource-health-checks-resource-types) provides some built-in health status checks, which can help diagnose throttling of Azure services.</span></span>

## <a name="subscription-and-service-limitations"></a><span data-ttu-id="57c1c-186">Limitations de service et d’abonnement</span><span class="sxs-lookup"><span data-stu-id="57c1c-186">Subscription and service limitations</span></span>

<span data-ttu-id="57c1c-187">Les abonnements Azure ont des limites sur certains types de ressources, comme le nombre de groupes de ressources, les noyaux et les comptes de stockage.</span><span class="sxs-lookup"><span data-stu-id="57c1c-187">Azure subscriptions have limits on certain resource types, such as number of resource groups, cores, and storage accounts.</span></span> <span data-ttu-id="57c1c-188">Pour vous assurer que votre application ne s’exécute pas sur les limites d’abonnement Azure, créer des alertes qui interrogent de services arrivent à leurs limites et les quotas.</span><span class="sxs-lookup"><span data-stu-id="57c1c-188">To ensure that your application doesn't run up against Azure subscription limits, create alerts that poll for services nearing their limits and quotas.</span></span>

<span data-ttu-id="57c1c-189">Résoudre les limites d’abonnement suivantes avec des alertes.</span><span class="sxs-lookup"><span data-stu-id="57c1c-189">Address the following subscription limits with alerts.</span></span>

### <a name="individual-services"></a><span data-ttu-id="57c1c-190">Services individuels</span><span class="sxs-lookup"><span data-stu-id="57c1c-190">Individual services</span></span>

<span data-ttu-id="57c1c-191">Les services Azure individuels ont des limites de consommation de stockage, le débit, nombre de connexions, les demandes par seconde et les autres mesures.</span><span class="sxs-lookup"><span data-stu-id="57c1c-191">Individual Azure services have consumption limits on storage, throughput, number of connections, requests per second, and other metrics.</span></span> <span data-ttu-id="57c1c-192">Votre application échoue si elle tente d’utiliser des ressources au-delà de ces limites, ce qui entraîne une interruption de limitation et possible du service.</span><span class="sxs-lookup"><span data-stu-id="57c1c-192">Your application will fail if it attempts to use resources beyond these limits, resulting in service throttling and possible downtime.</span></span>

<span data-ttu-id="57c1c-193">Selon le service spécifique et les exigences de votre application, vous pouvez souvent rester sous ces limites par montée en puissance (en choisissant un autre niveau tarifaire, par exemple) ou la montée en charge (ajout de nouvelles instances).</span><span class="sxs-lookup"><span data-stu-id="57c1c-193">Depending on the specific service and your application requirements, you can often stay under these limits by scaling up (choosing another pricing tier, for example) or scaling out (adding new instances).</span></span>

### <a name="azure-storage-scalability-and-performance-targets"></a><span data-ttu-id="57c1c-194">Objectifs d’évolutivité et les performances de stockage Azure</span><span class="sxs-lookup"><span data-stu-id="57c1c-194">Azure storage scalability and performance targets</span></span>

<span data-ttu-id="57c1c-195">Azure autorise un nombre maximal de comptes de stockage par abonnement.</span><span class="sxs-lookup"><span data-stu-id="57c1c-195">Azure allows a maximum number of storage accounts per subscription.</span></span> <span data-ttu-id="57c1c-196">Si votre application nécessite plus de comptes de stockage actuellement disponibles dans votre abonnement, créez un nouvel abonnement avec les comptes de stockage supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="57c1c-196">If your application requires more storage accounts than are currently available in your subscription, create a new subscription with additional storage accounts.</span></span> <span data-ttu-id="57c1c-197">Pour plus d’informations, consultez [Abonnement Azure et limites, quotas et contraintes de service](/azure/azure-subscription-service-limits/#storage-limits).</span><span class="sxs-lookup"><span data-stu-id="57c1c-197">For more information, see [Azure subscription and service limits, quotas, and constraints](/azure/azure-subscription-service-limits/#storage-limits).</span></span>

<span data-ttu-id="57c1c-198">Si vous dépassez les objectifs d’évolutivité et les performances de stockage Azure, votre application subira de limitation du stockage.</span><span class="sxs-lookup"><span data-stu-id="57c1c-198">If you exceed Azure storage scalability and performance targets, your application will experience storage throttling.</span></span> <span data-ttu-id="57c1c-199">Pour plus d’informations, consultez [Objectifs d’extensibilité et de performances de stockage Azure](/azure/storage/storage-scalability-targets/).</span><span class="sxs-lookup"><span data-stu-id="57c1c-199">For more information, see [Azure Storage scalability and performance targets](/azure/storage/storage-scalability-targets/).</span></span>

### <a name="scalability-targets-for-virtual-machine-disks"></a><span data-ttu-id="57c1c-200">Objectifs d'évolutivité pour les disques de machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="57c1c-200">Scalability targets for virtual machine disks</span></span>

<span data-ttu-id="57c1c-201">Une infrastructure en tant que service (IaaS) de machine virtuelle Azure prend en charge l’attachement d’un nombre de disques de données, en fonction de plusieurs facteurs, notamment la taille de machine virtuelle et le type de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="57c1c-201">An Azure infrastructure as a service (IaaS) VM supports attaching a number of data disks, depending on several factors, including the VM size and the type of storage account.</span></span> <span data-ttu-id="57c1c-202">Si votre application dépasse les objectifs d’extensibilité pour les disques de machine virtuelle, approvisionnez des comptes de stockage supplémentaires et créez-y les disques de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="57c1c-202">If your application exceeds the scalability targets for virtual machine disks, provision additional storage accounts and create the virtual machine disks there.</span></span> <span data-ttu-id="57c1c-203">Pour plus d’informations, consultez [Objectifs d’extensibilité et de performances de stockage Azure](/azure/storage/storage-scalability-targets/#scalability-targets-for-virtual-machine-disks).</span><span class="sxs-lookup"><span data-stu-id="57c1c-203">For more information, see [Azure Storage scalability and performance targets](/azure/storage/storage-scalability-targets/#scalability-targets-for-virtual-machine-disks).</span></span>

### <a name="vm-size"></a><span data-ttu-id="57c1c-204">Taille de la machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="57c1c-204">VM size</span></span>

<span data-ttu-id="57c1c-205">Si le processeur, mémoire, disque et e/s de vos machines virtuelles réel approchent des limites de la taille de machine virtuelle, votre application peut rencontrer des problèmes de capacité.</span><span class="sxs-lookup"><span data-stu-id="57c1c-205">If the actual CPU, memory, disk, and I/O of your VMs approach the limits of the VM size, your application may experience capacity issues.</span></span> <span data-ttu-id="57c1c-206">Pour corriger les problèmes, augmentez la taille de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="57c1c-206">To correct the issues, increase the VM size.</span></span> <span data-ttu-id="57c1c-207">Tailles de machine virtuelle sont décrits dans [tailles des machines virtuelles dans Azure](/azure/virtual-machines/virtual-machines-windows-sizes/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="57c1c-207">VM sizes are described in [Sizes for virtual machines in Azure](/azure/virtual-machines/virtual-machines-windows-sizes/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="57c1c-208">Si votre charge de travail fluctue au fil du temps, envisagez l’utilisation de l’échelle de machine virtuelle définit automatiquement à l’échelle le nombre d’instances de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="57c1c-208">If your workload fluctuates over time, consider using virtual machine scale sets to automatically scale the number of VM instances.</span></span> <span data-ttu-id="57c1c-209">Sinon, vous devez augmenter ou diminuer le nombre de machines virtuelles manuellement.</span><span class="sxs-lookup"><span data-stu-id="57c1c-209">Otherwise, you need to manually increase or decrease the number of VMs.</span></span> <span data-ttu-id="57c1c-210">Pour plus d’informations, consultez le [vue d’ensemble de machines virtuelles identiques](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span><span class="sxs-lookup"><span data-stu-id="57c1c-210">For more information, see the [virtual machine scale sets overview](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span></span>

### <a name="azure-sql-database"></a><span data-ttu-id="57c1c-211">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="57c1c-211">Azure SQL Database</span></span>

<span data-ttu-id="57c1c-212">Si votre niveau de base de données SQL Azure n’est pas suffisante pour gérer les exigences d’unité de Transaction de base de données (DTU) de votre application, votre utilisation de données est limitée.</span><span class="sxs-lookup"><span data-stu-id="57c1c-212">If your Azure SQL Database tier isn't adequate to handle your application's Database Transaction Unit (DTU) requirements, your data use will be throttled.</span></span> <span data-ttu-id="57c1c-213">Pour plus d’informations sur la sélection du plan de service approprié, consultez [modèles d’achat Azure SQL Database](/azure/sql-database/sql-database-service-tiers/).</span><span class="sxs-lookup"><span data-stu-id="57c1c-213">For more information on selecting the correct service plan, see [Azure SQL Database purchasing models](/azure/sql-database/sql-database-service-tiers/).</span></span>

## <a name="third-party-services"></a><span data-ttu-id="57c1c-214">Services tiers</span><span class="sxs-lookup"><span data-stu-id="57c1c-214">Third-party services</span></span>

<span data-ttu-id="57c1c-215">Si votre application a des dépendances sur les services tiers, identifiez comment ces services peuvent échouer et ce que les échecs effet aura sur votre application.</span><span class="sxs-lookup"><span data-stu-id="57c1c-215">If your application has dependencies on third-party services, identify how these services can fail and what effect failures will have on your application.</span></span>

<span data-ttu-id="57c1c-216">Un service tiers n’inclure pas de surveillance et diagnostic.</span><span class="sxs-lookup"><span data-stu-id="57c1c-216">A third-party service might not include monitoring and diagnostics.</span></span> <span data-ttu-id="57c1c-217">Consigner les appels à ces services et les mettre en corrélation avec l’intégrité et la journalisation des diagnostics à l’aide d’un identificateur unique de votre application.</span><span class="sxs-lookup"><span data-stu-id="57c1c-217">Log calls to these services and correlate them with your application's health and diagnostic logging using a unique identifier.</span></span> <span data-ttu-id="57c1c-218">Pour plus d’informations sur des pratiques éprouvées pour la surveillance et diagnostics, consultez [Guide de surveillance et diagnostics](../best-practices/monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="57c1c-218">For more information on proven practices for monitoring and diagnostics, see [Monitoring and diagnostics guidance](../best-practices/monitoring.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="57c1c-219">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="57c1c-219">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="57c1c-220">Plan de récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="57c1c-220">Plan for disaster recovery</span></span>](./disaster-recovery.md)
