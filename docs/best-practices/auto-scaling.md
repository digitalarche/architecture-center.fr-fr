---
title: Recommandations en matière de mise à l’échelle automatique
titleSuffix: Best practices for cloud applications
description: Recommandations sur le processus de mise à l’échelle automatique nécessaire pour l’allocation dynamique des ressources requises par une application.
author: dragon119
ms.date: 05/17/2017
ms.topic: best-practice
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: 8b1d614460b8c0bd9655d7b75cd971767e34ee3f
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/20/2019
ms.locfileid: "58243430"
---
# <a name="autoscaling"></a><span data-ttu-id="c7ea9-103">Mise à l’échelle automatique</span><span class="sxs-lookup"><span data-stu-id="c7ea9-103">Autoscaling</span></span>

<span data-ttu-id="c7ea9-104">La mise à l’échelle automatique désigne le processus d’allocation dynamique de ressources destiné à répondre aux besoins en matière de performances.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-104">Autoscaling is the process of dynamically allocating resources to match performance requirements.</span></span> <span data-ttu-id="c7ea9-105">À mesure que le volume de travail augmente, une application peut nécessiter des ressources supplémentaires afin de garantir les niveaux de performances souhaités et de respecter les contrats de niveau de service (SLA).</span><span class="sxs-lookup"><span data-stu-id="c7ea9-105">As the volume of work grows, an application may need additional resources to maintain the desired performance levels and satisfy service-level agreements (SLAs).</span></span> <span data-ttu-id="c7ea9-106">Lorsque la demande diminue et que les ressources supplémentaires ne sont plus requises, il est possible de libérer ces dernières pour minimiser les coûts.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-106">As demand slackens and the additional resources are no longer needed, they can be de-allocated to minimize costs.</span></span>

<span data-ttu-id="c7ea9-107">La mise à l’échelle automatique tire parti de l’élasticité des environnements hébergés dans le cloud tout en allégeant les contraintes de gestion.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-107">Autoscaling takes advantage of the elasticity of cloud-hosted environments while easing management overhead.</span></span> <span data-ttu-id="c7ea9-108">Elle réduit la nécessité de recourir à un opérateur dédié à la surveillance continue des performances d’un système, ainsi qu’à l’ajout et au retrait des ressources.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-108">It reduces the need for an operator to continually monitor the performance of a system and make decisions about adding or removing resources.</span></span>

<span data-ttu-id="c7ea9-109">La mise à l’échelle d’une application peut s’effectuer de deux manières :</span><span class="sxs-lookup"><span data-stu-id="c7ea9-109">There are two main ways that an application can scale:</span></span>

- <span data-ttu-id="c7ea9-110">La **mise à l’échelle verticale**, également appelée montée ou descente en puissance, consiste à modifier la capacité d’une ressource.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-110">**Vertical scaling**, also called scaling up and down, means changing the capacity of a resource.</span></span> <span data-ttu-id="c7ea9-111">Par exemple, vous pouvez déplacer une application vers une machine virtuelle de taille supérieure.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-111">For example, you could move an application to a larger VM size.</span></span> <span data-ttu-id="c7ea9-112">La mise à l’échelle verticale implique fréquemment l’inaccessibilité momentanée du système lors de son redéploiement.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-112">Vertical scaling often requires making the system temporarily unavailable while it is being redeployed.</span></span> <span data-ttu-id="c7ea9-113">Il est donc plus inhabituel d’automatiser la mise à l’échelle verticale.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-113">Therefore, it's less common to automate vertical scaling.</span></span>

- <span data-ttu-id="c7ea9-114">La **mise à l’échelle horizontale**, également appelée augmentation ou diminution de la taille des instances, consiste à ajouter ou supprimer des instances d’une ressource.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-114">**Horizontal scaling**, also called scaling out and in, means adding or removing instances of a resource.</span></span> <span data-ttu-id="c7ea9-115">Pendant que de nouvelles ressources sont approvisionnées, l’application continue à s’exécuter sans interruption.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-115">The application continues running without interruption as new resources are provisioned.</span></span> <span data-ttu-id="c7ea9-116">Une fois le processus d’approvisionnement terminé, la solution est déployée sur ces ressources supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-116">When the provisioning process is complete, the solution is deployed on these additional resources.</span></span> <span data-ttu-id="c7ea9-117">Si la demande diminue, les ressources supplémentaires peuvent être correctement arrêtées et libérées.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-117">If demand drops, the additional resources can be shut down cleanly and deallocated.</span></span>

<span data-ttu-id="c7ea9-118">De nombreux systèmes basés sur le cloud, notamment Microsoft Azure, prennent en charge la mise à l’échelle horizontale automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-118">Many cloud-based systems, including Microsoft Azure, support automatic horizontal scaling.</span></span> <span data-ttu-id="c7ea9-119">Le reste de cet article se concentre sur la mise à l’échelle horizontale.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-119">The rest of this article focuses on horizontal scaling.</span></span>

> [!NOTE]
> <span data-ttu-id="c7ea9-120">La mise à l’échelle automatique s’applique principalement aux ressources de calcul.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-120">Autoscaling mostly applies to compute resources.</span></span> <span data-ttu-id="c7ea9-121">Bien qu’il soit possible de procéder à la mise à l’échelle horizontale d’une base de données ou d’une file d’attente de messages, cette opération implique habituellement un [partitionnement des données](./data-partitioning.md), lequel n’est généralement pas automatisé.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-121">While it's possible to horizontally scale a database or message queue, this usually involves [data partitioning](./data-partitioning.md), which is generally not automated.</span></span>

## <a name="overview"></a><span data-ttu-id="c7ea9-122">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="c7ea9-122">Overview</span></span>

<span data-ttu-id="c7ea9-123">Une stratégie de mise à l’échelle automatique implique les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="c7ea9-123">An autoscaling strategy typically involves the following pieces:</span></span>

- <span data-ttu-id="c7ea9-124">Systèmes de surveillance et d’instrumentation au niveau de l’application, des services et de l’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-124">Instrumentation and monitoring systems at the application, service, and infrastructure levels.</span></span> <span data-ttu-id="c7ea9-125">Ces systèmes capturent des mesures clés, telles que le temps de réponse, les longueurs des files d’attente, l’utilisation du processeur et l’utilisation de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-125">These systems capture key metrics, such as response times, queue lengths, CPU utilization, and memory usage.</span></span>
- <span data-ttu-id="c7ea9-126">Logique de prise de décision qui évalue ces métriques par rapport aux planifications ou aux seuils prédéfinis et détermine si une mise à l’échelle est ou non nécessaire.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-126">Decision-making logic that evaluates these metrics against predefined thresholds or schedules, and decides whether to scale.</span></span>
- <span data-ttu-id="c7ea9-127">Composants procédant à la mise à l’échelle du système.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-127">Components that scale the system.</span></span>
- <span data-ttu-id="c7ea9-128">le test, la surveillance et le réglage de la stratégie de mise à l’échelle automatique, afin de garantir son bon fonctionnement.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-128">Testing, monitoring, and tuning of the autoscaling strategy to ensure that it functions as expected.</span></span>

<span data-ttu-id="c7ea9-129">Azure intègre des mécanismes de mise à l’échelle automatique qui sont adaptés aux scénarios courants.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-129">Azure provides built-in autoscaling mechanisms that address common scenarios.</span></span> <span data-ttu-id="c7ea9-130">Si un service ou une technologie spécifiques n’intègrent pas de fonctionnalités de mise à l’échelle automatique, ou que certaines de vos exigences de mise à l’échelle dépassent leurs capacités, vous pouvez envisager une implémentation personnalisée.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-130">If a particular service or technology does not have built-in autoscaling functionality, or if you have specific autoscaling requirements beyond its capabilities, you might consider a custom implementation.</span></span> <span data-ttu-id="c7ea9-131">Une implémentation personnalisée peut collecter des métriques opérationnelles et système, analyser ces métriques, puis mettre à l’échelle les ressources en conséquence.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-131">A custom implementation would collect operational and system metrics, analyze the metrics, and then scale resources accordingly.</span></span>

## <a name="configure-autoscaling-for-an-azure-solution"></a><span data-ttu-id="c7ea9-132">Configurer la mise à l’échelle automatique pour une solution Azure</span><span class="sxs-lookup"><span data-stu-id="c7ea9-132">Configure autoscaling for an Azure solution</span></span>

<span data-ttu-id="c7ea9-133">Azure intègre une mise à l’échelle automatique pour la plupart des options de calcul.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-133">Azure provides built-in autoscaling for most compute options.</span></span>

- <span data-ttu-id="c7ea9-134">L’offre **Machines virtuelles** prend en charge la mise à l’échelle automatique par l’intermédiaire de la ressource [VM Scale Sets][vm-scale-sets], qui permet de gérer un ensemble de machines virtuelles Azure en tant que groupe.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-134">**Virtual Machines** support autoscaling through the use of [VM Scale Sets][vm-scale-sets], which are a way to manage a set of Azure virtual machines as a group.</span></span> <span data-ttu-id="c7ea9-135">Consultez l’article [Mise à l’échelle automatique et groupes identiques de machines virtuelles][vm-scale-sets-autoscale].</span><span class="sxs-lookup"><span data-stu-id="c7ea9-135">See [How to use automatic scaling and Virtual Machine Scale Sets][vm-scale-sets-autoscale].</span></span>

- <span data-ttu-id="c7ea9-136">La plateforme **Service Fabric** prend également en charge la mise à l’échelle automatique par l’intermédiaire de VM Scale Sets.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-136">**Service Fabric** also supports auto-scaling through VM Scale Sets.</span></span> <span data-ttu-id="c7ea9-137">Chaque type de nœud d’un cluster Service Fabric est configuré sous la forme d’un groupe de machines virtuelles identiques.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-137">Every node type in a Service Fabric cluster is set up as a separate VM scale set.</span></span> <span data-ttu-id="c7ea9-138">Ceci permet de diminuer ou d’augmenter la taille des instances de chaque type de nœud indépendamment.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-138">That way, each node type can be scaled in or out independently.</span></span> <span data-ttu-id="c7ea9-139">Consultez l’article [Augmenter ou diminuer la taille des instances d’un cluster Service Fabric à l’aide de règles de mise à l’échelle automatique][service-fabric-autoscale].</span><span class="sxs-lookup"><span data-stu-id="c7ea9-139">See [Scale a Service Fabric cluster in or out using auto-scale rules][service-fabric-autoscale].</span></span>

- <span data-ttu-id="c7ea9-140">L’offre **Azure App Service** intègre une mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-140">**Azure App Service** has built-in autoscaling.</span></span> <span data-ttu-id="c7ea9-141">Les paramètres de mise à l’échelle automatique s’appliquent à toutes les applications d’un service App Service.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-141">Autoscale settings apply to all of the apps within an App Service.</span></span> <span data-ttu-id="c7ea9-142">Consultez l’article [Mise à l’échelle manuelle ou automatique du nombre d’instances][app-service-autoscale].</span><span class="sxs-lookup"><span data-stu-id="c7ea9-142">See [Scale instance count manually or automatically][app-service-autoscale].</span></span>

- <span data-ttu-id="c7ea9-143">L’offre **Azure Cloud Services** intègre une mise à l’échelle automatique au niveau du rôle.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-143">**Azure Cloud Services** has built-in autoscaling at the role level.</span></span> <span data-ttu-id="c7ea9-144">Consultez l’article [Configuration de la mise à l’échelle automatique d’un service cloud dans le portail][cloud-services-autoscale].</span><span class="sxs-lookup"><span data-stu-id="c7ea9-144">See [How to configure auto scaling for a Cloud Service in the portal][cloud-services-autoscale].</span></span>

<span data-ttu-id="c7ea9-145">Ces options de calcul utilisent toutes la [mise à l’échelle automatique Azure Monitor][monitoring] afin de fournir un ensemble commun de fonctionnalités de mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-145">These compute options all use [Azure Monitor autoscale][monitoring] to provide a common set of autoscaling functionality.</span></span>

- <span data-ttu-id="c7ea9-146">La solution **Azure Functions** diffère des options de calcul précédentes, car elle ne nécessite pas la configuration de règles de mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-146">**Azure Functions** differs from the previous compute options, because you don't need to configure any autoscale rules.</span></span> <span data-ttu-id="c7ea9-147">À la place, Azure Functions alloue automatiquement une puissance de calcul lorsque votre code s’exécute, et augmente la taille des instances selon les besoins pour gérer la charge.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-147">Instead, Azure Functions automatically allocates compute power when your code is running, scaling out as necessary to handle load.</span></span> <span data-ttu-id="c7ea9-148">Pour plus d’informations, consultez l’article [Choisir le plan d’hébergement approprié pour Azure Functions][functions-scale].</span><span class="sxs-lookup"><span data-stu-id="c7ea9-148">For more information, see [Choose the correct hosting plan for Azure Functions][functions-scale].</span></span>

<span data-ttu-id="c7ea9-149">Enfin, une solution de mise à l’échelle automatique personnalisée peut parfois se révéler utile.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-149">Finally, a custom autoscaling solution can sometimes be useful.</span></span> <span data-ttu-id="c7ea9-150">Par exemple, vous pouvez utiliser les diagnostics et les métriques Azure basées sur l’application, ainsi qu’un code personnalisé pour surveiller et exporter les métriques d’application.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-150">For example, you could use Azure diagnostics and application-based metrics, along with custom code to monitor and export the application metrics.</span></span> <span data-ttu-id="c7ea9-151">Vous pouvez ensuite définir des règles personnalisées reposant sur ces métriques, et utiliser les API REST Resource Manager pour déclencher la mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-151">Then you could define custom rules based on these metrics, and use Resource Manager REST APIs to trigger autoscaling.</span></span> <span data-ttu-id="c7ea9-152">Toutefois, une solution personnalisée n’est pas simple à implémenter et doit être envisagée uniquement si aucune des approches précédentes ne peut répondre à vos exigences.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-152">However, a custom solution is not simple to implement, and should be considered only if none of the previous approaches can fulfill your requirements.</span></span>

<span data-ttu-id="c7ea9-153">Utilisez les fonctionnalités de mise à l’échelle automatique intégrées de la plateforme, si elles répondent à vos exigences.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-153">Use the built-in autoscaling features of the platform, if they meet your requirements.</span></span> <span data-ttu-id="c7ea9-154">Sinon, étudiez soigneusement l’opportunité de recourir à des fonctionnalités de mise à l’échelle plus complexes.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-154">If not, carefully consider whether you really need more complex scaling features.</span></span> <span data-ttu-id="c7ea9-155">Une granularité de contrôle supérieure, différents moyens de détection des événements déclencheurs de la mise à l’échelle automatique, la mise à l’échelle entre les abonnements et la mise à l’échelle d’autres types de ressources constituent quelques exemples d’exigences supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-155">Examples of additional requirements may include more granularity of control, different ways to detect trigger events for scaling, scaling across subscriptions, and scaling other types of resources.</span></span>

## <a name="use-azure-monitor-autoscale"></a><span data-ttu-id="c7ea9-156">Utiliser la mise à l’échelle Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="c7ea9-156">Use Azure Monitor autoscale</span></span>

<span data-ttu-id="c7ea9-157">La [mise à l’échelle Azure Monitor][monitoring] offre un ensemble commun de fonctionnalités de mise à l’échelle automatique pour VM Scale Sets, Azure App Service et Azure Cloud Service.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-157">[Azure Monitor autoscale][monitoring] provide a common set of autoscaling functionality for VM Scale Sets, Azure App Service, and Azure Cloud Service.</span></span> <span data-ttu-id="c7ea9-158">La mise à l’échelle peut être planifiée ou basée sur une métrique collectée au moment de l’exécution, telle que l’utilisation de l’UC ou de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-158">Scaling can be performed on a schedule, or based on a runtime metric, such as CPU or memory usage.</span></span> <span data-ttu-id="c7ea9-159">Exemples :</span><span class="sxs-lookup"><span data-stu-id="c7ea9-159">Examples:</span></span>

- <span data-ttu-id="c7ea9-160">Élevez le nombre d’instances à 10 pendant les jours ouvrables, et abaissez ce nombre à 4 pour les samedis et dimanches.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-160">Scale out to 10 instances on weekdays, and scale in to 4 instances on Saturday and Sunday.</span></span>
- <span data-ttu-id="c7ea9-161">Ajoutez une instance supplémentaire si l’utilisation moyenne de l’UC dépasse 70 %, et retirez une instance si l’utilisation de l’UC tombe en deçà de 50 %.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-161">Scale out by one instance if average CPU usage is above 70%, and scale in by one instance if CPU usage falls below 50%.</span></span>
- <span data-ttu-id="c7ea9-162">Ajoutez une instance si le nombre de messages d’une file d’attente excède un certain seuil.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-162">Scale out by one instance if the number of messages in a queue exceeds a certain threshold.</span></span>

<span data-ttu-id="c7ea9-163">Pour obtenir la liste des métriques intégrées, consultez l’article [Métriques courantes pour la mise à l’échelle automatique d’Azure Monitor][autoscale-metrics].</span><span class="sxs-lookup"><span data-stu-id="c7ea9-163">For a list of built-in metrics, see [Azure Monitor autoscaling common metrics][autoscale-metrics].</span></span> <span data-ttu-id="c7ea9-164">Vous pouvez également implémenter des métriques personnalisées à l’aide d’Application Insights.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-164">You can also implement custom metrics by using Application Insights.</span></span>

<span data-ttu-id="c7ea9-165">Vous pouvez configurer la mise à l’échelle automatique à l’aide de PowerShell, de l’interface de ligne de commande Azure, d’un modèle Azure Resource Manager ou du portail Azure.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-165">You can configure autoscaling by using PowerShell, the Azure CLI, an Azure Resource Manager template, or the Azure portal.</span></span> <span data-ttu-id="c7ea9-166">Pour bénéficier d’un contrôle plus précis, utilisez [l’API REST Azure Resource Manager](https://msdn.microsoft.com//library/azure/dn790568.aspx).</span><span class="sxs-lookup"><span data-stu-id="c7ea9-166">For more detailed control, use the [Azure Resource Manager REST API](https://msdn.microsoft.com//library/azure/dn790568.aspx).</span></span> <span data-ttu-id="c7ea9-167">Les bibliothèques [Azure Monitoring Service Management Library](https://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring) et [Microsoft Insights Library](https://www.nuget.org/packages/Microsoft.Azure.Insights/) (en version préliminaire) sont des Kits de développement logiciel qui permettent de recueillir des mesures à partir de différentes ressources et d’effectuer une mise à l’échelle automatique avec les API REST.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-167">The [Azure Monitoring Service Management Library](https://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring) and the [Microsoft Insights Library](https://www.nuget.org/packages/Microsoft.Azure.Insights/) (in preview) are SDKs that allow collecting metrics from different resources, and perform autoscaling by making use of the REST APIs.</span></span> <span data-ttu-id="c7ea9-168">Pour les ressources où la prise en charge d’Azure Resource Manager n’est pas disponible, ou si vous utilisez Azure Cloud Services, vous pouvez utiliser l’API REST Azure Service Management pour la mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-168">For resources where Azure Resource Manager support isn't available, or if you are using Azure Cloud Services, the Service Management REST API can be used for autoscaling.</span></span> <span data-ttu-id="c7ea9-169">Dans tous les autres cas, utilisez Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-169">In all other cases, use Azure Resource Manager.</span></span>

<span data-ttu-id="c7ea9-170">Lorsque vous utilisez la mise à l’échelle automatique Azure, tenez compte des points suivants :</span><span class="sxs-lookup"><span data-stu-id="c7ea9-170">Consider the following points when using Azure autoscale:</span></span>

- <span data-ttu-id="c7ea9-171">Évaluez si vous pouvez anticiper la charge sur l’application de façon suffisamment précise pour utiliser la mise à l’échelle automatique planifiée en ajoutant et retirant des instances afin de répondre aux pics de demande anticipés.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-171">Consider whether you can predict the load on the application well enough to use scheduled autoscaling, adding and removing instances to meet anticipated peaks in demand.</span></span> <span data-ttu-id="c7ea9-172">Si ce n’est pas possible, utilisez la mise à l’échelle automatique réactive basée sur les métriques collectées au moment de l’exécution afin de gérer les changements de demande imprévus.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-172">If this isn't possible, use reactive autoscaling based on runtime metrics, in order to handle unpredictable changes in demand.</span></span> <span data-ttu-id="c7ea9-173">En règle générale, vous pouvez combiner ces approches.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-173">Typically, you can combine these approaches.</span></span> <span data-ttu-id="c7ea9-174">Par exemple, élaborez une stratégie qui ajoute des ressources en fonction d’un calendrier répertoriant les périodes de pic d’activité de l’application.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-174">For example, create a strategy that adds resources based on a schedule of the times when you know the application is most busy.</span></span> <span data-ttu-id="c7ea9-175">Cela permet de garantir la disponibilité de la capacité au moment voulu, sans le délai associé au démarrage des nouvelles instances.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-175">This helps to ensure that capacity is available when required, without any delay from starting new instances.</span></span> <span data-ttu-id="c7ea9-176">Pour chaque règle planifiée, définissez des métriques qui prennent en charge la mise à l’échelle automatique réactive durant cette période afin de garantir que l’application peut gérer les pics de demande soutenus mais imprévus.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-176">For each scheduled rule, define metrics that allow reactive autoscaling during that period to ensure that the application can handle sustained but unpredictable peaks in demand.</span></span>

- <span data-ttu-id="c7ea9-177">Il est souvent difficile d’appréhender la relation entre les mesures et les exigences de capacité, en particulier lors du déploiement initial d’une application.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-177">It's often difficult to understand the relationship between metrics and capacity requirements, especially when an application is initially deployed.</span></span> <span data-ttu-id="c7ea9-178">Approvisionnez dès le début une capacité légèrement supplémentaire, puis surveillez et adaptez les règles de mise à l’échelle automatique afin de faire correspondre la capacité avec la charge réelle.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-178">Provision a little extra capacity at the beginning, and then monitor and tune the autoscaling rules to bring the capacity closer to the actual load.</span></span>

- <span data-ttu-id="c7ea9-179">Configurez les règles de mise à l’échelle automatique, puis surveillez les performances de votre application au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-179">Configure the autoscaling rules, and then monitor the performance of your application over time.</span></span> <span data-ttu-id="c7ea9-180">Utilisez les résultats de cette surveillance pour définir le mode de mise à l’échelle du système, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-180">Use the results of this monitoring to adjust the way in which the system scales if necessary.</span></span> <span data-ttu-id="c7ea9-181">Toutefois, gardez à l’esprit que la mise à l’échelle n’est pas un processus instantané.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-181">However, keep in mind that autoscaling is not an instantaneous process.</span></span> <span data-ttu-id="c7ea9-182">La réaction à une mesure telle que le dépassement du seuil d’utilisation moyenne du processeur prend du temps.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-182">It takes time to react to a metric such as average CPU utilization exceeding (or falling below) a specified threshold.</span></span>

- <span data-ttu-id="c7ea9-183">Les règles de mise à l’échelle automatique qui utilisent un mécanisme de détection basé sur un attribut de déclenchement mesuré (par exemple utilisation du processeur ou longueur de file d’attente) utilisent une valeur agrégée au fil du temps, et non des valeurs instantanées, pour déclencher une action de mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-183">Autoscaling rules that use a detection mechanism based on a measured trigger attribute (such as CPU usage or queue length) use an aggregated value over time, rather than instantaneous values, to trigger an autoscaling action.</span></span> <span data-ttu-id="c7ea9-184">Par défaut, cette valeur agrégée correspond à une moyenne de valeurs.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-184">By default, the aggregate is an average of the values.</span></span> <span data-ttu-id="c7ea9-185">Cette configuration empêche toute réaction prématurée du système, et prévient toute oscillation rapide.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-185">This prevents the system from reacting too quickly, or causing rapid oscillation.</span></span> <span data-ttu-id="c7ea9-186">Elle laisse également le temps aux nouvelles instances démarrées automatiquement d’adopter le mode d’exécution, empêchant l’application des actions supplémentaires de mise à l’échelle automatique durant le démarrage des nouvelles instances.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-186">It also allows time for new instances that are auto-started to settle into running mode, preventing additional autoscaling actions from occurring while the new instances are starting up.</span></span> <span data-ttu-id="c7ea9-187">Pour Azure Cloud Services et Azure Virtual Machines, la période par défaut associée à l’agrégation est de 45 minutes. Dès lors, il vous faudra éventuellement attendre ce délai pour constater le déclenchement, par la mesure, de la mise à l’échelle automatique en réponse aux pics de demande.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-187">For Azure Cloud Services and Azure Virtual Machines, the default period for the aggregation is 45 minutes, so it can take up to this period of time for the metric to trigger autoscaling in response to spikes in demand.</span></span> <span data-ttu-id="c7ea9-188">Vous pouvez modifier la période d’agrégation à l’aide du kit SDK, mais sachez que les périodes de moins de 25 minutes peuvent donner des résultats imprévisibles.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-188">You can change the aggregation period by using the SDK, but be aware that periods of fewer than 25 minutes may cause unpredictable results.</span></span> <span data-ttu-id="c7ea9-189">Pour Web Apps, la période moyenne est beaucoup plus courte. Les nouvelles instances sont disponibles environ cinq minutes après une modification de la mesure de déclenchement.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-189">For Web Apps, the averaging period is much shorter, allowing new instances to be available in about five minutes after a change to the average trigger measure.</span></span>

- <span data-ttu-id="c7ea9-190">Si vous configurez la mise à l’échelle automatique à l’aide du Kit de développement logiciel (SDK) plutôt que par l’intermédiaire du portail, vous pouvez spécifier une planification plus détaillée de la période d’activité des règles.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-190">If you configure autoscaling using the SDK rather than the portal, you can specify a more detailed schedule during which the rules are active.</span></span> <span data-ttu-id="c7ea9-191">Vous pouvez également créer vos propres mesures et les utiliser avec ou sans les éléments existants dans vos règles de mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-191">You can also create your own metrics and use them with or without any of the existing ones in your autoscaling rules.</span></span> <span data-ttu-id="c7ea9-192">Par exemple, vous pouvez opter pour l’utilisation de compteurs alternatifs, comme le nombre de requêtes par seconde ou la disponibilité moyenne de la mémoire, ou de compteurs personnalisés dédiés à des processus d’entreprise spécifiques.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-192">For example, you may wish to use alternative counters, such as the number of requests per second or the average memory availability, or use custom counters that measure specific business processes.</span></span>

- <span data-ttu-id="c7ea9-193">Lors de la mise à l’échelle automatique de Service Fabric, les types de nœuds de votre cluster sont constitués de groupes de machines virtuelles identiques sur le serveur principal ; vous devez donc configurer des règles de mise à l’échelle automatique pour chaque type de nœud.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-193">When autoscaling Service Fabric, the node types in your cluster are made of VM scale sets at the backend, so you need to set up auto-scale rules for each node type.</span></span> <span data-ttu-id="c7ea9-194">Tenez compte du nombre de nœuds dont vous devez disposer avant de configurer la mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-194">Take into account the number of nodes that you must have before you set up auto-scaling.</span></span> <span data-ttu-id="c7ea9-195">Le nombre de nœuds minimal dont vous devez disposer pour le type de nœud principal est déterminé par le niveau de fiabilité que vous avez choisi.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-195">The minimum number of nodes that you must have for the primary node type is driven by the reliability level you have chosen.</span></span> <span data-ttu-id="c7ea9-196">Pour plus d’informations, consultez l’article [Augmenter ou diminuer la taille des instances d’un cluster Service Fabric à l’aide de règles de mise à l’échelle automatique](/azure/service-fabric/service-fabric-cluster-scale-up-down).</span><span class="sxs-lookup"><span data-stu-id="c7ea9-196">For more info, see [scale a Service Fabric cluster in or out using auto-scale rules](/azure/service-fabric/service-fabric-cluster-scale-up-down).</span></span>

- <span data-ttu-id="c7ea9-197">Vous pouvez utiliser le portail pour lier des ressources telles que des files d’attente et des instances SQL Database à une instance de service cloud.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-197">You can use the portal to link resources such as SQL Database instances and queues to a Cloud Service instance.</span></span> <span data-ttu-id="c7ea9-198">Cela vous permet d’accéder plus facilement aux options de configuration de mise à l’échelle automatiques et manuelles de chacune des ressources liées.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-198">This allows you to more easily access the separate manual and automatic scaling configuration options for each of the linked resources.</span></span> <span data-ttu-id="c7ea9-199">Pour plus d’informations, consultez [Guide pratique pour lier une ressource à un service cloud](/azure/cloud-services/cloud-services-how-to-manage).</span><span class="sxs-lookup"><span data-stu-id="c7ea9-199">For more information, see [How to: Link a resource to a cloud service](/azure/cloud-services/cloud-services-how-to-manage).</span></span>

- <span data-ttu-id="c7ea9-200">Quand vous configurez plusieurs stratégies et règles, elles peuvent entrer en conflit les unes avec les autres.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-200">When you configure multiple policies and rules, they could conflict with each other.</span></span> <span data-ttu-id="c7ea9-201">La mise à l’échelle automatique utilise les règles de résolution de conflits suivantes pour s’assurer qu’un nombre suffisant d’instances est toujours en cours d’exécution :</span><span class="sxs-lookup"><span data-stu-id="c7ea9-201">Autoscale uses the following conflict resolution rules to ensure that there is always a sufficient number of instances running:</span></span>
  - <span data-ttu-id="c7ea9-202">Les opérations de montée en puissance priment toujours sur les opérations inverses.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-202">Scale out operations always take precedence over scale in operations.</span></span>
  - <span data-ttu-id="c7ea9-203">Lorsqu’un conflit entre opérations fait l’objet d’une montée en puissance, la règle à l’origine de l’augmentation la plus importante du nombre d’instances prime.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-203">When scale out operations conflict, the rule that initiates the largest increase in the number of instances takes precedence.</span></span>
  - <span data-ttu-id="c7ea9-204">Lorsqu’un conflit entre opérations fait l’objet d’une baisse en puissance, la règle à l’origine de la diminution la plus faible du nombre d’instances prime.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-204">When scale in operations conflict, the rule that initiates the smallest decrease in the number of instances takes precedence.</span></span>

- <span data-ttu-id="c7ea9-205">Dans un environnement App Service, vous pouvez utiliser toutes les métriques de pool de Workers ou de serveur frontal pour définir des règles de mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-205">In an App Service Environment any worker pool or front-end metrics can be used to define autoscale rules.</span></span> <span data-ttu-id="c7ea9-206">Pour plus d’informations, consultez l’article [Mise à l’échelle automatique et environnement App Service](/azure/app-service/app-service-environment-auto-scale).</span><span class="sxs-lookup"><span data-stu-id="c7ea9-206">For more information, see [Autoscaling and App Service Environment](/azure/app-service/app-service-environment-auto-scale).</span></span>

## <a name="application-design-considerations"></a><span data-ttu-id="c7ea9-207">Considérations relatives à la conception d’applications</span><span class="sxs-lookup"><span data-stu-id="c7ea9-207">Application design considerations</span></span>

<span data-ttu-id="c7ea9-208">La mise à l’échelle automatique ne constitue pas une solution instantanée.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-208">Autoscaling isn't an instant solution.</span></span> <span data-ttu-id="c7ea9-209">Le simple ajout de ressources à un système ou l’exécution d’un nombre plus important d’instances de processus ne vous garantit pas l’amélioration des performances du système.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-209">Simply adding resources to a system or running more instances of a process doesn't guarantee that the performance of the system will improve.</span></span> <span data-ttu-id="c7ea9-210">Lors de l’élaboration d’une stratégie de mise à l’échelle automatique, tenez compte des points suivants :</span><span class="sxs-lookup"><span data-stu-id="c7ea9-210">Consider the following points when designing an autoscaling strategy:</span></span>

- <span data-ttu-id="c7ea9-211">Le système peut être mis à l’échelle horizontalement.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-211">The system must be designed to be horizontally scalable.</span></span> <span data-ttu-id="c7ea9-212">Évitez de formuler des hypothèses relatives à l’affinité des instances ; ne concevez pas de solutions qui nécessitent l’exécution permanente du code dans une instance spécifique de processus.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-212">Avoid making assumptions about instance affinity; do not design solutions that require that the code is always running in a specific instance of a process.</span></span> <span data-ttu-id="c7ea9-213">Lors de la mise à l’échelle horizontale d’un service cloud ou d’un site web, ne partez pas du principe que l’ensemble des requêtes d’une même source seront dirigées vers la même instance.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-213">When scaling a cloud service or web site horizontally, don't assume that a series of requests from the same source will always be routed to the same instance.</span></span> <span data-ttu-id="c7ea9-214">Pour la même raison, concevez les services sans état, afin d’éviter que l’ensemble des requêtes d’une application soient dirigées vers la même instance d’un service.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-214">For the same reason, design services to be stateless to avoid requiring a series of requests from an application to always be routed to the same instance of a service.</span></span> <span data-ttu-id="c7ea9-215">Quand vous concevez un service qui lit les messages d’une file d’attente avant de les traiter, n’anticipez pas l’identité de l’instance du service qui traite un message spécifique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-215">When designing a service that reads messages from a queue and processes them, don't make any assumptions about which instance of the service handles a specific message.</span></span> <span data-ttu-id="c7ea9-216">La mise à l’échelle automatique peut démarrer des instances supplémentaires d’un service à mesure que la taille de la file d’attente augmente.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-216">Autoscaling could start additional instances of a service as the queue length grows.</span></span> <span data-ttu-id="c7ea9-217">L’article [Modèle des consommateurs concurrents](../patterns/competing-consumers.md) explique comment gérer ce scénario.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-217">The [Competing Consumers pattern](../patterns/competing-consumers.md) describes how to handle this scenario.</span></span>

- <span data-ttu-id="c7ea9-218">Si la solution implémente une longue tâche, configurez-la pour qu’elle prenne en charge à la fois l’augmentation et la réduction.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-218">If the solution implements a long-running task, design this task to support both scaling out and scaling in.</span></span> <span data-ttu-id="c7ea9-219">Sans la prudence requise, une tâche de ce type pourrait empêcher la fermeture appropriée d’une instance de processus lors d’une mise à l’échelle horizontale du système, ou l’instance pourrait perdre des données en cas d’arrêt forcé du processus.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-219">Without due care, such a task could prevent an instance of a process from being shut down cleanly when the system scales in, or it could lose data if the process is forcibly terminated.</span></span> <span data-ttu-id="c7ea9-220">Dans l’idéal, refactorisez une tâche longue et divisez le traitement exécuté en bloc plus petits, discrets.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-220">Ideally, refactor a long-running task and break up the processing that it performs into smaller, discrete chunks.</span></span> <span data-ttu-id="c7ea9-221">L’article [Modèle de canaux et de filtres](../patterns/pipes-and-filters.md) fournit un exemple de la procédure à suivre.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-221">The [Pipes and Filters pattern](../patterns/pipes-and-filters.md) provides an example of how you can achieve this.</span></span>

- <span data-ttu-id="c7ea9-222">Sinon, vous pouvez implémenter un mécanisme de point de contrôle qui enregistre les informations d’état de la tâche à des intervalles réguliers et enregistre cet état dans un espace de stockage durable accessible par l’ensemble des instances du processus exécutant la tâche.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-222">Alternatively, you can implement a checkpoint mechanism that records state information about the task at regular intervals, and save this state in durable storage that can be accessed by any instance of the process running the task.</span></span> <span data-ttu-id="c7ea9-223">De cette manière, si le processus est arrêté, la tâche qu’il exécutait peut être poursuivie à partir du dernier point de contrôle à l’aide d’une instance différente.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-223">In this way, if the process is shutdown, the work that it was performing can be resumed from the last checkpoint by using another instance.</span></span>

- <span data-ttu-id="c7ea9-224">Quand les tâches d’arrière-plan s’exécutent sur des instances de calcul séparées, telles que les rôles de travail d’une application hébergée par des services cloud, vous devrez peut-être appliquer des stratégies distinctes de mise à l’échelle à différentes parties de l’application.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-224">When background tasks run on separate compute instances, such as in worker roles of a cloud services hosted application, you may need to scale different parts of the application using different scaling policies.</span></span> <span data-ttu-id="c7ea9-225">Par exemple, vous devrez peut-être déployer des instances de calcul supplémentaires d’interface utilisateur sans augmenter le nombre d’instances de calcul d’arrière-plan, ou inversement.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-225">For example, you may need to deploy additional user interface (UI) compute instances without increasing the number of background compute instances, or the opposite of this.</span></span> <span data-ttu-id="c7ea9-226">Si vous proposez différents niveaux de services (comme des packages de services de base ou de niveau Premium), il vous faudra éventuellement faire monter en puissance les ressources de calcul associées aux packages de services Premium de manière plus importante que celles dédiées aux packages de services de base afin de répondre aux exigences des contrats de niveau de service.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-226">If you offer different levels of service (such as basic and premium service packages), you may need to scale out the compute resources for premium service packages more aggressively than those for basic service packages in order to meet SLAs.</span></span>

- <span data-ttu-id="c7ea9-227">Vous pouvez utiliser la longueur de la file d’attente sur laquelle communiquent les instances de calcul d’arrière-plan et d’interface utilisateur en tant que critère de votre stratégie de mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-227">Consider using the length of the queue over which UI and background compute instances communicate as a criterion for your autoscaling strategy.</span></span> <span data-ttu-id="c7ea9-228">Cette valeur est le meilleur indicateur de déséquilibre ou d’écart entre la charge actuelle et la capacité de traitement de la tâche d’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-228">This is the best indicator of an imbalance or difference between the current load and the processing capacity of the background task.</span></span>

- <span data-ttu-id="c7ea9-229">Si vous basez votre stratégie de mise à l’échelle automatique sur des compteurs de processus d’entreprise, tels que le nombre de commandes transmises par heure ou la durée d’exécution moyenne d’une transaction complexe, veillez à comprendre parfaitement la relation entre les résultats issus de ces types de compteurs et les exigences réelles en matière de capacité de calcul.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-229">If you base your autoscaling strategy on counters that measure business processes, such as the number of orders placed per hour or the average execution time of a complex transaction, ensure that you fully understand the relationship between the results from these types of counters and the actual compute capacity requirements.</span></span> <span data-ttu-id="c7ea9-230">Il peut être nécessaire de mettre à l’échelle plusieurs composants ou unités de calcul afin de vous adapter aux modifications transmises par les compteurs d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-230">It may be necessary to scale more than one component or compute unit in response to changes in business process counters.</span></span>

- <span data-ttu-id="c7ea9-231">Pour empêcher un système de procéder à une montée en puissance excessive et éviter les coûts associés à l’exécution de plusieurs milliers d’instances, envisagez de limiter le nombre d’instances pouvant être automatiquement ajoutées.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-231">To prevent a system from attempting to scale out excessively, and to avoid the costs associated with running many thousands of instances, consider limiting the maximum number of instances that can be automatically added.</span></span> <span data-ttu-id="c7ea9-232">La plupart des mécanismes de mise à l’échelle automatique prennent en charge la définition des nombres minimal et maximal d’instances associées à une règle.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-232">Most autoscaling mechanisms allow you to specify the minimum and maximum number of instances for a rule.</span></span> <span data-ttu-id="c7ea9-233">De plus, vous pouvez dégrader de manière appropriée la fonctionnalité fournie par le système si le nombre maximal d’instances a été déployé et que le système est toujours surchargé.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-233">In addition, consider gracefully degrading the functionality that the system provides if the maximum number of instances have been deployed, and the system is still overloaded.</span></span>

- <span data-ttu-id="c7ea9-234">N’oubliez pas que la mise à l’échelle automatique n’est pas forcément le mécanisme le mieux adapté à la gestion d’un pic imprévu de charge de travail.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-234">Keep in mind that autoscaling might not be the most appropriate mechanism to handle a sudden burst in workload.</span></span> <span data-ttu-id="c7ea9-235">L’approvisionnement et le démarrage des nouvelles instances d’un service et l’ajout des ressources à un système étant des opérations qui demandent du temps, il se peut que le pic de demandes soit passé quand les nouveaux éléments sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-235">It takes time to provision and start new instances of a service or add resources to a system, and the peak demand may have passed by the time these additional resources have been made available.</span></span> <span data-ttu-id="c7ea9-236">Dans ce scénario, il peut être préférable de limiter le service.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-236">In this scenario, it may be better to throttle the service.</span></span> <span data-ttu-id="c7ea9-237">Pour plus d’informations, consultez [Modèle de limitation](../patterns/throttling.md).</span><span class="sxs-lookup"><span data-stu-id="c7ea9-237">For more information, see the [Throttling pattern](../patterns/throttling.md).</span></span>

- <span data-ttu-id="c7ea9-238">À l’inverse, si vous avez besoin que la capacité disponible traite l’ensemble des requêtes lors des fluctuations brutales du volume et que la contrainte financière n’est pas un obstacle majeur, vous pouvez appliquer une stratégie poussée de mise à l’échelle automatique qui démarre plus rapidement les instances supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-238">Conversely, if you do need the capacity to process all requests when the volume fluctuates rapidly, and cost isn't a major contributing factor, consider using an aggressive autoscaling strategy that starts additional instances more quickly.</span></span> <span data-ttu-id="c7ea9-239">Vous pouvez également utiliser une stratégie planifiée qui démarre un nombre suffisant d’instances pour satisfaire de manière anticipée la charge maximale.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-239">You can also use a scheduled policy that starts a sufficient number of instances to meet the maximum load before that load is expected.</span></span>

- <span data-ttu-id="c7ea9-240">Le mécanisme de mise à l’échelle automatique doit surveiller le processus et consigner les détails de chacun des événements de mise à l’échelle automatique (éléments déclencheurs, ressources ajoutées ou retirées, et à quel moment).</span><span class="sxs-lookup"><span data-stu-id="c7ea9-240">The autoscaling mechanism should monitor the autoscaling process, and log the details of each autoscaling event (what triggered it, what resources were added or removed, and when).</span></span> <span data-ttu-id="c7ea9-241">Si vous créez un mécanisme personnalisé de mise à l’échelle automatique, veillez à intégrer cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-241">If you create a custom autoscaling mechanism, ensure that it incorporates this capability.</span></span> <span data-ttu-id="c7ea9-242">Analysez les informations pour aider à mesurer l’efficacité de la stratégie de mise à l’échelle automatique et ajustez-la si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-242">Analyze the information to help measure the effectiveness of the autoscaling strategy, and tune it if necessary.</span></span> <span data-ttu-id="c7ea9-243">Vous pouvez effectuer un réglage à la fois à court terme, à mesure que les modèles d’utilisation deviennent plus évidents, et à long terme, à mesure que l’entreprise se développe ou que les exigences de l’application évoluent.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-243">You can tune both in the short term, as the usage patterns become more obvious, and over the long term, as the business expands or the requirements of the application evolve.</span></span> <span data-ttu-id="c7ea9-244">Si une application atteint la limite supérieure définie pour la mise à l’échelle automatique, le mécanisme peut alerter un opérateur susceptible de démarrer manuellement des ressources supplémentaires si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-244">If an application reaches the upper limit defined for autoscaling, the mechanism might also alert an operator who could manually start additional resources if necessary.</span></span> <span data-ttu-id="c7ea9-245">Si cette situation se présente, l’opérateur est également chargé de retirer ces ressources une fois que la charge est revenue à la normale.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-245">Note that, under these circumstances, the operator may also be responsible for manually removing these resources after the workload eases.</span></span>

## <a name="related-patterns-and-guidance"></a><span data-ttu-id="c7ea9-246">Conseils et modèles connexes</span><span class="sxs-lookup"><span data-stu-id="c7ea9-246">Related patterns and guidance</span></span>

<span data-ttu-id="c7ea9-247">Les modèles et les conseils suivants peuvent également être pertinents lors de l’implémentation de la mise à l’échelle automatique :</span><span class="sxs-lookup"><span data-stu-id="c7ea9-247">The following patterns and guidance may also be relevant to your scenario when implementing autoscaling:</span></span>

- <span data-ttu-id="c7ea9-248">[Modèle de limitation](../patterns/throttling.md).</span><span class="sxs-lookup"><span data-stu-id="c7ea9-248">[Throttling pattern](../patterns/throttling.md).</span></span> <span data-ttu-id="c7ea9-249">Ce modèle décrit comment une application peut continuer à fonctionner et à satisfaire aux contrats de niveau de service quand une augmentation de la demande place une charge conséquente sur les ressources.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-249">This pattern describes how an application can continue to function and meet SLAs when an increase in demand places an extreme load on resources.</span></span> <span data-ttu-id="c7ea9-250">Vous pouvez associer un modèle de limitation à la mise à l’échelle automatique afin d’éviter de surcharger un système soumis à une opération d’évolutivité horizontale.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-250">Throttling can be used with autoscaling to prevent a system from being overwhelmed while the system scales out.</span></span>

- <span data-ttu-id="c7ea9-251">[Modèle des consommateurs concurrents](../patterns/competing-consumers.md).</span><span class="sxs-lookup"><span data-stu-id="c7ea9-251">[Competing Consumers pattern](../patterns/competing-consumers.md).</span></span> <span data-ttu-id="c7ea9-252">Ce modèle explique comment implémenter un pool d’instances de services pouvant traiter les messages d’une instance d’application.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-252">This pattern describes how to implement a pool of service instances that can handle messages from any application instance.</span></span> <span data-ttu-id="c7ea9-253">La mise à l’échelle automatique sert éventuellement à démarrer et arrêter les instances de services afin de satisfaire les charges de travail anticipées.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-253">Autoscaling can be used to start and stop service instances to match the anticipated workload.</span></span> <span data-ttu-id="c7ea9-254">Grâce à cette approche, un système peut traiter simultanément plusieurs messages afin d’optimiser le débit, améliorer l’évolutivité et la disponibilité, et équilibrer la charge de travail.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-254">This approach enables a system to process multiple messages concurrently to optimize throughput, improve scalability and availability, and balance the workload.</span></span>

- <span data-ttu-id="c7ea9-255">[Surveillance et diagnostics](./monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="c7ea9-255">[Monitoring and diagnostics](./monitoring.md).</span></span> <span data-ttu-id="c7ea9-256">L’instrumentation et la télémétrie sont essentielles pour collecter les informations pouvant être utilisées dans le cadre du processus de mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c7ea9-256">Instrumentation and telemetry are vital for gathering the information that can drive the autoscaling process.</span></span>

<!-- links -->

[monitoring]: /azure/monitoring-and-diagnostics/monitoring-overview-autoscale
[app-service-autoscale]: /azure/monitoring-and-diagnostics/insights-how-to-scale?toc=%2fazure%2fapp-service-web%2ftoc.json#scaling-based-on-a-pre-set-metric
[app-service-plan]: /azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview
[autoscale-metrics]: /azure/monitoring-and-diagnostics/insights-autoscale-common-metrics
[cloud-services-autoscale]: /azure/cloud-services/cloud-services-how-to-scale-portal
[functions-scale]: /azure/azure-functions/functions-scale
[link-resource-to-cloud-service]: /azure/cloud-services/cloud-services-how-to-manage#how-to-link-a-resource-to-a-cloud-service
[service-fabric-autoscale]: /azure/service-fabric/service-fabric-cluster-scale-up-down
[vm-scale-sets]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview
[vm-scale-sets-autoscale]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview
