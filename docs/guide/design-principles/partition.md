---
title: Partitionner pour contourner les limites
titleSuffix: Azure Application Architecture Guide
description: Utilisez le partitionnement pour contourner les limites liées à la base de données, au réseau et au calcul.
author: MikeWasson
ms.date: 08/30/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seojan19
ms.openlocfilehash: 76590d2a0c16df9d599e7d4a856a84b5e3bdcec8
ms.sourcegitcommit: 1b50810208354577b00e89e5c031b774b02736e2
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/23/2019
ms.locfileid: "54486010"
---
# <a name="partition-around-limits"></a><span data-ttu-id="8ce9c-103">Partitionner pour contourner les limites</span><span class="sxs-lookup"><span data-stu-id="8ce9c-103">Partition around limits</span></span>

## <a name="use-partitioning-to-work-around-database-network-and-compute-limits"></a><span data-ttu-id="8ce9c-104">Utilisez le partitionnement pour contourner les limites liées à la base de données, au réseau et au calcul</span><span class="sxs-lookup"><span data-stu-id="8ce9c-104">Use partitioning to work around database, network, and compute limits</span></span>

<span data-ttu-id="8ce9c-105">Dans le cloud, la capacité de montée en puissance de la totalité des services présente certaines limites.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-105">In the cloud, all services have limits in their ability to scale up.</span></span> <span data-ttu-id="8ce9c-106">Les limites des services Azure sont documentées dans l’article [Abonnement Azure et limites, quotas et contraintes de service][azure-limits].</span><span class="sxs-lookup"><span data-stu-id="8ce9c-106">Azure service limits are documented in [Azure subscription and service limits, quotas, and constraints][azure-limits].</span></span> <span data-ttu-id="8ce9c-107">Les limites portent sur le nombre de cœurs, la taille de base de données, le débit des requêtes et le débit du réseau.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-107">Limits include number of cores, database size, query throughput, and network throughput.</span></span> <span data-ttu-id="8ce9c-108">Si votre système s’étend suffisamment, vous risquez d’atteindre une ou plusieurs de ces limites.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-108">If your system grows sufficiently large, you may hit one or more of these limits.</span></span> <span data-ttu-id="8ce9c-109">Utilisez le partitionnement pour contourner ces limites.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-109">Use partitioning to work around these limits.</span></span>

<span data-ttu-id="8ce9c-110">Vous disposez de nombreuses méthodes pour partitionner un système, notamment :</span><span class="sxs-lookup"><span data-stu-id="8ce9c-110">There are many ways to partition a system, such as:</span></span>

- <span data-ttu-id="8ce9c-111">Partitionnez une base de données pour éviter les limites de taille de base de données, d’E/S de données ou de nombre de sessions simultanées.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-111">Partition a database to avoid limits on database size, data I/O, or number of concurrent sessions.</span></span>

- <span data-ttu-id="8ce9c-112">Partitionnez une file d’attente ou un bus de messages afin d’éviter les limites relatives au nombre de requêtes ou de connexions simultanées.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-112">Partition a queue or message bus to avoid limits on the number of requests or the number of concurrent connections.</span></span>

- <span data-ttu-id="8ce9c-113">Partitionnez une application web App Service pour contourner les limites du nombre d’instances par plan App Service.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-113">Partition an App Service web app to avoid limits on the number of instances per App Service plan.</span></span>

<span data-ttu-id="8ce9c-114">Une base de données peut être partitionnée *horizontalement*, *verticalement* ou *fonctionnellement*.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-114">A database can be partitioned *horizontally*, *vertically*, or *functionally*.</span></span>

- <span data-ttu-id="8ce9c-115">Dans le cadre du partitionnement horizontal, également appelé partitionnement de base de données, chaque partition stocke un sous-ensemble de données du jeu de données total.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-115">In horizontal partitioning, also called sharding, each partition holds data for a subset of the total data set.</span></span> <span data-ttu-id="8ce9c-116">Les partitions partagent le même schéma de données.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-116">The partitions share the same data schema.</span></span> <span data-ttu-id="8ce9c-117">Par exemple, les clients dont le nom commence par A&ndash;M sont stockés dans une partition, et ceux dont le nom commence par N&ndash;Z sont placés dans une autre partition.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-117">For example, customers whose names start with A&ndash;M go into one partition, N&ndash;Z into another partition.</span></span>

- <span data-ttu-id="8ce9c-118">Dans le cadre d’un partitionnement vertical, chaque partition comporte un sous-ensemble des champs relatifs aux éléments présents dans le magasin de données.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-118">In vertical partitioning, each partition holds a subset of the fields for the items in the data store.</span></span> <span data-ttu-id="8ce9c-119">Par exemple, placez les champs fréquemment utilisés dans une partition, et les champs plus rarement utilisés dans une autre.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-119">For example, put frequently accessed fields in one partition, and less frequently accessed fields in another.</span></span>

- <span data-ttu-id="8ce9c-120">Lors d’un partitionnement fonctionnel, les données sont partitionnées en fonction de leur mode d’utilisation par chaque contexte lié dans le système.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-120">In functional partitioning, data is partitioned according to how it is used by each bounded context in the system.</span></span> <span data-ttu-id="8ce9c-121">Par exemple, stockez les données de facturation dans une partition et les données d’inventaire de produits dans une autre.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-121">For example, store invoice data in one partition and product inventory data in another.</span></span> <span data-ttu-id="8ce9c-122">Les schémas sont indépendants.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-122">The schemas are independent.</span></span>

<span data-ttu-id="8ce9c-123">Pour plus d’informations, consultez l’article [Partitionnement des données][data-partitioning-guidance].</span><span class="sxs-lookup"><span data-stu-id="8ce9c-123">For more detailed guidance, see [Data partitioning][data-partitioning-guidance].</span></span>

## <a name="recommendations"></a><span data-ttu-id="8ce9c-124">Recommandations</span><span class="sxs-lookup"><span data-stu-id="8ce9c-124">Recommendations</span></span>

<span data-ttu-id="8ce9c-125">**Partitionnez les différentes parties de l’application**.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-125">**Partition different parts of the application**.</span></span> <span data-ttu-id="8ce9c-126">Si les bases de données constituent l’un des choix les plus évidents pour le partitionnement, envisagez également de partitionner le stockage, le cache, les files d’attente et les instances de calcul.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-126">Databases are one obvious candidate for partitioning, but also consider storage, cache, queues, and compute instances.</span></span>

<span data-ttu-id="8ce9c-127">**Concevez la clé de partition pour éviter les zones réactives**.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-127">**Design the partition key to avoid hot spots**.</span></span> <span data-ttu-id="8ce9c-128">Si vous partitionnez une base de données, mais qu’une seule partition reçoit la majorité des requêtes, vous n’avez pas résolu votre problème.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-128">If you partition a database, but one shard still gets the majority of the requests, then you haven't solved your problem.</span></span> <span data-ttu-id="8ce9c-129">Dans l’idéal, la charge est répartie uniformément entre toutes les partitions.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-129">Ideally, load gets distributed evenly across all the partitions.</span></span> <span data-ttu-id="8ce9c-130">Par exemple, hachez les données par ID client plutôt qu’en fonction de la première lettre du nom du client, car certaines lettres sont plus fréquentes.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-130">For example, hash by customer ID and not the first letter of the customer name, because some letters are more frequent.</span></span> <span data-ttu-id="8ce9c-131">Le même principe s’applique lors du partitionnement d’une file d’attente de messages.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-131">The same principle applies when partitioning a message queue.</span></span> <span data-ttu-id="8ce9c-132">Sélectionnez une clé de partition entraînant une répartition uniforme des messages dans l’ensemble des files d’attente.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-132">Pick a partition key that leads to an even distribution of messages across the set of queues.</span></span> <span data-ttu-id="8ce9c-133">Pour plus d’informations, consultez l’article [Partitionnement][sharding].</span><span class="sxs-lookup"><span data-stu-id="8ce9c-133">For more information, see [Sharding][sharding].</span></span>

<span data-ttu-id="8ce9c-134">**Partitionnez pour contourner les limites de service et d’abonnement Azure**.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-134">**Partition around Azure subscription and service limits**.</span></span> <span data-ttu-id="8ce9c-135">Les composants et les services ne sont pas les seuls à présenter des limites ; c’est également le cas des abonnements et des groupes de ressources.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-135">Individual components and services have limits, but there are also limits for subscriptions and resource groups.</span></span> <span data-ttu-id="8ce9c-136">Dans le cas des applications très volumineuses, vous pouvez avoir besoin de créer des partitions pour contourner ces limites.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-136">For very large applications, you might need to partition around those limits.</span></span>

<span data-ttu-id="8ce9c-137">**Partitionnez à différents niveaux**.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-137">**Partition at different levels**.</span></span> <span data-ttu-id="8ce9c-138">Considérez l’exemple d’un serveur de base de données déployé sur une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-138">Consider a database server deployed on a VM.</span></span> <span data-ttu-id="8ce9c-139">Cette machine virtuelle est équipée d’un disque dur virtuel qui est sauvegardé par le service Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-139">The VM has a VHD that is backed by Azure Storage.</span></span> <span data-ttu-id="8ce9c-140">Le compte de stockage appartient à un abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-140">The storage account belongs to an Azure subscription.</span></span> <span data-ttu-id="8ce9c-141">Notez que chaque niveau de la hiérarchie comporte des limites.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-141">Notice that each step in the hierarchy has limits.</span></span> <span data-ttu-id="8ce9c-142">Le serveur de base de données peut présenter une limite de pool de connexions.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-142">The database server may have a connection pool limit.</span></span> <span data-ttu-id="8ce9c-143">Les machines virtuelles comportent des limites d’UC et de réseau.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-143">VMs have CPU and network limits.</span></span> <span data-ttu-id="8ce9c-144">Le stockage présente des limites d’IOPS.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-144">Storage has IOPS limits.</span></span> <span data-ttu-id="8ce9c-145">L’abonnement fait l’objet de limites concernant le nombre de cœurs de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-145">The subscription has limits on the number of VM cores.</span></span> <span data-ttu-id="8ce9c-146">Il est généralement plus facile de créer des partitions à un niveau inférieur de la hiérarchie.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-146">Generally, it's easier to partition lower in the hierarchy.</span></span> <span data-ttu-id="8ce9c-147">Seules les applications volumineuses nécessitent un partitionnement au niveau abonnement.</span><span class="sxs-lookup"><span data-stu-id="8ce9c-147">Only large applications should need to partition at the subscription level.</span></span>

<!-- links -->

[azure-limits]: /azure/azure-subscription-service-limits
[data-partitioning-guidance]: ../../best-practices/data-partitioning.md
[sharding]: ../../patterns/sharding.md
