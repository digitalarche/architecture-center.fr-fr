---
title: Tester la résilience et la disponibilité des applications Azure
description: Approches de test de la fiabilité des applications dans Azure
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: cf33a859540810279b1cb85be5a6fb2ebe4500dc
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646551"
---
# <a name="testing-azure-applications-for-resiliency-and-availability"></a><span data-ttu-id="acfb8-103">Tester la résilience et la disponibilité des applications Azure</span><span class="sxs-lookup"><span data-stu-id="acfb8-103">Testing Azure applications for resiliency and availability</span></span>

<span data-ttu-id="acfb8-104">Pour tester la résilience, vous devez vérifier le fonctionnement de la charge de travail de bout en bout dans les conditions de défaillance intermittente.</span><span class="sxs-lookup"><span data-stu-id="acfb8-104">To test resiliency, you should verify how the end-to-end workload performs under intermittent failure conditions.</span></span>

<span data-ttu-id="acfb8-105">Exécuter des tests en production à l’aide des données synthétiques et réelles de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="acfb8-105">Run tests in production using both synthetic and real user data.</span></span> <span data-ttu-id="acfb8-106">Test et production sont rarement identiques, il est donc important de valider votre application à l’aide de la production une [bleu-vert](https://martinfowler.com/bliki/BlueGreenDeployment.html) ou [déploiement canary](https://martinfowler.com/bliki/CanaryRelease.html).</span><span class="sxs-lookup"><span data-stu-id="acfb8-106">Test and production are rarely identical, so it's important to validate your application in production using a [blue-green](https://martinfowler.com/bliki/BlueGreenDeployment.html) or [canary deployment](https://martinfowler.com/bliki/CanaryRelease.html).</span></span> <span data-ttu-id="acfb8-107">De cette façon, vous testez l’application dans les conditions réelles, afin de vous assurer qu’elle pourra fonctionner comme prévu quand le déploiement complet.</span><span class="sxs-lookup"><span data-stu-id="acfb8-107">This way, you're testing the application under real conditions, so you can be sure that it will function as expected when fully deployed.</span></span>

<span data-ttu-id="acfb8-108">Dans le cadre de votre plan de test, sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="acfb8-108">As part of your test plan, include:</span></span>

- <span data-ttu-id="acfb8-109">Les aspects de tests automatisés</span><span class="sxs-lookup"><span data-stu-id="acfb8-109">Automated predeployment testing</span></span>
- <span data-ttu-id="acfb8-110">Test d’injection d’erreur</span><span class="sxs-lookup"><span data-stu-id="acfb8-110">Fault injection testing</span></span>
- <span data-ttu-id="acfb8-111">Test de charge de pointe</span><span class="sxs-lookup"><span data-stu-id="acfb8-111">Peak load testing</span></span>
- <span data-ttu-id="acfb8-112">Test de récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="acfb8-112">Disaster recovery testing</span></span>
- <span data-ttu-id="acfb8-113">Test du service tiers</span><span class="sxs-lookup"><span data-stu-id="acfb8-113">Third-party service testing</span></span>

<span data-ttu-id="acfb8-114">Les tests sont un processus itératif.</span><span class="sxs-lookup"><span data-stu-id="acfb8-114">Testing is an iterative process.</span></span> <span data-ttu-id="acfb8-115">Testez l’application, mesurez le résultat, analysez et résolvez tous les échecs résultants, puis répétez le processus.</span><span class="sxs-lookup"><span data-stu-id="acfb8-115">Test the application, measure the outcome, analyze and address any failures that result, and repeat the process.</span></span>

## <a name="perform-fault-injection-testing"></a><span data-ttu-id="acfb8-116">Effectuer le test d’injection d’erreur</span><span class="sxs-lookup"><span data-stu-id="acfb8-116">Perform fault injection testing</span></span>

<span data-ttu-id="acfb8-117">Pour le test d’injection d’erreur, vérifiez la résilience du système lors de pannes, en déclenchant des échecs réels ou en simulant les.</span><span class="sxs-lookup"><span data-stu-id="acfb8-117">For fault injection testing, check the resiliency of the system during failures, either by triggering actual failures or by simulating them.</span></span> <span data-ttu-id="acfb8-118">Voici quelques stratégies de provoquer des défaillances :</span><span class="sxs-lookup"><span data-stu-id="acfb8-118">Here are some strategies to induce failures:</span></span>

- <span data-ttu-id="acfb8-119">Arrêter les instances de machine virtuelle (VM).</span><span class="sxs-lookup"><span data-stu-id="acfb8-119">Shut down virtual machine (VM) instances.</span></span>
- <span data-ttu-id="acfb8-120">Blocage des processus.</span><span class="sxs-lookup"><span data-stu-id="acfb8-120">Crash processes.</span></span>
- <span data-ttu-id="acfb8-121">Expiration des certificats.</span><span class="sxs-lookup"><span data-stu-id="acfb8-121">Expire certificates.</span></span>
- <span data-ttu-id="acfb8-122">Changement des clés d’accès.</span><span class="sxs-lookup"><span data-stu-id="acfb8-122">Change access keys.</span></span>
- <span data-ttu-id="acfb8-123">Arrêt du service DNS sur les contrôleurs de domaine.</span><span class="sxs-lookup"><span data-stu-id="acfb8-123">Shut down the DNS service on domain controllers.</span></span>
- <span data-ttu-id="acfb8-124">Limitation des ressources système disponibles, comme la RAM ou le nombre de threads.</span><span class="sxs-lookup"><span data-stu-id="acfb8-124">Limit available system resources, such as RAM or number of threads.</span></span>
- <span data-ttu-id="acfb8-125">Démontage des disques.</span><span class="sxs-lookup"><span data-stu-id="acfb8-125">Unmount disks.</span></span>
- <span data-ttu-id="acfb8-126">Redéploiement d’une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="acfb8-126">Redeploy a VM.</span></span>

<span data-ttu-id="acfb8-127">Votre plan de test doit incorporer des points de défaillance possibles identifiées pendant la phase de conception, en plus des scénarios courants de défaillance :</span><span class="sxs-lookup"><span data-stu-id="acfb8-127">Your test plan should incorporate possible failure points identified during the design phase, in addition to common failure scenarios:</span></span>

- <span data-ttu-id="acfb8-128">Tester votre application dans un environnement aussi proche de production que possible.</span><span class="sxs-lookup"><span data-stu-id="acfb8-128">Test your application in an environment as close to production as possible.</span></span>
- <span data-ttu-id="acfb8-129">Échecs de test dans la combinaison.</span><span class="sxs-lookup"><span data-stu-id="acfb8-129">Test failures in combination.</span></span>
- <span data-ttu-id="acfb8-130">Mesurez les temps de récupération et vérifiez que les besoins de votre entreprise sont remplies.</span><span class="sxs-lookup"><span data-stu-id="acfb8-130">Measure the recovery times, and be sure that your business requirements are met.</span></span>
- <span data-ttu-id="acfb8-131">Vérifiez que les échecs n’en cascade et sont gérées de manière isolée.</span><span class="sxs-lookup"><span data-stu-id="acfb8-131">Verify that failures don't cascade and are handled in an isolated way.</span></span>

<span data-ttu-id="acfb8-132">Pour plus d’informations sur les scénarios d’échec, consultez [échec et récupération d’urgence pour les applications Azure](./disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="acfb8-132">For more information about failure scenarios, see [Failure and disaster recovery for Azure applications](./disaster-recovery.md).</span></span>

## <a name="test-under-peak-loads"></a><span data-ttu-id="acfb8-133">Tester sous les pics de charge</span><span class="sxs-lookup"><span data-stu-id="acfb8-133">Test under peak loads</span></span>

<span data-ttu-id="acfb8-134">Test de charge est essentiel pour identifier les défaillances qui se produisent uniquement en charge, tels que la base de données back-end saturé ou la limitation du service.</span><span class="sxs-lookup"><span data-stu-id="acfb8-134">Load testing is crucial for identifying failures that only happen under load, such as the back-end database being overwhelmed or service throttling.</span></span> <span data-ttu-id="acfb8-135">Test de charge maximale et augmentation anticipée des pics de charge à l’aide des données de production ou des données synthétiques qui soient aussi proches que possible, les données de production.</span><span class="sxs-lookup"><span data-stu-id="acfb8-135">Test for peak load and anticipated increase in peak load, using production data or synthetic data that is as close to production data as possible.</span></span> <span data-ttu-id="acfb8-136">Votre objectif est de voir comment l’application se comporte dans des conditions réelles.</span><span class="sxs-lookup"><span data-stu-id="acfb8-136">Your goal is to see how the application behaves under real-world conditions.</span></span>

## <a name="conduct-disaster-recovery-drills"></a><span data-ttu-id="acfb8-137">Effectuer des exercices de récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="acfb8-137">Conduct disaster recovery drills</span></span>

<span data-ttu-id="acfb8-138">Démarrez avec un plan de récupération d’urgence satisfaisante et tester régulièrement pour vérifier qu’elle fonctionne.</span><span class="sxs-lookup"><span data-stu-id="acfb8-138">Start with a good disaster recovery plan, and test it periodically to make sure it works.</span></span>

<span data-ttu-id="acfb8-139">Pour les Machines virtuelles Azure, vous pouvez utiliser [Azure Site Recovery](/azure/site-recovery/azure-to-azure-quickstart/) pour répliquer et effectuer [exercices de récupération d’urgence](/azure/site-recovery/azure-to-azure-tutorial-dr-drill/) sans affecter les applications de production ni la réplication continue.</span><span class="sxs-lookup"><span data-stu-id="acfb8-139">For Azure Virtual Machines, you can use [Azure Site Recovery](/azure/site-recovery/azure-to-azure-quickstart/) to replicate and perform [disaster recovery drills](/azure/site-recovery/azure-to-azure-tutorial-dr-drill/) without impacting production applications or ongoing replication.</span></span>

### <a name="failover-and-failback-testing"></a><span data-ttu-id="acfb8-140">Basculement et le test de la restauration automatique</span><span class="sxs-lookup"><span data-stu-id="acfb8-140">Failover and failback testing</span></span>

<span data-ttu-id="acfb8-141">Tester le basculement et la restauration pour vérifier que les services dépendants de votre application redeviendront actifs de manière synchronisée au cours de la récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="acfb8-141">Test failover and failback to verify that your application's dependent services come back up in a synchronized manner during disaster recovery.</span></span> <span data-ttu-id="acfb8-142">Modifications apportées aux systèmes et aux opérations susceptibles d’affecter les fonctions de basculement et la restauration automatique, mais l’impact peuvent ne pas être détecté jusqu'à ce que le système principal tombe en panne ou est surchargé.</span><span class="sxs-lookup"><span data-stu-id="acfb8-142">Changes to systems and operations may affect failover and failback functions, but the impact may not be detected until the main system fails or becomes overloaded.</span></span> <span data-ttu-id="acfb8-143">Tester les fonctionnalités de basculement *avant* ils sont requis afin de compenser un problème en direct.</span><span class="sxs-lookup"><span data-stu-id="acfb8-143">Test failover capabilities *before* they are required to compensate for a live problem.</span></span> <span data-ttu-id="acfb8-144">Assurez-vous également que les services dépendants basculent et restaurer dans l’ordre correct.</span><span class="sxs-lookup"><span data-stu-id="acfb8-144">Also be sure that dependent services fail over and fail back in the correct order.</span></span>

<span data-ttu-id="acfb8-145">Si vous utilisez [Azure Site Recovery](/azure/site-recovery/) pour répliquer des machines virtuelles, exécutez après sinistre exercices de récupération régulièrement en effectuant des tests de basculement pour valider votre stratégie de réplication.</span><span class="sxs-lookup"><span data-stu-id="acfb8-145">If you are using [Azure Site Recovery](/azure/site-recovery/) to replicate VMs, run disaster recovery drills periodically by doing test failovers to validate your replication strategy.</span></span> <span data-ttu-id="acfb8-146">Un test de basculement n’affecte pas la réplication de machine virtuelle en cours ou de votre environnement de production.</span><span class="sxs-lookup"><span data-stu-id="acfb8-146">A test failover does not affect the ongoing VM replication or your production environment.</span></span> <span data-ttu-id="acfb8-147">Pour plus d’informations, consultez [exécuter une simulation de récupération d’urgence vers Azure](/azure/site-recovery/site-recovery-test-failover-to-azure).</span><span class="sxs-lookup"><span data-stu-id="acfb8-147">For more information, see [Run a disaster recovery drill to Azure](/azure/site-recovery/site-recovery-test-failover-to-azure).</span></span>

### <a name="simulation-testing"></a><span data-ttu-id="acfb8-148">Le test de simulation</span><span class="sxs-lookup"><span data-stu-id="acfb8-148">Simulation testing</span></span>

<span data-ttu-id="acfb8-149">Test de simulation implique la création d’un petit et réelles.</span><span class="sxs-lookup"><span data-stu-id="acfb8-149">Simulation testing involves creating small, real-life situations.</span></span> <span data-ttu-id="acfb8-150">Simulations illustrent l’efficacité des solutions dans le plan de récupération et mettre en évidence les problèmes qui n’ont pas été traités correctement.</span><span class="sxs-lookup"><span data-stu-id="acfb8-150">Simulations demonstrate the effectiveness of the solutions in the recovery plan and highlight any issues that weren't adequately addressed.</span></span>

<span data-ttu-id="acfb8-151">Quand vous effectuez le test de simulation, suivez les meilleures pratiques :</span><span class="sxs-lookup"><span data-stu-id="acfb8-151">As you perform simulation testing, follow best practices:</span></span>

- <span data-ttu-id="acfb8-152">Effectuez des simulations d’une manière qui ne perturbent l’activité réelle, mais semble une situation réelle.</span><span class="sxs-lookup"><span data-stu-id="acfb8-152">Conduct simulations in a manner that doesn't disrupt actual business but feels like a real situation.</span></span>
- <span data-ttu-id="acfb8-153">Assurez-vous que les scénarios simulés sont entièrement contrôlables.</span><span class="sxs-lookup"><span data-stu-id="acfb8-153">Make sure that simulated scenarios are completely controllable.</span></span> <span data-ttu-id="acfb8-154">Si le plan de récupération a échoué, vous pouvez restaurer la situation normal sans provoquer des dommages.</span><span class="sxs-lookup"><span data-stu-id="acfb8-154">If the recovery plan seems to be failing, you can restore the situation back to normal without causing damage.</span></span>
- <span data-ttu-id="acfb8-155">Informer de gestion sur quand et comment les exercices de simulation seront effectuées.</span><span class="sxs-lookup"><span data-stu-id="acfb8-155">Inform management about when and how the simulation exercises will be conducted.</span></span> <span data-ttu-id="acfb8-156">Votre plan doit préciser l’intervalle de temps et les ressources impactés pendant la simulation.</span><span class="sxs-lookup"><span data-stu-id="acfb8-156">Your plan should detail the time frame and the resources affected during the simulation.</span></span>

## <a name="test-health-probes-for-load-balancers-and-traffic-managers"></a><span data-ttu-id="acfb8-157">Tester les sondes d’intégrité pour les équilibreurs de charge et les gestionnaires de trafic</span><span class="sxs-lookup"><span data-stu-id="acfb8-157">Test health probes for load balancers and traffic managers</span></span>

<span data-ttu-id="acfb8-158">Configurez et testez les sondes d’intégrité pour vos équilibreurs de charge et les gestionnaires de trafic.</span><span class="sxs-lookup"><span data-stu-id="acfb8-158">Configure and test health probes for your load balancers and traffic managers.</span></span> <span data-ttu-id="acfb8-159">Assurez-vous que votre point de terminaison d’intégrité vérifie les composants critiques du système et répond correctement.</span><span class="sxs-lookup"><span data-stu-id="acfb8-159">Ensure that your health endpoint checks the critical parts of the system and responds appropriately.</span></span>

- <span data-ttu-id="acfb8-160">Pour [Azure Traffic Manager](/azure/traffic-manager/traffic-manager-overview/), la sonde d’intégrité détermine s’il faut basculer vers une autre région.</span><span class="sxs-lookup"><span data-stu-id="acfb8-160">For [Azure Traffic Manager](/azure/traffic-manager/traffic-manager-overview/), the health probe determines whether to fail over to another region.</span></span> <span data-ttu-id="acfb8-161">Votre point de terminaison d’intégrité doit vérifier les dépendances critiques qui sont déployés au sein de la même région.</span><span class="sxs-lookup"><span data-stu-id="acfb8-161">Your health endpoint should check any critical dependencies that are deployed within the same region.</span></span>
- <span data-ttu-id="acfb8-162">Pour [Azure Load Balancer](/azure/load-balancer/load-balancer-overview/), la sonde d’intégrité détermine s’il faut supprimer une machine virtuelle à partir de la rotation.</span><span class="sxs-lookup"><span data-stu-id="acfb8-162">For [Azure Load Balancer](/azure/load-balancer/load-balancer-overview/), the health probe determines whether to remove a VM from rotation.</span></span> <span data-ttu-id="acfb8-163">Le point de terminaison d’intégrité doit signaler l’intégrité de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="acfb8-163">The health endpoint should report the health of the VM.</span></span> <span data-ttu-id="acfb8-164">N’incluez pas d’autres niveaux ou de services externes.</span><span class="sxs-lookup"><span data-stu-id="acfb8-164">Don't include other tiers or external services.</span></span> <span data-ttu-id="acfb8-165">Autrement, si un échec se produit en dehors de la machine virtuelle, l’équilibreur de charge supprimera la machine virtuelle de la rotation.</span><span class="sxs-lookup"><span data-stu-id="acfb8-165">Otherwise, a failure that occurs outside the VM will cause the load balancer to remove the VM from rotation.</span></span>

<span data-ttu-id="acfb8-166">Pour savoir comment implémenter la surveillance de l’intégrité dans votre application, consultez [Modèle Surveillance de point de terminaison](../patterns/health-endpoint-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="acfb8-166">For guidance on implementing health monitoring in your application, see [Health Endpoint Monitoring pattern](../patterns/health-endpoint-monitoring.md).</span></span>

## <a name="test-monitoring-systems"></a><span data-ttu-id="acfb8-167">Tester des systèmes de surveillance</span><span class="sxs-lookup"><span data-stu-id="acfb8-167">Test monitoring systems</span></span>

<span data-ttu-id="acfb8-168">Inclure des systèmes de surveillance dans votre plan de test.</span><span class="sxs-lookup"><span data-stu-id="acfb8-168">Include monitoring systems in your test plan.</span></span> <span data-ttu-id="acfb8-169">Systèmes automatisés de basculement et la restauration automatique varient selon le bon fonctionnement de la surveillance et l’instrumentation.</span><span class="sxs-lookup"><span data-stu-id="acfb8-169">Automated failover and failback systems depend on the correct functioning of monitoring and instrumentation.</span></span> <span data-ttu-id="acfb8-170">Tableaux de bord pour visualiser les alertes d’intégrité et l’opérateur système dépendre également ayant suivi précis et l’instrumentation.</span><span class="sxs-lookup"><span data-stu-id="acfb8-170">Dashboards to visualize system health and operator alerts also depend on having accurate monitoring and instrumentation.</span></span> <span data-ttu-id="acfb8-171">Si ces éléments subissent des défaillances, laissent échapper des informations critiques ou signalent des données inexactes, l’opérateur peut ne pas avoir connaissance du défaut d’intégrité ou de la défaillance du système.</span><span class="sxs-lookup"><span data-stu-id="acfb8-171">If these elements fail, miss critical information, or report inaccurate data, an operator might not realize that the system is unhealthy or failing.</span></span>

## <a name="include-third-party-services-in-test-scenarios"></a><span data-ttu-id="acfb8-172">Inclure des services tiers dans les scénarios de test</span><span class="sxs-lookup"><span data-stu-id="acfb8-172">Include third-party services in test scenarios</span></span>

<span data-ttu-id="acfb8-173">Si votre application a des dépendances sur les services tiers, identifier l’emplacement où et comment ces services peuvent échouer et les effets que ces échecs auront sur votre application.</span><span class="sxs-lookup"><span data-stu-id="acfb8-173">If your application has dependencies on third-party services, identify where and how these services can fail and what effect those failures will have on your application.</span></span> <span data-ttu-id="acfb8-174">N’oubliez pas le contrat de niveau de service (SLA) pour le service tiers et l’effet qu'est peut-être sur votre plan de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="acfb8-174">Keep in mind the service-level agreement (SLA) for the third-party service and the effect it might have on your disaster recovery plan.</span></span>

<span data-ttu-id="acfb8-175">Un service tiers peut ne pas fournit des fonctionnalités de surveillance et de diagnostic, par conséquent, il est important de se connecter à vos appels de ces et de les mettre en corrélation avec l’intégrité de votre application et de diagnostic de journalisation à l’aide d’un identificateur unique.</span><span class="sxs-lookup"><span data-stu-id="acfb8-175">A third-party service might not provide monitoring and diagnostics capabilities, so it's important to log your invocations of them and to correlate them with your application's health and diagnostic logging using a unique identifier.</span></span> <span data-ttu-id="acfb8-176">Pour plus d’informations sur des pratiques éprouvées pour la surveillance et diagnostics, consultez [Guide de surveillance et diagnostics](../best-practices/monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="acfb8-176">For more information on proven practices for monitoring and diagnostics, see [Monitoring and diagnostics guidance](../best-practices/monitoring.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="acfb8-177">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="acfb8-177">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="acfb8-178">Déployer pour la résilience et disponibilité</span><span class="sxs-lookup"><span data-stu-id="acfb8-178">Deploy for resiliency and availability</span></span>](./deploy.md)
