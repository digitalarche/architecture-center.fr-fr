---
title: Application web serverless
description: Architecture de référence qui montre une application web serverless et l’API web
author: MikeWasson
ms.date: 10/16/2018
ms.openlocfilehash: 9263c8bec794e4b2bb9f397289b23307eb02f0c7
ms.sourcegitcommit: 19a517a2fb70768b3edb9a7c3c37197baa61d9b5
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/26/2018
ms.locfileid: "52295682"
---
# <a name="serverless-web-application"></a><span data-ttu-id="66e70-103">Application web serverless</span><span class="sxs-lookup"><span data-stu-id="66e70-103">Serverless web application</span></span> 

<span data-ttu-id="66e70-104">Cette architecture de référence montre une application web [serverless](https://azure.microsoft.com/solutions/serverless/).</span><span class="sxs-lookup"><span data-stu-id="66e70-104">This reference architecture shows a [serverless](https://azure.microsoft.com/solutions/serverless/) web application.</span></span> <span data-ttu-id="66e70-105">L’application gère le contenu statique à partir de Stockage Blob Azure et implémente une API à l’aide d’Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="66e70-105">The application serves static content from Azure Blob Storage, and implements an API using Azure Functions.</span></span> <span data-ttu-id="66e70-106">L’API lit les données à partir de Cosmos DB et renvoie les résultats à l’application web.</span><span class="sxs-lookup"><span data-stu-id="66e70-106">The API reads data from Cosmos DB and returns the results to the web app.</span></span> <span data-ttu-id="66e70-107">Une implémentation de référence pour cette architecture est disponible sur [GitHub][github].</span><span class="sxs-lookup"><span data-stu-id="66e70-107">A reference implementation for this architecture is available on [GitHub][github].</span></span>

![](./_images/serverless-web-app.png)
 
<span data-ttu-id="66e70-108">Le terme « serverless » a deux significations distinctes mais liées :</span><span class="sxs-lookup"><span data-stu-id="66e70-108">The term serverless has two distinct but related meanings:</span></span>

- <span data-ttu-id="66e70-109">**Serveur principal en tant que service** (BaaS).</span><span class="sxs-lookup"><span data-stu-id="66e70-109">**Backend as a service** (BaaS).</span></span> <span data-ttu-id="66e70-110">Les services cloud principaux, tels que les bases de données et de stockage, fournissent des API qui permettent aux applications clientes de se connecter directement à ces services.</span><span class="sxs-lookup"><span data-stu-id="66e70-110">Backend cloud services, such as databases and storage, provide APIs that enable client applications to connect directly to these services.</span></span> 
- <span data-ttu-id="66e70-111">**Fonctions en tant que service** (FaaS).</span><span class="sxs-lookup"><span data-stu-id="66e70-111">**Functions as a service** (FaaS).</span></span> <span data-ttu-id="66e70-112">Dans ce modèle, une « fonction » est un morceau de code qui est déployé sur le cloud et s’exécute au sein d’un environnement d’hébergement qui résume complètement les serveurs qui exécutent le code.</span><span class="sxs-lookup"><span data-stu-id="66e70-112">In this model, a "function" is a piece of code that is deployed to the cloud and runs inside a hosting environment that completely abstracts the servers that run the code.</span></span> 

<span data-ttu-id="66e70-113">Les deux définitions ont en commun l’idée que les développeurs et le personnel DevOps n’ont pas besoin de déployer, configurer ou gérer des serveurs.</span><span class="sxs-lookup"><span data-stu-id="66e70-113">Both definitions have in common the idea that developers and DevOps personnel don't need to deploy, configure, or manage servers.</span></span> <span data-ttu-id="66e70-114">Cette architecture de référence se concentre sur FaaS en utilisant d’Azure Functions, bien que la diffusion de contenu web à partir de Stockage Blob Azure soit un exemple de BaaS.</span><span class="sxs-lookup"><span data-stu-id="66e70-114">This reference architecture focuses on FaaS using Azure Functions, although serving web content from Azure Blob Storage is an example of BaaS.</span></span> <span data-ttu-id="66e70-115">Certaines caractéristiques importantes de FaaS sont :</span><span class="sxs-lookup"><span data-stu-id="66e70-115">Some important characteristics of FaaS are:</span></span>

1. <span data-ttu-id="66e70-116">Les ressources de calcul sont allouées de façon dynamique en fonction des besoins de la plateforme.</span><span class="sxs-lookup"><span data-stu-id="66e70-116">Compute resources are allocated dynamically as needed by the platform.</span></span>
1. <span data-ttu-id="66e70-117">Tarification basée sur la consommation : vous êtes facturé uniquement pour les ressources de calcul utilisées pour exécuter votre code.</span><span class="sxs-lookup"><span data-stu-id="66e70-117">Consumption-based pricing: You are charged only for the compute resources used to execute your code.</span></span>
1. <span data-ttu-id="66e70-118">Les ressources de calcul évoluent à la demande en fonction du trafic, sans que le développeur n’ait à effectuer de configuration.</span><span class="sxs-lookup"><span data-stu-id="66e70-118">The compute resources scale on demand based on traffic, without the developer needing to do any configuration.</span></span>

<span data-ttu-id="66e70-119">Les fonctions sont exécutées lorsqu’un déclencheur externe se produit, par exemple une requête HTTP ou un message arrive sur une file d’attente.</span><span class="sxs-lookup"><span data-stu-id="66e70-119">Functions are executed when an external trigger occurs, such as an HTTP request or a message arriving on a queue.</span></span> <span data-ttu-id="66e70-120">Cela crée un [style d’architecture basée sur les événements] [ event-driven] qui est naturel pour les architectures serverless.</span><span class="sxs-lookup"><span data-stu-id="66e70-120">This makes an [event-driven architecture style][event-driven] natural for serverless architectures.</span></span> <span data-ttu-id="66e70-121">Pour coordonner le travail entre les composants de l’architecture, envisagez d’utiliser des répartiteurs de messages ou des modèles pub/sub.</span><span class="sxs-lookup"><span data-stu-id="66e70-121">To coordinate work between components in the architecture, consider using message brokers or pub/sub patterns.</span></span> <span data-ttu-id="66e70-122">Pour faciliter le choix entre les technologies de messagerie dans Azure, consultez [Choisir entre des services Azure qui envoient des messages][azure-messaging].</span><span class="sxs-lookup"><span data-stu-id="66e70-122">For help choosing between messaging technologies in Azure, see [Choose between Azure services that deliver messages][azure-messaging].</span></span>

## <a name="architecture"></a><span data-ttu-id="66e70-123">Architecture</span><span class="sxs-lookup"><span data-stu-id="66e70-123">Architecture</span></span>
<span data-ttu-id="66e70-124">L’architecture est constituée des composants suivants.</span><span class="sxs-lookup"><span data-stu-id="66e70-124">The architecture consists of the following components.</span></span>

<span data-ttu-id="66e70-125">**Stockage d'objets blob**.</span><span class="sxs-lookup"><span data-stu-id="66e70-125">**Blob Storage**.</span></span> <span data-ttu-id="66e70-126">Le contenu web statique, tels que les fichiers HTML, CSS et JavaScript, sont stockés dans le Stockage Blob Azure et pris en charge pour les clients en utilisant [l’hébergement de site web statique][static-hosting].</span><span class="sxs-lookup"><span data-stu-id="66e70-126">Static web content, such as HTML, CSS, and JavaScript files, are stored in Azure Blob Storage and served to clients by using [static website hosting][static-hosting].</span></span> <span data-ttu-id="66e70-127">Toute interaction dynamique se produit par le biais du code JavaScript en passant des appels vers le serveur principal des API.</span><span class="sxs-lookup"><span data-stu-id="66e70-127">All dynamic interaction happens through JavaScript code making calls to the backend APIs.</span></span> <span data-ttu-id="66e70-128">Il n’existe aucun code côté serveur pour restituer la page web.</span><span class="sxs-lookup"><span data-stu-id="66e70-128">There is no server-side code to render the web page.</span></span> <span data-ttu-id="66e70-129">Les supports d’hébergement de site web statique indexent les documents et les pages d’erreurs 404 personnalisées.</span><span class="sxs-lookup"><span data-stu-id="66e70-129">Static website hosting supports index documents and custom 404 error pages.</span></span>

> [!NOTE]
> <span data-ttu-id="66e70-130">L’hébergement de site web statique est actuellement en [aperçu][static-hosting-preview].</span><span class="sxs-lookup"><span data-stu-id="66e70-130">Static website hosting is currently in [preview][static-hosting-preview].</span></span>

<span data-ttu-id="66e70-131">**CDN**.</span><span class="sxs-lookup"><span data-stu-id="66e70-131">**CDN**.</span></span> <span data-ttu-id="66e70-132">Utilisez [Azure Content Delivery Network][cdn] (CDN) pour mettre en cache le contenu afin de réduire la latence et fournir un point de terminaison HTTPS.</span><span class="sxs-lookup"><span data-stu-id="66e70-132">Use [Azure Content Delivery Network][cdn] (CDN) to cache content for lower latency and faster delivery of content, as well as providing an HTTPS endpoint.</span></span>

<span data-ttu-id="66e70-133">**Applications de fonction**.</span><span class="sxs-lookup"><span data-stu-id="66e70-133">**Function Apps**.</span></span> <span data-ttu-id="66e70-134">[Azure Functions][functions] est une solution de calcul serverless.</span><span class="sxs-lookup"><span data-stu-id="66e70-134">[Azure Functions][functions] is a serverless compute option.</span></span> <span data-ttu-id="66e70-135">Cette application utilise un modèle basé sur les événements, dans lequel un morceau de code (une « fonction ») est invoqué par un déclencheur.</span><span class="sxs-lookup"><span data-stu-id="66e70-135">It uses an event-driven model, where a piece of code (a "function") is invoked by a trigger.</span></span> <span data-ttu-id="66e70-136">Dans cette architecture, la fonction est appelée lorsqu’un client effectue une requête HTTP.</span><span class="sxs-lookup"><span data-stu-id="66e70-136">In this architecture, the function is invoked when a client makes an HTTP request.</span></span> <span data-ttu-id="66e70-137">La requête est toujours acheminée via une passerelle d’API, décrite ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="66e70-137">The request is always routed through an API gateway, described below.</span></span>

<span data-ttu-id="66e70-138">**Gestion des API**.</span><span class="sxs-lookup"><span data-stu-id="66e70-138">**API Management**.</span></span> <span data-ttu-id="66e70-139">[Gestion des API ] [ apim] fournit une passerelle API qui se trouve devant la fonction HTTP.</span><span class="sxs-lookup"><span data-stu-id="66e70-139">[API Management][apim] provides a API gateway that sits in front of the HTTP function.</span></span> <span data-ttu-id="66e70-140">Vous pouvez utiliser Gestion des API pour publier et gérer les API utilisées par les applications clientes.</span><span class="sxs-lookup"><span data-stu-id="66e70-140">You can use API Management to publish and manage APIs used by client applications.</span></span> <span data-ttu-id="66e70-141">Utiliser une passerelle permet de découpler l’application frontale à partir des API du serveur principal.</span><span class="sxs-lookup"><span data-stu-id="66e70-141">Using a gateway helps to decouple the front-end application from the back-end APIs.</span></span> <span data-ttu-id="66e70-142">Par exemple, Gestion des API peut réécrire des URL, transformer des requêtes avant qu’elles atteignent le serveur principal, définir les en-têtes de requête ou de réponse et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="66e70-142">For example, API Management can rewrite URLs, transform requests before they reach the backend, set request or response headers, and so forth.</span></span>

<span data-ttu-id="66e70-143">Gestion des API peut également servir à implémenter des problèmes transversaux tels que :</span><span class="sxs-lookup"><span data-stu-id="66e70-143">API Management can also be used to implement cross-cutting concerns such as:</span></span>

- <span data-ttu-id="66e70-144">Appliquer des quotas d’utilisation et des limites de débit</span><span class="sxs-lookup"><span data-stu-id="66e70-144">Enforcing usage quotas and rate limits</span></span>
- <span data-ttu-id="66e70-145">Valider des jetons OAuth pour l’authentification</span><span class="sxs-lookup"><span data-stu-id="66e70-145">Validating OAuth tokens for authentication</span></span>
- <span data-ttu-id="66e70-146">Activer des requêtes de Cross-Origin (CORS)</span><span class="sxs-lookup"><span data-stu-id="66e70-146">Enabling cross-origin requests (CORS)</span></span>
- <span data-ttu-id="66e70-147">Mise en cache des réponses</span><span class="sxs-lookup"><span data-stu-id="66e70-147">Caching responses</span></span>
- <span data-ttu-id="66e70-148">Suivi et enregistrement des requêtes</span><span class="sxs-lookup"><span data-stu-id="66e70-148">Monitoring and logging requests</span></span>  

<span data-ttu-id="66e70-149">Si vous n’avez pas besoin de toutes les fonctionnalités fournies par Gestion des API, une autre option consiste à utiliser [Functions Proxies][functions-proxy].</span><span class="sxs-lookup"><span data-stu-id="66e70-149">If you don't need all of the functionality provided by API Management, another option is to use [Functions Proxies][functions-proxy].</span></span> <span data-ttu-id="66e70-150">Cette fonctionnalité d’Azure Functions vous permet de définir une surface d’API unique pour plusieurs applications de fonction en créant des itinéraires pour les fonctions du serveur principal.</span><span class="sxs-lookup"><span data-stu-id="66e70-150">This feature of Azure Functions lets you define a single API surface for multiple function apps, by creating routes to back-end functions.</span></span> <span data-ttu-id="66e70-151">Function Proxies peut également effectuer des transformations limitées sur la requête HTTP et la réponse.</span><span class="sxs-lookup"><span data-stu-id="66e70-151">Function proxies can also perform limited transformations on the HTTP request and response.</span></span> <span data-ttu-id="66e70-152">Toutefois, cette fonctionnalité ne fournit pas les capacités étendues basées sur la stratégie que l’on retrouve dans Gestion des API.</span><span class="sxs-lookup"><span data-stu-id="66e70-152">However, they don't provide the same rich policy-based capabilities of API Management.</span></span>

<span data-ttu-id="66e70-153">**Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="66e70-153">**Cosmos DB**.</span></span> <span data-ttu-id="66e70-154">[Cosmos DB][cosmosdb] est un service de base de données multimodèle.</span><span class="sxs-lookup"><span data-stu-id="66e70-154">[Cosmos DB][cosmosdb] is a multi-model database  service.</span></span> <span data-ttu-id="66e70-155">Pour ce scénario, l’application de fonction récupère les documents à partir de Cosmos DB en réponse aux requêtes HTTP GET provenant du client.</span><span class="sxs-lookup"><span data-stu-id="66e70-155">For this scenario, the function application fetches documents from Cosmos DB in response to HTTP GET requests from the client.</span></span>

<span data-ttu-id="66e70-156">**Azure Active Directory** (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="66e70-156">**Azure Active Directory** (Azure AD).</span></span> <span data-ttu-id="66e70-157">Les utilisateurs se connectent à l’application web à l’aide de leurs informations d’identification Azure AD.</span><span class="sxs-lookup"><span data-stu-id="66e70-157">Users sign into the web application by using their Azure AD credentials.</span></span> <span data-ttu-id="66e70-158">Azure AD envoie un jeton d’accès pour l’API, que l’application web utilise pour authentifier les requêtes d’API (consultez [Authentification](#authentication)).</span><span class="sxs-lookup"><span data-stu-id="66e70-158">Azure AD returns an access token for the API, which the web application uses to authenticate API requests (see [Authentication](#authentication)).</span></span>

<span data-ttu-id="66e70-159">**Azure Monitor**.</span><span class="sxs-lookup"><span data-stu-id="66e70-159">**Azure Monitor**.</span></span> <span data-ttu-id="66e70-160">[Monitor][monitor] collecte les mesures de performances concernant les services Azure déployés dans la solution.</span><span class="sxs-lookup"><span data-stu-id="66e70-160">[Monitor][monitor] collects performance metrics about the Azure services deployed in the solution.</span></span> <span data-ttu-id="66e70-161">En les visualisant dans un tableau de bord, vous pouvez obtenir des informations sur l’intégrité de la solution.</span><span class="sxs-lookup"><span data-stu-id="66e70-161">By visualizing these in a dashboard, you can get visibility into the health of the solution.</span></span> <span data-ttu-id="66e70-162">Les journaux des applications sont également collectés.</span><span class="sxs-lookup"><span data-stu-id="66e70-162">It also collected application logs.</span></span>

<span data-ttu-id="66e70-163">**Azure Pipelines**.</span><span class="sxs-lookup"><span data-stu-id="66e70-163">**Azure Pipelines**.</span></span> <span data-ttu-id="66e70-164">[Pipelines] [ pipelines] est un service d’intégration continue (CI) et de livraison continue (CD) qui génère, teste et déploie l’application.</span><span class="sxs-lookup"><span data-stu-id="66e70-164">[Pipelines][pipelines] is a continuous integration (CI) and continuous delivery (CD) service that builds, tests, and deploys the application.</span></span>

## <a name="recommendations"></a><span data-ttu-id="66e70-165">Recommandations</span><span class="sxs-lookup"><span data-stu-id="66e70-165">Recommendations</span></span>

### <a name="function-app-plans"></a><span data-ttu-id="66e70-166">Plans de l’Application de fonction</span><span class="sxs-lookup"><span data-stu-id="66e70-166">Function App plans</span></span>

<span data-ttu-id="66e70-167">Azure Functions prend en charge deux modèles d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="66e70-167">Azure Functions supports two hosting models.</span></span> <span data-ttu-id="66e70-168">Avec le **plan Consommation**, la puissance de calcul est allouée automatiquement lors de l’exécution de votre code.</span><span class="sxs-lookup"><span data-stu-id="66e70-168">With the **consumption plan**, compute power is automatically allocated when your code is running.</span></span>  <span data-ttu-id="66e70-169">Avec le plan **App Service**, un ensemble de machines virtuelles (VM) sont allouées pour votre code.</span><span class="sxs-lookup"><span data-stu-id="66e70-169">With the **App Service** plan, a set of VMs are allocated for your code.</span></span> <span data-ttu-id="66e70-170">Le plan App Service définit la taille des machines virtuelles et leur nombre.</span><span class="sxs-lookup"><span data-stu-id="66e70-170">The App Service plan defines the number of VMs and the VM size.</span></span> 

<span data-ttu-id="66e70-171">Notez que le plan App Service n’est pas exactement *serverless*, selon la définition donnée ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="66e70-171">Note that the App Service plan is not strictly *serverless*, according to the definition given above.</span></span> <span data-ttu-id="66e70-172">Le modèle de programmation est identique, toutefois, &mdash; le même code de fonction peut s’exécuter à la fois dans un plan de consommation et dans un plan App Service.</span><span class="sxs-lookup"><span data-stu-id="66e70-172">The programming model is the same, however &mdash; the same function code can run in both a consumption plan and an App Service plan.</span></span>

<span data-ttu-id="66e70-173">Voici quelques facteurs à prendre en compte lorsque vous choisissez le type de plan à utiliser :</span><span class="sxs-lookup"><span data-stu-id="66e70-173">Here are some factors to consider when choosing which type of plan to use:</span></span>

- <span data-ttu-id="66e70-174">**Démarrage à froid**.</span><span class="sxs-lookup"><span data-stu-id="66e70-174">**Cold start**.</span></span> <span data-ttu-id="66e70-175">Avec le plan de consommation, une fonction qui n’a pas été appelée récemment entraîne une latence supplémentaire lors de sa prochaine exécution.</span><span class="sxs-lookup"><span data-stu-id="66e70-175">With the consumption plan, a function that hasn't been invoked recently will incur some additional latency the next time it runs.</span></span> <span data-ttu-id="66e70-176">Cette latence supplémentaire est due à l’allocation et à la préparation de l’environnement runtime.</span><span class="sxs-lookup"><span data-stu-id="66e70-176">This additional latency is due to allocating and preparing the runtime environment.</span></span> <span data-ttu-id="66e70-177">Elle est généralement de l’ordre de quelques secondes, mais cela dépend de plusieurs facteurs, notamment du nombre de dépendances qui doivent être chargées.</span><span class="sxs-lookup"><span data-stu-id="66e70-177">It is usually on the order of seconds but depends on several factors, including the number of dependencies that need to be loaded.</span></span> <span data-ttu-id="66e70-178">Pour plus d’informations, consultez [Comprendre le démarrage à froid serverless ][functions-cold-start].</span><span class="sxs-lookup"><span data-stu-id="66e70-178">For more information, see [Understanding Serverless Cold Start][functions-cold-start].</span></span> <span data-ttu-id="66e70-179">En général, le démarrage à froid est un critère plus important pour les charges de travail interactives (déclencheurs HTTP) que pour les charges de travail asynchrones pilotées par messages (déclencheurs file d’attente ou Event Hubs), car la latence supplémentaire est directement observée par les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="66e70-179">Cold start is usually more of a concern for interactive workloads (HTTP triggers) than asynchronous message-driven workloads (queue or event hubs triggers), because the additional latency is directly observed by users.</span></span>
- <span data-ttu-id="66e70-180">**Délai d’expiration**.</span><span class="sxs-lookup"><span data-stu-id="66e70-180">**Timeout period**.</span></span>  <span data-ttu-id="66e70-181">Dans le plan de consommation, le délai d’attente de l’exécution d’une fonction arrive à expiration après une[ période ][functions-timeout]configurable (jusqu’à 10 minutes maximum)</span><span class="sxs-lookup"><span data-stu-id="66e70-181">In the consumption plan, a function execution times out after a [configurable][functions-timeout] period of time (to a maximum of 10 minutes)</span></span>
- <span data-ttu-id="66e70-182">**Isolement du réseau virtuel**.</span><span class="sxs-lookup"><span data-stu-id="66e70-182">**Virtual network isolation**.</span></span> <span data-ttu-id="66e70-183">Utiliser un plan App Service permet aux fonctions de s’exécuter à l’intérieur d’un [Environnement App Service][ase], qui est un environnement d’hébergement dédié et isolé.</span><span class="sxs-lookup"><span data-stu-id="66e70-183">Using an App Service plan allows functions to run inside of an [App Service Environment][ase], which is a dedicated and isolated hosting environment.</span></span>
- <span data-ttu-id="66e70-184">**Modèle de tarification**.</span><span class="sxs-lookup"><span data-stu-id="66e70-184">**Pricing model**.</span></span> <span data-ttu-id="66e70-185">Le plan de consommation est facturé en fonction du nombre d’exécutions et de la consommation des ressources (mémoire &times; temps d’exécution).</span><span class="sxs-lookup"><span data-stu-id="66e70-185">The consumption plan is billed by the number of executions and resource consumption (memory &times; execution time).</span></span> <span data-ttu-id="66e70-186">Le plan App Service est facturé au taux horaire basé sur l’instance de machine virtuelle SKU.</span><span class="sxs-lookup"><span data-stu-id="66e70-186">The App Service plan is billed hourly based on VM instance SKU.</span></span> <span data-ttu-id="66e70-187">Souvent, le plan de consommation peut être moins cher qu’un plan App Service, car vous payez uniquement pour les ressources de calcul que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="66e70-187">Often, the consumption plan can be cheaper than an App Service plan, because you pay only for the compute resources that you use.</span></span> <span data-ttu-id="66e70-188">Cela est particulièrement vrai si votre trafic est sujet à des hauts et des bas.</span><span class="sxs-lookup"><span data-stu-id="66e70-188">This is especially true if your traffic experiences peaks and troughs.</span></span> <span data-ttu-id="66e70-189">Toutefois, si une application rencontre des constantes de débit élevées, un plan App Service peut coûter moins cher que le plan de consommation.</span><span class="sxs-lookup"><span data-stu-id="66e70-189">However, if an application experiences constant high-volume throughput, an App Service plan may cost less than the consumption plan.</span></span>
- <span data-ttu-id="66e70-190">**Mise à l’échelle**.</span><span class="sxs-lookup"><span data-stu-id="66e70-190">**Scaling**.</span></span> <span data-ttu-id="66e70-191">Le gros avantage du modèle de consommation est qu’il s’adapte de façon dynamique, selon le trafic entrant.</span><span class="sxs-lookup"><span data-stu-id="66e70-191">A big advantage of the consumption model is that it scales dynamically as needed, based on the incoming traffic.</span></span> <span data-ttu-id="66e70-192">Cette mise à l’échelle se produit rapidement, mais il existe toujours une période de démarrage.</span><span class="sxs-lookup"><span data-stu-id="66e70-192">While this scaling occurs quickly, there is still a ramp-up period.</span></span> <span data-ttu-id="66e70-193">Pour certaines charges de travail, vous pouvez délibérément fournir un excédent de budget pour les machines virtuelles, afin de gérer les pics de trafic sans aucune période de démarrage.</span><span class="sxs-lookup"><span data-stu-id="66e70-193">For some workloads, you might want to deliberately overprovision the VMs, so that you can handle bursts of traffic with zero ramp-up time.</span></span> <span data-ttu-id="66e70-194">Dans ce cas, envisagez un plan App Service.</span><span class="sxs-lookup"><span data-stu-id="66e70-194">In that case, consider an App Service plan.</span></span>

### <a name="function-app-boundaries"></a><span data-ttu-id="66e70-195">Limites de l’Application de fonction</span><span class="sxs-lookup"><span data-stu-id="66e70-195">Function App boundaries</span></span>

<span data-ttu-id="66e70-196">Une *application de fonction* héberge l’exécution d’une ou plusieurs *fonctions*.</span><span class="sxs-lookup"><span data-stu-id="66e70-196">A *function app* hosts the execution of one or more *functions*.</span></span> <span data-ttu-id="66e70-197">Vous pouvez utiliser une application de fonction pour regrouper plusieurs fonctions comme une unité logique.</span><span class="sxs-lookup"><span data-stu-id="66e70-197">You can use a function app to group several functions together as a logical unit.</span></span> <span data-ttu-id="66e70-198">Au sein d’une application de fonction, les fonctions partagent les mêmes paramètres d’application, hébergeant le plan et le cycle de vie de déploiement.</span><span class="sxs-lookup"><span data-stu-id="66e70-198">Within a function app, the functions share the same application settings, hosting plan, and deployment lifecycle.</span></span> <span data-ttu-id="66e70-199">Chaque application de fonction possède son propre nom d’hôte.</span><span class="sxs-lookup"><span data-stu-id="66e70-199">Each function app has its own hostname.</span></span>  

<span data-ttu-id="66e70-200">Utilisez des applications de fonction pour grouper des fonctions qui partagent le même cycle de vie et les mêmes paramètres.</span><span class="sxs-lookup"><span data-stu-id="66e70-200">Use function apps to group functions that share the same lifecycle and settings.</span></span> <span data-ttu-id="66e70-201">Les fonctions qui ne partagent pas le même cycle de vie doivent être hébergées dans les applications de fonction différente.</span><span class="sxs-lookup"><span data-stu-id="66e70-201">Functions that don't share the same lifecycle should be hosted in different function apps.</span></span> 

<span data-ttu-id="66e70-202">Envisagez une approche de microservices, où chaque application de fonction représente un microservice, qui se compose éventuellement de plusieurs fonctions connexes.</span><span class="sxs-lookup"><span data-stu-id="66e70-202">Consider taking a microservices approach, where each function app represents one microservice, possibly consisting of several related functions.</span></span> <span data-ttu-id="66e70-203">Dans une architecture de microservices, le couplage entre les services doit être souple et leur cohésion fonctionnelle élevée.</span><span class="sxs-lookup"><span data-stu-id="66e70-203">In a microservices architecture, services should have loose coupling and high functional cohesion.</span></span> <span data-ttu-id="66e70-204">*Couplés de façon souple* signifie que vous pouvez changer un service sans avoir à mettre à jour d’autres services au même moment.</span><span class="sxs-lookup"><span data-stu-id="66e70-204">*Loosely* coupled means you can change one service without requiring other services to be updated at the same time.</span></span> <span data-ttu-id="66e70-205">*Cohésif* signifie qu’un service a un usage unique et bien défini.</span><span class="sxs-lookup"><span data-stu-id="66e70-205">*Cohesive* means a service has a single, well-defined purpose.</span></span> <span data-ttu-id="66e70-206">Pour plus d’informations sur ces notions, consultez [Conception de microservices : analyse de domaine][microservices-domain-analysis].</span><span class="sxs-lookup"><span data-stu-id="66e70-206">For more discussion of these ideas, see [Designing microservices: Domain analysis][microservices-domain-analysis].</span></span>

### <a name="function-bindings"></a><span data-ttu-id="66e70-207">Liaisons de fonction</span><span class="sxs-lookup"><span data-stu-id="66e70-207">Function bindings</span></span>

<span data-ttu-id="66e70-208">Utilisez des [liaisons] [ functions-bindings]de fonctions lorsque cela est possible.</span><span class="sxs-lookup"><span data-stu-id="66e70-208">Use Functions [bindings][functions-bindings] when possible.</span></span> <span data-ttu-id="66e70-209">Les liaisons fournissent une méthode déclarative pour connecter votre code aux données et l’intégrer à d’autres services Azure.</span><span class="sxs-lookup"><span data-stu-id="66e70-209">Bindings provide a declarative way to connect your code to data and integrate with other Azure services.</span></span> <span data-ttu-id="66e70-210">Une liaison d’entrée remplit un paramètre d’entrée à partir de la source de données externe.</span><span class="sxs-lookup"><span data-stu-id="66e70-210">An input binding populates an input parameter from an external data source.</span></span> <span data-ttu-id="66e70-211">Une liaison de sortie envoie la valeur de retour de la fonction à un récepteur de données, tel qu’une file d’attente ou une base de données.</span><span class="sxs-lookup"><span data-stu-id="66e70-211">An output binding sends the function's return value to a data sink, such as a queue or database.</span></span>

<span data-ttu-id="66e70-212">Par exemple, la `GetStatus` fonction de l’implémentation de référence utilise la [liaison d’entrée][cosmosdb-input-binding]Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="66e70-212">For example, the `GetStatus` function in the reference implementation uses the Cosmos DB [input binding][cosmosdb-input-binding].</span></span> <span data-ttu-id="66e70-213">Cette liaison est configurée pour rechercher un document dans Cosmos DB, à l’aide des paramètres de requête qui sont extraits de la chaîne de requête dans la requête HTTP.</span><span class="sxs-lookup"><span data-stu-id="66e70-213">This binding is configured to look up a document in Cosmos DB, using query parameters that are taken from the query string in the HTTP request.</span></span> <span data-ttu-id="66e70-214">Si le document est trouvé, il est passé à la fonction en tant que paramètre.</span><span class="sxs-lookup"><span data-stu-id="66e70-214">If the document is found, it is passed to the function as a parameter.</span></span>

```csharp
[FunctionName("GetStatusFunction")]
public static Task<IActionResult> Run(
    [HttpTrigger(AuthorizationLevel.Function, "get", Route = null)] HttpRequest req, 
    [CosmosDB(
        databaseName: "%COSMOSDB_DATABASE_NAME%",
        collectionName: "%COSMOSDB_DATABASE_COL%",
        ConnectionStringSetting = "COSMOSDB_CONNECTION_STRING",
        Id = "{Query.deviceId}",
        PartitionKey = "{Query.deviceId}")] dynamic deviceStatus, 
    ILogger log)
{
    ...
}
```

<span data-ttu-id="66e70-215">En utilisant des liaisons, vous n’avez pas besoin d’écrire un code qui communique directement avec le service, ce qui simplifie le code de fonction et résume les détails de la source de données ou du récepteur.</span><span class="sxs-lookup"><span data-stu-id="66e70-215">By using bindings, you don't need to write code that talks directly to the service, which makes the function code simpler and also abstracts the details of the data source or sink.</span></span> <span data-ttu-id="66e70-216">Toutefois, dans certains cas, vous aurez peut-être besoin d’une logique plus complexe que celle fournie par la liaison.</span><span class="sxs-lookup"><span data-stu-id="66e70-216">In some cases, however, you may need more complex logic than the binding provides.</span></span> <span data-ttu-id="66e70-217">Dans ce cas, utilisez directement le client Azure SDK.</span><span class="sxs-lookup"><span data-stu-id="66e70-217">In that case, use the Azure client SDKs directly.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="66e70-218">Considérations relatives à l’extensibilité</span><span class="sxs-lookup"><span data-stu-id="66e70-218">Scalability considerations</span></span>

<span data-ttu-id="66e70-219">**Fonctions**.</span><span class="sxs-lookup"><span data-stu-id="66e70-219">**Functions**.</span></span> <span data-ttu-id="66e70-220">Pour le plan de consommation, le déclencheur HTTP met à l’échelle en fonction du trafic.</span><span class="sxs-lookup"><span data-stu-id="66e70-220">For the consumption plan, the HTTP trigger scales based on the traffic.</span></span> <span data-ttu-id="66e70-221">Il existe une limite au nombre d’instances de fonction simultanées, mais chaque instance peut traiter plusieurs requêtes à la fois.</span><span class="sxs-lookup"><span data-stu-id="66e70-221">There is a limit to the number of concurrent function instances, but each instance can process more than one request at a time.</span></span> <span data-ttu-id="66e70-222">Pour un plan App Service, le déclencheur HTTP met à l’échelle en fonction du nombre d’instances de machine virtuelle, qui peut être une valeur fixe ou une mise à l’échelle automatique basée sur un ensemble de règles de mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="66e70-222">For an App Service plan, the HTTP trigger scales according to the number of VM instances, which can be a fixed value or can autoscale based on a set of autoscaling rules.</span></span> <span data-ttu-id="66e70-223">Pour plus d’informations, consultez [Échelle et hébergement dans Azure Functions][functions-scale].</span><span class="sxs-lookup"><span data-stu-id="66e70-223">For information, see [Azure Functions scale and hosting][functions-scale].</span></span> 

<span data-ttu-id="66e70-224">**Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="66e70-224">**Cosmos DB**.</span></span> <span data-ttu-id="66e70-225">La capacité de débit pour Cosmos DB est mesurée en [unités de requête][ru] (RU).</span><span class="sxs-lookup"><span data-stu-id="66e70-225">Throughput capacity for Cosmos DB is measured in [Request Units][ru] (RU).</span></span> <span data-ttu-id="66e70-226">Un débit de 1 RU correspond au besoin d’un débit de la requête GET d’un document de 1 Ko.</span><span class="sxs-lookup"><span data-stu-id="66e70-226">A 1-RU throughput corresponds to the throughput need to GET a 1KB document.</span></span> <span data-ttu-id="66e70-227">Pour mettre à l’échelle un conteneur Cosmos DB au-delà de 10 000 RU, vous devez spécifier une [clé de partition][partition-key] lorsque vous créez le conteneur, puis inclure la clé de partition dans chaque document que vous créez.</span><span class="sxs-lookup"><span data-stu-id="66e70-227">In order to scale a Cosmos DB container past 10,000 RU, you must specify a [partition key][partition-key] when you create the container and include the partition key in every document that you create.</span></span> <span data-ttu-id="66e70-228">Pour plus d’informations sur les clés de partition, voir [Partition et mise à l’échelle dans Azure Cosmos DB][cosmosdb-scale].</span><span class="sxs-lookup"><span data-stu-id="66e70-228">For more information about partition keys, see [Partition and scale in Azure Cosmos DB][cosmosdb-scale].</span></span>

<span data-ttu-id="66e70-229">**Gestion des API**.</span><span class="sxs-lookup"><span data-stu-id="66e70-229">**API Management**.</span></span> <span data-ttu-id="66e70-230">Gestion des API peut augmenter la taille des instances et prend en charge la mise à l’échelle basée sur une règle.</span><span class="sxs-lookup"><span data-stu-id="66e70-230">API Management can scale out and supports rule-based autoscaling.</span></span> <span data-ttu-id="66e70-231">Notez que le processus de mise à l’échelle prend au moins 20 minutes.</span><span class="sxs-lookup"><span data-stu-id="66e70-231">Note that the scaling process takes at least 20 minutes.</span></span> <span data-ttu-id="66e70-232">Si votre trafic est en rafale, vous devez configurer pour la rafale de trafic maximale que vous attendez.</span><span class="sxs-lookup"><span data-stu-id="66e70-232">If your traffic is bursty, you should provision for the maximum burst traffic that you expect.</span></span> <span data-ttu-id="66e70-233">Toutefois, la mise à échelle automatique est utile pour la gestion des variations horaires ou quotidienne du trafic.</span><span class="sxs-lookup"><span data-stu-id="66e70-233">However, autoscaling is useful for handling hourly or daily variations in traffic.</span></span> <span data-ttu-id="66e70-234">Pour en savoir plus, voir [Mise à l’échelle automatique d’une instance de gestion des API Azure][apim-scale].</span><span class="sxs-lookup"><span data-stu-id="66e70-234">For more information, see [Automatically scale an Azure API Management instance][apim-scale].</span></span>

## <a name="disaster-recovery-considerations"></a><span data-ttu-id="66e70-235">Considérations relatives à la récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="66e70-235">Disaster recovery considerations</span></span>

<span data-ttu-id="66e70-236">Le déploiement illustré ici se trouve dans une seule région Azure.</span><span class="sxs-lookup"><span data-stu-id="66e70-236">The deployment shown here resides in a single Azure region.</span></span> <span data-ttu-id="66e70-237">Pour une approche plus résistante à la récupération d’urgence, tirer parti des fonctionnalités de géo-distribution dans les différents services :</span><span class="sxs-lookup"><span data-stu-id="66e70-237">For a more resilient approach to disaster-recovery, take advantage of the geo-distribution features in the various services:</span></span>

- <span data-ttu-id="66e70-238">Gestion des API prend en charge le déploiement sur plusieurs régions, ce qui peut être utilisé pour ne distribuer qu’une seule instance de gestion des API sur le nombre de régions Azure.</span><span class="sxs-lookup"><span data-stu-id="66e70-238">API Management supports multi-region deployment, which can be used to distribute a single API Management instance across any number of Azure regions.</span></span> <span data-ttu-id="66e70-239">Pour en savoir plus, découvrez [Comment déployer une instance de service Gestion des API Azure dans plusieurs régions Azure][api-geo].</span><span class="sxs-lookup"><span data-stu-id="66e70-239">For more information, see [How to deploy an Azure API Management service instance to multiple Azure regions][api-geo].</span></span>

- <span data-ttu-id="66e70-240">Utilisez [Traffic Manager][tm] pour diriger les requêtes HTTP vers la région primaire.</span><span class="sxs-lookup"><span data-stu-id="66e70-240">Use [Traffic Manager][tm] to route HTTP requests to the primary region.</span></span> <span data-ttu-id="66e70-241">Si l’application de fonction qui s’exécute dans cette région n’est plus disponible, Traffic Manager peut basculer vers une région secondaire.</span><span class="sxs-lookup"><span data-stu-id="66e70-241">If the Function App running in that region becomes unavailable, Traffic Manager can fail over to a secondary region.</span></span>

- <span data-ttu-id="66e70-242">COSMOS DB prend en charge [plusieurs régions principales][cosmosdb-geo], ce qui permet des écritures sur n’importe quelle région que vous ajoutez à votre compte Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="66e70-242">Cosmos DB supports [multiple master regions][cosmosdb-geo], which enables writes to any region that you add to your Cosmos DB account.</span></span> <span data-ttu-id="66e70-243">Si vous n’activez pas multimaître, vous pouvez toujours basculer vers la région d’écriture primaire.</span><span class="sxs-lookup"><span data-stu-id="66e70-243">If you don't enable multi-master, you can still fail over the primary write region.</span></span> <span data-ttu-id="66e70-244">Les kits de développement client Cosmos DB et les liaisons d’Azure Function gèrent automatiquement le basculement, vous n’avez pas besoin de mettre à jour les paramètres de configuration d’application.</span><span class="sxs-lookup"><span data-stu-id="66e70-244">The Cosmos DB client SDKs and the Azure Function bindings automatically handle the failover, so you don't need to update any application configuration settings.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="66e70-245">Considérations relatives à la sécurité</span><span class="sxs-lookup"><span data-stu-id="66e70-245">Security considerations</span></span>

### <a name="authentication"></a><span data-ttu-id="66e70-246">Authentification</span><span class="sxs-lookup"><span data-stu-id="66e70-246">Authentication</span></span>

<span data-ttu-id="66e70-247">L’`GetStatus`API dans l’implémentation de référence utilise Azure AD pour authentifier les requêtes.</span><span class="sxs-lookup"><span data-stu-id="66e70-247">The `GetStatus` API in the reference implementation uses Azure AD to authenticate requests.</span></span> <span data-ttu-id="66e70-248">Azure AD prend en charge le protocole Open ID Connect, qui est un protocole d’authentification basé sur le protocole OAuth 2.</span><span class="sxs-lookup"><span data-stu-id="66e70-248">Azure AD supports the Open ID Connect protocol, which is an authentication protocol built on top of the OAuth 2 protocol.</span></span>

<span data-ttu-id="66e70-249">Dans cette architecture, l’application cliente est une application monopage (SPA) qui s’exécute dans le navigateur.</span><span class="sxs-lookup"><span data-stu-id="66e70-249">In this architecture, the client application is a single-page application (SPA) that runs in the browser.</span></span> <span data-ttu-id="66e70-250">Ce type d’application cliente ne peut pas suivre une clé secrète client ou un code d’autorisation masqué, donc le flux d’octroi implicite est approprié.</span><span class="sxs-lookup"><span data-stu-id="66e70-250">This type of client application cannot keep a client secret or an authorization code hidden, so the implicit grant flow is appropriate.</span></span> <span data-ttu-id="66e70-251">(Consultez [Quel flux OAuth 2.0 dois-je utiliser ?] [oauth-flow]).</span><span class="sxs-lookup"><span data-stu-id="66e70-251">(See [Which OAuth 2.0 flow should I use?][oauth-flow]).</span></span> <span data-ttu-id="66e70-252">Voici la séquence générale :</span><span class="sxs-lookup"><span data-stu-id="66e70-252">Here's the overall flow:</span></span>

1. <span data-ttu-id="66e70-253">L’utilisateur clique sur le lien « Se connecter » dans l’application web.</span><span class="sxs-lookup"><span data-stu-id="66e70-253">The user clicks the "Sign in" link in the web application.</span></span>
1. <span data-ttu-id="66e70-254">Le navigateur est redirigé vers la page de connexion Azure AD.</span><span class="sxs-lookup"><span data-stu-id="66e70-254">The browser is redirected the Azure AD sign in page.</span></span> 
1. <span data-ttu-id="66e70-255">L’utilisateur se connecte.</span><span class="sxs-lookup"><span data-stu-id="66e70-255">The user signs in.</span></span>
1. <span data-ttu-id="66e70-256">Azure AD redirige vers l’application cliente, incluant un jeton d’accès dans le fragment d’URL.</span><span class="sxs-lookup"><span data-stu-id="66e70-256">Azure AD redirects back to the client application, including an access token in the URL fragment.</span></span>
1. <span data-ttu-id="66e70-257">Lorsque l’application web appelle l’API, elle ajoute le jeton d’accès dans l’en-tête d’authentification.</span><span class="sxs-lookup"><span data-stu-id="66e70-257">When the web application calls the API, it includes the access token in the Authentication header.</span></span> <span data-ttu-id="66e70-258">L’ID de l’application est envoyé comme revendication d’audience (« aud ») dans le jeton d’accès.</span><span class="sxs-lookup"><span data-stu-id="66e70-258">The application ID is sent as the audience ('aud') claim in the access token.</span></span> 
1. <span data-ttu-id="66e70-259">L’API principale valide le jeton d’accès.</span><span class="sxs-lookup"><span data-stu-id="66e70-259">The backend API validates the access token.</span></span>

<span data-ttu-id="66e70-260">Pour configurer l’authentification :</span><span class="sxs-lookup"><span data-stu-id="66e70-260">To configure authentication:</span></span>

- <span data-ttu-id="66e70-261">Inscrire une application dans votre locataire Azure AD.</span><span class="sxs-lookup"><span data-stu-id="66e70-261">Register an application in your Azure AD tenant.</span></span> <span data-ttu-id="66e70-262">Cela génère un ID d’application, que le client ajoute à l’URL de connexion.</span><span class="sxs-lookup"><span data-stu-id="66e70-262">This generates an application ID, which the client includes with the login URL.</span></span>

- <span data-ttu-id="66e70-263">Activer l’authentification Azure AD à l’intérieur de l’application de fonction.</span><span class="sxs-lookup"><span data-stu-id="66e70-263">Enable Azure AD authentication inside the Function App.</span></span> <span data-ttu-id="66e70-264">Pour plus d’informations, consultez [Authentification et autorisation dans Azure App Service][app-service-auth].</span><span class="sxs-lookup"><span data-stu-id="66e70-264">For more information, see [Authentication and authorization in Azure App Service][app-service-auth].</span></span>

- <span data-ttu-id="66e70-265">Ajoutez la [stratégie validate-jwt][apim-validate-jwt] à Gestion des API pour autoriser la requête au préalable en validant le jeton d’accès.</span><span class="sxs-lookup"><span data-stu-id="66e70-265">Add the [validate-jwt policy][apim-validate-jwt] to API Management to pre-authorize the request by validating the access token.</span></span>

<span data-ttu-id="66e70-266">Pour plus d’informations, consultez le [fichier readme de GitHub][readme].</span><span class="sxs-lookup"><span data-stu-id="66e70-266">For more details, see the [GitHub readme][readme].</span></span>

<span data-ttu-id="66e70-267">Il est recommandé de créer des inscriptions d’application distinctes dans Azure AD pour l’application cliente et l’API back-end.</span><span class="sxs-lookup"><span data-stu-id="66e70-267">It's recommended to create separate app registrations in Azure AD for the client application and the backend API.</span></span> <span data-ttu-id="66e70-268">Donnez à l’application cliente l’autorisation d’appeler l’API.</span><span class="sxs-lookup"><span data-stu-id="66e70-268">Grant the client application permission to call the API.</span></span> <span data-ttu-id="66e70-269">Cette approche permet de définir plusieurs API et clients et de contrôler les autorisations pour chacun.</span><span class="sxs-lookup"><span data-stu-id="66e70-269">This approach gives you the flexibility to define multiple APIs and clients and control the permissions for each.</span></span> 

<span data-ttu-id="66e70-270">Au sein d’une API, utilisez les [étendues][scopes] pour offrir aux applications un contrôle précis sur les autorisations requises auprès d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="66e70-270">Within an API, use [scopes][scopes] to give applications fine-grained control over what permissions they request from a user.</span></span> <span data-ttu-id="66e70-271">Par exemple, une API peut présenter des étendues `Read` et `Write`, et une application cliente spécifique peut demander à l’utilisateur d’autoriser uniquement les autorisations `Read`.</span><span class="sxs-lookup"><span data-stu-id="66e70-271">For example, an API might have `Read` and `Write` scopes, and a particular client app might ask the user to authorize `Read` permissions only.</span></span>

### <a name="authorization"></a><span data-ttu-id="66e70-272">Authorization</span><span class="sxs-lookup"><span data-stu-id="66e70-272">Authorization</span></span>

<span data-ttu-id="66e70-273">Dans de nombreuses applications, l’API principale doit vérifier si un utilisateur est autorisé à effectuer une action donnée.</span><span class="sxs-lookup"><span data-stu-id="66e70-273">In many applications, the backend API must check whether a user has permission to perform a given action.</span></span> <span data-ttu-id="66e70-274">Il est recommandé d’utiliser [une autorisation basée sur les revendications][claims], où plus d’informations sur l’utilisateur sont acheminées par le fournisseur d’identité (dans ce cas, Azure AD) et permet de prendre des décisions d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="66e70-274">It's recommended to use [claims-based authorization][claims], where information about the user is conveyed by the identity provider (in this case, Azure AD) and used to make authorization decisions.</span></span> 

<span data-ttu-id="66e70-275">Certaines revendications sont fournies à l’intérieur du jeton d’ID qu’Azure AD renvoie au client.</span><span class="sxs-lookup"><span data-stu-id="66e70-275">Some claims are provided inside the ID token that Azure AD returns to the client.</span></span> <span data-ttu-id="66e70-276">Vous pouvez obtenir ces revendications à partir de l’application de fonction en examinant l’en-tête X-MS-CLIENT-PRINCIPAL dans la requête.</span><span class="sxs-lookup"><span data-stu-id="66e70-276">You can get these claims from within the function app by examining the X-MS-CLIENT-PRINCIPAL header in the request.</span></span> <span data-ttu-id="66e70-277">Pour les autres revendications, utilisez [Microsoft Graph] [ graph] pour interroger Azure AD (nécessite le consentement de l’utilisateur pendant la connexion).</span><span class="sxs-lookup"><span data-stu-id="66e70-277">For other claims, use [Microsoft Graph][graph] to query Azure AD (requires user consent during sign-in).</span></span> 

<span data-ttu-id="66e70-278">Par exemple, lorsque vous inscrivez une application dans Azure AD, vous pouvez définir un ensemble de rôles d’application dans le manifeste de l’inscription d’application.</span><span class="sxs-lookup"><span data-stu-id="66e70-278">For example, when you register an application in Azure AD, you can define a set of application roles in the application's registration manifest.</span></span> <span data-ttu-id="66e70-279">Quand un utilisateur se connecte à l’application, Azure AD ajoute une revendication pour chaque rôle qui lui a été accordé ( y compris des rôles obtenus grâce à son appartenance à un groupe).</span><span class="sxs-lookup"><span data-stu-id="66e70-279">When a user signs into the application, Azure AD includes a "roles" claim for each role that the user has been granted (including roles that are inherited through group membership).</span></span> 

<span data-ttu-id="66e70-280">Dans l’implémentation de référence, la fonction vérifie si l’utilisateur authentifié est un membre du `GetStatus` rôle d’application.</span><span class="sxs-lookup"><span data-stu-id="66e70-280">In the reference implementation, the function checks whether the authenticated user is a member of the `GetStatus` application role.</span></span> <span data-ttu-id="66e70-281">Si ce n’est pas le cas, la fonction renvoie une réponse HTTP non autorisée (401).</span><span class="sxs-lookup"><span data-stu-id="66e70-281">If not, the function returns an HTTP Unauthorized (401) response.</span></span> 

```csharp
[FunctionName("GetStatusFunction")]
public static Task<IActionResult> Run(
    [HttpTrigger(AuthorizationLevel.Function, "get", "post", Route = null)] HttpRequest req, 
    [CosmosDB(
        databaseName: "%COSMOSDB_DATABASE_NAME%",
        collectionName: "%COSMOSDB_DATABASE_COL%",
        ConnectionStringSetting = "COSMOSDB_CONNECTION_STRING",
        Id = "{Query.deviceId}",
        PartitionKey = "{Query.deviceId}")] dynamic deviceStatus, 
    ILogger log)
{
    log.LogInformation("Processing GetStatus request.");

    return req.HandleIfAuthorizedForRoles(new[] { GetDeviceStatusRoleName },
        async () =>
        {
            string deviceId = req.Query["deviceId"];
            if (deviceId == null)
            {
                return new BadRequestObjectResult("Missing DeviceId");
            }

            return await Task.FromResult<IActionResult>(deviceStatus != null
                    ? (ActionResult)new OkObjectResult(deviceStatus)
                    : new NotFoundResult());
        },
        log);
}
```

<span data-ttu-id="66e70-282">Dans cet exemple de code, `HandleIfAuthorizedForRoles` une méthode d’extension vérifie la revendication de rôle et renvoie à HTTP 401 si la revendication n’est pas trouvée.</span><span class="sxs-lookup"><span data-stu-id="66e70-282">In this code example, `HandleIfAuthorizedForRoles` is an extension method that checks for the role claim and returns HTTP 401 if the claim isn't found.</span></span> <span data-ttu-id="66e70-283">Vous trouverez le fichier source [ici][HttpRequestAuthorizationExtensions].</span><span class="sxs-lookup"><span data-stu-id="66e70-283">You can find the source code [here][HttpRequestAuthorizationExtensions].</span></span> <span data-ttu-id="66e70-284">Notez que `HandleIfAuthorizedForRoles` prend un `ILogger` paramètre.</span><span class="sxs-lookup"><span data-stu-id="66e70-284">Notice that `HandleIfAuthorizedForRoles` takes an `ILogger` parameter.</span></span> <span data-ttu-id="66e70-285">Vous devriez enregistrer des requêtes non autorisées pour avoir une piste d’audit et diagnostiquer les problèmes si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="66e70-285">You should log unauthorized requests so that you have an audit trail and can diagnose issues if needed.</span></span> <span data-ttu-id="66e70-286">En même temps, évitez la fuite des informations détaillées à l’intérieur de la réponse HTTP 401.</span><span class="sxs-lookup"><span data-stu-id="66e70-286">At the same time, avoid leaking any detailed information inside the HTTP 401 response.</span></span>

### <a name="cors"></a><span data-ttu-id="66e70-287">CORS</span><span class="sxs-lookup"><span data-stu-id="66e70-287">CORS</span></span>

<span data-ttu-id="66e70-288">Dans cette architecture de référence, l’application web et l’API ne partagent pas la même origine.</span><span class="sxs-lookup"><span data-stu-id="66e70-288">In this reference architecture, the web application and the API do not share the same origin.</span></span> <span data-ttu-id="66e70-289">Cela signifie que lorsque l’application appelle l’API, il s’agit d’une requête cross-origin.</span><span class="sxs-lookup"><span data-stu-id="66e70-289">That means when the application calls the API, it is a cross-origin request.</span></span> <span data-ttu-id="66e70-290">La sécurité des navigateurs empêche une page web d’adresser des demandes AJAX à un autre domaine.</span><span class="sxs-lookup"><span data-stu-id="66e70-290">Browser security prevents a web page from making AJAX requests to another domain.</span></span> <span data-ttu-id="66e70-291">Cette restriction est appelée la *stratégie de même origine* et empêche un site malveillant de lire des données sensibles à partir d’un autre site.</span><span class="sxs-lookup"><span data-stu-id="66e70-291">This restriction is called the *same-origin policy* and prevents a malicious site from reading sensitive data from another site.</span></span> <span data-ttu-id="66e70-292">Pour activer une requête cross-origin, ajoutez une [stratégie] [ cors-policy]de partage de ressources Cross-Origin (CORS) à la passerelle de Gestion des API :</span><span class="sxs-lookup"><span data-stu-id="66e70-292">To enable a cross-origin request, add a Cross-Origin Resource Sharing (CORS) [policy][cors-policy] to the API Management gateway:</span></span>

```xml
<cors allow-credentials="true">
    <allowed-origins>
        <origin>[Website URL]</origin>
    </allowed-origins>
    <allowed-methods>
        <method>GET</method>
    </allowed-methods>
    <allowed-headers>
        <header>*</header>
    </allowed-headers>
</cors>
```

<span data-ttu-id="66e70-293">Dans cet exemple, l’**attribut**  des informations d’identification est **true**.</span><span class="sxs-lookup"><span data-stu-id="66e70-293">In this example, the **allow-credentials** attribute is **true**.</span></span> <span data-ttu-id="66e70-294">Cela autorise le navigateur à envoyer des informations d’identification (y compris des cookies) avec la requête.</span><span class="sxs-lookup"><span data-stu-id="66e70-294">This authorizes the browser to send credentials (including cookies) with the request.</span></span> <span data-ttu-id="66e70-295">Sinon, par défaut le navigateur n’envoie pas d’informations d’identification avec une requête de cross-origin.</span><span class="sxs-lookup"><span data-stu-id="66e70-295">Otherwise, by default the browser does not send credentials with a cross-origin request.</span></span>

> [!NOTE] 
> <span data-ttu-id="66e70-296">Soyez très prudent avec la configuration **d’informations d’identification** à **true**, car cela signifie qu’un site web peut envoyer des informations d’identification de l’utilisateur à votre API au nom de l’utilisateur, sans que l’utilisateur le sache.</span><span class="sxs-lookup"><span data-stu-id="66e70-296">Be very careful about setting **allow-credentials** to **true**, because it means a website can send the user's credentials to your API on the user's behalf, without the user being aware.</span></span> <span data-ttu-id="66e70-297">Vous devez faire confiance à l’origine autorisée.</span><span class="sxs-lookup"><span data-stu-id="66e70-297">You must trust the allowed origin.</span></span>

### <a name="enforce-https"></a><span data-ttu-id="66e70-298">Appliquer le protocole HTTPS</span><span class="sxs-lookup"><span data-stu-id="66e70-298">Enforce HTTPS</span></span>

<span data-ttu-id="66e70-299">Pour une sécurité maximale, exiger HTTPS tout au long du pipeline de requête :</span><span class="sxs-lookup"><span data-stu-id="66e70-299">For maximum security, require HTTPS throughout the request pipeline:</span></span>

- <span data-ttu-id="66e70-300">**CDN**.</span><span class="sxs-lookup"><span data-stu-id="66e70-300">**CDN**.</span></span> <span data-ttu-id="66e70-301">Azure CDN prend en charge HTTPS dans le`*.azureedge.net` sous-domaine par défaut.</span><span class="sxs-lookup"><span data-stu-id="66e70-301">Azure CDN supports HTTPS on the `*.azureedge.net` subdomain by default.</span></span> <span data-ttu-id="66e70-302">Pour activer HTTPS dans le CDN pour les noms de domaine personnalisés, consultez [Didacticiel : configurer HTTPS sur un domaine personnalisé Azure CDN][cdn-https].</span><span class="sxs-lookup"><span data-stu-id="66e70-302">To enable HTTPS in the CDN for custom domain names, see [Tutorial: Configure HTTPS on an Azure CDN custom domain][cdn-https].</span></span> 

- <span data-ttu-id="66e70-303">**Hébergement de site web statique**.</span><span class="sxs-lookup"><span data-stu-id="66e70-303">**Static website hosting**.</span></span> <span data-ttu-id="66e70-304">Activer le «[transfert sécurisé requis][storage-https]» option sur le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="66e70-304">Enable the "[Secure transfer required][storage-https]" option on the Storage account.</span></span> <span data-ttu-id="66e70-305">Lorsque cette option est activée, le compte de stockage autorise uniquement les demandes provenant de connexions HTTPS sécurisées.</span><span class="sxs-lookup"><span data-stu-id="66e70-305">When this option is enabled, the storage account only allows requests from secure HTTPS connections.</span></span> 

- <span data-ttu-id="66e70-306">**Gestion des API**.</span><span class="sxs-lookup"><span data-stu-id="66e70-306">**API Management**.</span></span> <span data-ttu-id="66e70-307">Configurez les API pour n’utiliser que le protocole HTTPS.</span><span class="sxs-lookup"><span data-stu-id="66e70-307">Configure the APIs to use HTTPS protocol only.</span></span> <span data-ttu-id="66e70-308">Vous pouvez le configurer dans le portail Azure ou via un modèle Resource Manager :</span><span class="sxs-lookup"><span data-stu-id="66e70-308">You can configure this in the Azure portal or through a Resource Manager template:</span></span>

    ```json
    {
        "apiVersion": "2018-01-01",
        "type": "apis",
        "name": "dronedeliveryapi",
        "dependsOn": [
            "[concat('Microsoft.ApiManagement/service/', variables('apiManagementServiceName'))]"
        ],
        "properties": {
            "displayName": "Drone Delivery API",
            "description": "Drone Delivery API",
            "path": "api",
            "protocols": [ "HTTPS" ]
        },
        ...
    }
    ```

- <span data-ttu-id="66e70-309">**Azure Functions**.</span><span class="sxs-lookup"><span data-stu-id="66e70-309">**Azure Functions**.</span></span> <span data-ttu-id="66e70-310">Activer le paramètre «[HTTPS uniquement][functions-https]».</span><span class="sxs-lookup"><span data-stu-id="66e70-310">Enable the "[HTTPS Only][functions-https]" setting.</span></span> 

### <a name="lock-down-the-function-app"></a><span data-ttu-id="66e70-311">Verrouiller l’application de fonction</span><span class="sxs-lookup"><span data-stu-id="66e70-311">Lock down the function app</span></span>

<span data-ttu-id="66e70-312">Tous les appels à la fonction doivent passer par la passerelle d’API.</span><span class="sxs-lookup"><span data-stu-id="66e70-312">All calls to the function should go through the API gateway.</span></span> <span data-ttu-id="66e70-313">Vous pouvez y parvenir de la façon suivante :</span><span class="sxs-lookup"><span data-stu-id="66e70-313">You can achieve this as follows:</span></span>

- <span data-ttu-id="66e70-314">Configurez l’application de fonction pour demander une clé de fonction.</span><span class="sxs-lookup"><span data-stu-id="66e70-314">Configure the function app to require a function key.</span></span> <span data-ttu-id="66e70-315">La passerelle de gestion des API inclut la clé de fonction lors de l’appel à l’application de fonction.</span><span class="sxs-lookup"><span data-stu-id="66e70-315">The API Management gateway will include the function key when it calls the function app.</span></span> <span data-ttu-id="66e70-316">Cela empêche les clients d’appeler la fonction directement, en contournant la passerelle.</span><span class="sxs-lookup"><span data-stu-id="66e70-316">This prevents clients from calling the function directly, bypassing the gateway.</span></span> 

- <span data-ttu-id="66e70-317">La passerelle de gestion des API possède une[adresse IP statique][apim-ip].</span><span class="sxs-lookup"><span data-stu-id="66e70-317">The API Management gateway has a [static IP address][apim-ip].</span></span> <span data-ttu-id="66e70-318">Restreindre Azure Function pour autoriser uniquement les appels de cette adresse IP statique.</span><span class="sxs-lookup"><span data-stu-id="66e70-318">Restrict the Azure Function to allow only calls from that static IP address.</span></span> <span data-ttu-id="66e70-319">Pour plus d’informations, consultez [Restrictions d’adresse IP statique avec Azure App Service][app-service-ip-restrictions].</span><span class="sxs-lookup"><span data-stu-id="66e70-319">For more information, see [Azure App Service Static IP Restrictions][app-service-ip-restrictions].</span></span> <span data-ttu-id="66e70-320">(Cette fonctionnalité est disponible uniquement pour les services de niveau Standard).</span><span class="sxs-lookup"><span data-stu-id="66e70-320">(This feature is available for Standard tier services only.)</span></span> 

### <a name="protect-application-secrets"></a><span data-ttu-id="66e70-321">Protection des secrets d’application</span><span class="sxs-lookup"><span data-stu-id="66e70-321">Protect application secrets</span></span>

<span data-ttu-id="66e70-322">Ne stockez pas les secrets de l’application, tels que les informations d’identification de la base de données dans vos fichiers de code ou de configuration.</span><span class="sxs-lookup"><span data-stu-id="66e70-322">Don't store application secrets, such as database credentials, in your code or configuration files.</span></span> <span data-ttu-id="66e70-323">Utilisez plutôt les paramètres de l’application, qui sont stockés et chiffrés dans Azure.</span><span class="sxs-lookup"><span data-stu-id="66e70-323">Instead, use App settings, which are stored encrypted in Azure.</span></span> <span data-ttu-id="66e70-324">Pour plus d’informations, consultez[ Sécurité dans Azure App Service et Azure Functions][app-service-security].</span><span class="sxs-lookup"><span data-stu-id="66e70-324">For more information, see [Security in Azure App Service and Azure Functions][app-service-security].</span></span>

<span data-ttu-id="66e70-325">Ou bien, vous pouvez stocker des secrets d’application dans Key Vault.</span><span class="sxs-lookup"><span data-stu-id="66e70-325">Alternatively, you can store application secrets in Key Vault.</span></span> <span data-ttu-id="66e70-326">Cela vous permet de centraliser le stockage des secrets, contrôler leur distribution et surveiller comment et quand les secrets sont ouverts.</span><span class="sxs-lookup"><span data-stu-id="66e70-326">This allows you to centralize the storage of secrets, control their distribution, and monitor how and when secrets are being accessed.</span></span> <span data-ttu-id="66e70-327">Pour plus d’informations, consultez [ Configurer une application web Azure pour lire un secret dans le coffre de clés (Key Vault)][key-vault-web-app].</span><span class="sxs-lookup"><span data-stu-id="66e70-327">For more information, see [Configure an Azure web application to read a secret from Key Vault][key-vault-web-app].</span></span> <span data-ttu-id="66e70-328">Toutefois, notez que les liaisons et déclencheurs de Functions chargent leurs paramètres de configuration à partir des paramètres de l’application.</span><span class="sxs-lookup"><span data-stu-id="66e70-328">However, note that Functions triggers and bindings load their configuration settings from app settings.</span></span> <span data-ttu-id="66e70-329">Il n’existe aucun moyen intégré pour configurer les déclencheurs et liaisons pour utiliser des secrets de coffre de clés.</span><span class="sxs-lookup"><span data-stu-id="66e70-329">There is no built-in way to configure the triggers and bindings to use Key Vault secrets.</span></span>

## <a name="devops-considerations"></a><span data-ttu-id="66e70-330">Considérations relatives à DevOps</span><span class="sxs-lookup"><span data-stu-id="66e70-330">DevOps considerations</span></span>

### <a name="deployment"></a><span data-ttu-id="66e70-331">Déploiement</span><span class="sxs-lookup"><span data-stu-id="66e70-331">Deployment</span></span>

<span data-ttu-id="66e70-332">Pour déployer l’application de fonction, nous vous recommandons d’utiliser les [fichiers de package] [ functions-run-from-package] (Run from package (Exécuter à partir du package)).</span><span class="sxs-lookup"><span data-stu-id="66e70-332">To deploy the function app, we recommend using [package files][functions-run-from-package] ("Run from package").</span></span> <span data-ttu-id="66e70-333">Avec cette approche, vous chargez un fichier zip vers un conteneur Stockage Blob, alors que le runtime Functions monte le fichier zip en tant que système de fichiers en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="66e70-333">Using this approach, you upload a zip file to a Blob Storage container and the Functions runtime mounts the zip file as a read-only file system.</span></span> <span data-ttu-id="66e70-334">Il s’agit d’une opération atomique. Elle réduit le risque qu’un déploiement ayant échoué laisse l’application dans un état incohérent.</span><span class="sxs-lookup"><span data-stu-id="66e70-334">This is an atomic operation, which reduces the chance that a failed deployment will leave the application in an inconsistent state.</span></span> <span data-ttu-id="66e70-335">Cette approche peut également améliorer les temps de démarrage à froid, en particulier pour les applications Node.js, car tous les fichiers sont échangés en même temps.</span><span class="sxs-lookup"><span data-stu-id="66e70-335">It can also improve cold start times, especially for Node.js apps, because all of the files are swapped at once.</span></span>

### <a name="api-versioning"></a><span data-ttu-id="66e70-336">Contrôle de version d’API</span><span class="sxs-lookup"><span data-stu-id="66e70-336">API versioning</span></span>

<span data-ttu-id="66e70-337">Une API est un contrat entre un service et des clients.</span><span class="sxs-lookup"><span data-stu-id="66e70-337">An API is a contract between a service and clients.</span></span> <span data-ttu-id="66e70-338">Dans cette architecture, le contrat d’API est défini au niveau de la couche Gestion des API.</span><span class="sxs-lookup"><span data-stu-id="66e70-338">In this architecture, the API contract is defined at the API Management layer.</span></span> <span data-ttu-id="66e70-339">Gestion des API prend en charge deux concepts de [contrôle de version distincts, mais complémentaires ][apim-versioning]:</span><span class="sxs-lookup"><span data-stu-id="66e70-339">API Management supports two distinct but complementary [versioning concepts][apim-versioning]:</span></span>

- <span data-ttu-id="66e70-340">Les *versions* offrent aux consommateurs d’API la possibilité de choisir une version d’API en fonction de leurs besoins, par exemple v1 ou v2.</span><span class="sxs-lookup"><span data-stu-id="66e70-340">*Versions* allow API consumers to choose an API version based on their needs, such as v1 versus v2.</span></span> 

- <span data-ttu-id="66e70-341">Les *révisions* permettent aux administrateurs d’API d’apporter des modifications mineures dans une API et de déployer ces modifications, ainsi que d’un journal des modifications pour informer les consommateurs de l’API des modifications.</span><span class="sxs-lookup"><span data-stu-id="66e70-341">*Revisions* allow API administrators to make non-breaking changes in an API and deploy those changes, along with a change log to inform API consumers about the changes.</span></span>

<span data-ttu-id="66e70-342">Si vous modifiez radicalement une API, publiez une nouvelle version dans Gestion des API.</span><span class="sxs-lookup"><span data-stu-id="66e70-342">If you make a breaking change in an API, publish a new version in API Management.</span></span> <span data-ttu-id="66e70-343">Déployez la nouvelle version côte à côte avec la version d’origine, dans une application de fonction distincte.</span><span class="sxs-lookup"><span data-stu-id="66e70-343">Deploy the new version side-by-side with the original version, in a separate Function App.</span></span> <span data-ttu-id="66e70-344">Cela vous permet de migrer des clients existants vers la nouvelle API sans interrompre les applications clientes.</span><span class="sxs-lookup"><span data-stu-id="66e70-344">This lets you migrate existing clients to the new API without breaking client applications.</span></span> <span data-ttu-id="66e70-345">Finalement, vous pouvez désapprouver la version précédente.</span><span class="sxs-lookup"><span data-stu-id="66e70-345">Eventually, you can deprecate the previous version.</span></span> <span data-ttu-id="66e70-346">Gestion des API prend en charge plusieurs [schémas de contrôle de version][apim-versioning-schemes] : chemin d’URL, en-tête HTTP ou chaîne de requête.</span><span class="sxs-lookup"><span data-stu-id="66e70-346">API Management supports several [versioning schemes][apim-versioning-schemes]: URL path, HTTP header, or query string.</span></span> <span data-ttu-id="66e70-347">Pour plus d’informations sur le contrôle de version d’API en règle générale, consultez [Contrôle de version d’une API web RESTful][api-versioning].</span><span class="sxs-lookup"><span data-stu-id="66e70-347">For more information about API versioning in general, see [Versioning a RESTful web API][api-versioning].</span></span>

<span data-ttu-id="66e70-348">Pour les mises à jour qui n’interrompent pas de modifications de l’API, déployez la nouvelle version à un emplacement de préproduction dans la même application de fonction.</span><span class="sxs-lookup"><span data-stu-id="66e70-348">For updates that are not breaking API changes, deploy the new version to a staging slot in the same Function App.</span></span> <span data-ttu-id="66e70-349">Vérifiez si le déploiement a réussi, puis remplacez la version de préproduction par la version de production.</span><span class="sxs-lookup"><span data-stu-id="66e70-349">Verify the deployment succeeded and then swap the staged version with the production version.</span></span> <span data-ttu-id="66e70-350">Publiez une révision dans Gestion des API.</span><span class="sxs-lookup"><span data-stu-id="66e70-350">Publish a revision in API Management.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="66e70-351">Déployer la solution</span><span class="sxs-lookup"><span data-stu-id="66e70-351">Deploy the solution</span></span>

<span data-ttu-id="66e70-352">Pour déployer cette architecture de référence, affichez le [fichier readme de GitHub][readme].</span><span class="sxs-lookup"><span data-stu-id="66e70-352">To deploy this reference architecture, view the [GitHub readme][readme].</span></span> 

<!-- links -->

[api-versioning]: ../../best-practices/api-design.md#versioning-a-restful-web-api
[apim]: /azure/api-management/api-management-key-concepts
[apim-ip]: /azure/api-management/api-management-faq#is-the-api-management-gateway-ip-address-constant-can-i-use-it-in-firewall-rules
[api-geo]: /azure/api-management/api-management-howto-deploy-multi-region
[apim-scale]: /azure/api-management/api-management-howto-autoscale
[apim-validate-jwt]: /azure/api-management/api-management-access-restriction-policies#ValidateJWT
[apim-versioning]: /azure/api-management/api-management-get-started-publish-versions
[apim-versioning-schemes]: /azure/api-management/api-management-get-started-publish-versions#choose-a-versioning-scheme
[app-service-auth]: /azure/app-service/app-service-authentication-overview
[app-service-ip-restrictions]: /azure/app-service/app-service-ip-restrictions
[app-service-security]: /azure/app-service/app-service-security
[ase]: /azure/app-service/environment/intro
[azure-messaging]: /azure/event-grid/compare-messaging-services
[claims]: https://en.wikipedia.org/wiki/Claims-based_identity
[cdn]: https://azure.microsoft.com/services/cdn/
[cdn-https]: /azure/cdn/cdn-custom-ssl
[cors-policy]: /azure/api-management/api-management-cross-domain-policies
[cosmosdb]: /azure/cosmos-db/introduction
[cosmosdb-geo]: /azure/cosmos-db/distribute-data-globally
[cosmosdb-input-binding]: /azure/azure-functions/functions-bindings-cosmosdb-v2#input
[cosmosdb-scale]: /azure/cosmos-db/partition-data
[event-driven]: ../../guide/architecture-styles/event-driven.md
[functions]: /azure/azure-functions/functions-overview
[functions-bindings]: /azure/azure-functions/functions-triggers-bindings
[functions-cold-start]: https://blogs.msdn.microsoft.com/appserviceteam/2018/02/07/understanding-serverless-cold-start/
[functions-https]: /azure/app-service/app-service-web-tutorial-custom-ssl#enforce-https
[functions-proxy]: /azure/azure-functions/functions-proxies
[functions-run-from-package]: /azure/azure-functions/run-functions-from-deployment-package
[functions-scale]: /azure/azure-functions/functions-scale
[functions-timeout]: /azure/azure-functions/functions-scale#consumption-plan
[functions-zip-deploy]: /azure/azure-functions/deployment-zip-push
[graph]: https://developer.microsoft.com/graph/docs/concepts/overview
[key-vault-web-app]: /azure/key-vault/tutorial-web-application-keyvault
[microservices-domain-analysis]: ../../microservices/domain-analysis.md
[monitor]: /azure/azure-monitor/overview
[oauth-flow]: https://auth0.com/docs/api-auth/which-oauth-flow-to-use
[partition-key]: /azure/cosmos-db/partition-data
[pipelines]: /azure/devops/pipelines/index
[ru]: /azure/cosmos-db/request-units
[scopes]: /azure/active-directory/develop/v2-permissions-and-consent
[static-hosting]: /azure/storage/blobs/storage-blob-static-website
[static-hosting-preview]: https://azure.microsoft.com/blog/azure-storage-static-web-hosting-public-preview/
[storage-https]: /azure/storage/common/storage-require-secure-transfer
[tm]: /azure/traffic-manager/traffic-manager-overview

[github]: https://github.com/mspnp/serverless-reference-implementation
[HttpRequestAuthorizationExtensions]: https://github.com/mspnp/serverless-reference-implementation/blob/master/src/DroneStatus/dotnet/DroneStatusFunctionApp/HttpRequestAuthorizationExtensions.cs
[readme]: https://github.com/mspnp/serverless-reference-implementation/blob/master/README.md
