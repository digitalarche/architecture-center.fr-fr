---
title: Modèle d’opérateur de contrôle
titleSuffix: Cloud Design Patterns
description: Protégez les applications et services à l’aide d’une instance d’hôte dédiée qui agit comme un intermédiaire entre les clients et l’application ou le service, valide et assainit les requêtes, et transmet les requêtes et les données entre eux.
keywords: modèle de conception
author: dragon119
ms.date: 06/23/2017
ms.custom: seodec18
ms.openlocfilehash: a45ace8ea05e4a7dd1d8a48653e94a5fe5bfb0f6
ms.sourcegitcommit: 680c9cef945dff6fee5e66b38e24f07804510fa9
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/04/2019
ms.locfileid: "54009693"
---
# <a name="gatekeeper-pattern"></a><span data-ttu-id="545de-104">Modèle d’opérateur de contrôle</span><span class="sxs-lookup"><span data-stu-id="545de-104">Gatekeeper pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="545de-105">Protégez les applications et services à l’aide d’une instance d’hôte dédiée qui agit comme un intermédiaire entre les clients et l’application ou le service, valide et assainit les requêtes, et transmet les requêtes et les données entre eux.</span><span class="sxs-lookup"><span data-stu-id="545de-105">Protect applications and services by using a dedicated host instance that acts as a broker between clients and the application or service, validates and sanitizes requests, and passes requests and data between them.</span></span> <span data-ttu-id="545de-106">Cela peut fournir une couche supplémentaire de sécurité et limiter la surface d’attaque du système.</span><span class="sxs-lookup"><span data-stu-id="545de-106">This can provide an additional layer of security, and limit the attack surface of the system.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="545de-107">Contexte et problème</span><span class="sxs-lookup"><span data-stu-id="545de-107">Context and problem</span></span>

<span data-ttu-id="545de-108">Les applications exposent leurs fonctionnalités aux clients en acceptant et en traitant des requêtes.</span><span class="sxs-lookup"><span data-stu-id="545de-108">Applications expose their functionality to clients by accepting and processing requests.</span></span> <span data-ttu-id="545de-109">Dans les scénarios d’hébergement cloud, les applications exposent des points de terminaison auxquels se connectent les clients et incluent généralement le code permettant de gérer les requêtes des clients.</span><span class="sxs-lookup"><span data-stu-id="545de-109">In cloud-hosted scenarios, applications expose endpoints clients connect to, and typically include the code to handle the requests from clients.</span></span> <span data-ttu-id="545de-110">Ce code procède à l’authentification et à la validation, effectue une partie ou la totalité du traitement des requêtes et est susceptible d’accéder au stockage et à d’autres services à la place du client.</span><span class="sxs-lookup"><span data-stu-id="545de-110">This code performs authentication and validation, some or all request processing, and is likely to accesses storage and other services on behalf of the client.</span></span>

<span data-ttu-id="545de-111">Si un utilisateur malveillant est en mesure de compromettre le système et d’accéder à l’environnement hébergeant l’application, les mécanismes de sécurité utilisés, tels que les informations d’identification et les clés de stockage, ainsi que les services et les données auxquels il accède, sont exposés.</span><span class="sxs-lookup"><span data-stu-id="545de-111">If a malicious user is able to compromise the system and gain access to the application’s hosting environment, the security mechanisms it uses such as credentials and storage keys, and the services and data it accesses, are exposed.</span></span> <span data-ttu-id="545de-112">Par conséquent, l’utilisateur malveillant peut accéder sans restrictions à des informations sensibles et à d’autres services.</span><span class="sxs-lookup"><span data-stu-id="545de-112">As a result, the malicious user can gain unrestrained access to sensitive information and other services.</span></span>

## <a name="solution"></a><span data-ttu-id="545de-113">Solution</span><span class="sxs-lookup"><span data-stu-id="545de-113">Solution</span></span>

<span data-ttu-id="545de-114">Pour réduire le risque que des clients accèdent aux services et informations sensibles, découplez les hôtes ou les tâches qui exposent des points de terminaison publics du code qui traite les requêtes et accède au stockage.</span><span class="sxs-lookup"><span data-stu-id="545de-114">To minimize the risk of clients gaining access to sensitive information and services, decouple hosts or tasks that expose public endpoints from the code that processes requests and accesses storage.</span></span> <span data-ttu-id="545de-115">Pour ce faire, utilisez une façade ou une tâche dédiée qui interagit avec les clients, puis transmet la requête &mdash;éventuellement via une interface découplée&mdash; aux hôtes ou aux tâches qui traiteront la requête.</span><span class="sxs-lookup"><span data-stu-id="545de-115">You can achieve this by using a façade or a dedicated task that interacts with clients and then hands off the request&mdash;perhaps through a decoupled interface&mdash;to the hosts or tasks that'll handle the request.</span></span> <span data-ttu-id="545de-116">La figure fournit une vue d’ensemble globale de ce modèle.</span><span class="sxs-lookup"><span data-stu-id="545de-116">The figure provides a high-level overview of this pattern.</span></span>

![Vue d’ensemble globale de ce modèle](./_images/gatekeeper-diagram.png)

<span data-ttu-id="545de-118">Le modèle d’opérateur de contrôle peut simplement servir à protéger le stockage, ou il peut être utilisé comme une façade plus complète pour protéger toutes les fonctions de l’application.</span><span class="sxs-lookup"><span data-stu-id="545de-118">The gatekeeper pattern can be used to simply protect storage, or it can be used as a more comprehensive façade to protect all of the functions of the application.</span></span> <span data-ttu-id="545de-119">Les facteurs importants sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="545de-119">The important factors are:</span></span>

- <span data-ttu-id="545de-120">**Validation contrôlée**.</span><span class="sxs-lookup"><span data-stu-id="545de-120">**Controlled validation**.</span></span> <span data-ttu-id="545de-121">L’opérateur de contrôle valide toutes les requêtes et rejette celles qui ne respectent pas les exigences de validation.</span><span class="sxs-lookup"><span data-stu-id="545de-121">The gatekeeper validates all requests, and rejects those that don't meet validation requirements.</span></span>
- <span data-ttu-id="545de-122">**Risque et exposition limités**.</span><span class="sxs-lookup"><span data-stu-id="545de-122">**Limited risk and exposure**.</span></span> <span data-ttu-id="545de-123">L’opérateur de contrôle n’a pas accès aux informations d’identification ni aux clés utilisées par l’hôte approuvé pour accéder au stockage et aux services.</span><span class="sxs-lookup"><span data-stu-id="545de-123">The gatekeeper doesn't have access to the credentials or keys used by the trusted host to access storage and services.</span></span> <span data-ttu-id="545de-124">Si l’opérateur de contrôle est compromis, l’attaquant n’a pas accès à ces informations d’identification ni aux clés.</span><span class="sxs-lookup"><span data-stu-id="545de-124">If the gatekeeper is compromised, the attacker doesn't get access to these credentials or keys.</span></span>
- <span data-ttu-id="545de-125">**Sécurité appropriée**.</span><span class="sxs-lookup"><span data-stu-id="545de-125">**Appropriate security**.</span></span> <span data-ttu-id="545de-126">L’opérateur de contrôle s’exécute dans un mode à privilèges limités, tandis que le reste de l’application s’exécute en mode de sécurité totale, nécessaire pour accéder au stockage et aux services.</span><span class="sxs-lookup"><span data-stu-id="545de-126">The gatekeeper runs in a limited privilege mode, while the rest of the application runs in the full trust mode required to access storage and services.</span></span> <span data-ttu-id="545de-127">Si l’opérateur de contrôle est compromis, il ne peut pas accéder directement aux données ni aux services de l’application.</span><span class="sxs-lookup"><span data-stu-id="545de-127">If the gatekeeper is compromised, it can't directly access the application services or data.</span></span>

<span data-ttu-id="545de-128">Ce modèle agit comme un pare-feu dans une topographie réseau standard.</span><span class="sxs-lookup"><span data-stu-id="545de-128">This pattern acts like a firewall in a typical network topography.</span></span> <span data-ttu-id="545de-129">Il permet à l’opérateur de contrôle d’examiner les requêtes et de prendre une décision sur la transmission de la requête à l’hôte approuvé (parfois appelé le keymaster) qui effectue les tâches requises.</span><span class="sxs-lookup"><span data-stu-id="545de-129">It allows the gatekeeper to examine requests and make a decision about whether to pass the request on to the trusted host (sometimes called the keymaster) that performs the required tasks.</span></span> <span data-ttu-id="545de-130">Cette décision exige généralement de l’opérateur de contrôle qu’il valide et assainisse le contenu de la requête avant de la transmettre à l’hôte approuvé.</span><span class="sxs-lookup"><span data-stu-id="545de-130">This decision typically requires the gatekeeper to validate and sanitize the request content before passing it on to the trusted host.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="545de-131">Problèmes et considérations</span><span class="sxs-lookup"><span data-stu-id="545de-131">Issues and considerations</span></span>

<span data-ttu-id="545de-132">Prenez en compte les points suivants lorsque vous choisissez comment implémenter ce modèle :</span><span class="sxs-lookup"><span data-stu-id="545de-132">Consider the following points when deciding how to implement this pattern:</span></span>

- <span data-ttu-id="545de-133">Assurez-vous que les hôtes approuvés auxquels l’opérateur de contrôle transfère les requêtes exposent uniquement des points de terminaison internes ou protégés et seulement connectés à l’opérateur de contrôle.</span><span class="sxs-lookup"><span data-stu-id="545de-133">Ensure that the trusted hosts the gatekeeper passes requests to expose only internal or protected endpoints, and connect only to the gatekeeper.</span></span> <span data-ttu-id="545de-134">Les hôtes approuvés ne doivent pas exposer des interfaces ou des points de terminaison externes.</span><span class="sxs-lookup"><span data-stu-id="545de-134">The trusted hosts shouldn't expose any external endpoints or interfaces.</span></span>
- <span data-ttu-id="545de-135">L’opérateur de contrôle doit s’exécuter dans un mode à privilèges limités.</span><span class="sxs-lookup"><span data-stu-id="545de-135">The gatekeeper must run in a limited privilege mode.</span></span> <span data-ttu-id="545de-136">En général, cela implique d’exécuter l’opérateur de contrôle et l’hôte approuvé dans des services hébergés distincts ou sur des machines virtuelles différentes.</span><span class="sxs-lookup"><span data-stu-id="545de-136">Typically this means running the gatekeeper and the trusted host in separate hosted services or virtual machines.</span></span>
- <span data-ttu-id="545de-137">L’opérateur de contrôle ne doit effectuer aucun traitement lié à l’application ou aux services, ni accéder aux données.</span><span class="sxs-lookup"><span data-stu-id="545de-137">The gatekeeper shouldn't perform any processing related to the application or services, or access any data.</span></span> <span data-ttu-id="545de-138">Sa fonction consiste exclusivement à valider et à assainir les requêtes.</span><span class="sxs-lookup"><span data-stu-id="545de-138">Its function is purely to validate and sanitize requests.</span></span> <span data-ttu-id="545de-139">Les hôtes approuvés peuvent avoir besoin d’effectuer une validation supplémentaire de requêtes, mais la validation de base doit être effectuée par l’opérateur de contrôle.</span><span class="sxs-lookup"><span data-stu-id="545de-139">The trusted hosts might need to perform additional validation of requests, but the core validation should be performed by the gatekeeper.</span></span>
- <span data-ttu-id="545de-140">Utilisez un canal de communication sécurisé (HTTPS, SSL ou TLS) entre l’opérateur de contrôle et les hôtes approuvés ou les tâches si possible.</span><span class="sxs-lookup"><span data-stu-id="545de-140">Use a secure communication channel (HTTPS, SSL, or TLS) between the gatekeeper and the trusted hosts or tasks where this is possible.</span></span> <span data-ttu-id="545de-141">Toutefois, certains environnements d’hébergement ne prennent pas en charge HTTPS sur les points de terminaison internes.</span><span class="sxs-lookup"><span data-stu-id="545de-141">However, some hosting environments don't support HTTPS on internal endpoints.</span></span>
- <span data-ttu-id="545de-142">L’ajout de la couche supplémentaire à l’application pour implémenter le modèle d’opérateur de contrôle est susceptible d’influer sur les performances en raison du traitement supplémentaire et de la communication réseau nécessaires.</span><span class="sxs-lookup"><span data-stu-id="545de-142">Adding the extra layer to the application to implement the gatekeeper pattern is likely to have some impact on performance due to the additional processing and network communication it requires.</span></span>
- <span data-ttu-id="545de-143">L’instance d’opérateur de contrôle peut être un point de défaillance unique.</span><span class="sxs-lookup"><span data-stu-id="545de-143">The gatekeeper instance could be a single point of failure.</span></span> <span data-ttu-id="545de-144">Pour réduire l’impact d’une défaillance, envisagez de déployer des instances supplémentaires et d’utiliser un mécanisme de mise à l’échelle automatique pour garantir la capacité nécessaire au maintient de la disponibilité.</span><span class="sxs-lookup"><span data-stu-id="545de-144">To minimize the impact of a failure, consider deploying additional instances and using an autoscaling mechanism to ensure capacity to maintain availability.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="545de-145">Quand utiliser ce modèle</span><span class="sxs-lookup"><span data-stu-id="545de-145">When to use this pattern</span></span>

<span data-ttu-id="545de-146">Ce modèle est utile dans les situations suivantes :</span><span class="sxs-lookup"><span data-stu-id="545de-146">This pattern is useful for:</span></span>

- <span data-ttu-id="545de-147">Applications qui gèrent des informations sensibles, exposent des services qui doivent présentent un degré élevé de protection contre les attaques malveillantes, ou effectuent des opérations critiques qui ne doivent pas être interrompues.</span><span class="sxs-lookup"><span data-stu-id="545de-147">Applications that handle sensitive information, expose services that must have a high degree of protection from malicious attacks, or perform mission-critical operations that shouldn't be disrupted.</span></span>
- <span data-ttu-id="545de-148">Applications distribuées où il est nécessaire pour effectuer la validation des requêtes séparément des tâches principales ou de centraliser cette validation pour simplifier la maintenance et l’administration.</span><span class="sxs-lookup"><span data-stu-id="545de-148">Distributed applications where it's necessary to perform request validation separately from the main tasks, or to centralize this validation to simplify maintenance and administration.</span></span>

## <a name="example"></a><span data-ttu-id="545de-149">Exemples</span><span class="sxs-lookup"><span data-stu-id="545de-149">Example</span></span>

<span data-ttu-id="545de-150">Dans un scénario d’hébergement cloud, ce modèle peut être implémenté en découplant le rôle d’opérateur de contrôle ou de machine virtuelle des rôles approuvés et des services dans une application.</span><span class="sxs-lookup"><span data-stu-id="545de-150">In a cloud-hosted scenario, this pattern can be implemented by decoupling the gatekeeper role or virtual machine from the trusted roles and services in an application.</span></span> <span data-ttu-id="545de-151">Pour ce faire, utilisez un point de terminaison interne, une file d’attente ou un stockage comme mécanisme de communication intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="545de-151">Do this by using an internal endpoint, a queue, or storage as an intermediate communication mechanism.</span></span> <span data-ttu-id="545de-152">La figure illustre l’utilisation d’un point de terminaison interne.</span><span class="sxs-lookup"><span data-stu-id="545de-152">The figure illustrates using an internal endpoint.</span></span>

![Exemple du modèle utilisant les rôles web et de travail pour les services cloud](./_images/gatekeeper-endpoint.png)

## <a name="related-patterns"></a><span data-ttu-id="545de-154">Modèles associés</span><span class="sxs-lookup"><span data-stu-id="545de-154">Related patterns</span></span>

<span data-ttu-id="545de-155">Le [modèle de clé Valet](./valet-key.md) peut également être intéressant lorsque vous implémentez le modèle d’opérateur de contrôle.</span><span class="sxs-lookup"><span data-stu-id="545de-155">The [Valet Key pattern](./valet-key.md) might also be relevant when implementing the Gatekeeper pattern.</span></span> <span data-ttu-id="545de-156">Lors de la communication entre l’opérateur de contrôle et les rôles approuvés, il est conseillé de renforcer la sécurité à l’aide de clés ou de jetons qui limitent les autorisations pour accéder aux ressources.</span><span class="sxs-lookup"><span data-stu-id="545de-156">When communicating between the Gatekeeper and trusted roles it's good practice to enhance security by using keys or tokens that limit permissions for accessing resources.</span></span> <span data-ttu-id="545de-157">Décrit l’utilisation d’un jeton ou d’une clé qui fournit aux clients un accès direct limité à une ressource ou un service spécifique.</span><span class="sxs-lookup"><span data-stu-id="545de-157">Describes how to use a token or key that provides clients with restricted direct access to a specific resource or service.</span></span>
