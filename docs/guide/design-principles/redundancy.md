---
title: Rendre tous les éléments redondants
description: Évitez les points de défaillance uniques en intégrant la redondance à votre application.
author: MikeWasson
ms.openlocfilehash: 4f6e3404b2aaf9c28dfd6812975c2709d8cc8c85
ms.sourcegitcommit: 26b04f138a860979aea5d253ba7fecffc654841e
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/19/2018
ms.locfileid: "36206571"
---
# <a name="make-all-things-redundant"></a><span data-ttu-id="f2eae-103">Rendre tous les éléments redondants</span><span class="sxs-lookup"><span data-stu-id="f2eae-103">Make all things redundant</span></span>

## <a name="build-redundancy-into-your-application-to-avoid-having-single-points-of-failure"></a><span data-ttu-id="f2eae-104">Intégrez la redondance à votre application afin d’éviter les points de défaillance uniques</span><span class="sxs-lookup"><span data-stu-id="f2eae-104">Build redundancy into your application, to avoid having single points of failure</span></span>

<span data-ttu-id="f2eae-105">Une application résiliente contourne les défaillances.</span><span class="sxs-lookup"><span data-stu-id="f2eae-105">A resilient application routes around failure.</span></span> <span data-ttu-id="f2eae-106">Identifiez les chemins critiques dans votre application.</span><span class="sxs-lookup"><span data-stu-id="f2eae-106">Identify the critical paths in your application.</span></span> <span data-ttu-id="f2eae-107">Existe-t-il une redondance à chaque point de ces chemins ?</span><span class="sxs-lookup"><span data-stu-id="f2eae-107">Is there redundancy at each point in the path?</span></span> <span data-ttu-id="f2eae-108">En cas de défaillance d’un sous-système, l’application basculera-t-elle vers un autre équipement ?</span><span class="sxs-lookup"><span data-stu-id="f2eae-108">If a subsystem fails, will the application fail over to something else?</span></span>

## <a name="recommendations"></a><span data-ttu-id="f2eae-109">Recommandations</span><span class="sxs-lookup"><span data-stu-id="f2eae-109">Recommendations</span></span> 

<span data-ttu-id="f2eae-110">**Considérez les exigences métiers**.</span><span class="sxs-lookup"><span data-stu-id="f2eae-110">**Consider business requirements**.</span></span> <span data-ttu-id="f2eae-111">Le degré de redondance intégré à un système peut avoir une incidence sur les coûts et la complexité.</span><span class="sxs-lookup"><span data-stu-id="f2eae-111">The amount of redundancy built into a system can affect both cost and complexity.</span></span> <span data-ttu-id="f2eae-112">Votre architecture doit tenir compte de vos exigences métiers, telles que l’objectif de délai de récupération (RTO).</span><span class="sxs-lookup"><span data-stu-id="f2eae-112">Your architecture should be informed by your business requirements, such as recovery time objective (RTO).</span></span> <span data-ttu-id="f2eae-113">Par exemple, un déploiement dans plusieurs régions se révèle plus coûteux et plus complexe à gérer qu’un déploiement dans une seule région.</span><span class="sxs-lookup"><span data-stu-id="f2eae-113">For example, a multi-region deployment is more expensive than a single-region deployment, and is more complicated to manage.</span></span> <span data-ttu-id="f2eae-114">Vous devrez mettre en place des procédures opérationnelles pour gérer le basculement et la restauration automatique.</span><span class="sxs-lookup"><span data-stu-id="f2eae-114">You will need operational procedures to handle failover and failback.</span></span> <span data-ttu-id="f2eae-115">Tous les scénarios métiers ne justifient pas ce surcroît de complexité et ces frais supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="f2eae-115">The additional cost and complexity might be justified for some business scenarios and not others.</span></span>

<span data-ttu-id="f2eae-116">**Placez les machines virtuelles derrière un équilibreur de charge**.</span><span class="sxs-lookup"><span data-stu-id="f2eae-116">**Place VMs behind a load balancer**.</span></span> <span data-ttu-id="f2eae-117">N’utilisez pas une seule machine virtuelle pour les charges de travail stratégiques.</span><span class="sxs-lookup"><span data-stu-id="f2eae-117">Don't use a single VM for mission-critical workloads.</span></span> <span data-ttu-id="f2eae-118">Au lieu de cela, placez plusieurs machines virtuelles derrière un équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="f2eae-118">Instead, place multiple VMs behind a load balancer.</span></span> <span data-ttu-id="f2eae-119">Si l’une des machines virtuelles n’est plus disponible, l’équilibreur de charge répartit le trafic entre les autres machines virtuelles intègres.</span><span class="sxs-lookup"><span data-stu-id="f2eae-119">If any VM becomes unavailable, the load balancer distributes traffic to the remaining healthy VMs.</span></span> <span data-ttu-id="f2eae-120">Pour plus d’informations sur la procédure de déploiement de cette configuration, consultez l’article [Exécuter des machines virtuelles à charge équilibrée à des fins de scalabilité et de disponibilité][multi-vm-blueprint].</span><span class="sxs-lookup"><span data-stu-id="f2eae-120">To learn how to deploy this configuration, see [Multiple VMs for scalability and availability][multi-vm-blueprint].</span></span>

![](./images/load-balancing.svg)

<span data-ttu-id="f2eae-121">**Répliquez les bases de données**.</span><span class="sxs-lookup"><span data-stu-id="f2eae-121">**Replicate databases**.</span></span> <span data-ttu-id="f2eae-122">Azure SQL Database et Cosmos DB répliquent automatiquement les données dans une région, et vous pouvez activer la géoréplication entre les régions.</span><span class="sxs-lookup"><span data-stu-id="f2eae-122">Azure SQL Database and Cosmos DB automatically replicate the data within a region, and you can enable geo-replication across regions.</span></span> <span data-ttu-id="f2eae-123">Si vous utilisez une solution de base de données IaaS, choisissez-en une qui prend en charge la réplication et le basculement, telle que [Groupes de disponibilité Always On SQL Server][sql-always-on].</span><span class="sxs-lookup"><span data-stu-id="f2eae-123">If you are using an IaaS database solution, choose one that supports replication and failover, such as [SQL Server Always On Availability Groups][sql-always-on].</span></span> 

<span data-ttu-id="f2eae-124">**Activez la géoréplication**.</span><span class="sxs-lookup"><span data-stu-id="f2eae-124">**Enable geo-replication**.</span></span> <span data-ttu-id="f2eae-125">La géoréplication pour [Azure SQL Database][sql-geo-replication] et [Cosmos DB][cosmosdb-geo-replication] crée des réplicas lisibles secondaires de vos données dans une ou plusieurs régions secondaires.</span><span class="sxs-lookup"><span data-stu-id="f2eae-125">Geo-replication for [Azure SQL Database][sql-geo-replication] and [Cosmos DB][cosmosdb-geo-replication] creates secondary readable replicas of your data in one or more secondary regions.</span></span> <span data-ttu-id="f2eae-126">En cas de défaillance, la base de données peut basculer vers la région secondaire pour les écritures.</span><span class="sxs-lookup"><span data-stu-id="f2eae-126">In the event of an outage, the database can fail over to the secondary region for writes.</span></span>

<span data-ttu-id="f2eae-127">**Créez des partitions pour garantir la disponibilité**.</span><span class="sxs-lookup"><span data-stu-id="f2eae-127">**Partition for availability**.</span></span> <span data-ttu-id="f2eae-128">Le partitionnement de base de données est souvent utilisé pour améliorer l’extensibilité, mais peut également optimiser la disponibilité.</span><span class="sxs-lookup"><span data-stu-id="f2eae-128">Database partitioning is often used to improve scalability, but it can also improve availability.</span></span> <span data-ttu-id="f2eae-129">Si l’une des partitions n’est plus disponible, les autres partitions restent accessibles.</span><span class="sxs-lookup"><span data-stu-id="f2eae-129">If one shard goes down, the other shards can still be reached.</span></span> <span data-ttu-id="f2eae-130">Une défaillance dans une partition n’interrompra ainsi qu’un sous-ensemble du nombre total de transactions.</span><span class="sxs-lookup"><span data-stu-id="f2eae-130">A failure in one shard will only disrupt a subset of the total transactions.</span></span> 

<span data-ttu-id="f2eae-131">**Déployez l’application dans plusieurs régions**.</span><span class="sxs-lookup"><span data-stu-id="f2eae-131">**Deploy to more than one region**.</span></span> <span data-ttu-id="f2eae-132">Pour optimiser la disponibilité, déployez l’application dans plusieurs régions.</span><span class="sxs-lookup"><span data-stu-id="f2eae-132">For the highest availability, deploy the application to more than one region.</span></span> <span data-ttu-id="f2eae-133">De cette manière, dans les rares cas où un problème affecte l’ensemble d’une région, l’application pourra basculer vers une autre région.</span><span class="sxs-lookup"><span data-stu-id="f2eae-133">That way, in the rare case when a problem affects an entire region, the application can fail over to another region.</span></span> <span data-ttu-id="f2eae-134">Le diagramme ci-après illustre une application multirégion qui utilise Azure Traffic Manager pour gérer le basculement.</span><span class="sxs-lookup"><span data-stu-id="f2eae-134">The following diagram shows a multi-region application that uses Azure Traffic Manager to handle failover.</span></span>

![](images/failover.svg)

<span data-ttu-id="f2eae-135">**Synchronisez le basculement du serveur frontal et du serveur principal**.</span><span class="sxs-lookup"><span data-stu-id="f2eae-135">**Synchronize front and backend failover**.</span></span> <span data-ttu-id="f2eae-136">Utilisez Azure Traffic Manager pour assurer le basculement du serveur frontal.</span><span class="sxs-lookup"><span data-stu-id="f2eae-136">Use Azure Traffic Manager to fail over the front end.</span></span> <span data-ttu-id="f2eae-137">Si le serveur frontal devient inaccessible dans une région, Traffic Manager route les nouvelles requêtes vers la région secondaire.</span><span class="sxs-lookup"><span data-stu-id="f2eae-137">If the front end becomes unreachable in one region, Traffic Manager will route new requests to the secondary region.</span></span> <span data-ttu-id="f2eae-138">Selon votre solution de base de données, vous devrez peut-être coordonner le basculement de la base de données.</span><span class="sxs-lookup"><span data-stu-id="f2eae-138">Depending on your database solution, you may need to coordinate failing over the database.</span></span> 

<span data-ttu-id="f2eae-139">**Utilisez un basculement automatique, mais une restauration manuelle**.</span><span class="sxs-lookup"><span data-stu-id="f2eae-139">**Use automatic failover but manual failback**.</span></span> <span data-ttu-id="f2eae-140">Utilisez Traffic Manager pour le basculement automatique, mais non pour la restauration automatique.</span><span class="sxs-lookup"><span data-stu-id="f2eae-140">Use Traffic Manager for automatic failover, but not for automatic failback.</span></span> <span data-ttu-id="f2eae-141">Dans le cas d’une restauration automatique, vous risquez de basculer vers la région primaire avant que celle-ci soit complètement intègre.</span><span class="sxs-lookup"><span data-stu-id="f2eae-141">Automatic failback carries a risk that you might switch to the primary region before the region is completely healthy.</span></span> <span data-ttu-id="f2eae-142">À la place, vérifiez que tous les sous-systèmes de l’application sont intègres avant de procéder à une restauration manuelle.</span><span class="sxs-lookup"><span data-stu-id="f2eae-142">Instead, verify that all application subsystems are healthy before manually failing back.</span></span> <span data-ttu-id="f2eae-143">En outre, selon la base de données, vous devrez peut-être vérifier la cohérence des données avant d’effectuer la restauration.</span><span class="sxs-lookup"><span data-stu-id="f2eae-143">Also, depending on the database, you might need to check data consistency before failing back.</span></span>

<span data-ttu-id="f2eae-144">**Incluez une redondance pour Traffic Manager**.</span><span class="sxs-lookup"><span data-stu-id="f2eae-144">**Include redundancy for Traffic Manager**.</span></span> <span data-ttu-id="f2eae-145">Traffic Manager constitue un point de défaillance possible.</span><span class="sxs-lookup"><span data-stu-id="f2eae-145">Traffic Manager is a possible failure point.</span></span> <span data-ttu-id="f2eae-146">Examinez le Contrat de niveau de service (SLA) de Traffic Manager et déterminez si Traffic Manager peut à lui seul répondre à vos exigences métiers en matière de haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="f2eae-146">Review the Traffic Manager SLA, and determine whether using Traffic Manager alone meets your business requirements for high availability.</span></span> <span data-ttu-id="f2eae-147">Si ce n’est pas le cas, ajoutez une autre solution de gestion du trafic en guise de restauration automatique.</span><span class="sxs-lookup"><span data-stu-id="f2eae-147">If not, consider adding another traffic management solution as a failback.</span></span> <span data-ttu-id="f2eae-148">En cas de défaillance du service Azure Traffic Manager, modifiez vos enregistrements CNAME dans DNS pour qu’ils pointent vers l’autre service de gestion du trafic.</span><span class="sxs-lookup"><span data-stu-id="f2eae-148">If the Azure Traffic Manager service fails, change your CNAME records in DNS to point to the other traffic management service.</span></span>



<!-- links -->

[multi-vm-blueprint]: ../../reference-architectures/virtual-machines-windows/multi-vm.md

[cassandra]: http://cassandra.apache.org/
[cosmosdb-geo-replication]: /azure/cosmos-db/distribute-data-globally
[sql-always-on]: https://msdn.microsoft.com/library/hh510230.aspx
[sql-geo-replication]: /azure/sql-database/sql-database-geo-replication-overview
