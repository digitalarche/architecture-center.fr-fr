---
title: Modèle de couche de lutte contre la corruption
description: Implémentez une couche de façade ou d’adaptateur entre une application moderne et un système hérité.
author: dragon119
ms.date: 06/23/2017
ms.openlocfilehash: efb1f90be33c2621c7a24c42730da9fffe70dfad
ms.sourcegitcommit: ea7108f71dab09175ff69322874d1bcba800a37a
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/17/2018
---
# <a name="anti-corruption-layer-pattern"></a><span data-ttu-id="42367-103">Modèle de couche de lutte contre la corruption</span><span class="sxs-lookup"><span data-stu-id="42367-103">Anti-Corruption Layer pattern</span></span>

<span data-ttu-id="42367-104">Implémentez une couche de façade ou d’adaptateur entre différents sous-systèmes qui ne partagent pas la même sémantique.</span><span class="sxs-lookup"><span data-stu-id="42367-104">Implement a façade or adapter layer between different subsystems that don't share the same semantics.</span></span> <span data-ttu-id="42367-105">Cette couche traduit les requêtes qu’un sous-système envoie à l’autre sous-système.</span><span class="sxs-lookup"><span data-stu-id="42367-105">This layer translates requests that one subsystem makes to the other subsystem.</span></span> <span data-ttu-id="42367-106">Utilisez ce modèle pour vous assurer que la conception d’une application n’est pas limitée par les dépendances aux sous-systèmes externes.</span><span class="sxs-lookup"><span data-stu-id="42367-106">Use this pattern to ensure that an application's design is not limited by dependencies on outside subsystems.</span></span> <span data-ttu-id="42367-107">Ce modèle a d’abord été décrit par Eric Evans dans *Domain-Driven Design* (Conception orientée domaine).</span><span class="sxs-lookup"><span data-stu-id="42367-107">This pattern was first described by Eric Evans in *Domain-Driven Design*.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="42367-108">Contexte et problème</span><span class="sxs-lookup"><span data-stu-id="42367-108">Context and problem</span></span>

<span data-ttu-id="42367-109">La plupart des applications s’appuient sur d’autres systèmes pour certaines données ou fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="42367-109">Most applications rely on other systems for some data or functionality.</span></span> <span data-ttu-id="42367-110">Par exemple, lorsqu’une application héritée est migrée vers un système moderne, elle peut toujours avoir besoin de ressources héritées existantes.</span><span class="sxs-lookup"><span data-stu-id="42367-110">For example, when a legacy application is migrated to a modern system, it may still need existing legacy resources.</span></span> <span data-ttu-id="42367-111">De nouvelles fonctionnalités doivent être en mesure d’appeler le système hérité.</span><span class="sxs-lookup"><span data-stu-id="42367-111">New features must be able to call the legacy system.</span></span> <span data-ttu-id="42367-112">Cela est particulièrement vrai lorsqu’il s’agit de migrations graduelles pour lesquelles différentes fonctionnalités d’une application plus importante sont déplacées vers un système moderne au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="42367-112">This is especially true of gradual migrations, where different features of a larger application are moved to a modern system over time.</span></span>

<span data-ttu-id="42367-113">Souvent, ces systèmes hérités connaissent des problèmes de qualité comme des schémas de données complexes ou des API obsolètes.</span><span class="sxs-lookup"><span data-stu-id="42367-113">Often these legacy systems suffer from quality issues such as convoluted data schemas or obsolete APIs.</span></span> <span data-ttu-id="42367-114">Les fonctionnalités et technologies utilisées dans les systèmes hérités peuvent varier considérablement par rapport à des systèmes plus modernes.</span><span class="sxs-lookup"><span data-stu-id="42367-114">The features and technologies used in legacy systems can vary widely from more modern systems.</span></span> <span data-ttu-id="42367-115">Pour interagir avec le système hérité, la nouvelle application doit éventuellement prendre en charge une infrastructure, des protocoles, des modèles de données, des API obsolètes ou d’autres fonctionnalités que vous n’implémenteriez pas dans une application moderne.</span><span class="sxs-lookup"><span data-stu-id="42367-115">To interoperate with the legacy system, the new application may need to support outdated infrastructure, protocols, data models, APIs, or other features that you wouldn't otherwise put into a modern application.</span></span>

<span data-ttu-id="42367-116">Maintenir l’accès entre les systèmes nouveaux et hérités peut forcer le nouveau système à respecter au moins certaines API ou d’autres sémantiques du système hérité.</span><span class="sxs-lookup"><span data-stu-id="42367-116">Maintaining access between new and legacy systems can force the new system to adhere to at least some of the legacy system's APIs or other semantics.</span></span> <span data-ttu-id="42367-117">Lorsque ces fonctionnalités héritées ont des problèmes de qualité, le fait de les prendre en charge « corrompt » ce qui pourrait être une application moderne correctement conçue.</span><span class="sxs-lookup"><span data-stu-id="42367-117">When these legacy features have quality issues, supporting them "corrupts" what might otherwise be a cleanly designed modern application.</span></span> 

<span data-ttu-id="42367-118">Des problèmes similaires peuvent se produire avec n’importe quel système externe que votre équipe de développement ne contrôle pas, pas uniquement avec les systèmes hérités.</span><span class="sxs-lookup"><span data-stu-id="42367-118">Similar issues can arise with any external system that your developmenmt team doesn't control, not just legacy systems.</span></span> 

## <a name="solution"></a><span data-ttu-id="42367-119">Solution</span><span class="sxs-lookup"><span data-stu-id="42367-119">Solution</span></span>

<span data-ttu-id="42367-120">Isolez les différents sous-systèmes en plaçant une couche de lutte contre la corruption entre eux.</span><span class="sxs-lookup"><span data-stu-id="42367-120">Isolate the different subsystems by placing an anti-corruption layer between them.</span></span> <span data-ttu-id="42367-121">Cette couche traduit les communications entre les deux systèmes, ce qui permet à un système de rester identique alors que l’autre système peut éviter de compromettre sa conception et son approche technologique.</span><span class="sxs-lookup"><span data-stu-id="42367-121">This layer translates communications between the two systems, allowing one system to remain unchanged while the other can avoid compromising its design and technological approach.</span></span>

![](./_images/anti-corruption-layer.png) 

<span data-ttu-id="42367-122">Le diagramme ci-dessus illustre une application comprenant deux sous-systèmes.</span><span class="sxs-lookup"><span data-stu-id="42367-122">The diagram above shows an application with two subsystems.</span></span> <span data-ttu-id="42367-123">Le sous-système A appelle le sous-système B à travers une couche de lutte contre la corruption.</span><span class="sxs-lookup"><span data-stu-id="42367-123">Subsystem A calls to subsystem B through an anti-corruption layer.</span></span> <span data-ttu-id="42367-124">La communication entre le sous-système A et la couche de lutte contre la corruption utilise toujours le modèle de données et l’architecture du sous-système A. Les appels à partir de la couche de lutte contre la corruption vers le sous-système B sont conformes au modèle de données ou aux méthodes de ce sous-système.</span><span class="sxs-lookup"><span data-stu-id="42367-124">Communication between subsystem A and the anti-corruption layer always uses the data model and architecture of subsystem A. Calls from the anti-corruption layer to subsystem B conform to that subsystem's data model or methods.</span></span> <span data-ttu-id="42367-125">La couche de lutte contre la corruption contient toute la logique nécessaire pour effectuer la traduction entre les deux systèmes.</span><span class="sxs-lookup"><span data-stu-id="42367-125">The anti-corruption layer contains all of the logic necessary to translate between the two systems.</span></span> <span data-ttu-id="42367-126">La couche peut être implémentée en tant que composant dans l’application ou en tant que service indépendant.</span><span class="sxs-lookup"><span data-stu-id="42367-126">The layer can be implemented as a component within the application or as an independent service.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="42367-127">Problèmes et considérations</span><span class="sxs-lookup"><span data-stu-id="42367-127">Issues and considerations</span></span>

- <span data-ttu-id="42367-128">La couche de lutte contre la corruption peut ajouter de la latence aux appels effectués entre les deux systèmes.</span><span class="sxs-lookup"><span data-stu-id="42367-128">The anti-corruption layer may add latency to calls made between the two systems.</span></span>
- <span data-ttu-id="42367-129">La couche de lutte contre la corruption ajoute un service supplémentaire qui doit être géré et maintenu.</span><span class="sxs-lookup"><span data-stu-id="42367-129">The anti-corruption layer adds an additional service that must be managed and maintained.</span></span>
- <span data-ttu-id="42367-130">Réfléchissez à la façon dont votre couche de lutte contre la corruption va être mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="42367-130">Consider how your anti-corruption layer will scale.</span></span>
- <span data-ttu-id="42367-131">Évaluez si vous avez besoin de plus d’une couche de lutte contre la corruption.</span><span class="sxs-lookup"><span data-stu-id="42367-131">Consider whether you need more than one anti-corruption layer.</span></span> <span data-ttu-id="42367-132">Vous pouvez décomposer les fonctionnalités en plusieurs services à l’aide de différents langages ou technologies ; vous pouvez également choisir de partitionner la couche de lutte contre la corruption pour d’autres raisons.</span><span class="sxs-lookup"><span data-stu-id="42367-132">You may want to decompose functionality into multiple services using different technologies or languages, or there may be other reasons to partition the anti-corruption layer.</span></span>
- <span data-ttu-id="42367-133">Réfléchissez à la façon dont la couche de lutte contre la corruption sera gérée par rapport à vos autres applications ou services.</span><span class="sxs-lookup"><span data-stu-id="42367-133">Consider how the anti-corruption layer will be managed in relation with your other applications or services.</span></span> <span data-ttu-id="42367-134">Comment sera-t-elle intégrée à vos processus de surveillance, de mise en production et de configuration ?</span><span class="sxs-lookup"><span data-stu-id="42367-134">How will it be integrated into your monitoring, release, and configuration processes?</span></span>
- <span data-ttu-id="42367-135">Assurez-vous que la cohérence des transactions et des données est conservée et qu’elle peut être surveillée.</span><span class="sxs-lookup"><span data-stu-id="42367-135">Make sure transaction and data consistency are maintained and can be monitored.</span></span>
- <span data-ttu-id="42367-136">Déterminez si la couche de lutte contre la corruption doit gérer toutes les communications entre différents sous-systèmes ou uniquement un sous-ensemble de fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="42367-136">Consider whether the anti-corruption layer needs to handle all communication between different subsystems, or just a subset of features.</span></span> 
- <span data-ttu-id="42367-137">Si la couche de lutte contre la corruption fait partie d’une stratégie de migration d’application, déterminez si elle sera permanente, ou si elle sera mise hors service une fois toutes les fonctionnalités hérités migrées.</span><span class="sxs-lookup"><span data-stu-id="42367-137">If the anti-corruption layer is part of an application migration strategy, consider whether it will be permanent, or will be retired after all legacy functionality has been migrated.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="42367-138">Quand utiliser ce modèle</span><span class="sxs-lookup"><span data-stu-id="42367-138">When to use this pattern</span></span>

<span data-ttu-id="42367-139">Utilisez ce modèle dans les situations suivantes :</span><span class="sxs-lookup"><span data-stu-id="42367-139">Use this pattern when:</span></span>

- <span data-ttu-id="42367-140">Une migration est planifiée pour avoir lieu en plusieurs étapes, mais l’intégration entre les systèmes nouveaux et hérités doit être maintenue.</span><span class="sxs-lookup"><span data-stu-id="42367-140">A migration is planned to happen over multiple stages, but integration between new and legacy systems needs to be maintained.</span></span>
- <span data-ttu-id="42367-141">Deux ou plusieurs sous-systèmes ont des sémantiques différentes, mais doivent tout de même communiquer.</span><span class="sxs-lookup"><span data-stu-id="42367-141">Two or more subsystems have different semantics, but still need to communicate.</span></span> 

<span data-ttu-id="42367-142">Ce modèle peut ne pas convenir s’il n’y a aucune différence de sémantique significative entre les systèmes nouveaux et hérités.</span><span class="sxs-lookup"><span data-stu-id="42367-142">This pattern may not be suitable if there are no significant semantic differences between new and legacy systems.</span></span> 

## <a name="related-guidance"></a><span data-ttu-id="42367-143">Aide connexe</span><span class="sxs-lookup"><span data-stu-id="42367-143">Related guidance</span></span>

- [<span data-ttu-id="42367-144">Modèle d’étranglement</span><span class="sxs-lookup"><span data-stu-id="42367-144">Strangler pattern</span></span>](./strangler.md)
