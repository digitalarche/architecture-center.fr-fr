---
title: Déploiement d’applications Azure pour la résilience et disponibilité
description: Une vue d’ensemble des techniques pour créer des déploiements fiables dans Azure
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: d8df3fe1c3353c60462959a625ba13ae47b96cf8
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59646554"
---
# <a name="deploying-azure-applications-for-resiliency-and-availability"></a><span data-ttu-id="831bd-103">Déploiement d’applications Azure pour la résilience et disponibilité</span><span class="sxs-lookup"><span data-stu-id="831bd-103">Deploying Azure applications for resiliency and availability</span></span>

<span data-ttu-id="831bd-104">Lorsque vous configurez et mettre à jour des ressources Azure, code d’application et les paramètres de configuration, un processus reproductible et prévisible vous aidera à éviter des erreurs et des temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="831bd-104">As you provision and update Azure resources, application code, and configuration settings, a repeatable and predictable process will help you avoid errors and downtime.</span></span> <span data-ttu-id="831bd-105">Nous vous recommandons les processus automatisés de déploiement que vous pouvez exécuter à la demande et exécutez à nouveau en cas de problème.</span><span class="sxs-lookup"><span data-stu-id="831bd-105">We recommend automated processes for deployment that you can run on demand and rerun if something fails.</span></span> <span data-ttu-id="831bd-106">Une fois que vos processus de déploiement sont en cours d’exécution sans heurts, documentation sur le processus peut conservez-les de cette façon.</span><span class="sxs-lookup"><span data-stu-id="831bd-106">After your deployment processes are running smoothly, process documentation can keep them that way.</span></span>

## <a name="automate-processes"></a><span data-ttu-id="831bd-107">Automatiser les processus</span><span class="sxs-lookup"><span data-stu-id="831bd-107">Automate processes</span></span>

<span data-ttu-id="831bd-108">Pour activer des ressources à la demande, déployer des solutions rapidement, réduire les erreurs humaines et produire des résultats cohérents et reproductibles, veillez à automatiser les déploiements et mises à jour.</span><span class="sxs-lookup"><span data-stu-id="831bd-108">To activate resources on demand, deploy solutions rapidly, minimize human error, and produce consistent and repeatable results, be sure to automate deployments and updates.</span></span>

### <a name="automate-as-many-processes-as-possible"></a><span data-ttu-id="831bd-109">Automatiser les processus autant que possible</span><span class="sxs-lookup"><span data-stu-id="831bd-109">Automate as many processes as possible</span></span>

<span data-ttu-id="831bd-110">Les processus de déploiement plus fiables sont automatisées et *idempotent* &mdash; , autrement dit, reproductibles pour produire les mêmes résultats.</span><span class="sxs-lookup"><span data-stu-id="831bd-110">The most reliable deployment processes are automated and *idempotent* &mdash; that is, repeatable to produce the same results.</span></span>

- <span data-ttu-id="831bd-111">Pour automatiser l’approvisionnement des ressources Azure, vous pouvez utiliser [Terraform](/azure/virtual-machines/windows/infrastructure-automation#terraform), [Ansible](/azure/virtual-machines/windows/infrastructure-automation#ansible), [Chef](/azure/virtual-machines/windows/infrastructure-automation#chef), [Puppet](/azure/virtual-machines/windows/infrastructure-automation#puppet), [Azure PowerShell](/powershell/azure/overview), [interface de ligne de commande Azure (CLI)](/cli/azure), ou [modèles Azure Resource Manager](/azure/azure-resource-manager/resource-group-overview#template-deployment).</span><span class="sxs-lookup"><span data-stu-id="831bd-111">To automate provisioning of Azure resources, you can use [Terraform](/azure/virtual-machines/windows/infrastructure-automation#terraform),   [Ansible](/azure/virtual-machines/windows/infrastructure-automation#ansible), [Chef](/azure/virtual-machines/windows/infrastructure-automation#chef), [Puppet](/azure/virtual-machines/windows/infrastructure-automation#puppet),   [Azure PowerShell](/powershell/azure/overview), [Azure command-line interface (CLI)](/cli/azure), or [Azure Resource Manager templates](/azure/azure-resource-manager/resource-group-overview#template-deployment).</span></span>
- <span data-ttu-id="831bd-112">Pour configurer des machines virtuelles, vous pouvez utiliser [cloud-init](/azure/virtual-machines/windows/infrastructure-automation#cloud-init) (pour les machines virtuelles Linux) ou [Configuration d’état Azure Automation](/azure/automation/automation-dsc-overview) (DSC).</span><span class="sxs-lookup"><span data-stu-id="831bd-112">To configure VMs, you can use [cloud-init](/azure/virtual-machines/windows/infrastructure-automation#cloud-init) (for Linux VMs) or [Azure Automation State Configuration](/azure/automation/automation-dsc-overview) (DSC).</span></span>
- <span data-ttu-id="831bd-113">Pour automatiser le déploiement d’applications, vous pouvez utiliser [Azure DevOps Services](/azure/virtual-machines/windows/infrastructure-automation#azure-devops-services), [Jenkins](/azure/virtual-machines/windows/infrastructure-automation#jenkins), ou d’autres solutions de CI/CD.</span><span class="sxs-lookup"><span data-stu-id="831bd-113">To automate application deployment, you can use [Azure DevOps Services](/azure/virtual-machines/windows/infrastructure-automation#azure-devops-services), [Jenkins](/azure/virtual-machines/windows/infrastructure-automation#jenkins), or other CI/CD solutions.</span></span>

<span data-ttu-id="831bd-114">Comme meilleure pratique, créez un référentiel de scripts d’automatisation par catégorie pour un accès rapide, documentée avec des explications des paramètres et des exemples d’utilisation de script.</span><span class="sxs-lookup"><span data-stu-id="831bd-114">As a best practice, create a repository of categorized automation scripts for quick access, documented with explanations of parameters and examples of script use.</span></span> <span data-ttu-id="831bd-115">Synchroniser cette documentation avec vos déploiements Azure et désigner une personne principale pour gérer le référentiel.</span><span class="sxs-lookup"><span data-stu-id="831bd-115">Keep this documentation in sync with your Azure deployments, and designate a primary person to manage the repository.</span></span>

<span data-ttu-id="831bd-116">Scripts d’automatisation peuvent également activer des ressources à la demande de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="831bd-116">Automation scripts can also activate resources on demand for disaster recovery.</span></span>

### <a name="use-code-to-provision-and-configure-infrastructure"></a><span data-ttu-id="831bd-117">Utiliser le code pour approvisionner et configurer l’infrastructure</span><span class="sxs-lookup"><span data-stu-id="831bd-117">Use code to provision and configure infrastructure</span></span>

<span data-ttu-id="831bd-118">Cette pratique appelée *infrastructure en tant que code,* peut utiliser une approche déclarative ou une approche impérative (ou une combinaison des deux).</span><span class="sxs-lookup"><span data-stu-id="831bd-118">This practice, called *infrastructure as code,* may use a declarative approach or an imperative approach (or a combination of both).</span></span>

- <span data-ttu-id="831bd-119">[Modèles Resource Manager](/azure/azure-resource-manager/resource-group-overview#template-deployment) sont un exemple d’une approche déclarative.</span><span class="sxs-lookup"><span data-stu-id="831bd-119">[Resource Manager templates](/azure/azure-resource-manager/resource-group-overview#template-deployment) are an example of a declarative approach.</span></span>
- <span data-ttu-id="831bd-120">[PowerShell](/powershell/azure/overview) scripts sont un exemple d’approche impérative.</span><span class="sxs-lookup"><span data-stu-id="831bd-120">[PowerShell](/powershell/azure/overview) scripts are an example of an imperative approach.</span></span>

### <a name="practice-immutable-infrastructure"></a><span data-ttu-id="831bd-121">Infrastructure immuable pratique</span><span class="sxs-lookup"><span data-stu-id="831bd-121">Practice immutable infrastructure</span></span>

<span data-ttu-id="831bd-122">En d’autres termes, ne modifiez pas infrastructure après son déploiement en production.</span><span class="sxs-lookup"><span data-stu-id="831bd-122">In other words, don't modify infrastructure after it's deployed to production.</span></span> <span data-ttu-id="831bd-123">Une fois les modifications ad hoc ont été appliquées, vous ne savez pas exactement ce qui a changé, il peut être difficile à dépanner le système.</span><span class="sxs-lookup"><span data-stu-id="831bd-123">After ad hoc changes have been applied, you might not know exactly what has changed, so it can be difficult to troubleshoot the system.</span></span>

### <a name="automate-and-test-deployment-and-maintenance-tasks"></a><span data-ttu-id="831bd-124">Automatisez et testez les tâches de déploiement et maintenance</span><span class="sxs-lookup"><span data-stu-id="831bd-124">Automate and test deployment and maintenance tasks</span></span>

<span data-ttu-id="831bd-125">Les applications distribuées se composent de plusieurs parties qui doivent fonctionner ensemble.</span><span class="sxs-lookup"><span data-stu-id="831bd-125">Distributed applications consist of multiple parts that must work together.</span></span> <span data-ttu-id="831bd-126">Déploiement doit tirer parti des mécanismes ayant fait leurs preuves, telles que les scripts, ce qui peuvent mettre à jour et valider la configuration et pour automatiser le processus de déploiement.</span><span class="sxs-lookup"><span data-stu-id="831bd-126">Deployment should take advantage of proven mechanisms, such as scripts, that can update and validate configuration and automate the deployment process.</span></span> <span data-ttu-id="831bd-127">Testez tous les processus entièrement pour vous assurer que les erreurs ne provoquent des temps d’arrêt supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="831bd-127">Test all processes fully to ensure that errors don't cause additional downtime.</span></span>

### <a name="implement-deployment-security-measures"></a><span data-ttu-id="831bd-128">Implémenter des mesures de sécurité de déploiement</span><span class="sxs-lookup"><span data-stu-id="831bd-128">Implement deployment security measures</span></span>

<span data-ttu-id="831bd-129">Tous les outils de déploiement doivent intégrer des restrictions de sécurité pour protéger l’application déployée.</span><span class="sxs-lookup"><span data-stu-id="831bd-129">All deployment tools must incorporate security restrictions to protect the deployed application.</span></span> <span data-ttu-id="831bd-130">Définir et appliquer des stratégies de déploiement avec soin et minimiser la nécessité d’une intervention humaine.</span><span class="sxs-lookup"><span data-stu-id="831bd-130">Define and enforce deployment policies carefully, and minimize the need for human intervention.</span></span>

## <a name="deploy-to-multiple-regions-and-instances"></a><span data-ttu-id="831bd-131">Déployer sur plusieurs régions et les instances</span><span class="sxs-lookup"><span data-stu-id="831bd-131">Deploy to multiple regions and instances</span></span>

<span data-ttu-id="831bd-132">Une application qui repose sur une seule instance d’un service crée un point de défaillance unique.</span><span class="sxs-lookup"><span data-stu-id="831bd-132">An application that depends on a single instance of a service creates a single point of failure.</span></span> <span data-ttu-id="831bd-133">Pour améliorer la résilience et l’évolutivité, configurez plusieurs instances.</span><span class="sxs-lookup"><span data-stu-id="831bd-133">To improve resiliency and scalability, provision multiple instances.</span></span>

- <span data-ttu-id="831bd-134">Pour [Azure App Service](/azure/app-service/app-service-value-prop-what-is/), sélectionnez un [plan App Service](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) qui offre plusieurs instances.</span><span class="sxs-lookup"><span data-stu-id="831bd-134">For [Azure App Service](/azure/app-service/app-service-value-prop-what-is/), select an [App Service plan](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) that offers multiple instances.</span></span>
- <span data-ttu-id="831bd-135">Pour [Azure Cloud Services](/azure/cloud-services/cloud-services-choose-me), configurez chacun de vos rôles pour utiliser [plusieurs instances](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span><span class="sxs-lookup"><span data-stu-id="831bd-135">For [Azure Cloud Services](/azure/cloud-services/cloud-services-choose-me), configure each of your roles to use [multiple instances](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span></span>
- <span data-ttu-id="831bd-136">Pour [Machines virtuelles](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), vérifiez que votre architecture inclut plusieurs machines virtuelles et que chaque machine virtuelle est incluse dans un [à haute disponibilité](/azure/virtual-machines/virtual-machines-windows-manage-availability/).</span><span class="sxs-lookup"><span data-stu-id="831bd-136">For [Azure Virtual Machines](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), ensure that your architecture includes more than one VM and that each VM is included in an [availability set](/azure/virtual-machines/virtual-machines-windows-manage-availability/).</span></span>

### <a name="consider-deploying-across-multiple-regions"></a><span data-ttu-id="831bd-137">Envisagez de déployer dans plusieurs régions</span><span class="sxs-lookup"><span data-stu-id="831bd-137">Consider deploying across multiple regions</span></span>

<span data-ttu-id="831bd-138">Nous vous recommandons de déployer toutes, mais les applications moins critiques et les services d’application dans plusieurs régions.</span><span class="sxs-lookup"><span data-stu-id="831bd-138">We recommend deploying all but the least critical applications and application services across multiple regions.</span></span> <span data-ttu-id="831bd-139">Si votre application est déployée sur une seule région, dans les rares cas que la région entière deviendrait indisponible, l’application sera également être indisponible.</span><span class="sxs-lookup"><span data-stu-id="831bd-139">If your application is deployed to a single region, in the rare event that the entire region becomes unavailable, the application will also be unavailable.</span></span>

<span data-ttu-id="831bd-140">Si vous choisissez de déployer à une seule région, envisagez de préparation de la redéployer vers une région secondaire en réponse à une défaillance inattendue.</span><span class="sxs-lookup"><span data-stu-id="831bd-140">If you choose to deploy to a single region, consider preparing to redeploy to a secondary region as a response to an unexpected failure.</span></span>

### <a name="redeploy-to-a-secondary-region"></a><span data-ttu-id="831bd-141">Redéployer vers une région secondaire</span><span class="sxs-lookup"><span data-stu-id="831bd-141">Redeploy to a secondary region</span></span>

<span data-ttu-id="831bd-142">Si vous exécutez des applications et bases de données dans une région unique, primaire sans aucune réplication, votre stratégie de récupération peut consister à redéployer vers une autre région.</span><span class="sxs-lookup"><span data-stu-id="831bd-142">If you run applications and databases in a single, primary region with no replication, your recovery strategy might be to redeploy to another region.</span></span> <span data-ttu-id="831bd-143">Cette solution est abordable, mais plus approprié pour les applications non critiques qui peuvent tolérer des temps de récupération.</span><span class="sxs-lookup"><span data-stu-id="831bd-143">This solution is affordable but most appropriate for non-critical applications that can tolerate longer recovery times.</span></span>

<span data-ttu-id="831bd-144">Si vous choisissez cette stratégie, automatiser le processus de redéploiement autant que possible et incluent des scénarios de redéploiement dans votre test de réponse d’urgence.</span><span class="sxs-lookup"><span data-stu-id="831bd-144">If you choose this strategy, automate the redeployment process as much as possible and include redeployment scenarios in your disaster response testing.</span></span>

<span data-ttu-id="831bd-145">Pour automatiser votre processus de redéploiement, envisagez d’utiliser [Azure Site Recovery](/azure/site-recovery/).</span><span class="sxs-lookup"><span data-stu-id="831bd-145">To automate your redeployment process, consider using [Azure Site Recovery](/azure/site-recovery/).</span></span>

## <a name="use-staging-and-production-environments"></a><span data-ttu-id="831bd-146">Utiliser des environnements intermédiaire et de production</span><span class="sxs-lookup"><span data-stu-id="831bd-146">Use staging and production environments</span></span>

<span data-ttu-id="831bd-147">Avec bon usage des environnements intermédiaire et de production, vous pouvez envoyer des mises à jour à l’environnement de production de manière hautement contrôlée et limiter les perturbations de problèmes de déploiement imprévus.</span><span class="sxs-lookup"><span data-stu-id="831bd-147">With good use of staging and production environments, you can push updates to the production environment in a highly controlled way and minimize disruption from unanticipated deployment issues.</span></span>

- <span data-ttu-id="831bd-148">[*Déploiement bleu-vert*](https://martinfowler.com/bliki/BlueGreenDeployment.html) implique le déploiement d’une mise à jour dans un environnement de production qui est distinct de l’application en direct.</span><span class="sxs-lookup"><span data-stu-id="831bd-148">[*Blue-green deployment*](https://martinfowler.com/bliki/BlueGreenDeployment.html) involves deploying an update into a production environment that's separate from the live application.</span></span> <span data-ttu-id="831bd-149">Après avoir validé le déploiement, passez le routage du trafic vers la version mise à jour.</span><span class="sxs-lookup"><span data-stu-id="831bd-149">After you validate the deployment, switch the traffic routing to the updated version.</span></span> <span data-ttu-id="831bd-150">Une façon de faire cela consiste à utiliser le [emplacements intermédiaires](/azure/app-service/web-sites-staged-publishing) disponibles dans Azure App Service pour planifier un déploiement avant de passer à la production.</span><span class="sxs-lookup"><span data-stu-id="831bd-150">One way to do this is to use the [staging slots](/azure/app-service/web-sites-staged-publishing) available in Azure App Service to stage a deployment before moving it to production.</span></span>
- <span data-ttu-id="831bd-151">[*Versions « Canary »*](https://martinfowler.com/bliki/CanaryRelease.html) sont similaires aux déploiements bleu-vert.</span><span class="sxs-lookup"><span data-stu-id="831bd-151">[*Canary releases*](https://martinfowler.com/bliki/CanaryRelease.html) are similar to blue-green deployments.</span></span> <span data-ttu-id="831bd-152">Au lieu de basculer tout le trafic à l’application mise à jour, vous acheminez uniquement une petite partie du trafic vers le nouveau déploiement.</span><span class="sxs-lookup"><span data-stu-id="831bd-152">Instead of switching all traffic to the updated application, you route only a small portion of the traffic to the new deployment.</span></span> <span data-ttu-id="831bd-153">S’il existe un problème, revenir à l’ancien déploiement.</span><span class="sxs-lookup"><span data-stu-id="831bd-153">If there's a problem, revert to the old deployment.</span></span> <span data-ttu-id="831bd-154">Si ce n’est pas le cas, Router progressivement plus de trafic vers la nouvelle version.</span><span class="sxs-lookup"><span data-stu-id="831bd-154">If not, gradually route more traffic to the new version.</span></span> <span data-ttu-id="831bd-155">Si vous utilisez Azure App Service, vous pouvez utiliser le test dans la fonctionnalité de production pour gérer une version de contrôle de validité.</span><span class="sxs-lookup"><span data-stu-id="831bd-155">If you're using Azure App Service, you can use the Testing in production feature to manage a canary release.</span></span>

## <a name="create-a-rollback-plan-for-deployment-and-updates"></a><span data-ttu-id="831bd-156">Créer un plan de restauration pour le déploiement et les mises à jour</span><span class="sxs-lookup"><span data-stu-id="831bd-156">Create a rollback plan for deployment and updates</span></span>

<span data-ttu-id="831bd-157">Si un déploiement échoue, votre application peut être indisponible.</span><span class="sxs-lookup"><span data-stu-id="831bd-157">If a deployment fails, your application could become unavailable.</span></span> <span data-ttu-id="831bd-158">Pour réduire le temps mort, concevoir un processus de restauration pour revenir à une version de bonne connu.</span><span class="sxs-lookup"><span data-stu-id="831bd-158">To minimize downtime, design a rollback process to go back to a last-known good version.</span></span> <span data-ttu-id="831bd-159">Inclure une stratégie pour restaurer les modifications pour les bases de données et d’autres services que dépend de votre application.</span><span class="sxs-lookup"><span data-stu-id="831bd-159">Include a strategy to roll back changes to databases and any other services your app depends on.</span></span>

<span data-ttu-id="831bd-160">Si vous utilisez Azure App Service, vous pouvez configurer un emplacement connu bon site et l’utiliser pour restaurer à partir d’un site ou d’un déploiement de l’application API.</span><span class="sxs-lookup"><span data-stu-id="831bd-160">If you're using Azure App Service, you can set up a last-known good site slot and use it to roll back from a web or API app deployment.</span></span>

## <a name="log-and-audit-deployments"></a><span data-ttu-id="831bd-161">Déploiements de journaux et d’audit</span><span class="sxs-lookup"><span data-stu-id="831bd-161">Log and audit deployments</span></span>

<span data-ttu-id="831bd-162">Pour capturer en tant que beaucoup spécifique à la version d’informations que possible, implémentez une stratégie de journalisation fiable.</span><span class="sxs-lookup"><span data-stu-id="831bd-162">To capture as much version-specific information as possible, implement a robust logging strategy.</span></span> <span data-ttu-id="831bd-163">Si vous utilisez des techniques de déploiement intermédiaire, plusieurs versions de votre application seront exécuteront en production.</span><span class="sxs-lookup"><span data-stu-id="831bd-163">If you use staged deployment techniques, more than one version of your application will be running in production.</span></span> <span data-ttu-id="831bd-164">Si un problème se produit, de déterminer quelle version est le responsable.</span><span class="sxs-lookup"><span data-stu-id="831bd-164">If a problem occurs, determine which version is causing it.</span></span>

## <a name="document-release-processes"></a><span data-ttu-id="831bd-165">Processus de mise en production de documents</span><span class="sxs-lookup"><span data-stu-id="831bd-165">Document release processes</span></span>

<span data-ttu-id="831bd-166">Sans documentation du processus de publication détaillées, un opérateur peut déployer une mise à jour incorrecte ou mal peut configurer les paramètres de votre application.</span><span class="sxs-lookup"><span data-stu-id="831bd-166">Without detailed release process documentation, an operator might deploy a bad update or might improperly configure settings for your application.</span></span> <span data-ttu-id="831bd-167">Définissez et documentez clairement votre processus de mise en production et assurez-vous que toute l’équipe chargée des opérations a accès à cette documentation.</span><span class="sxs-lookup"><span data-stu-id="831bd-167">Clearly define and document your release process, and ensure that it's available to the entire operations team.</span></span>

## <a name="next-steps"></a><span data-ttu-id="831bd-168">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="831bd-168">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="831bd-169">Surveiller l’intégrité d’application pour la fiabilité</span><span class="sxs-lookup"><span data-stu-id="831bd-169">Monitor application health for reliability</span></span>](./monitoring.md)
