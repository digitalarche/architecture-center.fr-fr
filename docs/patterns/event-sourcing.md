---
title: Approvisionnement en événements
description: Utilisez un magasin d’ajout uniquement pour enregistrer la série complète d’événements qui décrivent les actions exécutées sur les données dans un domaine.
keywords: modèle de conception
author: dragon119
ms.date: 06/23/2017
pnp.series.title: Cloud Design Patterns
pnp.pattern.categories:
- data-management
- performance-scalability
ms.openlocfilehash: 9a0bf170c9b54c3b2ee9cc91d6dcb5c55a13b96a
ms.sourcegitcommit: ea7108f71dab09175ff69322874d1bcba800a37a
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/17/2018
---
# <a name="event-sourcing-pattern"></a><span data-ttu-id="7f29f-104">Modèle d'approvisionnement en événements</span><span class="sxs-lookup"><span data-stu-id="7f29f-104">Event Sourcing pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="7f29f-105">Au lieu de stocker uniquement l’état actuel des données dans un domaine, utilisez un magasin d’ajout uniquement pour enregistrer la série complète d’actions exécutées sur ces données.</span><span class="sxs-lookup"><span data-stu-id="7f29f-105">Instead of storing just the current state of the data in a domain, use an append-only store to record the full series of actions taken on that data.</span></span>
<span data-ttu-id="7f29f-106">Le magasin joue le rôle de système d’enregistrement et peut être utilisé pour matérialiser les objets du domaine.</span><span class="sxs-lookup"><span data-stu-id="7f29f-106">The store acts as the system of record and can be used to materialize the domain objects.</span></span> <span data-ttu-id="7f29f-107">Cela peut simplifier les tâches dans les domaines complexes, en évitant d’avoir à synchroniser le modèle de données et le domaine de l’entreprise, tout en améliorant les performances, l’évolutivité et la réactivité.</span><span class="sxs-lookup"><span data-stu-id="7f29f-107">This can simplify tasks in complex domains, by avoiding the need to synchronize the data model and the business domain, while improving performance, scalability, and responsiveness.</span></span> <span data-ttu-id="7f29f-108">Il peut également assurer la cohérence des données transactionnelles et conserver un historique et des journaux d’audit complets qui peuvent activer des actions de compensation.</span><span class="sxs-lookup"><span data-stu-id="7f29f-108">It can also provide consistency for transactional data, and maintain full audit trails and history that can enable compensating actions.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="7f29f-109">Contexte et problème</span><span class="sxs-lookup"><span data-stu-id="7f29f-109">Context and problem</span></span>

<span data-ttu-id="7f29f-110">La plupart des applications utilisent des données et l’approche habituelle consiste à ce que l’application les mette à jour lorsque les utilisateurs les utilisent.</span><span class="sxs-lookup"><span data-stu-id="7f29f-110">Most applications work with data, and the typical approach is for the application to maintain the current state of the data by updating it as users work with it.</span></span> <span data-ttu-id="7f29f-111">Par exemple, dans le modèle traditionnel de création, lecture, mise à jour et suppression (CRUD) le traitement type des données consiste à lire les données depuis le magasin, y apporter des modifications et mettre à jour l’état actuel des données avec les nouvelles valeurs&mdash;souvent au moyen de transactions qui verrouillent les données.</span><span class="sxs-lookup"><span data-stu-id="7f29f-111">For example, in the traditional create, read, update, and delete (CRUD) model a typical data process is to read data from the store, make some modifications to it, and update the current state of the data with the new values&mdash;often by using transactions that lock the data.</span></span>

<span data-ttu-id="7f29f-112">L’approche CRUD présente certaines limites :</span><span class="sxs-lookup"><span data-stu-id="7f29f-112">The CRUD approach has some limitations:</span></span>

- <span data-ttu-id="7f29f-113">Les systèmes CRUD effectuent les opérations de mise à jour directement sur un magasin de données, ce qui peut ralentir les performances et la réactivité, et limiter l’extensibilité, en raison de la charge de traitement requise.</span><span class="sxs-lookup"><span data-stu-id="7f29f-113">CRUD systems perform update operations directly against a data store, which can slow down performance and responsiveness, and limit scalability, due to the processing overhead it requires.</span></span>

- <span data-ttu-id="7f29f-114">Dans un domaine de collaboration comportant plusieurs utilisateurs simultanés, des conflits de mise à jour des données sont possibles, car les opérations de mise à jour s’effectuent sur un seul élément des données.</span><span class="sxs-lookup"><span data-stu-id="7f29f-114">In a collaborative domain with many concurrent users, data update conflicts are more likely because the update operations take place on a single item of data.</span></span>

- <span data-ttu-id="7f29f-115">À moins qu’il existe un mécanisme d’audit supplémentaire qui enregistre les détails de chaque opération dans un journal séparé, l’historique est perdu.</span><span class="sxs-lookup"><span data-stu-id="7f29f-115">Unless there's an additional auditing mechanism that records the details of each operation in a separate log, history is lost.</span></span>

> <span data-ttu-id="7f29f-116">Pour une meilleure compréhension des limites de l’approche CRUD, consultez [CRUD, Only When You Can Afford It](https://blogs.msdn.microsoft.com/maarten_mullender/2004/07/23/crud-only-when-you-can-afford-it-revisited/) (L’approche CRUD uniquement lorsque vous pouvez vous le permettre).</span><span class="sxs-lookup"><span data-stu-id="7f29f-116">For a deeper understanding of the limits of the CRUD approach see [CRUD, Only When You Can Afford It](https://blogs.msdn.microsoft.com/maarten_mullender/2004/07/23/crud-only-when-you-can-afford-it-revisited/).</span></span>

## <a name="solution"></a><span data-ttu-id="7f29f-117">Solution</span><span class="sxs-lookup"><span data-stu-id="7f29f-117">Solution</span></span>

<span data-ttu-id="7f29f-118">Le modèle d’approvisionnement en événements définit une approche de gestion des opérations sur les données qui est guidée par une séquence d’événements, dont chacun est enregistré dans un magasin d’ajout uniquement.</span><span class="sxs-lookup"><span data-stu-id="7f29f-118">The Event Sourcing pattern defines an approach to handling operations on data that's driven by a sequence of events, each of which is recorded in an append-only store.</span></span> <span data-ttu-id="7f29f-119">Le code applicatif envoie une série d’événements qui décrivent de manière impérative chaque action se produisant sur les données du magasin d’événements, où elles sont conservées.</span><span class="sxs-lookup"><span data-stu-id="7f29f-119">Application code sends a series of events that imperatively describe each action that has occurred on the data to the event store, where they're persisted.</span></span> <span data-ttu-id="7f29f-120">Chaque événement représente un ensemble de modifications des données (comme `AddedItemToOrder`).</span><span class="sxs-lookup"><span data-stu-id="7f29f-120">Each event represents a set of changes to the data (such as `AddedItemToOrder`).</span></span>

<span data-ttu-id="7f29f-121">Les événements sont conservés dans un magasin d’événements qui joue le rôle de système d’enregistrement (la source de données faisant autorité) sur l’état actuel des données.</span><span class="sxs-lookup"><span data-stu-id="7f29f-121">The events are persisted in an event store that acts as the system of record (the authoritative data source) about the current state of the data.</span></span> <span data-ttu-id="7f29f-122">Le magasin d’événements publie généralement ces événements afin que les consommateurs puissent être avertis et les traiter si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="7f29f-122">The event store typically publishes these events so that consumers can be notified and can handle them if needed.</span></span> <span data-ttu-id="7f29f-123">Les consommateurs pourraient, par exemple, initier des tâches qui appliquent les opérations des événements à d’autres systèmes, ou effectuer toute autre action associée nécessaire pour terminer l’opération.</span><span class="sxs-lookup"><span data-stu-id="7f29f-123">Consumers could, for example, initiate tasks that apply the operations in the events to other systems, or perform any other associated action that's required to complete the operation.</span></span> <span data-ttu-id="7f29f-124">Notez que le code applicatif qui génère les événements est découplé des systèmes qui s’abonnent aux événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-124">Notice that the application code that generates the events is decoupled from the systems that subscribe to the events.</span></span>

<span data-ttu-id="7f29f-125">Les événements publiés par le magasin d’événements servent généralement à conserver les vues matérialisées des entités car les actions dans l’application les modifient, ainsi que pour l’intégration avec les systèmes externes.</span><span class="sxs-lookup"><span data-stu-id="7f29f-125">Typical uses of the events published by the event store are to maintain materialized views of entities as actions in the application change them, and for integration with external systems.</span></span> <span data-ttu-id="7f29f-126">Par exemple, un système peut conserver une vue matérialisée de toutes les commandes client utilisée pour remplir des parties de l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7f29f-126">For example, a system can maintain a materialized view of all customer orders that's used to populate parts of the UI.</span></span> <span data-ttu-id="7f29f-127">Lorsque l’application ajoute de nouvelles commandes, ajoute ou supprime des articles de la commande et ajoute des informations d’expédition, les événements qui décrivent ces modifications peuvent être gérés et utilisés pour mettre à jour la [vue matérialisée](materialized-view.md).</span><span class="sxs-lookup"><span data-stu-id="7f29f-127">As the application adds new orders, adds or removes items on the order, and adds shipping information, the events that describe these changes can be handled and used to update the [materialized view](materialized-view.md).</span></span>

<span data-ttu-id="7f29f-128">En outre, les applications peuvent, à tout moment, lire l’historique des événements et l’utiliser pour matérialiser l’état actuel d’une entité en relisant et exploitant tous les événements liés à cette entité.</span><span class="sxs-lookup"><span data-stu-id="7f29f-128">In addition, at any point it's possible for applications to read the history of events, and use it to materialize the current state of an entity by playing back and consuming all the events related to that entity.</span></span> <span data-ttu-id="7f29f-129">Cela peut être effectué à la demande pour matérialiser un objet de domaine lors du traitement d’une requête, ou par le biais d’une tâche planifiée afin que l’état de l’entité puisse être conservé sous la forme d’une vue matérialisée pour prendre en charge la couche de présentation.</span><span class="sxs-lookup"><span data-stu-id="7f29f-129">This can occur on demand to materialize a domain object when handling a request, or through a scheduled task so that the state of the entity can be stored as a materialized view to support the presentation layer.</span></span>

<span data-ttu-id="7f29f-130">La figure montre une vue d’ensemble du modèle, y compris certaines des options d’utilisation du flux d’événements telles que la création d’une vue matérialisée, l’intégration des événements avec des systèmes et applications externes et la relecture des événements pour créer des projections de l’état actuel d’entités spécifiques.</span><span class="sxs-lookup"><span data-stu-id="7f29f-130">The figure shows an overview of the pattern, including some of the options for using the event stream such as creating a materialized view, integrating events with external applications and systems, and replaying events to create projections of the current state of specific entities.</span></span>

![Vue d’ensemble et exemple du modèle d'approvisionnement en événements](./_images/event-sourcing-overview.png)


<span data-ttu-id="7f29f-132">Le modèle d'approvisionnement en événements offre les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="7f29f-132">The Event Sourcing pattern provides the following advantages:</span></span>

- <span data-ttu-id="7f29f-133">Les événements sont immuables et peuvent être conservés au moyen d’une opération d’ajout uniquement.</span><span class="sxs-lookup"><span data-stu-id="7f29f-133">Events are immutable and can be stored using an append-only operation.</span></span> <span data-ttu-id="7f29f-134">L’interface utilisateur, le flux de travail ou le processus qui a déclenché un événement peut continuer, et les tâches qui gèrent les événements peuvent s’exécuter en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="7f29f-134">The user interface, workflow, or process that initiated an event can continue, and tasks that handle the events can run in the background.</span></span> <span data-ttu-id="7f29f-135">Ceci, associé à l’absence de contention lors du traitement des transactions, peut considérablement améliorer les performances et l’évolutivité des applications, surtout pour le niveau de présentation ou l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7f29f-135">This, combined with the fact that there's no contention during the processing of transactions, can vastly improve performance and scalability for applications, especially for the presentation level or user interface.</span></span>

- <span data-ttu-id="7f29f-136">Les événements sont des objets simples qui décrivent certaines actions qui se sont produites, ainsi que toutes les données associées nécessaires pour décrire l’action représentée par l’événement.</span><span class="sxs-lookup"><span data-stu-id="7f29f-136">Events are simple objects that describe some action that occurred, together with any associated data required to describe the action represented by the event.</span></span> <span data-ttu-id="7f29f-137">Les événements ne mettent pas directement à jour un magasin de données.</span><span class="sxs-lookup"><span data-stu-id="7f29f-137">Events don't directly update a data store.</span></span> <span data-ttu-id="7f29f-138">Ils sont simplement enregistrés afin d’être traités au moment opportun.</span><span class="sxs-lookup"><span data-stu-id="7f29f-138">They're simply recorded for handling at the appropriate time.</span></span> <span data-ttu-id="7f29f-139">Cela permet de simplifier la mise en œuvre et la gestion.</span><span class="sxs-lookup"><span data-stu-id="7f29f-139">This can simplify implementation and management.</span></span>

- <span data-ttu-id="7f29f-140">Les événements ont généralement un sens pour les experts de domaine, tandis que l’[anomalie d’impédance objet-relationnel](https://en.wikipedia.org/wiki/Object-relational_impedance_mismatch) peut rendre difficile à comprendre les tables de base de données complexes.</span><span class="sxs-lookup"><span data-stu-id="7f29f-140">Events typically have meaning for a domain expert, whereas [object-relational impedance mismatch](https://en.wikipedia.org/wiki/Object-relational_impedance_mismatch) can make complex database tables hard to understand.</span></span> <span data-ttu-id="7f29f-141">Les tables sont des constructions artificielles qui représentent l’état actuel du système, et non les événements qui se sont produits.</span><span class="sxs-lookup"><span data-stu-id="7f29f-141">Tables are artificial constructs that represent the current state of the system, not the events that occurred.</span></span>

- <span data-ttu-id="7f29f-142">L’approvisionnement en événements peut permettre d’éviter que les mises à jour simultanées ne provoquent des conflits car cela évite d’avoir mettre à jour directement des objets dans le magasin de données.</span><span class="sxs-lookup"><span data-stu-id="7f29f-142">Event sourcing can help prevent concurrent updates from causing conflicts because it avoids the requirement to directly update objects in the data store.</span></span> <span data-ttu-id="7f29f-143">Toutefois, le modèle de domaine doit toujours être conçu de manière à se protéger lui-même contre les requêtes pouvant entraîner un état incohérent.</span><span class="sxs-lookup"><span data-stu-id="7f29f-143">However, the domain model must still be designed to protect itself from requests that might result in an inconsistent state.</span></span>

- <span data-ttu-id="7f29f-144">Le stockage d’ajout uniquement des événements fournit une piste d’audit pouvant être utilisée pour surveiller les actions effectuées sur un magasin de données, régénérer l’état actuel sous forme de vues matérialisées ou de projections en relisant les événements à tout moment, et vous aider à tester et déboguer le système.</span><span class="sxs-lookup"><span data-stu-id="7f29f-144">The append-only storage of events provides an audit trail that can be used to monitor actions taken against a data store, regenerate the current state as materialized views or projections by replaying the events at any time, and assist in testing and debugging the system.</span></span> <span data-ttu-id="7f29f-145">En outre, la nécessité d’utiliser des événements de compensation pour annuler les modifications fournit un historique des modifications qui ont été annulées, ce qui ne serait pas possible si le modèle stockait simplement l’état actuel.</span><span class="sxs-lookup"><span data-stu-id="7f29f-145">In addition, the requirement to use compensating events to cancel changes provides a history of changes that were reversed, which wouldn't be the case if the model simply stored the current state.</span></span> <span data-ttu-id="7f29f-146">La liste des événements peut également être utilisée pour analyser les performances applicatives et détecter les tendances de comportement des utilisateurs, ou pour obtenir d’autres informations utiles.</span><span class="sxs-lookup"><span data-stu-id="7f29f-146">The list of events can also be used to analyze application performance and detect user behavior trends, or to obtain other useful business information.</span></span>

- <span data-ttu-id="7f29f-147">Le magasin d’événements déclenche des événements et les tâches effectuent des opérations en réponse à ces événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-147">The event store raises events, and tasks perform operations in response to those events.</span></span> <span data-ttu-id="7f29f-148">Ce découplage des tâches à partir des événements favorise la flexibilité et l’extensibilité.</span><span class="sxs-lookup"><span data-stu-id="7f29f-148">This decoupling of the tasks from the events provides flexibility and extensibility.</span></span> <span data-ttu-id="7f29f-149">Les tâches connaissent le type d’événement et ses données, mais pas l’opération qui a déclenché l’événement.</span><span class="sxs-lookup"><span data-stu-id="7f29f-149">Tasks know about the type of event and the event data, but not about the operation that triggered the event.</span></span> <span data-ttu-id="7f29f-150">En outre, plusieurs tâches peuvent gérer chaque événement.</span><span class="sxs-lookup"><span data-stu-id="7f29f-150">In addition, multiple tasks can handle each event.</span></span> <span data-ttu-id="7f29f-151">Cela facilite l’intégration avec d’autres services et systèmes qui écoutent uniquement les nouveaux événements déclenchés par le magasin d’événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-151">This enables easy integration with other services and systems that only listen for new events raised by the event store.</span></span> <span data-ttu-id="7f29f-152">Toutefois, les événements d’approvisionnement en événements ont tendance à être à un très bas niveau et il peut être nécessaire de générer à la place des événements d’intégration spécifiques.</span><span class="sxs-lookup"><span data-stu-id="7f29f-152">However, the event sourcing events tend to be very low level, and it might be necessary to generate specific integration events instead.</span></span>

> <span data-ttu-id="7f29f-153">L’approvisionnement en événements est couramment associé au modèle CQRS en effectuant les tâches de gestion des données en réponse aux événements et en matérialisant les vues à partir des événements stockés.</span><span class="sxs-lookup"><span data-stu-id="7f29f-153">Event sourcing is commonly combined with the CQRS pattern by performing the data management tasks in response to the events, and by materializing views from the stored events.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="7f29f-154">Problèmes et considérations</span><span class="sxs-lookup"><span data-stu-id="7f29f-154">Issues and considerations</span></span>

<span data-ttu-id="7f29f-155">Prenez en compte les points suivants lorsque vous choisissez comment implémenter ce modèle :</span><span class="sxs-lookup"><span data-stu-id="7f29f-155">Consider the following points when deciding how to implement this pattern:</span></span>

<span data-ttu-id="7f29f-156">Le système sera finalement cohérent uniquement lors de la création de vues matérialisées ou de la génération de projections de données par la relecture d’événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-156">The system will only be eventually consistent when creating materialized views or generating projections of data by replaying events.</span></span> <span data-ttu-id="7f29f-157">Il existe une certaine latence entre le moment où une application ajoute des événements au magasin d’événements suite au traitement d’une requête, la publication des événements et leur traitement par les consommateurs des événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-157">There's some delay between an application adding events to the event store as the result of handling a request, the events being published, and consumers of the events handling them.</span></span> <span data-ttu-id="7f29f-158">Pendant ce temps, les nouveaux événements qui décrivent les modifications supplémentaires apportées aux entités peuvent être parvenus au magasin d’événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-158">During this period, new events that describe further changes to entities might have arrived at the event store.</span></span>

> [!NOTE]
> <span data-ttu-id="7f29f-159">Pour plus d’informations sur la cohérence éventuelle, consultez [Data Consistency Primer](https://msdn.microsoft.com/library/dn589800.aspx)(Manuel d’introduction à la cohérence des données).</span><span class="sxs-lookup"><span data-stu-id="7f29f-159">See the [Data Consistency Primer](https://msdn.microsoft.com/library/dn589800.aspx) for information about eventual consistency.</span></span>

<span data-ttu-id="7f29f-160">Le magasin d’événements est la source permanente d’informations et les données d’événement ne doivent donc jamais être actualisées.</span><span class="sxs-lookup"><span data-stu-id="7f29f-160">The event store is the permanent source of information, and so the event data should never be updated.</span></span> <span data-ttu-id="7f29f-161">La seule façon de mettre à jour une entité pour annuler une modification est d’ajouter un événement de compensation au magasin d’événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-161">The only way to update an entity to undo a change is to add a compensating event to the event store.</span></span> <span data-ttu-id="7f29f-162">Si le format (plutôt que les données) des événements persistants doit être modifié, lors d’une migration par exemple, il peut être difficile de combiner dans le magasin des événements existants avec la nouvelle version.</span><span class="sxs-lookup"><span data-stu-id="7f29f-162">If the format (rather than the data) of the persisted events needs to change, perhaps during a migration, it can be difficult to combine existing events in the store with the new version.</span></span> <span data-ttu-id="7f29f-163">Il peut être nécessaire d’itérer sur tous les événements en effectuant des modifications afin qu’ils soient compatibles avec le nouveau format, ou d’ajouter de nouveaux événements qui utilisent le nouveau format.</span><span class="sxs-lookup"><span data-stu-id="7f29f-163">It might be necessary to iterate through all the events making changes so they're compliant with the new format, or add new events that use the new format.</span></span> <span data-ttu-id="7f29f-164">Pensez à utiliser une étampe de version sur chaque version du schéma d’événement pour conserver à la fois l’ancien et le nouveau format d’événement.</span><span class="sxs-lookup"><span data-stu-id="7f29f-164">Consider using a version stamp on each version of the event schema to maintain both the old and the new event formats.</span></span>

<span data-ttu-id="7f29f-165">Les applications multithread et plusieurs instances d’applications peuvent stocker des événements dans le magasin d’événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-165">Multi-threaded applications and multiple instances of applications might be storing events in the event store.</span></span> <span data-ttu-id="7f29f-166">La cohérence des événements dans le magasin d’événements est indispensable, tout comme l’ordre des événements qui affectent une entité spécifique (l’ordre dans lequel les modifications s’appliquent à une entité affecte son état actuel).</span><span class="sxs-lookup"><span data-stu-id="7f29f-166">The consistency of events in the event store is vital, as is the order of events that affect a specific entity (the order that changes occur to an entity affects its current state).</span></span> <span data-ttu-id="7f29f-167">L’ajout d’un horodatage à chaque événement peut permettre d’éviter les problèmes.</span><span class="sxs-lookup"><span data-stu-id="7f29f-167">Adding a timestamp to every event can help to avoid issues.</span></span> <span data-ttu-id="7f29f-168">Une autre pratique courante consiste à annoter chaque événement issu d’une requête avec un identificateur incrémentiel.</span><span class="sxs-lookup"><span data-stu-id="7f29f-168">Another common practice is to annotate each event resulting from a request with an incremental identifier.</span></span> <span data-ttu-id="7f29f-169">Si deux personnes tentent d’ajouter des événements à la même entité au même moment, le magasin d’événements peut rejeter un événement correspondant à un identificateur d’entité existant et à un identificateur d’événement.</span><span class="sxs-lookup"><span data-stu-id="7f29f-169">If two actions attempt to add events for the same entity at the same time, the event store can reject an event that matches an existing entity identifier and event identifier.</span></span>

<span data-ttu-id="7f29f-170">Il n’existe aucune approche standard ou mécanismes existants (comme des requêtes SQL) pour lire les événements afin d’obtenir des informations.</span><span class="sxs-lookup"><span data-stu-id="7f29f-170">There's no standard approach, or existing mechanisms such as SQL queries, for reading the events to obtain information.</span></span> <span data-ttu-id="7f29f-171">Un flux d’événements constitue les seules données pouvant être extraites en utilisant comme critère un identificateur d’événement.</span><span class="sxs-lookup"><span data-stu-id="7f29f-171">The only data that can be extracted is a stream of events using an event identifier as the criteria.</span></span> <span data-ttu-id="7f29f-172">L’ID d’événement correspond généralement à des entités individuelles.</span><span class="sxs-lookup"><span data-stu-id="7f29f-172">The event ID typically maps to individual entities.</span></span> <span data-ttu-id="7f29f-173">L’état actuel d’une entité peut être déterminé uniquement en relisant tous les événements s’y rapportant par rapport à l’état d’origine de cette entité.</span><span class="sxs-lookup"><span data-stu-id="7f29f-173">The current state of an entity can be determined only by replaying all of the events that relate to it against the original state of that entity.</span></span>

<span data-ttu-id="7f29f-174">La longueur de chaque flux d’événements a une incidence sur la gestion et la mise à jour du système.</span><span class="sxs-lookup"><span data-stu-id="7f29f-174">The length of each event stream affects managing and updating the system.</span></span> <span data-ttu-id="7f29f-175">Si les flux de données sont volumineux, pensez à créer des instantanés à intervalles réguliers (un nombre spécifié d’événements, par exemple).</span><span class="sxs-lookup"><span data-stu-id="7f29f-175">If the streams are large, consider creating snapshots at specific intervals such as a specified number of events.</span></span> <span data-ttu-id="7f29f-176">L’état actuel de l’entité peut être obtenu à partir de l’instantané et en relisant les événements qui se sont produits après ce moment précis.</span><span class="sxs-lookup"><span data-stu-id="7f29f-176">The current state of the entity can be obtained from the snapshot and by replaying any events that occurred after that point in time.</span></span> <span data-ttu-id="7f29f-177">Pour plus d’informations sur la création d’instantanés de données, consultez [Snapshot on Martin Fowler’s Enterprise Application Architecture website](http://martinfowler.com/eaaDev/Snapshot.html) (Instantané du site Web Enterprise Application Architecture de Martin Fowler) et [Master-Subordinate Snapshot Replication](https://msdn.microsoft.com/library/ff650012.aspx) (Réplication de capture instantanée maître-subordonné).</span><span class="sxs-lookup"><span data-stu-id="7f29f-177">For more information about creating snapshots of data, see [Snapshot on Martin Fowler’s Enterprise Application Architecture website](http://martinfowler.com/eaaDev/Snapshot.html) and [Master-Subordinate Snapshot Replication](https://msdn.microsoft.com/library/ff650012.aspx).</span></span>

<span data-ttu-id="7f29f-178">Même si l’approvisionnement en événements réduit le risque de mises à jour conflictuelles des données, l’application doit rester en mesure de traiter les incohérences résultant de la cohérence éventuelle et de l’absence de transactions.</span><span class="sxs-lookup"><span data-stu-id="7f29f-178">Even though event sourcing minimizes the chance of conflicting updates to the data, the application must still be able to deal with inconsistencies that result from eventual consistency and the lack of transactions.</span></span> <span data-ttu-id="7f29f-179">Par exemple, un événement indiquant une réduction dans l’inventaire du stock peut arriver dans le magasin de données alors même qu’une commande pour cet élément est en train d’être passée. Il est alors nécessaire de procéder au rapprochement des deux opérations, soit en en informant le client ou bien en créant une commande différée.</span><span class="sxs-lookup"><span data-stu-id="7f29f-179">For example, an event that indicates a reduction in stock inventory might arrive in the data store while an order for that item is being placed, resulting in a requirement to reconcile the two operations either by advising the customer or creating a back order.</span></span>

<span data-ttu-id="7f29f-180">La publication de l’événement peut avoir lieu « au moins une fois », c’est pourquoi les consommateurs des événements doivent être idempotents.</span><span class="sxs-lookup"><span data-stu-id="7f29f-180">Event publication might be “at least once,” and so consumers of the events must be idempotent.</span></span> <span data-ttu-id="7f29f-181">Ils ne doivent pas réappliquer la mise à jour décrite dans un événement si celui-ci est traité plusieurs fois.</span><span class="sxs-lookup"><span data-stu-id="7f29f-181">They must not reapply the update described in an event if the event is handled more than once.</span></span> <span data-ttu-id="7f29f-182">Par exemple, si plusieurs instances d’un consommateur conservent un agrégat de la propriété d’une entité, comme le nombre total de commandes passées, seule une instance doit réussir à incrémenter l’agrégat lorsqu’un événement de passage de commande se produit.</span><span class="sxs-lookup"><span data-stu-id="7f29f-182">For example, if multiple instances of a consumer maintain an aggregate an entity's property, such as the total number of orders placed, only one must succeed in incrementing the aggregate when an order placed event occurs.</span></span> <span data-ttu-id="7f29f-183">Même si cela n’est pas une caractéristique majeure des d’événements d’approvisionnement, c’est la décision de mise en œuvre habituelle.</span><span class="sxs-lookup"><span data-stu-id="7f29f-183">While this isn't a key characteristic of event sourcing, it's the usual implementation decision.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="7f29f-184">Quand utiliser ce modèle</span><span class="sxs-lookup"><span data-stu-id="7f29f-184">When to use this pattern</span></span>

<span data-ttu-id="7f29f-185">Utilisez ce modèle dans les situations suivantes :</span><span class="sxs-lookup"><span data-stu-id="7f29f-185">Use this pattern in the following scenarios:</span></span>

- <span data-ttu-id="7f29f-186">Lorsque vous souhaitez capturer l’intention, l’objectif ou le motif des données.</span><span class="sxs-lookup"><span data-stu-id="7f29f-186">When you want to capture intent, purpose, or reason in the data.</span></span> <span data-ttu-id="7f29f-187">Par exemple, les modifications apportées à une entité client peuvent être capturées sous la forme d’une série de types d’événements spécifiques comme _A déménagé_, _Compte clôturé_ ou _Décédé_.</span><span class="sxs-lookup"><span data-stu-id="7f29f-187">For example, changes to a customer entity can be captured as a series of specific event types such as _Moved home_, _Closed account_, or _Deceased_.</span></span>

- <span data-ttu-id="7f29f-188">Lorsqu’il est essentiel de limiter ou de prévenir complètement le risque de mises à jour conflictuelles des données.</span><span class="sxs-lookup"><span data-stu-id="7f29f-188">When it's vital to minimize or completely avoid the occurrence of conflicting updates to data.</span></span>

- <span data-ttu-id="7f29f-189">Lorsque vous souhaitez enregistrer les événements qui se produisent et pouvoir les relire afin de restaurer l’état d’un système, restaurer les modifications ou conserver un historique et journal d’audit.</span><span class="sxs-lookup"><span data-stu-id="7f29f-189">When you want to record events that occur, and be able to replay them to restore the state of a system, roll back changes, or keep a history and audit log.</span></span> <span data-ttu-id="7f29f-190">Par exemple, lorsqu’une tâche implique plusieurs étapes, vous devrez peut-être exécuter certaines actions pour restaurer les mises à jour, puis relire certaines étapes afin de rétablir les données à un état cohérent.</span><span class="sxs-lookup"><span data-stu-id="7f29f-190">For example, when a task involves multiple steps you might need to execute actions to revert updates and then replay some steps to bring the data back into a consistent state.</span></span>

- <span data-ttu-id="7f29f-191">Lorsque l’utilisation des événements est une caractéristique naturelle du fonctionnement de l’application et nécessite peu d’effort supplémentaire de développement ou de mise en œuvre.</span><span class="sxs-lookup"><span data-stu-id="7f29f-191">When using events is a natural feature of the operation of the application, and requires little additional development or implementation effort.</span></span>

- <span data-ttu-id="7f29f-192">Lorsque vous devez découpler le processus de saisie ou de mise à jour des données des tâches nécessaires à l’application de ces actions.</span><span class="sxs-lookup"><span data-stu-id="7f29f-192">When you need to decouple the process of inputting or updating data from the tasks required to apply these actions.</span></span> <span data-ttu-id="7f29f-193">Cela peut être pour améliorer les performances de l’interface utilisateur ou distribuer les événements à d’autres écouteurs qui agissent lorsque les événements se produisent.</span><span class="sxs-lookup"><span data-stu-id="7f29f-193">This might be to improve UI performance, or to distribute events to other listeners that take action when the events occur.</span></span> <span data-ttu-id="7f29f-194">Par exemple, l’intégration d’un système de paie avec un site Web de soumission des dépenses de telle sorte que les événements déclenchés par le magasin d’événements en réponse aux mises à jour des données effectuées sur le site Web soient consommés par le site Web et le système de paie.</span><span class="sxs-lookup"><span data-stu-id="7f29f-194">For example, integrating a payroll system with an expense submission website so that events raised by the event store in response to data updates made in the website are consumed by both the website and the payroll system.</span></span>

- <span data-ttu-id="7f29f-195">Lorsque vous souhaitez disposer de la flexibilité nécessaire pour modifier le format des modèles matérialisés et des données d’entité si les besoins changent, ou&mdash;en cas d’utilisation conjointe avec CQRS&mdash;si vous devez adapter un modèle de lecture ou les vues qui exposent les données.</span><span class="sxs-lookup"><span data-stu-id="7f29f-195">When you want flexibility to be able to change the format of materialized models and entity data if requirements change, or&mdash;when used in conjunction with CQRS&mdash;you need to adapt a read model or the views that expose the data.</span></span>

- <span data-ttu-id="7f29f-196">Lorsqu’il est utilisé conjointement avec CQRS et que la cohérence éventuelle est acceptable lorsqu’un modèle de lecture est mis à jour, ou que l’impact sur les performances de la réalimentation des entités et des données à partir d’un flux d’événements est acceptable.</span><span class="sxs-lookup"><span data-stu-id="7f29f-196">When used in conjunction with CQRS, and eventual consistency is acceptable while a read model is updated, or the performance impact of rehydrating entities and data from an event stream is acceptable.</span></span>

<span data-ttu-id="7f29f-197">Ce modèle peut s’avérer inutile dans les situations suivantes :</span><span class="sxs-lookup"><span data-stu-id="7f29f-197">This pattern might not be useful in the following situations:</span></span>

- <span data-ttu-id="7f29f-198">Domaines simples ou de petite taille, systèmes ayant peu ou aucune logique d’entreprise, ou systèmes non domaine fonctionnant naturellement bien avec les mécanismes de gestion de données CRUD traditionnels.</span><span class="sxs-lookup"><span data-stu-id="7f29f-198">Small or simple domains, systems that have little or no business logic, or nondomain systems that naturally work well with traditional CRUD data management mechanisms.</span></span>

- <span data-ttu-id="7f29f-199">Systèmes où la cohérence et les mises à jour en temps réel des vues des données sont requises.</span><span class="sxs-lookup"><span data-stu-id="7f29f-199">Systems where consistency and real-time updates to the views of the data are required.</span></span>

- <span data-ttu-id="7f29f-200">Systèmes où les pistes d’audit, l’historique et les fonctionnalités de restauration et de relecture des actions ne sont pas requis.</span><span class="sxs-lookup"><span data-stu-id="7f29f-200">Systems where audit trails, history, and capabilities to roll back and replay actions are not required.</span></span>

- <span data-ttu-id="7f29f-201">Systèmes présentant uniquement un très faible nombre d’occurrences de mises à jour conflictuelles des données sous-jacentes.</span><span class="sxs-lookup"><span data-stu-id="7f29f-201">Systems where there's only a very low occurrence of conflicting updates to the underlying data.</span></span> <span data-ttu-id="7f29f-202">Par exemple, les systèmes qui ajoutent surtout des données au lieu de les mettre à jour.</span><span class="sxs-lookup"><span data-stu-id="7f29f-202">For example, systems that predominantly add data rather than updating it.</span></span>

## <a name="example"></a><span data-ttu-id="7f29f-203">Exemples</span><span class="sxs-lookup"><span data-stu-id="7f29f-203">Example</span></span>

<span data-ttu-id="7f29f-204">Un système de gestion de conférences doit suivre le nombre de réservations effectuées afin de pouvoir vérifier s’il reste des places disponibles lorsqu’un participant potentiel tente d’effectuer une réservation.</span><span class="sxs-lookup"><span data-stu-id="7f29f-204">A conference management system needs to track the number of completed bookings for a conference so that it can check whether there are seats still available when a potential attendee tries to make a booking.</span></span> <span data-ttu-id="7f29f-205">Le système peut stocker le nombre total de réservations pour une conférence d’au moins deux façons possibles :</span><span class="sxs-lookup"><span data-stu-id="7f29f-205">The system could store the total number of bookings for a conference in at least two ways:</span></span>

- <span data-ttu-id="7f29f-206">Il peut stocker les informations sur le nombre total de réservations sous la forme d’une entité distincte dans une base de données contenant des informations de réservation.</span><span class="sxs-lookup"><span data-stu-id="7f29f-206">The system could store the information about the total number of bookings as a separate entity in a database that holds booking information.</span></span> <span data-ttu-id="7f29f-207">Lorsque des réservations sont effectuées ou annulées, le système peut incrémenter ou décrémenter ce nombre comme il convient.</span><span class="sxs-lookup"><span data-stu-id="7f29f-207">As bookings are made or canceled, the system could increment or decrement this number as appropriate.</span></span> <span data-ttu-id="7f29f-208">Cette approche est simple en théorie, mais peut entraîner des problèmes d’extensibilité si un grand nombre de participants tente de réserver des places sur une courte période de temps.</span><span class="sxs-lookup"><span data-stu-id="7f29f-208">This approach is simple in theory, but can cause scalability issues if a large number of attendees are attempting to book seats during a short period of time.</span></span> <span data-ttu-id="7f29f-209">Par exemple, dans les derniers jours avant la clôture des réservations.</span><span class="sxs-lookup"><span data-stu-id="7f29f-209">For example, in the last day or so prior to the booking period closing.</span></span>

- <span data-ttu-id="7f29f-210">Le système peut stocker des informations sur les réservations et les annulations sous la forme d’événements conservés dans un magasin d’événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-210">The system could store information about bookings and cancellations as events held in an event store.</span></span> <span data-ttu-id="7f29f-211">Il peut ensuite calculer le nombre de places disponibles en relisant ces événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-211">It could then calculate the number of seats available by replaying these events.</span></span> <span data-ttu-id="7f29f-212">Cette approche peut être plus évolutive en raison de l’immuabilité des événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-212">This approach can be more scalable due to the immutability of events.</span></span> <span data-ttu-id="7f29f-213">Le système doit seulement être en mesure de lire les données du magasin d’événements, ou d’ajouter des données au magasin d’événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-213">The system only needs to be able to read data from the event store, or append data to the event store.</span></span> <span data-ttu-id="7f29f-214">Les informations d’événement sur les réservations et les annulations ne sont jamais modifiées.</span><span class="sxs-lookup"><span data-stu-id="7f29f-214">Event information about bookings and cancellations is never modified.</span></span>

<span data-ttu-id="7f29f-215">Le diagramme suivant illustre la façon dont le sous-système de réservation de places du système de gestion de conférences peut être implémenté grâce à l’approvisionnement en événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-215">The following diagram illustrates how the seat reservation subsystem of the conference management system might be implemented using event sourcing.</span></span>

![Utilisation de l’approvisionnement en événements pour capturer des informations sur les réservations de places dans un système de gestion de conférences](./_images/event-sourcing-bounded-context.png)


<span data-ttu-id="7f29f-217">Voici la séquence d’actions permettant de réserver deux places :</span><span class="sxs-lookup"><span data-stu-id="7f29f-217">The sequence of actions for reserving two seats is as follows:</span></span>

1. <span data-ttu-id="7f29f-218">L’interface utilisateur émet une commande pour réserver des places pour deux participants.</span><span class="sxs-lookup"><span data-stu-id="7f29f-218">The user interface issues a command to reserve seats for two attendees.</span></span> <span data-ttu-id="7f29f-219">La commande est traitée par un gestionnaire de commandes distinct.</span><span class="sxs-lookup"><span data-stu-id="7f29f-219">The command is handled by a separate command handler.</span></span> <span data-ttu-id="7f29f-220">Logique qui est dissociée de l’interface utilisateur et est responsable du traitement des requêtes publiées sous forme de commandes.</span><span class="sxs-lookup"><span data-stu-id="7f29f-220">A piece of logic that is decoupled from the user interface and is responsible for handling requests posted as commands.</span></span>

2. <span data-ttu-id="7f29f-221">Un agrégat contenant des informations sur toutes les réservations pour la conférence est élaboré en interrogeant les événements qui décrivent les réservations et les annulations.</span><span class="sxs-lookup"><span data-stu-id="7f29f-221">An aggregate containing information about all reservations for the conference is constructed by querying the events that describe bookings and cancellations.</span></span> <span data-ttu-id="7f29f-222">Cet agrégat est appelé `SeatAvailability` et est contenu dans un modèle de domaine qui présente les méthodes d’interrogation et de modification des données dans l’agrégat.</span><span class="sxs-lookup"><span data-stu-id="7f29f-222">This aggregate is called `SeatAvailability`, and is contained within a domain model that exposes methods for querying and modifying the data in the aggregate.</span></span>

    > <span data-ttu-id="7f29f-223">Pour optimiser les opérations, vous pouvez envisager d’utiliser des captures instantanées (afin que vous n’avez pas besoin d’interroger et de relire la liste complète des événements pour obtenir l’état actuel de l’agrégat) et de conserver une copie mise en cache de l’agrégat dans la mémoire.</span><span class="sxs-lookup"><span data-stu-id="7f29f-223">Some optimizations to consider are using snapshots (so that you don’t need to query and replay the full list of events to obtain the current state of the aggregate), and maintaining a cached copy of the aggregate in memory.</span></span>

3. <span data-ttu-id="7f29f-224">Le gestionnaire de commandes appelle une méthode exposée par le modèle de domaine pour effectuer les réservations.</span><span class="sxs-lookup"><span data-stu-id="7f29f-224">The command handler invokes a method exposed by the domain model to make the reservations.</span></span>

4. <span data-ttu-id="7f29f-225">L’agrégat `SeatAvailability` enregistre un événement qui contient le nombre de places réservées.</span><span class="sxs-lookup"><span data-stu-id="7f29f-225">The `SeatAvailability` aggregate records an event containing the number of seats that were reserved.</span></span> <span data-ttu-id="7f29f-226">La prochaine fois que l’agrégat appliquera des événements, toutes les réservations seront utilisées pour calculer le nombre de places restantes.</span><span class="sxs-lookup"><span data-stu-id="7f29f-226">The next time the aggregate applies events, all the reservations will be used to compute how many seats remain.</span></span>

5. <span data-ttu-id="7f29f-227">Le système ajoute le nouvel événement à la liste des événements dans le magasin d’événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-227">The system appends the new event to the list of events in the event store.</span></span>

<span data-ttu-id="7f29f-228">Si un utilisateur annule une place, le système suit un processus similaire, sauf que le gestionnaire de commandes émet une commande qui génère un événement d’annulation de place et l’ajoute dans le magasin d’événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-228">If a user cancels a seat, the system follows a similar process except the command handler issues a command that generates a seat cancellation event and appends it to the event store.</span></span>

<span data-ttu-id="7f29f-229">En plus d’accroître l’extensibilité, l’utilisation d’un magasin d’événements fournit également un historique complet, ou piste d’audit, des réservations et annulations d’une conférence.</span><span class="sxs-lookup"><span data-stu-id="7f29f-229">As well as providing more scope for scalability, using an event store also provides a complete history, or audit trail, of the bookings and cancellations for a conference.</span></span> <span data-ttu-id="7f29f-230">Les événements du magasin d’événements constituent l’enregistrement le plus précis.</span><span class="sxs-lookup"><span data-stu-id="7f29f-230">The events in the event store are the accurate record.</span></span> <span data-ttu-id="7f29f-231">Il n’est pas nécessaire de conserver les agrégats d’une autre manière, car le système peut facilement relire les événements et restaurer l’état à n’importe quel instant donné.</span><span class="sxs-lookup"><span data-stu-id="7f29f-231">There is no need to persist aggregates in any other way because the system can easily replay the events and restore the state to any point in time.</span></span>

> <span data-ttu-id="7f29f-232">Vous trouverez plus d’informations sur cet exemple dans [Présentation de l’approvisionnement en événements](https://msdn.microsoft.com/library/jj591559.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f29f-232">You can find more information about this example in [Introducing Event Sourcing](https://msdn.microsoft.com/library/jj591559.aspx).</span></span>

## <a name="related-patterns-and-guidance"></a><span data-ttu-id="7f29f-233">Conseils et modèles connexes</span><span class="sxs-lookup"><span data-stu-id="7f29f-233">Related patterns and guidance</span></span>

<span data-ttu-id="7f29f-234">Les modèles et les conseils suivants peuvent aussi présenter un intérêt quand il s’agit d’implémenter ce modèle :</span><span class="sxs-lookup"><span data-stu-id="7f29f-234">The following patterns and guidance might also be relevant when implementing this pattern:</span></span>

- <span data-ttu-id="7f29f-235">[Modèle de séparation des responsabilités en matière de commande et de requête (CQRS)](cqrs.md).</span><span class="sxs-lookup"><span data-stu-id="7f29f-235">[Command and Query Responsibility Segregation (CQRS) Pattern](cqrs.md).</span></span> <span data-ttu-id="7f29f-236">Le magasin d’écriture qui fournit la source permanente d’informations relatives à une implémentation CQRS est souvent basé sur une implémentation du modèle d’approvisionnement en événements.</span><span class="sxs-lookup"><span data-stu-id="7f29f-236">The write store that provides the permanent source of information for a CQRS implementation is often based on an implementation of the Event Sourcing pattern.</span></span> <span data-ttu-id="7f29f-237">Décrit comment séparer les opérations qui lisent les données dans une application des opérations qui mettent à jour les données en utilisant des interfaces distinctes.</span><span class="sxs-lookup"><span data-stu-id="7f29f-237">Describes how to segregate the operations that read data in an application from the operations that update data by using separate interfaces.</span></span>

- <span data-ttu-id="7f29f-238">[Modèle de vue matérialisée](materialized-view.md).</span><span class="sxs-lookup"><span data-stu-id="7f29f-238">[Materialized View Pattern](materialized-view.md).</span></span> <span data-ttu-id="7f29f-239">Le magasin de données utilisé dans un système basé sur l’approvisionnement en événements n’est généralement idéal pour assurer une interrogation efficace.</span><span class="sxs-lookup"><span data-stu-id="7f29f-239">The data store used in a system based on event sourcing is typically not well suited to efficient querying.</span></span> <span data-ttu-id="7f29f-240">L’approche courante consiste à générer des vues préremplies des données à intervalles réguliers, ou lorsque les données changent.</span><span class="sxs-lookup"><span data-stu-id="7f29f-240">Instead, a common approach is to generate prepopulated views of the data at regular intervals, or when the data changes.</span></span> <span data-ttu-id="7f29f-241">Montre comment procéder.</span><span class="sxs-lookup"><span data-stu-id="7f29f-241">Shows how this can be done.</span></span>

- <span data-ttu-id="7f29f-242">[Modèle de transaction de compensation](compensating-transaction.md).</span><span class="sxs-lookup"><span data-stu-id="7f29f-242">[Compensating Transaction Pattern](compensating-transaction.md).</span></span> <span data-ttu-id="7f29f-243">Les données existantes dans un magasin d’approvisionnement en événements ne sont pas mises à jour. À la place, de nouvelles entrées sont ajoutées pour assurer la transition de l’état des entités vers les nouvelles valeurs.</span><span class="sxs-lookup"><span data-stu-id="7f29f-243">The existing data in an event sourcing store is not updated, instead new entries are added that transition the state of entities to the new values.</span></span> <span data-ttu-id="7f29f-244">Pour annuler une modification, on utilise les entrées de compensation car il n’est pas possible de simplement annuler la modification précédente.</span><span class="sxs-lookup"><span data-stu-id="7f29f-244">To reverse a change, compensating entries are used because it isn't possible to simply reverse the previous change.</span></span> <span data-ttu-id="7f29f-245">Décrit comment annuler le travail qui a été effectué par une opération précédente.</span><span class="sxs-lookup"><span data-stu-id="7f29f-245">Describes how to undo the work that was performed by a previous operation.</span></span>

- <span data-ttu-id="7f29f-246">[Data Consistency Primer](https://msdn.microsoft.com/library/dn589800.aspx) (Manuel d’introduction à la cohérence des données).</span><span class="sxs-lookup"><span data-stu-id="7f29f-246">[Data Consistency Primer](https://msdn.microsoft.com/library/dn589800.aspx).</span></span> <span data-ttu-id="7f29f-247">En cas d’utilisation de l’approvisionnement en événements avec un magasin de lecture distinct ou des vues matérialisées, les données de lecture ne sont pas immédiatement cohérentes, mais uniquement cohérentes.</span><span class="sxs-lookup"><span data-stu-id="7f29f-247">When using event sourcing with a separate read store or materialized views, the read data won't be immediately consistent, instead it'll be only eventually consistent.</span></span> <span data-ttu-id="7f29f-248">Résume les problèmes se rapportant à la conservation de la cohérence des données distribuées.</span><span class="sxs-lookup"><span data-stu-id="7f29f-248">Summarizes the issues surrounding maintaining consistency over distributed data.</span></span>

- <span data-ttu-id="7f29f-249">[Conseils sur le partitionnement des données](https://msdn.microsoft.com/library/dn589795.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f29f-249">[Data Partitioning Guidance](https://msdn.microsoft.com/library/dn589795.aspx).</span></span> <span data-ttu-id="7f29f-250">Les données sont souvent partitionnées lorsque vous utilisez l’approvisionnement en événements pour améliorer l’extensibilité, réduire la contention et optimiser les performances.</span><span class="sxs-lookup"><span data-stu-id="7f29f-250">Data is often partitioned when using event sourcing to improve scalability, reduce contention, and optimize performance.</span></span> <span data-ttu-id="7f29f-251">Décrit comment diviser les données en partitions distinctes, et les problèmes pouvant survenir.</span><span class="sxs-lookup"><span data-stu-id="7f29f-251">Describes how to divide data into discrete partitions, and the issues that can arise.</span></span>

- <span data-ttu-id="7f29f-252">Billet de Greg Young [Pourquoi utiliser l’approvisionnement en événements ?](http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/).</span><span class="sxs-lookup"><span data-stu-id="7f29f-252">Greg Young’s post [Why use Event Sourcing?](http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/).</span></span>
